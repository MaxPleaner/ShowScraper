import{S as dx,i as fx,s as px,k as jt,a as ar,q as hr,l as Ct,m as Bt,c as lr,r as dr,h as vt,n as _t,b as Dr,G as Je,J as Rr,H as ao,K as Zl,L as D0,o as mx,M as Vs,N as Wr,u as ka,e as Li}from"../chunks/index.7346a090.js";var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ud={},yx={get exports(){return Ud},set exports(i){Ud=i}};/*!
 * jQuery JavaScript Library v3.6.3
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2022-12-20T21:28Z
 */(function(i){(function(t,n){i.exports=t.document?n(t,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:ca,function(t,n){var r=[],s=Object.getPrototypeOf,a=r.slice,o=r.flat?function(T){return r.flat.call(T)}:function(T){return r.concat.apply([],T)},u=r.push,l=r.indexOf,c={},p=c.toString,m=c.hasOwnProperty,h=m.toString,f=h.call(Object),d={},g=function(A){return typeof A=="function"&&typeof A.nodeType!="number"&&typeof A.item!="function"},y=function(A){return A!=null&&A===A.window},b=t.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function j(T,A,N){N=N||b;var V,ee,ne=N.createElement("script");if(ne.text=T,A)for(V in x)ee=A[V]||A.getAttribute&&A.getAttribute(V),ee&&ne.setAttribute(V,ee);N.head.appendChild(ne).parentNode.removeChild(ne)}function S(T){return T==null?T+"":typeof T=="object"||typeof T=="function"?c[p.call(T)]||"object":typeof T}var w="3.6.3",_=function(T,A){return new _.fn.init(T,A)};_.fn=_.prototype={jquery:w,constructor:_,length:0,toArray:function(){return a.call(this)},get:function(T){return T==null?a.call(this):T<0?this[T+this.length]:this[T]},pushStack:function(T){var A=_.merge(this.constructor(),T);return A.prevObject=this,A},each:function(T){return _.each(this,T)},map:function(T){return this.pushStack(_.map(this,function(A,N){return T.call(A,N,A)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,function(T,A){return(A+1)%2}))},odd:function(){return this.pushStack(_.grep(this,function(T,A){return A%2}))},eq:function(T){var A=this.length,N=+T+(T<0?A:0);return this.pushStack(N>=0&&N<A?[this[N]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:r.sort,splice:r.splice},_.extend=_.fn.extend=function(){var T,A,N,V,ee,ne,ue=arguments[0]||{},Ae=1,Ce=arguments.length,ze=!1;for(typeof ue=="boolean"&&(ze=ue,ue=arguments[Ae]||{},Ae++),typeof ue!="object"&&!g(ue)&&(ue={}),Ae===Ce&&(ue=this,Ae--);Ae<Ce;Ae++)if((T=arguments[Ae])!=null)for(A in T)V=T[A],!(A==="__proto__"||ue===V)&&(ze&&V&&(_.isPlainObject(V)||(ee=Array.isArray(V)))?(N=ue[A],ee&&!Array.isArray(N)?ne=[]:!ee&&!_.isPlainObject(N)?ne={}:ne=N,ee=!1,ue[A]=_.extend(ze,ne,V)):V!==void 0&&(ue[A]=V));return ue},_.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(T){throw new Error(T)},noop:function(){},isPlainObject:function(T){var A,N;return!T||p.call(T)!=="[object Object]"?!1:(A=s(T),A?(N=m.call(A,"constructor")&&A.constructor,typeof N=="function"&&h.call(N)===f):!0)},isEmptyObject:function(T){var A;for(A in T)return!1;return!0},globalEval:function(T,A,N){j(T,{nonce:A&&A.nonce},N)},each:function(T,A){var N,V=0;if(M(T))for(N=T.length;V<N&&A.call(T[V],V,T[V])!==!1;V++);else for(V in T)if(A.call(T[V],V,T[V])===!1)break;return T},makeArray:function(T,A){var N=A||[];return T!=null&&(M(Object(T))?_.merge(N,typeof T=="string"?[T]:T):u.call(N,T)),N},inArray:function(T,A,N){return A==null?-1:l.call(A,T,N)},merge:function(T,A){for(var N=+A.length,V=0,ee=T.length;V<N;V++)T[ee++]=A[V];return T.length=ee,T},grep:function(T,A,N){for(var V,ee=[],ne=0,ue=T.length,Ae=!N;ne<ue;ne++)V=!A(T[ne],ne),V!==Ae&&ee.push(T[ne]);return ee},map:function(T,A,N){var V,ee,ne=0,ue=[];if(M(T))for(V=T.length;ne<V;ne++)ee=A(T[ne],ne,N),ee!=null&&ue.push(ee);else for(ne in T)ee=A(T[ne],ne,N),ee!=null&&ue.push(ee);return o(ue)},guid:1,support:d}),typeof Symbol=="function"&&(_.fn[Symbol.iterator]=r[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(T,A){c["[object "+A+"]"]=A.toLowerCase()});function M(T){var A=!!T&&"length"in T&&T.length,N=S(T);return g(T)||y(T)?!1:N==="array"||A===0||typeof A=="number"&&A>0&&A-1 in T}var I=function(T){var A,N,V,ee,ne,ue,Ae,Ce,ze,Qe,mt,Ke,it,Lt,Yt,ot,bn,fn,Sn,Pr="sizzle"+1*new Date,sr=T.document,mr=0,xr=0,rn=_n(),Fn=_n(),na=_n(),ri=_n(),bs=function(he,ke){return he===ke&&(mt=!0),0},_s={}.hasOwnProperty,qn=[],Ki=qn.pop,ni=qn.push,Nr=qn.push,ia=qn.slice,v=function(he,ke){for(var De=0,lt=he.length;De<lt;De++)if(he[De]===ke)return De;return-1},C="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",k="[\\x20\\t\\r\\n\\f]",E="(?:\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L="\\["+k+"*("+E+")(?:"+k+"*([*^$|!~]?=)"+k+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+E+"))|)"+k+"*\\]",G=":("+E+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+L+")*)|.*)\\)|)",H=new RegExp(k+"+","g"),se=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g"),pe=new RegExp("^"+k+"*,"+k+"*"),de=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),Oe=new RegExp(k+"|>"),He=new RegExp(G),Ne=new RegExp("^"+E+"$"),we={ID:new RegExp("^#("+E+")"),CLASS:new RegExp("^\\.("+E+")"),TAG:new RegExp("^("+E+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+G),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+C+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},at=/HTML$/i,Ye=/^(?:input|select|textarea|button)$/i,rt=/^h\d$/i,We=/^[^{]+\{\s*\[native \w/,Xe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Nt=/[+~]/,$t=new RegExp("\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\([^\\r\\n\\f])","g"),Pt=function(he,ke){var De="0x"+he.slice(1)-65536;return ke||(De<0?String.fromCharCode(De+65536):String.fromCharCode(De>>10|55296,De&1023|56320))},Ft=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,pr=function(he,ke){return ke?he==="\0"?"ï¿½":he.slice(0,-1)+"\\"+he.charCodeAt(he.length-1).toString(16)+" ":"\\"+he},Br=function(){Ke()},ln=Fi(function(he){return he.disabled===!0&&he.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Nr.apply(qn=ia.call(sr.childNodes),sr.childNodes),qn[sr.childNodes.length].nodeType}catch{Nr={apply:qn.length?function(ke,De){ni.apply(ke,ia.call(De))}:function(ke,De){for(var lt=ke.length,qe=0;ke[lt++]=De[qe++];);ke.length=lt-1}}}function rr(he,ke,De,lt){var qe,ct,gt,Et,Ot,Kt,Xt,Zt=ke&&ke.ownerDocument,vr=ke?ke.nodeType:9;if(De=De||[],typeof he!="string"||!he||vr!==1&&vr!==9&&vr!==11)return De;if(!lt&&(Ke(ke),ke=ke||it,Yt)){if(vr!==11&&(Ot=Xe.exec(he)))if(qe=Ot[1]){if(vr===9)if(gt=ke.getElementById(qe)){if(gt.id===qe)return De.push(gt),De}else return De;else if(Zt&&(gt=Zt.getElementById(qe))&&Sn(ke,gt)&&gt.id===qe)return De.push(gt),De}else{if(Ot[2])return Nr.apply(De,ke.getElementsByTagName(he)),De;if((qe=Ot[3])&&N.getElementsByClassName&&ke.getElementsByClassName)return Nr.apply(De,ke.getElementsByClassName(qe)),De}if(N.qsa&&!ri[he+" "]&&(!ot||!ot.test(he))&&(vr!==1||ke.nodeName.toLowerCase()!=="object")){if(Xt=he,Zt=ke,vr===1&&(Oe.test(he)||de.test(he))){for(Zt=Nt.test(he)&&Fr(ke.parentNode)||ke,(Zt!==ke||!N.scope)&&((Et=ke.getAttribute("id"))?Et=Et.replace(Ft,pr):ke.setAttribute("id",Et=Pr)),Kt=ue(he),ct=Kt.length;ct--;)Kt[ct]=(Et?"#"+Et:":scope")+" "+Ji(Kt[ct]);Xt=Kt.join(",")}try{if(N.cssSupportsSelector&&!CSS.supports("selector(:is("+Xt+"))"))throw new Error;return Nr.apply(De,Zt.querySelectorAll(Xt)),De}catch{ri(he,!0)}finally{Et===Pr&&ke.removeAttribute("id")}}}return Ce(he.replace(se,"$1"),ke,De,lt)}function _n(){var he=[];function ke(De,lt){return he.push(De+" ")>V.cacheLength&&delete ke[he.shift()],ke[De+" "]=lt}return ke}function Gr(he){return he[Pr]=!0,he}function un(he){var ke=it.createElement("fieldset");try{return!!he(ke)}catch{return!1}finally{ke.parentNode&&ke.parentNode.removeChild(ke),ke=null}}function Mr(he,ke){for(var De=he.split("|"),lt=De.length;lt--;)V.attrHandle[De[lt]]=ke}function Hr(he,ke){var De=ke&&he,lt=De&&he.nodeType===1&&ke.nodeType===1&&he.sourceIndex-ke.sourceIndex;if(lt)return lt;if(De){for(;De=De.nextSibling;)if(De===ke)return-1}return he?1:-1}function Ar(he){return function(ke){var De=ke.nodeName.toLowerCase();return De==="input"&&ke.type===he}}function Pn(he){return function(ke){var De=ke.nodeName.toLowerCase();return(De==="input"||De==="button")&&ke.type===he}}function Jr(he){return function(ke){return"form"in ke?ke.parentNode&&ke.disabled===!1?"label"in ke?"label"in ke.parentNode?ke.parentNode.disabled===he:ke.disabled===he:ke.isDisabled===he||ke.isDisabled!==!he&&ln(ke)===he:ke.disabled===he:"label"in ke?ke.disabled===he:!1}}function nn(he){return Gr(function(ke){return ke=+ke,Gr(function(De,lt){for(var qe,ct=he([],De.length,ke),gt=ct.length;gt--;)De[qe=ct[gt]]&&(De[qe]=!(lt[qe]=De[qe]))})})}function Fr(he){return he&&typeof he.getElementsByTagName<"u"&&he}N=rr.support={},ne=rr.isXML=function(he){var ke=he&&he.namespaceURI,De=he&&(he.ownerDocument||he).documentElement;return!at.test(ke||De&&De.nodeName||"HTML")},Ke=rr.setDocument=function(he){var ke,De,lt=he?he.ownerDocument||he:sr;return lt==it||lt.nodeType!==9||!lt.documentElement||(it=lt,Lt=it.documentElement,Yt=!ne(it),sr!=it&&(De=it.defaultView)&&De.top!==De&&(De.addEventListener?De.addEventListener("unload",Br,!1):De.attachEvent&&De.attachEvent("onunload",Br)),N.scope=un(function(qe){return Lt.appendChild(qe).appendChild(it.createElement("div")),typeof qe.querySelectorAll<"u"&&!qe.querySelectorAll(":scope fieldset div").length}),N.cssSupportsSelector=un(function(){return CSS.supports("selector(*)")&&it.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),N.attributes=un(function(qe){return qe.className="i",!qe.getAttribute("className")}),N.getElementsByTagName=un(function(qe){return qe.appendChild(it.createComment("")),!qe.getElementsByTagName("*").length}),N.getElementsByClassName=We.test(it.getElementsByClassName),N.getById=un(function(qe){return Lt.appendChild(qe).id=Pr,!it.getElementsByName||!it.getElementsByName(Pr).length}),N.getById?(V.filter.ID=function(qe){var ct=qe.replace($t,Pt);return function(gt){return gt.getAttribute("id")===ct}},V.find.ID=function(qe,ct){if(typeof ct.getElementById<"u"&&Yt){var gt=ct.getElementById(qe);return gt?[gt]:[]}}):(V.filter.ID=function(qe){var ct=qe.replace($t,Pt);return function(gt){var Et=typeof gt.getAttributeNode<"u"&&gt.getAttributeNode("id");return Et&&Et.value===ct}},V.find.ID=function(qe,ct){if(typeof ct.getElementById<"u"&&Yt){var gt,Et,Ot,Kt=ct.getElementById(qe);if(Kt){if(gt=Kt.getAttributeNode("id"),gt&&gt.value===qe)return[Kt];for(Ot=ct.getElementsByName(qe),Et=0;Kt=Ot[Et++];)if(gt=Kt.getAttributeNode("id"),gt&&gt.value===qe)return[Kt]}return[]}}),V.find.TAG=N.getElementsByTagName?function(qe,ct){if(typeof ct.getElementsByTagName<"u")return ct.getElementsByTagName(qe);if(N.qsa)return ct.querySelectorAll(qe)}:function(qe,ct){var gt,Et=[],Ot=0,Kt=ct.getElementsByTagName(qe);if(qe==="*"){for(;gt=Kt[Ot++];)gt.nodeType===1&&Et.push(gt);return Et}return Kt},V.find.CLASS=N.getElementsByClassName&&function(qe,ct){if(typeof ct.getElementsByClassName<"u"&&Yt)return ct.getElementsByClassName(qe)},bn=[],ot=[],(N.qsa=We.test(it.querySelectorAll))&&(un(function(qe){var ct;Lt.appendChild(qe).innerHTML="<a id='"+Pr+"'></a><select id='"+Pr+"-\r\\' msallowcapture=''><option selected=''></option></select>",qe.querySelectorAll("[msallowcapture^='']").length&&ot.push("[*^$]="+k+`*(?:''|"")`),qe.querySelectorAll("[selected]").length||ot.push("\\["+k+"*(?:value|"+C+")"),qe.querySelectorAll("[id~="+Pr+"-]").length||ot.push("~="),ct=it.createElement("input"),ct.setAttribute("name",""),qe.appendChild(ct),qe.querySelectorAll("[name='']").length||ot.push("\\["+k+"*name"+k+"*="+k+`*(?:''|"")`),qe.querySelectorAll(":checked").length||ot.push(":checked"),qe.querySelectorAll("a#"+Pr+"+*").length||ot.push(".#.+[+~]"),qe.querySelectorAll("\\\f"),ot.push("[\\r\\n\\f]")}),un(function(qe){qe.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ct=it.createElement("input");ct.setAttribute("type","hidden"),qe.appendChild(ct).setAttribute("name","D"),qe.querySelectorAll("[name=d]").length&&ot.push("name"+k+"*[*^$|!~]?="),qe.querySelectorAll(":enabled").length!==2&&ot.push(":enabled",":disabled"),Lt.appendChild(qe).disabled=!0,qe.querySelectorAll(":disabled").length!==2&&ot.push(":enabled",":disabled"),qe.querySelectorAll("*,:x"),ot.push(",.*:")})),(N.matchesSelector=We.test(fn=Lt.matches||Lt.webkitMatchesSelector||Lt.mozMatchesSelector||Lt.oMatchesSelector||Lt.msMatchesSelector))&&un(function(qe){N.disconnectedMatch=fn.call(qe,"*"),fn.call(qe,"[s!='']:x"),bn.push("!=",G)}),N.cssSupportsSelector||ot.push(":has"),ot=ot.length&&new RegExp(ot.join("|")),bn=bn.length&&new RegExp(bn.join("|")),ke=We.test(Lt.compareDocumentPosition),Sn=ke||We.test(Lt.contains)?function(qe,ct){var gt=qe.nodeType===9&&qe.documentElement||qe,Et=ct&&ct.parentNode;return qe===Et||!!(Et&&Et.nodeType===1&&(gt.contains?gt.contains(Et):qe.compareDocumentPosition&&qe.compareDocumentPosition(Et)&16))}:function(qe,ct){if(ct){for(;ct=ct.parentNode;)if(ct===qe)return!0}return!1},bs=ke?function(qe,ct){if(qe===ct)return mt=!0,0;var gt=!qe.compareDocumentPosition-!ct.compareDocumentPosition;return gt||(gt=(qe.ownerDocument||qe)==(ct.ownerDocument||ct)?qe.compareDocumentPosition(ct):1,gt&1||!N.sortDetached&&ct.compareDocumentPosition(qe)===gt?qe==it||qe.ownerDocument==sr&&Sn(sr,qe)?-1:ct==it||ct.ownerDocument==sr&&Sn(sr,ct)?1:Qe?v(Qe,qe)-v(Qe,ct):0:gt&4?-1:1)}:function(qe,ct){if(qe===ct)return mt=!0,0;var gt,Et=0,Ot=qe.parentNode,Kt=ct.parentNode,Xt=[qe],Zt=[ct];if(!Ot||!Kt)return qe==it?-1:ct==it?1:Ot?-1:Kt?1:Qe?v(Qe,qe)-v(Qe,ct):0;if(Ot===Kt)return Hr(qe,ct);for(gt=qe;gt=gt.parentNode;)Xt.unshift(gt);for(gt=ct;gt=gt.parentNode;)Zt.unshift(gt);for(;Xt[Et]===Zt[Et];)Et++;return Et?Hr(Xt[Et],Zt[Et]):Xt[Et]==sr?-1:Zt[Et]==sr?1:0}),it},rr.matches=function(he,ke){return rr(he,null,null,ke)},rr.matchesSelector=function(he,ke){if(Ke(he),N.matchesSelector&&Yt&&!ri[ke+" "]&&(!bn||!bn.test(ke))&&(!ot||!ot.test(ke)))try{var De=fn.call(he,ke);if(De||N.disconnectedMatch||he.document&&he.document.nodeType!==11)return De}catch{ri(ke,!0)}return rr(ke,it,null,[he]).length>0},rr.contains=function(he,ke){return(he.ownerDocument||he)!=it&&Ke(he),Sn(he,ke)},rr.attr=function(he,ke){(he.ownerDocument||he)!=it&&Ke(he);var De=V.attrHandle[ke.toLowerCase()],lt=De&&_s.call(V.attrHandle,ke.toLowerCase())?De(he,ke,!Yt):void 0;return lt!==void 0?lt:N.attributes||!Yt?he.getAttribute(ke):(lt=he.getAttributeNode(ke))&&lt.specified?lt.value:null},rr.escape=function(he){return(he+"").replace(Ft,pr)},rr.error=function(he){throw new Error("Syntax error, unrecognized expression: "+he)},rr.uniqueSort=function(he){var ke,De=[],lt=0,qe=0;if(mt=!N.detectDuplicates,Qe=!N.sortStable&&he.slice(0),he.sort(bs),mt){for(;ke=he[qe++];)ke===he[qe]&&(lt=De.push(qe));for(;lt--;)he.splice(De[lt],1)}return Qe=null,he},ee=rr.getText=function(he){var ke,De="",lt=0,qe=he.nodeType;if(qe){if(qe===1||qe===9||qe===11){if(typeof he.textContent=="string")return he.textContent;for(he=he.firstChild;he;he=he.nextSibling)De+=ee(he)}else if(qe===3||qe===4)return he.nodeValue}else for(;ke=he[lt++];)De+=ee(ke);return De},V=rr.selectors={cacheLength:50,createPseudo:Gr,match:we,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(he){return he[1]=he[1].replace($t,Pt),he[3]=(he[3]||he[4]||he[5]||"").replace($t,Pt),he[2]==="~="&&(he[3]=" "+he[3]+" "),he.slice(0,4)},CHILD:function(he){return he[1]=he[1].toLowerCase(),he[1].slice(0,3)==="nth"?(he[3]||rr.error(he[0]),he[4]=+(he[4]?he[5]+(he[6]||1):2*(he[3]==="even"||he[3]==="odd")),he[5]=+(he[7]+he[8]||he[3]==="odd")):he[3]&&rr.error(he[0]),he},PSEUDO:function(he){var ke,De=!he[6]&&he[2];return we.CHILD.test(he[0])?null:(he[3]?he[2]=he[4]||he[5]||"":De&&He.test(De)&&(ke=ue(De,!0))&&(ke=De.indexOf(")",De.length-ke)-De.length)&&(he[0]=he[0].slice(0,ke),he[2]=De.slice(0,ke)),he.slice(0,3))}},filter:{TAG:function(he){var ke=he.replace($t,Pt).toLowerCase();return he==="*"?function(){return!0}:function(De){return De.nodeName&&De.nodeName.toLowerCase()===ke}},CLASS:function(he){var ke=rn[he+" "];return ke||(ke=new RegExp("(^|"+k+")"+he+"("+k+"|$)"))&&rn(he,function(De){return ke.test(typeof De.className=="string"&&De.className||typeof De.getAttribute<"u"&&De.getAttribute("class")||"")})},ATTR:function(he,ke,De){return function(lt){var qe=rr.attr(lt,he);return qe==null?ke==="!=":ke?(qe+="",ke==="="?qe===De:ke==="!="?qe!==De:ke==="^="?De&&qe.indexOf(De)===0:ke==="*="?De&&qe.indexOf(De)>-1:ke==="$="?De&&qe.slice(-De.length)===De:ke==="~="?(" "+qe.replace(H," ")+" ").indexOf(De)>-1:ke==="|="?qe===De||qe.slice(0,De.length+1)===De+"-":!1):!0}},CHILD:function(he,ke,De,lt,qe){var ct=he.slice(0,3)!=="nth",gt=he.slice(-4)!=="last",Et=ke==="of-type";return lt===1&&qe===0?function(Ot){return!!Ot.parentNode}:function(Ot,Kt,Xt){var Zt,vr,qr,Jt,kn,$n,xi=ct!==gt?"nextSibling":"previousSibling",cn=Ot.parentNode,rl=Et&&Ot.nodeName.toLowerCase(),nl=!Xt&&!Et,Si=!1;if(cn){if(ct){for(;xi;){for(Jt=Ot;Jt=Jt[xi];)if(Et?Jt.nodeName.toLowerCase()===rl:Jt.nodeType===1)return!1;$n=xi=he==="only"&&!$n&&"nextSibling"}return!0}if($n=[gt?cn.firstChild:cn.lastChild],gt&&nl){for(Jt=cn,qr=Jt[Pr]||(Jt[Pr]={}),vr=qr[Jt.uniqueID]||(qr[Jt.uniqueID]={}),Zt=vr[he]||[],kn=Zt[0]===mr&&Zt[1],Si=kn&&Zt[2],Jt=kn&&cn.childNodes[kn];Jt=++kn&&Jt&&Jt[xi]||(Si=kn=0)||$n.pop();)if(Jt.nodeType===1&&++Si&&Jt===Ot){vr[he]=[mr,kn,Si];break}}else if(nl&&(Jt=Ot,qr=Jt[Pr]||(Jt[Pr]={}),vr=qr[Jt.uniqueID]||(qr[Jt.uniqueID]={}),Zt=vr[he]||[],kn=Zt[0]===mr&&Zt[1],Si=kn),Si===!1)for(;(Jt=++kn&&Jt&&Jt[xi]||(Si=kn=0)||$n.pop())&&!((Et?Jt.nodeName.toLowerCase()===rl:Jt.nodeType===1)&&++Si&&(nl&&(qr=Jt[Pr]||(Jt[Pr]={}),vr=qr[Jt.uniqueID]||(qr[Jt.uniqueID]={}),vr[he]=[mr,Si]),Jt===Ot)););return Si-=qe,Si===lt||Si%lt===0&&Si/lt>=0}}},PSEUDO:function(he,ke){var De,lt=V.pseudos[he]||V.setFilters[he.toLowerCase()]||rr.error("unsupported pseudo: "+he);return lt[Pr]?lt(ke):lt.length>1?(De=[he,he,"",ke],V.setFilters.hasOwnProperty(he.toLowerCase())?Gr(function(qe,ct){for(var gt,Et=lt(qe,ke),Ot=Et.length;Ot--;)gt=v(qe,Et[Ot]),qe[gt]=!(ct[gt]=Et[Ot])}):function(qe){return lt(qe,0,De)}):lt}},pseudos:{not:Gr(function(he){var ke=[],De=[],lt=Ae(he.replace(se,"$1"));return lt[Pr]?Gr(function(qe,ct,gt,Et){for(var Ot,Kt=lt(qe,null,Et,[]),Xt=qe.length;Xt--;)(Ot=Kt[Xt])&&(qe[Xt]=!(ct[Xt]=Ot))}):function(qe,ct,gt){return ke[0]=qe,lt(ke,null,gt,De),ke[0]=null,!De.pop()}}),has:Gr(function(he){return function(ke){return rr(he,ke).length>0}}),contains:Gr(function(he){return he=he.replace($t,Pt),function(ke){return(ke.textContent||ee(ke)).indexOf(he)>-1}}),lang:Gr(function(he){return Ne.test(he||"")||rr.error("unsupported lang: "+he),he=he.replace($t,Pt).toLowerCase(),function(ke){var De;do if(De=Yt?ke.lang:ke.getAttribute("xml:lang")||ke.getAttribute("lang"))return De=De.toLowerCase(),De===he||De.indexOf(he+"-")===0;while((ke=ke.parentNode)&&ke.nodeType===1);return!1}}),target:function(he){var ke=T.location&&T.location.hash;return ke&&ke.slice(1)===he.id},root:function(he){return he===Lt},focus:function(he){return he===it.activeElement&&(!it.hasFocus||it.hasFocus())&&!!(he.type||he.href||~he.tabIndex)},enabled:Jr(!1),disabled:Jr(!0),checked:function(he){var ke=he.nodeName.toLowerCase();return ke==="input"&&!!he.checked||ke==="option"&&!!he.selected},selected:function(he){return he.parentNode&&he.parentNode.selectedIndex,he.selected===!0},empty:function(he){for(he=he.firstChild;he;he=he.nextSibling)if(he.nodeType<6)return!1;return!0},parent:function(he){return!V.pseudos.empty(he)},header:function(he){return rt.test(he.nodeName)},input:function(he){return Ye.test(he.nodeName)},button:function(he){var ke=he.nodeName.toLowerCase();return ke==="input"&&he.type==="button"||ke==="button"},text:function(he){var ke;return he.nodeName.toLowerCase()==="input"&&he.type==="text"&&((ke=he.getAttribute("type"))==null||ke.toLowerCase()==="text")},first:nn(function(){return[0]}),last:nn(function(he,ke){return[ke-1]}),eq:nn(function(he,ke,De){return[De<0?De+ke:De]}),even:nn(function(he,ke){for(var De=0;De<ke;De+=2)he.push(De);return he}),odd:nn(function(he,ke){for(var De=1;De<ke;De+=2)he.push(De);return he}),lt:nn(function(he,ke,De){for(var lt=De<0?De+ke:De>ke?ke:De;--lt>=0;)he.push(lt);return he}),gt:nn(function(he,ke,De){for(var lt=De<0?De+ke:De;++lt<ke;)he.push(lt);return he})}},V.pseudos.nth=V.pseudos.eq;for(A in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})V.pseudos[A]=Ar(A);for(A in{submit:!0,reset:!0})V.pseudos[A]=Pn(A);function wn(){}wn.prototype=V.filters=V.pseudos,V.setFilters=new wn,ue=rr.tokenize=function(he,ke){var De,lt,qe,ct,gt,Et,Ot,Kt=Fn[he+" "];if(Kt)return ke?0:Kt.slice(0);for(gt=he,Et=[],Ot=V.preFilter;gt;){(!De||(lt=pe.exec(gt)))&&(lt&&(gt=gt.slice(lt[0].length)||gt),Et.push(qe=[])),De=!1,(lt=de.exec(gt))&&(De=lt.shift(),qe.push({value:De,type:lt[0].replace(se," ")}),gt=gt.slice(De.length));for(ct in V.filter)(lt=we[ct].exec(gt))&&(!Ot[ct]||(lt=Ot[ct](lt)))&&(De=lt.shift(),qe.push({value:De,type:ct,matches:lt}),gt=gt.slice(De.length));if(!De)break}return ke?gt.length:gt?rr.error(he):Fn(he,Et).slice(0)};function Ji(he){for(var ke=0,De=he.length,lt="";ke<De;ke++)lt+=he[ke].value;return lt}function Fi(he,ke,De){var lt=ke.dir,qe=ke.next,ct=qe||lt,gt=De&&ct==="parentNode",Et=xr++;return ke.first?function(Ot,Kt,Xt){for(;Ot=Ot[lt];)if(Ot.nodeType===1||gt)return he(Ot,Kt,Xt);return!1}:function(Ot,Kt,Xt){var Zt,vr,qr,Jt=[mr,Et];if(Xt){for(;Ot=Ot[lt];)if((Ot.nodeType===1||gt)&&he(Ot,Kt,Xt))return!0}else for(;Ot=Ot[lt];)if(Ot.nodeType===1||gt)if(qr=Ot[Pr]||(Ot[Pr]={}),vr=qr[Ot.uniqueID]||(qr[Ot.uniqueID]={}),qe&&qe===Ot.nodeName.toLowerCase())Ot=Ot[lt]||Ot;else{if((Zt=vr[ct])&&Zt[0]===mr&&Zt[1]===Et)return Jt[2]=Zt[2];if(vr[ct]=Jt,Jt[2]=he(Ot,Kt,Xt))return!0}return!1}}function sa(he){return he.length>1?function(ke,De,lt){for(var qe=he.length;qe--;)if(!he[qe](ke,De,lt))return!1;return!0}:he[0]}function cx(he,ke,De){for(var lt=0,qe=ke.length;lt<qe;lt++)rr(he,ke[lt],De);return De}function ku(he,ke,De,lt,qe){for(var ct,gt=[],Et=0,Ot=he.length,Kt=ke!=null;Et<Ot;Et++)(ct=he[Et])&&(!De||De(ct,lt,qe))&&(gt.push(ct),Kt&&ke.push(Et));return gt}function Zh(he,ke,De,lt,qe,ct){return lt&&!lt[Pr]&&(lt=Zh(lt)),qe&&!qe[Pr]&&(qe=Zh(qe,ct)),Gr(function(gt,Et,Ot,Kt){var Xt,Zt,vr,qr=[],Jt=[],kn=Et.length,$n=gt||cx(ke||"*",Ot.nodeType?[Ot]:Ot,[]),xi=he&&(gt||!ke)?ku($n,qr,he,Ot,Kt):$n,cn=De?qe||(gt?he:kn||lt)?[]:Et:xi;if(De&&De(xi,cn,Ot,Kt),lt)for(Xt=ku(cn,Jt),lt(Xt,[],Ot,Kt),Zt=Xt.length;Zt--;)(vr=Xt[Zt])&&(cn[Jt[Zt]]=!(xi[Jt[Zt]]=vr));if(gt){if(qe||he){if(qe){for(Xt=[],Zt=cn.length;Zt--;)(vr=cn[Zt])&&Xt.push(xi[Zt]=vr);qe(null,cn=[],Xt,Kt)}for(Zt=cn.length;Zt--;)(vr=cn[Zt])&&(Xt=qe?v(gt,vr):qr[Zt])>-1&&(gt[Xt]=!(Et[Xt]=vr))}}else cn=ku(cn===Et?cn.splice(kn,cn.length):cn),qe?qe(null,Et,cn,Kt):Nr.apply(Et,cn)})}function ed(he){for(var ke,De,lt,qe=he.length,ct=V.relative[he[0].type],gt=ct||V.relative[" "],Et=ct?1:0,Ot=Fi(function(Zt){return Zt===ke},gt,!0),Kt=Fi(function(Zt){return v(ke,Zt)>-1},gt,!0),Xt=[function(Zt,vr,qr){var Jt=!ct&&(qr||vr!==ze)||((ke=vr).nodeType?Ot(Zt,vr,qr):Kt(Zt,vr,qr));return ke=null,Jt}];Et<qe;Et++)if(De=V.relative[he[Et].type])Xt=[Fi(sa(Xt),De)];else{if(De=V.filter[he[Et].type].apply(null,he[Et].matches),De[Pr]){for(lt=++Et;lt<qe&&!V.relative[he[lt].type];lt++);return Zh(Et>1&&sa(Xt),Et>1&&Ji(he.slice(0,Et-1).concat({value:he[Et-2].type===" "?"*":""})).replace(se,"$1"),De,Et<lt&&ed(he.slice(Et,lt)),lt<qe&&ed(he=he.slice(lt)),lt<qe&&Ji(he))}Xt.push(De)}return sa(Xt)}function hx(he,ke){var De=ke.length>0,lt=he.length>0,qe=function(ct,gt,Et,Ot,Kt){var Xt,Zt,vr,qr=0,Jt="0",kn=ct&&[],$n=[],xi=ze,cn=ct||lt&&V.find.TAG("*",Kt),rl=mr+=xi==null?1:Math.random()||.1,nl=cn.length;for(Kt&&(ze=gt==it||gt||Kt);Jt!==nl&&(Xt=cn[Jt])!=null;Jt++){if(lt&&Xt){for(Zt=0,!gt&&Xt.ownerDocument!=it&&(Ke(Xt),Et=!Yt);vr=he[Zt++];)if(vr(Xt,gt||it,Et)){Ot.push(Xt);break}Kt&&(mr=rl)}De&&((Xt=!vr&&Xt)&&qr--,ct&&kn.push(Xt))}if(qr+=Jt,De&&Jt!==qr){for(Zt=0;vr=ke[Zt++];)vr(kn,$n,gt,Et);if(ct){if(qr>0)for(;Jt--;)kn[Jt]||$n[Jt]||($n[Jt]=Ki.call(Ot));$n=ku($n)}Nr.apply(Ot,$n),Kt&&!ct&&$n.length>0&&qr+ke.length>1&&rr.uniqueSort(Ot)}return Kt&&(mr=rl,ze=xi),kn};return De?Gr(qe):qe}return Ae=rr.compile=function(he,ke){var De,lt=[],qe=[],ct=na[he+" "];if(!ct){for(ke||(ke=ue(he)),De=ke.length;De--;)ct=ed(ke[De]),ct[Pr]?lt.push(ct):qe.push(ct);ct=na(he,hx(qe,lt)),ct.selector=he}return ct},Ce=rr.select=function(he,ke,De,lt){var qe,ct,gt,Et,Ot,Kt=typeof he=="function"&&he,Xt=!lt&&ue(he=Kt.selector||he);if(De=De||[],Xt.length===1){if(ct=Xt[0]=Xt[0].slice(0),ct.length>2&&(gt=ct[0]).type==="ID"&&ke.nodeType===9&&Yt&&V.relative[ct[1].type]){if(ke=(V.find.ID(gt.matches[0].replace($t,Pt),ke)||[])[0],ke)Kt&&(ke=ke.parentNode);else return De;he=he.slice(ct.shift().value.length)}for(qe=we.needsContext.test(he)?0:ct.length;qe--&&(gt=ct[qe],!V.relative[Et=gt.type]);)if((Ot=V.find[Et])&&(lt=Ot(gt.matches[0].replace($t,Pt),Nt.test(ct[0].type)&&Fr(ke.parentNode)||ke))){if(ct.splice(qe,1),he=lt.length&&Ji(ct),!he)return Nr.apply(De,lt),De;break}}return(Kt||Ae(he,Xt))(lt,ke,!Yt,De,!ke||Nt.test(he)&&Fr(ke.parentNode)||ke),De},N.sortStable=Pr.split("").sort(bs).join("")===Pr,N.detectDuplicates=!!mt,Ke(),N.sortDetached=un(function(he){return he.compareDocumentPosition(it.createElement("fieldset"))&1}),un(function(he){return he.innerHTML="<a href='#'></a>",he.firstChild.getAttribute("href")==="#"})||Mr("type|href|height|width",function(he,ke,De){if(!De)return he.getAttribute(ke,ke.toLowerCase()==="type"?1:2)}),(!N.attributes||!un(function(he){return he.innerHTML="<input/>",he.firstChild.setAttribute("value",""),he.firstChild.getAttribute("value")===""}))&&Mr("value",function(he,ke,De){if(!De&&he.nodeName.toLowerCase()==="input")return he.defaultValue}),un(function(he){return he.getAttribute("disabled")==null})||Mr(C,function(he,ke,De){var lt;if(!De)return he[ke]===!0?ke.toLowerCase():(lt=he.getAttributeNode(ke))&&lt.specified?lt.value:null}),rr}(t);_.find=I,_.expr=I.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=I.uniqueSort,_.text=I.getText,_.isXMLDoc=I.isXML,_.contains=I.contains,_.escapeSelector=I.escape;var P=function(T,A,N){for(var V=[],ee=N!==void 0;(T=T[A])&&T.nodeType!==9;)if(T.nodeType===1){if(ee&&_(T).is(N))break;V.push(T)}return V},R=function(T,A){for(var N=[];T;T=T.nextSibling)T.nodeType===1&&T!==A&&N.push(T);return N},D=_.expr.match.needsContext;function U(T,A){return T.nodeName&&T.nodeName.toLowerCase()===A.toLowerCase()}var F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function z(T,A,N){return g(A)?_.grep(T,function(V,ee){return!!A.call(V,ee,V)!==N}):A.nodeType?_.grep(T,function(V){return V===A!==N}):typeof A!="string"?_.grep(T,function(V){return l.call(A,V)>-1!==N}):_.filter(A,T,N)}_.filter=function(T,A,N){var V=A[0];return N&&(T=":not("+T+")"),A.length===1&&V.nodeType===1?_.find.matchesSelector(V,T)?[V]:[]:_.find.matches(T,_.grep(A,function(ee){return ee.nodeType===1}))},_.fn.extend({find:function(T){var A,N,V=this.length,ee=this;if(typeof T!="string")return this.pushStack(_(T).filter(function(){for(A=0;A<V;A++)if(_.contains(ee[A],this))return!0}));for(N=this.pushStack([]),A=0;A<V;A++)_.find(T,ee[A],N);return V>1?_.uniqueSort(N):N},filter:function(T){return this.pushStack(z(this,T||[],!1))},not:function(T){return this.pushStack(z(this,T||[],!0))},is:function(T){return!!z(this,typeof T=="string"&&D.test(T)?_(T):T||[],!1).length}});var K,Q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=_.fn.init=function(T,A,N){var V,ee;if(!T)return this;if(N=N||K,typeof T=="string")if(T[0]==="<"&&T[T.length-1]===">"&&T.length>=3?V=[null,T,null]:V=Q.exec(T),V&&(V[1]||!A))if(V[1]){if(A=A instanceof _?A[0]:A,_.merge(this,_.parseHTML(V[1],A&&A.nodeType?A.ownerDocument||A:b,!0)),F.test(V[1])&&_.isPlainObject(A))for(V in A)g(this[V])?this[V](A[V]):this.attr(V,A[V]);return this}else return ee=b.getElementById(V[2]),ee&&(this[0]=ee,this.length=1),this;else return!A||A.jquery?(A||N).find(T):this.constructor(A).find(T);else{if(T.nodeType)return this[0]=T,this.length=1,this;if(g(T))return N.ready!==void 0?N.ready(T):T(_)}return _.makeArray(T,this)};te.prototype=_.fn,K=_(b);var Z=/^(?:parents|prev(?:Until|All))/,q={children:!0,contents:!0,next:!0,prev:!0};_.fn.extend({has:function(T){var A=_(T,this),N=A.length;return this.filter(function(){for(var V=0;V<N;V++)if(_.contains(this,A[V]))return!0})},closest:function(T,A){var N,V=0,ee=this.length,ne=[],ue=typeof T!="string"&&_(T);if(!D.test(T)){for(;V<ee;V++)for(N=this[V];N&&N!==A;N=N.parentNode)if(N.nodeType<11&&(ue?ue.index(N)>-1:N.nodeType===1&&_.find.matchesSelector(N,T))){ne.push(N);break}}return this.pushStack(ne.length>1?_.uniqueSort(ne):ne)},index:function(T){return T?typeof T=="string"?l.call(_(T),this[0]):l.call(this,T.jquery?T[0]:T):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(T,A){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(T,A))))},addBack:function(T){return this.add(T==null?this.prevObject:this.prevObject.filter(T))}});function Y(T,A){for(;(T=T[A])&&T.nodeType!==1;);return T}_.each({parent:function(T){var A=T.parentNode;return A&&A.nodeType!==11?A:null},parents:function(T){return P(T,"parentNode")},parentsUntil:function(T,A,N){return P(T,"parentNode",N)},next:function(T){return Y(T,"nextSibling")},prev:function(T){return Y(T,"previousSibling")},nextAll:function(T){return P(T,"nextSibling")},prevAll:function(T){return P(T,"previousSibling")},nextUntil:function(T,A,N){return P(T,"nextSibling",N)},prevUntil:function(T,A,N){return P(T,"previousSibling",N)},siblings:function(T){return R((T.parentNode||{}).firstChild,T)},children:function(T){return R(T.firstChild)},contents:function(T){return T.contentDocument!=null&&s(T.contentDocument)?T.contentDocument:(U(T,"template")&&(T=T.content||T),_.merge([],T.childNodes))}},function(T,A){_.fn[T]=function(N,V){var ee=_.map(this,A,N);return T.slice(-5)!=="Until"&&(V=N),V&&typeof V=="string"&&(ee=_.filter(V,ee)),this.length>1&&(q[T]||_.uniqueSort(ee),Z.test(T)&&ee.reverse()),this.pushStack(ee)}});var X=/[^\x20\t\r\n\f]+/g;function ce(T){var A={};return _.each(T.match(X)||[],function(N,V){A[V]=!0}),A}_.Callbacks=function(T){T=typeof T=="string"?ce(T):_.extend({},T);var A,N,V,ee,ne=[],ue=[],Ae=-1,Ce=function(){for(ee=ee||T.once,V=A=!0;ue.length;Ae=-1)for(N=ue.shift();++Ae<ne.length;)ne[Ae].apply(N[0],N[1])===!1&&T.stopOnFalse&&(Ae=ne.length,N=!1);T.memory||(N=!1),A=!1,ee&&(N?ne=[]:ne="")},ze={add:function(){return ne&&(N&&!A&&(Ae=ne.length-1,ue.push(N)),function Qe(mt){_.each(mt,function(Ke,it){g(it)?(!T.unique||!ze.has(it))&&ne.push(it):it&&it.length&&S(it)!=="string"&&Qe(it)})}(arguments),N&&!A&&Ce()),this},remove:function(){return _.each(arguments,function(Qe,mt){for(var Ke;(Ke=_.inArray(mt,ne,Ke))>-1;)ne.splice(Ke,1),Ke<=Ae&&Ae--}),this},has:function(Qe){return Qe?_.inArray(Qe,ne)>-1:ne.length>0},empty:function(){return ne&&(ne=[]),this},disable:function(){return ee=ue=[],ne=N="",this},disabled:function(){return!ne},lock:function(){return ee=ue=[],!N&&!A&&(ne=N=""),this},locked:function(){return!!ee},fireWith:function(Qe,mt){return ee||(mt=mt||[],mt=[Qe,mt.slice?mt.slice():mt],ue.push(mt),A||Ce()),this},fire:function(){return ze.fireWith(this,arguments),this},fired:function(){return!!V}};return ze};function O(T){return T}function B(T){throw T}function W(T,A,N,V){var ee;try{T&&g(ee=T.promise)?ee.call(T).done(A).fail(N):T&&g(ee=T.then)?ee.call(T,A,N):A.apply(void 0,[T].slice(V))}catch(ne){N.apply(void 0,[ne])}}_.extend({Deferred:function(T){var A=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],N="pending",V={state:function(){return N},always:function(){return ee.done(arguments).fail(arguments),this},catch:function(ne){return V.then(null,ne)},pipe:function(){var ne=arguments;return _.Deferred(function(ue){_.each(A,function(Ae,Ce){var ze=g(ne[Ce[4]])&&ne[Ce[4]];ee[Ce[1]](function(){var Qe=ze&&ze.apply(this,arguments);Qe&&g(Qe.promise)?Qe.promise().progress(ue.notify).done(ue.resolve).fail(ue.reject):ue[Ce[0]+"With"](this,ze?[Qe]:arguments)})}),ne=null}).promise()},then:function(ne,ue,Ae){var Ce=0;function ze(Qe,mt,Ke,it){return function(){var Lt=this,Yt=arguments,ot=function(){var fn,Sn;if(!(Qe<Ce)){if(fn=Ke.apply(Lt,Yt),fn===mt.promise())throw new TypeError("Thenable self-resolution");Sn=fn&&(typeof fn=="object"||typeof fn=="function")&&fn.then,g(Sn)?it?Sn.call(fn,ze(Ce,mt,O,it),ze(Ce,mt,B,it)):(Ce++,Sn.call(fn,ze(Ce,mt,O,it),ze(Ce,mt,B,it),ze(Ce,mt,O,mt.notifyWith))):(Ke!==O&&(Lt=void 0,Yt=[fn]),(it||mt.resolveWith)(Lt,Yt))}},bn=it?ot:function(){try{ot()}catch(fn){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(fn,bn.stackTrace),Qe+1>=Ce&&(Ke!==B&&(Lt=void 0,Yt=[fn]),mt.rejectWith(Lt,Yt))}};Qe?bn():(_.Deferred.getStackHook&&(bn.stackTrace=_.Deferred.getStackHook()),t.setTimeout(bn))}}return _.Deferred(function(Qe){A[0][3].add(ze(0,Qe,g(Ae)?Ae:O,Qe.notifyWith)),A[1][3].add(ze(0,Qe,g(ne)?ne:O)),A[2][3].add(ze(0,Qe,g(ue)?ue:B))}).promise()},promise:function(ne){return ne!=null?_.extend(ne,V):V}},ee={};return _.each(A,function(ne,ue){var Ae=ue[2],Ce=ue[5];V[ue[1]]=Ae.add,Ce&&Ae.add(function(){N=Ce},A[3-ne][2].disable,A[3-ne][3].disable,A[0][2].lock,A[0][3].lock),Ae.add(ue[3].fire),ee[ue[0]]=function(){return ee[ue[0]+"With"](this===ee?void 0:this,arguments),this},ee[ue[0]+"With"]=Ae.fireWith}),V.promise(ee),T&&T.call(ee,ee),ee},when:function(T){var A=arguments.length,N=A,V=Array(N),ee=a.call(arguments),ne=_.Deferred(),ue=function(Ae){return function(Ce){V[Ae]=this,ee[Ae]=arguments.length>1?a.call(arguments):Ce,--A||ne.resolveWith(V,ee)}};if(A<=1&&(W(T,ne.done(ue(N)).resolve,ne.reject,!A),ne.state()==="pending"||g(ee[N]&&ee[N].then)))return ne.then();for(;N--;)W(ee[N],ue(N),ne.reject);return ne.promise()}});var re=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(T,A){t.console&&t.console.warn&&T&&re.test(T.name)&&t.console.warn("jQuery.Deferred exception: "+T.message,T.stack,A)},_.readyException=function(T){t.setTimeout(function(){throw T})};var ae=_.Deferred();_.fn.ready=function(T){return ae.then(T).catch(function(A){_.readyException(A)}),this},_.extend({isReady:!1,readyWait:1,ready:function(T){(T===!0?--_.readyWait:_.isReady)||(_.isReady=!0,!(T!==!0&&--_.readyWait>0)&&ae.resolveWith(b,[_]))}}),_.ready.then=ae.then;function me(){b.removeEventListener("DOMContentLoaded",me),t.removeEventListener("load",me),_.ready()}b.readyState==="complete"||b.readyState!=="loading"&&!b.documentElement.doScroll?t.setTimeout(_.ready):(b.addEventListener("DOMContentLoaded",me),t.addEventListener("load",me));var ge=function(T,A,N,V,ee,ne,ue){var Ae=0,Ce=T.length,ze=N==null;if(S(N)==="object"){ee=!0;for(Ae in N)ge(T,A,Ae,N[Ae],!0,ne,ue)}else if(V!==void 0&&(ee=!0,g(V)||(ue=!0),ze&&(ue?(A.call(T,V),A=null):(ze=A,A=function(Qe,mt,Ke){return ze.call(_(Qe),Ke)})),A))for(;Ae<Ce;Ae++)A(T[Ae],N,ue?V:V.call(T[Ae],Ae,A(T[Ae],N)));return ee?T:ze?A.call(T):Ce?A(T[0],N):ne},xe=/^-ms-/,fe=/-([a-z])/g;function ye(T,A){return A.toUpperCase()}function Te(T){return T.replace(xe,"ms-").replace(fe,ye)}var oe=function(T){return T.nodeType===1||T.nodeType===9||!+T.nodeType};function Se(){this.expando=_.expando+Se.uid++}Se.uid=1,Se.prototype={cache:function(T){var A=T[this.expando];return A||(A={},oe(T)&&(T.nodeType?T[this.expando]=A:Object.defineProperty(T,this.expando,{value:A,configurable:!0}))),A},set:function(T,A,N){var V,ee=this.cache(T);if(typeof A=="string")ee[Te(A)]=N;else for(V in A)ee[Te(V)]=A[V];return ee},get:function(T,A){return A===void 0?this.cache(T):T[this.expando]&&T[this.expando][Te(A)]},access:function(T,A,N){return A===void 0||A&&typeof A=="string"&&N===void 0?this.get(T,A):(this.set(T,A,N),N!==void 0?N:A)},remove:function(T,A){var N,V=T[this.expando];if(V!==void 0){if(A!==void 0)for(Array.isArray(A)?A=A.map(Te):(A=Te(A),A=A in V?[A]:A.match(X)||[]),N=A.length;N--;)delete V[A[N]];(A===void 0||_.isEmptyObject(V))&&(T.nodeType?T[this.expando]=void 0:delete T[this.expando])}},hasData:function(T){var A=T[this.expando];return A!==void 0&&!_.isEmptyObject(A)}};var be=new Se,Ie=new Se,Me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ve=/[A-Z]/g;function Be(T){return T==="true"?!0:T==="false"?!1:T==="null"?null:T===+T+""?+T:Me.test(T)?JSON.parse(T):T}function tt(T,A,N){var V;if(N===void 0&&T.nodeType===1)if(V="data-"+A.replace(Ve,"-$&").toLowerCase(),N=T.getAttribute(V),typeof N=="string"){try{N=Be(N)}catch{}Ie.set(T,A,N)}else N=void 0;return N}_.extend({hasData:function(T){return Ie.hasData(T)||be.hasData(T)},data:function(T,A,N){return Ie.access(T,A,N)},removeData:function(T,A){Ie.remove(T,A)},_data:function(T,A,N){return be.access(T,A,N)},_removeData:function(T,A){be.remove(T,A)}}),_.fn.extend({data:function(T,A){var N,V,ee,ne=this[0],ue=ne&&ne.attributes;if(T===void 0){if(this.length&&(ee=Ie.get(ne),ne.nodeType===1&&!be.get(ne,"hasDataAttrs"))){for(N=ue.length;N--;)ue[N]&&(V=ue[N].name,V.indexOf("data-")===0&&(V=Te(V.slice(5)),tt(ne,V,ee[V])));be.set(ne,"hasDataAttrs",!0)}return ee}return typeof T=="object"?this.each(function(){Ie.set(this,T)}):ge(this,function(Ae){var Ce;if(ne&&Ae===void 0)return Ce=Ie.get(ne,T),Ce!==void 0||(Ce=tt(ne,T),Ce!==void 0)?Ce:void 0;this.each(function(){Ie.set(this,T,Ae)})},null,A,arguments.length>1,null,!0)},removeData:function(T){return this.each(function(){Ie.remove(this,T)})}}),_.extend({queue:function(T,A,N){var V;if(T)return A=(A||"fx")+"queue",V=be.get(T,A),N&&(!V||Array.isArray(N)?V=be.access(T,A,_.makeArray(N)):V.push(N)),V||[]},dequeue:function(T,A){A=A||"fx";var N=_.queue(T,A),V=N.length,ee=N.shift(),ne=_._queueHooks(T,A),ue=function(){_.dequeue(T,A)};ee==="inprogress"&&(ee=N.shift(),V--),ee&&(A==="fx"&&N.unshift("inprogress"),delete ne.stop,ee.call(T,ue,ne)),!V&&ne&&ne.empty.fire()},_queueHooks:function(T,A){var N=A+"queueHooks";return be.get(T,N)||be.access(T,N,{empty:_.Callbacks("once memory").add(function(){be.remove(T,[A+"queue",N])})})}}),_.fn.extend({queue:function(T,A){var N=2;return typeof T!="string"&&(A=T,T="fx",N--),arguments.length<N?_.queue(this[0],T):A===void 0?this:this.each(function(){var V=_.queue(this,T,A);_._queueHooks(this,T),T==="fx"&&V[0]!=="inprogress"&&_.dequeue(this,T)})},dequeue:function(T){return this.each(function(){_.dequeue(this,T)})},clearQueue:function(T){return this.queue(T||"fx",[])},promise:function(T,A){var N,V=1,ee=_.Deferred(),ne=this,ue=this.length,Ae=function(){--V||ee.resolveWith(ne,[ne])};for(typeof T!="string"&&(A=T,T=void 0),T=T||"fx";ue--;)N=be.get(ne[ue],T+"queueHooks"),N&&N.empty&&(V++,N.empty.add(Ae));return Ae(),ee.promise(A)}});var Ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ve=new RegExp("^(?:([+-])=|)("+Ue+")([a-z%]*)$","i"),Le=["Top","Right","Bottom","Left"],Fe=b.documentElement,Ze=function(T){return _.contains(T.ownerDocument,T)},et={composed:!0};Fe.getRootNode&&(Ze=function(T){return _.contains(T.ownerDocument,T)||T.getRootNode(et)===T.ownerDocument});var je=function(T,A){return T=A||T,T.style.display==="none"||T.style.display===""&&Ze(T)&&_.css(T,"display")==="none"};function $e(T,A,N,V){var ee,ne,ue=20,Ae=V?function(){return V.cur()}:function(){return _.css(T,A,"")},Ce=Ae(),ze=N&&N[3]||(_.cssNumber[A]?"":"px"),Qe=T.nodeType&&(_.cssNumber[A]||ze!=="px"&&+Ce)&&ve.exec(_.css(T,A));if(Qe&&Qe[3]!==ze){for(Ce=Ce/2,ze=ze||Qe[3],Qe=+Ce||1;ue--;)_.style(T,A,Qe+ze),(1-ne)*(1-(ne=Ae()/Ce||.5))<=0&&(ue=0),Qe=Qe/ne;Qe=Qe*2,_.style(T,A,Qe+ze),N=N||[]}return N&&(Qe=+Qe||+Ce||0,ee=N[1]?Qe+(N[1]+1)*N[2]:+N[2],V&&(V.unit=ze,V.start=Qe,V.end=ee)),ee}var Pe={};function J(T){var A,N=T.ownerDocument,V=T.nodeName,ee=Pe[V];return ee||(A=N.body.appendChild(N.createElement(V)),ee=_.css(A,"display"),A.parentNode.removeChild(A),ee==="none"&&(ee="block"),Pe[V]=ee,ee)}function ie(T,A){for(var N,V,ee=[],ne=0,ue=T.length;ne<ue;ne++)V=T[ne],V.style&&(N=V.style.display,A?(N==="none"&&(ee[ne]=be.get(V,"display")||null,ee[ne]||(V.style.display="")),V.style.display===""&&je(V)&&(ee[ne]=J(V))):N!=="none"&&(ee[ne]="none",be.set(V,"display",N)));for(ne=0;ne<ue;ne++)ee[ne]!=null&&(T[ne].style.display=ee[ne]);return T}_.fn.extend({show:function(){return ie(this,!0)},hide:function(){return ie(this)},toggle:function(T){return typeof T=="boolean"?T?this.show():this.hide():this.each(function(){je(this)?_(this).show():_(this).hide()})}});var $=/^(?:checkbox|radio)$/i,le=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ee=/^$|^module$|\/(?:java|ecma)script/i;(function(){var T=b.createDocumentFragment(),A=T.appendChild(b.createElement("div")),N=b.createElement("input");N.setAttribute("type","radio"),N.setAttribute("checked","checked"),N.setAttribute("name","t"),A.appendChild(N),d.checkClone=A.cloneNode(!0).cloneNode(!0).lastChild.checked,A.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!A.cloneNode(!0).lastChild.defaultValue,A.innerHTML="<option></option>",d.option=!!A.lastChild})();var Re={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td,d.option||(Re.optgroup=Re.option=[1,"<select multiple='multiple'>","</select>"]);function Ge(T,A){var N;return typeof T.getElementsByTagName<"u"?N=T.getElementsByTagName(A||"*"):typeof T.querySelectorAll<"u"?N=T.querySelectorAll(A||"*"):N=[],A===void 0||A&&U(T,A)?_.merge([T],N):N}function st(T,A){for(var N=0,V=T.length;N<V;N++)be.set(T[N],"globalEval",!A||be.get(A[N],"globalEval"))}var ht=/<|&#?\w+;/;function ft(T,A,N,V,ee){for(var ne,ue,Ae,Ce,ze,Qe,mt=A.createDocumentFragment(),Ke=[],it=0,Lt=T.length;it<Lt;it++)if(ne=T[it],ne||ne===0)if(S(ne)==="object")_.merge(Ke,ne.nodeType?[ne]:ne);else if(!ht.test(ne))Ke.push(A.createTextNode(ne));else{for(ue=ue||mt.appendChild(A.createElement("div")),Ae=(le.exec(ne)||["",""])[1].toLowerCase(),Ce=Re[Ae]||Re._default,ue.innerHTML=Ce[1]+_.htmlPrefilter(ne)+Ce[2],Qe=Ce[0];Qe--;)ue=ue.lastChild;_.merge(Ke,ue.childNodes),ue=mt.firstChild,ue.textContent=""}for(mt.textContent="",it=0;ne=Ke[it++];){if(V&&_.inArray(ne,V)>-1){ee&&ee.push(ne);continue}if(ze=Ze(ne),ue=Ge(mt.appendChild(ne),"script"),ze&&st(ue),N)for(Qe=0;ne=ue[Qe++];)Ee.test(ne.type||"")&&N.push(ne)}return mt}var yt=/^([^.]*)(?:\.(.+)|)/;function Ht(){return!0}function Dt(){return!1}function kt(T,A){return T===qt()==(A==="focus")}function qt(){try{return b.activeElement}catch{}}function Rt(T,A,N,V,ee,ne){var ue,Ae;if(typeof A=="object"){typeof N!="string"&&(V=V||N,N=void 0);for(Ae in A)Rt(T,Ae,N,V,A[Ae],ne);return T}if(V==null&&ee==null?(ee=N,V=N=void 0):ee==null&&(typeof N=="string"?(ee=V,V=void 0):(ee=V,V=N,N=void 0)),ee===!1)ee=Dt;else if(!ee)return T;return ne===1&&(ue=ee,ee=function(Ce){return _().off(Ce),ue.apply(this,arguments)},ee.guid=ue.guid||(ue.guid=_.guid++)),T.each(function(){_.event.add(this,A,ee,V,N)})}_.event={global:{},add:function(T,A,N,V,ee){var ne,ue,Ae,Ce,ze,Qe,mt,Ke,it,Lt,Yt,ot=be.get(T);if(oe(T))for(N.handler&&(ne=N,N=ne.handler,ee=ne.selector),ee&&_.find.matchesSelector(Fe,ee),N.guid||(N.guid=_.guid++),(Ce=ot.events)||(Ce=ot.events=Object.create(null)),(ue=ot.handle)||(ue=ot.handle=function(bn){return typeof _<"u"&&_.event.triggered!==bn.type?_.event.dispatch.apply(T,arguments):void 0}),A=(A||"").match(X)||[""],ze=A.length;ze--;)Ae=yt.exec(A[ze])||[],it=Yt=Ae[1],Lt=(Ae[2]||"").split(".").sort(),it&&(mt=_.event.special[it]||{},it=(ee?mt.delegateType:mt.bindType)||it,mt=_.event.special[it]||{},Qe=_.extend({type:it,origType:Yt,data:V,handler:N,guid:N.guid,selector:ee,needsContext:ee&&_.expr.match.needsContext.test(ee),namespace:Lt.join(".")},ne),(Ke=Ce[it])||(Ke=Ce[it]=[],Ke.delegateCount=0,(!mt.setup||mt.setup.call(T,V,Lt,ue)===!1)&&T.addEventListener&&T.addEventListener(it,ue)),mt.add&&(mt.add.call(T,Qe),Qe.handler.guid||(Qe.handler.guid=N.guid)),ee?Ke.splice(Ke.delegateCount++,0,Qe):Ke.push(Qe),_.event.global[it]=!0)},remove:function(T,A,N,V,ee){var ne,ue,Ae,Ce,ze,Qe,mt,Ke,it,Lt,Yt,ot=be.hasData(T)&&be.get(T);if(!(!ot||!(Ce=ot.events))){for(A=(A||"").match(X)||[""],ze=A.length;ze--;){if(Ae=yt.exec(A[ze])||[],it=Yt=Ae[1],Lt=(Ae[2]||"").split(".").sort(),!it){for(it in Ce)_.event.remove(T,it+A[ze],N,V,!0);continue}for(mt=_.event.special[it]||{},it=(V?mt.delegateType:mt.bindType)||it,Ke=Ce[it]||[],Ae=Ae[2]&&new RegExp("(^|\\.)"+Lt.join("\\.(?:.*\\.|)")+"(\\.|$)"),ue=ne=Ke.length;ne--;)Qe=Ke[ne],(ee||Yt===Qe.origType)&&(!N||N.guid===Qe.guid)&&(!Ae||Ae.test(Qe.namespace))&&(!V||V===Qe.selector||V==="**"&&Qe.selector)&&(Ke.splice(ne,1),Qe.selector&&Ke.delegateCount--,mt.remove&&mt.remove.call(T,Qe));ue&&!Ke.length&&((!mt.teardown||mt.teardown.call(T,Lt,ot.handle)===!1)&&_.removeEvent(T,it,ot.handle),delete Ce[it])}_.isEmptyObject(Ce)&&be.remove(T,"handle events")}},dispatch:function(T){var A,N,V,ee,ne,ue,Ae=new Array(arguments.length),Ce=_.event.fix(T),ze=(be.get(this,"events")||Object.create(null))[Ce.type]||[],Qe=_.event.special[Ce.type]||{};for(Ae[0]=Ce,A=1;A<arguments.length;A++)Ae[A]=arguments[A];if(Ce.delegateTarget=this,!(Qe.preDispatch&&Qe.preDispatch.call(this,Ce)===!1)){for(ue=_.event.handlers.call(this,Ce,ze),A=0;(ee=ue[A++])&&!Ce.isPropagationStopped();)for(Ce.currentTarget=ee.elem,N=0;(ne=ee.handlers[N++])&&!Ce.isImmediatePropagationStopped();)(!Ce.rnamespace||ne.namespace===!1||Ce.rnamespace.test(ne.namespace))&&(Ce.handleObj=ne,Ce.data=ne.data,V=((_.event.special[ne.origType]||{}).handle||ne.handler).apply(ee.elem,Ae),V!==void 0&&(Ce.result=V)===!1&&(Ce.preventDefault(),Ce.stopPropagation()));return Qe.postDispatch&&Qe.postDispatch.call(this,Ce),Ce.result}},handlers:function(T,A){var N,V,ee,ne,ue,Ae=[],Ce=A.delegateCount,ze=T.target;if(Ce&&ze.nodeType&&!(T.type==="click"&&T.button>=1)){for(;ze!==this;ze=ze.parentNode||this)if(ze.nodeType===1&&!(T.type==="click"&&ze.disabled===!0)){for(ne=[],ue={},N=0;N<Ce;N++)V=A[N],ee=V.selector+" ",ue[ee]===void 0&&(ue[ee]=V.needsContext?_(ee,this).index(ze)>-1:_.find(ee,this,null,[ze]).length),ue[ee]&&ne.push(V);ne.length&&Ae.push({elem:ze,handlers:ne})}}return ze=this,Ce<A.length&&Ae.push({elem:ze,handlers:A.slice(Ce)}),Ae},addProp:function(T,A){Object.defineProperty(_.Event.prototype,T,{enumerable:!0,configurable:!0,get:g(A)?function(){if(this.originalEvent)return A(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[T]},set:function(N){Object.defineProperty(this,T,{enumerable:!0,configurable:!0,writable:!0,value:N})}})},fix:function(T){return T[_.expando]?T:new _.Event(T)},special:{load:{noBubble:!0},click:{setup:function(T){var A=this||T;return $.test(A.type)&&A.click&&U(A,"input")&&nr(A,"click",Ht),!1},trigger:function(T){var A=this||T;return $.test(A.type)&&A.click&&U(A,"input")&&nr(A,"click"),!0},_default:function(T){var A=T.target;return $.test(A.type)&&A.click&&U(A,"input")&&be.get(A,"click")||U(A,"a")}},beforeunload:{postDispatch:function(T){T.result!==void 0&&T.originalEvent&&(T.originalEvent.returnValue=T.result)}}}};function nr(T,A,N){if(!N){be.get(T,A)===void 0&&_.event.add(T,A,Ht);return}be.set(T,A,!1),_.event.add(T,A,{namespace:!1,handler:function(V){var ee,ne,ue=be.get(this,A);if(V.isTrigger&1&&this[A]){if(ue.length)(_.event.special[A]||{}).delegateType&&V.stopPropagation();else if(ue=a.call(arguments),be.set(this,A,ue),ee=N(this,A),this[A](),ne=be.get(this,A),ue!==ne||ee?be.set(this,A,!1):ne={},ue!==ne)return V.stopImmediatePropagation(),V.preventDefault(),ne&&ne.value}else ue.length&&(be.set(this,A,{value:_.event.trigger(_.extend(ue[0],_.Event.prototype),ue.slice(1),this)}),V.stopImmediatePropagation())}})}_.removeEvent=function(T,A,N){T.removeEventListener&&T.removeEventListener(A,N)},_.Event=function(T,A){if(!(this instanceof _.Event))return new _.Event(T,A);T&&T.type?(this.originalEvent=T,this.type=T.type,this.isDefaultPrevented=T.defaultPrevented||T.defaultPrevented===void 0&&T.returnValue===!1?Ht:Dt,this.target=T.target&&T.target.nodeType===3?T.target.parentNode:T.target,this.currentTarget=T.currentTarget,this.relatedTarget=T.relatedTarget):this.type=T,A&&_.extend(this,A),this.timeStamp=T&&T.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Dt,isPropagationStopped:Dt,isImmediatePropagationStopped:Dt,isSimulated:!1,preventDefault:function(){var T=this.originalEvent;this.isDefaultPrevented=Ht,T&&!this.isSimulated&&T.preventDefault()},stopPropagation:function(){var T=this.originalEvent;this.isPropagationStopped=Ht,T&&!this.isSimulated&&T.stopPropagation()},stopImmediatePropagation:function(){var T=this.originalEvent;this.isImmediatePropagationStopped=Ht,T&&!this.isSimulated&&T.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},function(T,A){_.event.special[T]={setup:function(){return nr(this,T,kt),!1},trigger:function(){return nr(this,T),!0},_default:function(N){return be.get(N.target,T)},delegateType:A}}),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(T,A){_.event.special[T]={delegateType:A,bindType:A,handle:function(N){var V,ee=this,ne=N.relatedTarget,ue=N.handleObj;return(!ne||ne!==ee&&!_.contains(ee,ne))&&(N.type=ue.origType,V=ue.handler.apply(this,arguments),N.type=A),V}}}),_.fn.extend({on:function(T,A,N,V){return Rt(this,T,A,N,V)},one:function(T,A,N,V){return Rt(this,T,A,N,V,1)},off:function(T,A,N){var V,ee;if(T&&T.preventDefault&&T.handleObj)return V=T.handleObj,_(T.delegateTarget).off(V.namespace?V.origType+"."+V.namespace:V.origType,V.selector,V.handler),this;if(typeof T=="object"){for(ee in T)this.off(ee,A,T[ee]);return this}return(A===!1||typeof A=="function")&&(N=A,A=void 0),N===!1&&(N=Dt),this.each(function(){_.event.remove(this,T,N,A)})}});var en=/<script|<style|<link/i,Tr=/checked\s*(?:[^=]|=\s*.checked.)/i,tr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function zt(T,A){return U(T,"table")&&U(A.nodeType!==11?A:A.firstChild,"tr")&&_(T).children("tbody")[0]||T}function At(T){return T.type=(T.getAttribute("type")!==null)+"/"+T.type,T}function xt(T){return(T.type||"").slice(0,5)==="true/"?T.type=T.type.slice(5):T.removeAttribute("type"),T}function Cr(T,A){var N,V,ee,ne,ue,Ae,Ce;if(A.nodeType===1){if(be.hasData(T)&&(ne=be.get(T),Ce=ne.events,Ce)){be.remove(A,"handle events");for(ee in Ce)for(N=0,V=Ce[ee].length;N<V;N++)_.event.add(A,ee,Ce[ee][N])}Ie.hasData(T)&&(ue=Ie.access(T),Ae=_.extend({},ue),Ie.set(A,Ae))}}function wr(T,A){var N=A.nodeName.toLowerCase();N==="input"&&$.test(T.type)?A.checked=T.checked:(N==="input"||N==="textarea")&&(A.defaultValue=T.defaultValue)}function Ir(T,A,N,V){A=o(A);var ee,ne,ue,Ae,Ce,ze,Qe=0,mt=T.length,Ke=mt-1,it=A[0],Lt=g(it);if(Lt||mt>1&&typeof it=="string"&&!d.checkClone&&Tr.test(it))return T.each(function(Yt){var ot=T.eq(Yt);Lt&&(A[0]=it.call(this,Yt,ot.html())),Ir(ot,A,N,V)});if(mt&&(ee=ft(A,T[0].ownerDocument,!1,T,V),ne=ee.firstChild,ee.childNodes.length===1&&(ee=ne),ne||V)){for(ue=_.map(Ge(ee,"script"),At),Ae=ue.length;Qe<mt;Qe++)Ce=ee,Qe!==Ke&&(Ce=_.clone(Ce,!0,!0),Ae&&_.merge(ue,Ge(Ce,"script"))),N.call(T[Qe],Ce,Qe);if(Ae)for(ze=ue[ue.length-1].ownerDocument,_.map(ue,xt),Qe=0;Qe<Ae;Qe++)Ce=ue[Qe],Ee.test(Ce.type||"")&&!be.access(Ce,"globalEval")&&_.contains(ze,Ce)&&(Ce.src&&(Ce.type||"").toLowerCase()!=="module"?_._evalUrl&&!Ce.noModule&&_._evalUrl(Ce.src,{nonce:Ce.nonce||Ce.getAttribute("nonce")},ze):j(Ce.textContent.replace(tr,""),Ce,ze))}return T}function ci(T,A,N){for(var V,ee=A?_.filter(A,T):T,ne=0;(V=ee[ne])!=null;ne++)!N&&V.nodeType===1&&_.cleanData(Ge(V)),V.parentNode&&(N&&Ze(V)&&st(Ge(V,"script")),V.parentNode.removeChild(V));return T}_.extend({htmlPrefilter:function(T){return T},clone:function(T,A,N){var V,ee,ne,ue,Ae=T.cloneNode(!0),Ce=Ze(T);if(!d.noCloneChecked&&(T.nodeType===1||T.nodeType===11)&&!_.isXMLDoc(T))for(ue=Ge(Ae),ne=Ge(T),V=0,ee=ne.length;V<ee;V++)wr(ne[V],ue[V]);if(A)if(N)for(ne=ne||Ge(T),ue=ue||Ge(Ae),V=0,ee=ne.length;V<ee;V++)Cr(ne[V],ue[V]);else Cr(T,Ae);return ue=Ge(Ae,"script"),ue.length>0&&st(ue,!Ce&&Ge(T,"script")),Ae},cleanData:function(T){for(var A,N,V,ee=_.event.special,ne=0;(N=T[ne])!==void 0;ne++)if(oe(N)){if(A=N[be.expando]){if(A.events)for(V in A.events)ee[V]?_.event.remove(N,V):_.removeEvent(N,V,A.handle);N[be.expando]=void 0}N[Ie.expando]&&(N[Ie.expando]=void 0)}}}),_.fn.extend({detach:function(T){return ci(this,T,!0)},remove:function(T){return ci(this,T)},text:function(T){return ge(this,function(A){return A===void 0?_.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=A)})},null,T,arguments.length)},append:function(){return Ir(this,arguments,function(T){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var A=zt(this,T);A.appendChild(T)}})},prepend:function(){return Ir(this,arguments,function(T){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var A=zt(this,T);A.insertBefore(T,A.firstChild)}})},before:function(){return Ir(this,arguments,function(T){this.parentNode&&this.parentNode.insertBefore(T,this)})},after:function(){return Ir(this,arguments,function(T){this.parentNode&&this.parentNode.insertBefore(T,this.nextSibling)})},empty:function(){for(var T,A=0;(T=this[A])!=null;A++)T.nodeType===1&&(_.cleanData(Ge(T,!1)),T.textContent="");return this},clone:function(T,A){return T=T??!1,A=A??T,this.map(function(){return _.clone(this,T,A)})},html:function(T){return ge(this,function(A){var N=this[0]||{},V=0,ee=this.length;if(A===void 0&&N.nodeType===1)return N.innerHTML;if(typeof A=="string"&&!en.test(A)&&!Re[(le.exec(A)||["",""])[1].toLowerCase()]){A=_.htmlPrefilter(A);try{for(;V<ee;V++)N=this[V]||{},N.nodeType===1&&(_.cleanData(Ge(N,!1)),N.innerHTML=A);N=0}catch{}}N&&this.empty().append(A)},null,T,arguments.length)},replaceWith:function(){var T=[];return Ir(this,arguments,function(A){var N=this.parentNode;_.inArray(this,T)<0&&(_.cleanData(Ge(this)),N&&N.replaceChild(A,this))},T)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(T,A){_.fn[T]=function(N){for(var V,ee=[],ne=_(N),ue=ne.length-1,Ae=0;Ae<=ue;Ae++)V=Ae===ue?this:this.clone(!0),_(ne[Ae])[A](V),u.apply(ee,V.get());return this.pushStack(ee)}});var vn=new RegExp("^("+Ue+")(?!px)[a-z%]+$","i"),gr=/^--/,Wn=function(T){var A=T.ownerDocument.defaultView;return(!A||!A.opener)&&(A=t),A.getComputedStyle(T)},ei=function(T,A,N){var V,ee,ne={};for(ee in A)ne[ee]=T.style[ee],T.style[ee]=A[ee];V=N.call(T);for(ee in A)T.style[ee]=ne[ee];return V},ti=new RegExp(Le.join("|"),"i"),_e="[\\x20\\t\\r\\n\\f]",dt=new RegExp("^"+_e+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_e+"+$","g");(function(){function T(){if(ze){Ce.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ze.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Fe.appendChild(Ce).appendChild(ze);var Qe=t.getComputedStyle(ze);N=Qe.top!=="1%",Ae=A(Qe.marginLeft)===12,ze.style.right="60%",ne=A(Qe.right)===36,V=A(Qe.width)===36,ze.style.position="absolute",ee=A(ze.offsetWidth/3)===12,Fe.removeChild(Ce),ze=null}}function A(Qe){return Math.round(parseFloat(Qe))}var N,V,ee,ne,ue,Ae,Ce=b.createElement("div"),ze=b.createElement("div");ze.style&&(ze.style.backgroundClip="content-box",ze.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle=ze.style.backgroundClip==="content-box",_.extend(d,{boxSizingReliable:function(){return T(),V},pixelBoxStyles:function(){return T(),ne},pixelPosition:function(){return T(),N},reliableMarginLeft:function(){return T(),Ae},scrollboxSize:function(){return T(),ee},reliableTrDimensions:function(){var Qe,mt,Ke,it;return ue==null&&(Qe=b.createElement("table"),mt=b.createElement("tr"),Ke=b.createElement("div"),Qe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",mt.style.cssText="border:1px solid",mt.style.height="1px",Ke.style.height="9px",Ke.style.display="block",Fe.appendChild(Qe).appendChild(mt).appendChild(Ke),it=t.getComputedStyle(mt),ue=parseInt(it.height,10)+parseInt(it.borderTopWidth,10)+parseInt(it.borderBottomWidth,10)===mt.offsetHeight,Fe.removeChild(Qe)),ue}}))})();function bt(T,A,N){var V,ee,ne,ue,Ae=gr.test(A),Ce=T.style;return N=N||Wn(T),N&&(ue=N.getPropertyValue(A)||N[A],Ae&&ue&&(ue=ue.replace(dt,"$1")||void 0),ue===""&&!Ze(T)&&(ue=_.style(T,A)),!d.pixelBoxStyles()&&vn.test(ue)&&ti.test(A)&&(V=Ce.width,ee=Ce.minWidth,ne=Ce.maxWidth,Ce.minWidth=Ce.maxWidth=Ce.width=ue,ue=N.width,Ce.width=V,Ce.minWidth=ee,Ce.maxWidth=ne)),ue!==void 0?ue+"":ue}function ut(T,A){return{get:function(){if(T()){delete this.get;return}return(this.get=A).apply(this,arguments)}}}var ir=["Webkit","Moz","ms"],nt=b.createElement("div").style,fr={};function wt(T){for(var A=T[0].toUpperCase()+T.slice(1),N=ir.length;N--;)if(T=ir[N]+A,T in nt)return T}function ur(T){var A=_.cssProps[T]||fr[T];return A||(T in nt?T:fr[T]=wt(T)||T)}var St=/^(none|table(?!-c[ea]).+)/,Lr={position:"absolute",visibility:"hidden",display:"block"},Kr={letterSpacing:"0",fontWeight:"400"};function tn(T,A,N){var V=ve.exec(A);return V?Math.max(0,V[2]-(N||0))+(V[3]||"px"):A}function gn(T,A,N,V,ee,ne){var ue=A==="width"?1:0,Ae=0,Ce=0;if(N===(V?"border":"content"))return 0;for(;ue<4;ue+=2)N==="margin"&&(Ce+=_.css(T,N+Le[ue],!0,ee)),V?(N==="content"&&(Ce-=_.css(T,"padding"+Le[ue],!0,ee)),N!=="margin"&&(Ce-=_.css(T,"border"+Le[ue]+"Width",!0,ee))):(Ce+=_.css(T,"padding"+Le[ue],!0,ee),N!=="padding"?Ce+=_.css(T,"border"+Le[ue]+"Width",!0,ee):Ae+=_.css(T,"border"+Le[ue]+"Width",!0,ee));return!V&&ne>=0&&(Ce+=Math.max(0,Math.ceil(T["offset"+A[0].toUpperCase()+A.slice(1)]-ne-Ce-Ae-.5))||0),Ce}function bi(T,A,N){var V=Wn(T),ee=!d.boxSizingReliable()||N,ne=ee&&_.css(T,"boxSizing",!1,V)==="border-box",ue=ne,Ae=bt(T,A,V),Ce="offset"+A[0].toUpperCase()+A.slice(1);if(vn.test(Ae)){if(!N)return Ae;Ae="auto"}return(!d.boxSizingReliable()&&ne||!d.reliableTrDimensions()&&U(T,"tr")||Ae==="auto"||!parseFloat(Ae)&&_.css(T,"display",!1,V)==="inline")&&T.getClientRects().length&&(ne=_.css(T,"boxSizing",!1,V)==="border-box",ue=Ce in T,ue&&(Ae=T[Ce])),Ae=parseFloat(Ae)||0,Ae+gn(T,A,N||(ne?"border":"content"),ue,V,Ae)+"px"}_.extend({cssHooks:{opacity:{get:function(T,A){if(A){var N=bt(T,"opacity");return N===""?"1":N}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(T,A,N,V){if(!(!T||T.nodeType===3||T.nodeType===8||!T.style)){var ee,ne,ue,Ae=Te(A),Ce=gr.test(A),ze=T.style;if(Ce||(A=ur(Ae)),ue=_.cssHooks[A]||_.cssHooks[Ae],N!==void 0){if(ne=typeof N,ne==="string"&&(ee=ve.exec(N))&&ee[1]&&(N=$e(T,A,ee),ne="number"),N==null||N!==N)return;ne==="number"&&!Ce&&(N+=ee&&ee[3]||(_.cssNumber[Ae]?"":"px")),!d.clearCloneStyle&&N===""&&A.indexOf("background")===0&&(ze[A]="inherit"),(!ue||!("set"in ue)||(N=ue.set(T,N,V))!==void 0)&&(Ce?ze.setProperty(A,N):ze[A]=N)}else return ue&&"get"in ue&&(ee=ue.get(T,!1,V))!==void 0?ee:ze[A]}},css:function(T,A,N,V){var ee,ne,ue,Ae=Te(A),Ce=gr.test(A);return Ce||(A=ur(Ae)),ue=_.cssHooks[A]||_.cssHooks[Ae],ue&&"get"in ue&&(ee=ue.get(T,!0,N)),ee===void 0&&(ee=bt(T,A,V)),ee==="normal"&&A in Kr&&(ee=Kr[A]),N===""||N?(ne=parseFloat(ee),N===!0||isFinite(ne)?ne||0:ee):ee}}),_.each(["height","width"],function(T,A){_.cssHooks[A]={get:function(N,V,ee){if(V)return St.test(_.css(N,"display"))&&(!N.getClientRects().length||!N.getBoundingClientRect().width)?ei(N,Lr,function(){return bi(N,A,ee)}):bi(N,A,ee)},set:function(N,V,ee){var ne,ue=Wn(N),Ae=!d.scrollboxSize()&&ue.position==="absolute",Ce=Ae||ee,ze=Ce&&_.css(N,"boxSizing",!1,ue)==="border-box",Qe=ee?gn(N,A,ee,ze,ue):0;return ze&&Ae&&(Qe-=Math.ceil(N["offset"+A[0].toUpperCase()+A.slice(1)]-parseFloat(ue[A])-gn(N,A,"border",!1,ue)-.5)),Qe&&(ne=ve.exec(V))&&(ne[3]||"px")!=="px"&&(N.style[A]=V,V=_.css(N,A)),tn(N,V,Qe)}}}),_.cssHooks.marginLeft=ut(d.reliableMarginLeft,function(T,A){if(A)return(parseFloat(bt(T,"marginLeft"))||T.getBoundingClientRect().left-ei(T,{marginLeft:0},function(){return T.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(T,A){_.cssHooks[T+A]={expand:function(N){for(var V=0,ee={},ne=typeof N=="string"?N.split(" "):[N];V<4;V++)ee[T+Le[V]+A]=ne[V]||ne[V-2]||ne[0];return ee}},T!=="margin"&&(_.cssHooks[T+A].set=tn)}),_.fn.extend({css:function(T,A){return ge(this,function(N,V,ee){var ne,ue,Ae={},Ce=0;if(Array.isArray(V)){for(ne=Wn(N),ue=V.length;Ce<ue;Ce++)Ae[V[Ce]]=_.css(N,V[Ce],!1,ne);return Ae}return ee!==void 0?_.style(N,V,ee):_.css(N,V)},T,A,arguments.length>1)}});function Vr(T,A,N,V,ee){return new Vr.prototype.init(T,A,N,V,ee)}_.Tween=Vr,Vr.prototype={constructor:Vr,init:function(T,A,N,V,ee,ne){this.elem=T,this.prop=N,this.easing=ee||_.easing._default,this.options=A,this.start=this.now=this.cur(),this.end=V,this.unit=ne||(_.cssNumber[N]?"":"px")},cur:function(){var T=Vr.propHooks[this.prop];return T&&T.get?T.get(this):Vr.propHooks._default.get(this)},run:function(T){var A,N=Vr.propHooks[this.prop];return this.options.duration?this.pos=A=_.easing[this.easing](T,this.options.duration*T,0,1,this.options.duration):this.pos=A=T,this.now=(this.end-this.start)*A+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),N&&N.set?N.set(this):Vr.propHooks._default.set(this),this}},Vr.prototype.init.prototype=Vr.prototype,Vr.propHooks={_default:{get:function(T){var A;return T.elem.nodeType!==1||T.elem[T.prop]!=null&&T.elem.style[T.prop]==null?T.elem[T.prop]:(A=_.css(T.elem,T.prop,""),!A||A==="auto"?0:A)},set:function(T){_.fx.step[T.prop]?_.fx.step[T.prop](T):T.elem.nodeType===1&&(_.cssHooks[T.prop]||T.elem.style[ur(T.prop)]!=null)?_.style(T.elem,T.prop,T.now+T.unit):T.elem[T.prop]=T.now}}},Vr.propHooks.scrollTop=Vr.propHooks.scrollLeft={set:function(T){T.elem.nodeType&&T.elem.parentNode&&(T.elem[T.prop]=T.now)}},_.easing={linear:function(T){return T},swing:function(T){return .5-Math.cos(T*Math.PI)/2},_default:"swing"},_.fx=Vr.prototype.init,_.fx.step={};var Bn,dn,bu=/^(?:toggle|show|hide)$/,_i=/queueHooks$/;function qi(){dn&&(b.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(qi):t.setTimeout(qi,_.fx.interval),_.fx.tick())}function wo(){return t.setTimeout(function(){Bn=void 0}),Bn=Date.now()}function xo(T,A){var N,V=0,ee={height:T};for(A=A?1:0;V<4;V+=2-A)N=Le[V],ee["margin"+N]=ee["padding"+N]=T;return A&&(ee.opacity=ee.width=T),ee}function Ya(T,A,N){for(var V,ee=(hi.tweeners[A]||[]).concat(hi.tweeners["*"]),ne=0,ue=ee.length;ne<ue;ne++)if(V=ee[ne].call(N,A,T))return V}function _u(T,A,N){var V,ee,ne,ue,Ae,Ce,ze,Qe,mt="width"in A||"height"in A,Ke=this,it={},Lt=T.style,Yt=T.nodeType&&je(T),ot=be.get(T,"fxshow");N.queue||(ue=_._queueHooks(T,"fx"),ue.unqueued==null&&(ue.unqueued=0,Ae=ue.empty.fire,ue.empty.fire=function(){ue.unqueued||Ae()}),ue.unqueued++,Ke.always(function(){Ke.always(function(){ue.unqueued--,_.queue(T,"fx").length||ue.empty.fire()})}));for(V in A)if(ee=A[V],bu.test(ee)){if(delete A[V],ne=ne||ee==="toggle",ee===(Yt?"hide":"show"))if(ee==="show"&&ot&&ot[V]!==void 0)Yt=!0;else continue;it[V]=ot&&ot[V]||_.style(T,V)}if(Ce=!_.isEmptyObject(A),!(!Ce&&_.isEmptyObject(it))){mt&&T.nodeType===1&&(N.overflow=[Lt.overflow,Lt.overflowX,Lt.overflowY],ze=ot&&ot.display,ze==null&&(ze=be.get(T,"display")),Qe=_.css(T,"display"),Qe==="none"&&(ze?Qe=ze:(ie([T],!0),ze=T.style.display||ze,Qe=_.css(T,"display"),ie([T]))),(Qe==="inline"||Qe==="inline-block"&&ze!=null)&&_.css(T,"float")==="none"&&(Ce||(Ke.done(function(){Lt.display=ze}),ze==null&&(Qe=Lt.display,ze=Qe==="none"?"":Qe)),Lt.display="inline-block")),N.overflow&&(Lt.overflow="hidden",Ke.always(function(){Lt.overflow=N.overflow[0],Lt.overflowX=N.overflow[1],Lt.overflowY=N.overflow[2]})),Ce=!1;for(V in it)Ce||(ot?"hidden"in ot&&(Yt=ot.hidden):ot=be.access(T,"fxshow",{display:ze}),ne&&(ot.hidden=!Yt),Yt&&ie([T],!0),Ke.done(function(){Yt||ie([T]),be.remove(T,"fxshow");for(V in it)_.style(T,V,it[V])})),Ce=Ya(Yt?ot[V]:0,V,Ke),V in ot||(ot[V]=Ce.start,Yt&&(Ce.end=Ce.start,Ce.start=0))}}function Ka(T,A){var N,V,ee,ne,ue;for(N in T)if(V=Te(N),ee=A[V],ne=T[N],Array.isArray(ne)&&(ee=ne[1],ne=T[N]=ne[0]),N!==V&&(T[V]=ne,delete T[N]),ue=_.cssHooks[V],ue&&"expand"in ue){ne=ue.expand(ne),delete T[V];for(N in ne)N in T||(T[N]=ne[N],A[N]=ee)}else A[V]=ee}function hi(T,A,N){var V,ee,ne=0,ue=hi.prefilters.length,Ae=_.Deferred().always(function(){delete Ce.elem}),Ce=function(){if(ee)return!1;for(var mt=Bn||wo(),Ke=Math.max(0,ze.startTime+ze.duration-mt),it=Ke/ze.duration||0,Lt=1-it,Yt=0,ot=ze.tweens.length;Yt<ot;Yt++)ze.tweens[Yt].run(Lt);return Ae.notifyWith(T,[ze,Lt,Ke]),Lt<1&&ot?Ke:(ot||Ae.notifyWith(T,[ze,1,0]),Ae.resolveWith(T,[ze]),!1)},ze=Ae.promise({elem:T,props:_.extend({},A),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},N),originalProperties:A,originalOptions:N,startTime:Bn||wo(),duration:N.duration,tweens:[],createTween:function(mt,Ke){var it=_.Tween(T,ze.opts,mt,Ke,ze.opts.specialEasing[mt]||ze.opts.easing);return ze.tweens.push(it),it},stop:function(mt){var Ke=0,it=mt?ze.tweens.length:0;if(ee)return this;for(ee=!0;Ke<it;Ke++)ze.tweens[Ke].run(1);return mt?(Ae.notifyWith(T,[ze,1,0]),Ae.resolveWith(T,[ze,mt])):Ae.rejectWith(T,[ze,mt]),this}}),Qe=ze.props;for(Ka(Qe,ze.opts.specialEasing);ne<ue;ne++)if(V=hi.prefilters[ne].call(ze,T,Qe,ze.opts),V)return g(V.stop)&&(_._queueHooks(ze.elem,ze.opts.queue).stop=V.stop.bind(V)),V;return _.map(Qe,Ya,ze),g(ze.opts.start)&&ze.opts.start.call(T,ze),ze.progress(ze.opts.progress).done(ze.opts.done,ze.opts.complete).fail(ze.opts.fail).always(ze.opts.always),_.fx.timer(_.extend(Ce,{elem:T,anim:ze,queue:ze.opts.queue})),ze}_.Animation=_.extend(hi,{tweeners:{"*":[function(T,A){var N=this.createTween(T,A);return $e(N.elem,T,ve.exec(A),N),N}]},tweener:function(T,A){g(T)?(A=T,T=["*"]):T=T.match(X);for(var N,V=0,ee=T.length;V<ee;V++)N=T[V],hi.tweeners[N]=hi.tweeners[N]||[],hi.tweeners[N].unshift(A)},prefilters:[_u],prefilter:function(T,A){A?hi.prefilters.unshift(T):hi.prefilters.push(T)}}),_.speed=function(T,A,N){var V=T&&typeof T=="object"?_.extend({},T):{complete:N||!N&&A||g(T)&&T,duration:T,easing:N&&A||A&&!g(A)&&A};return _.fx.off?V.duration=0:typeof V.duration!="number"&&(V.duration in _.fx.speeds?V.duration=_.fx.speeds[V.duration]:V.duration=_.fx.speeds._default),(V.queue==null||V.queue===!0)&&(V.queue="fx"),V.old=V.complete,V.complete=function(){g(V.old)&&V.old.call(this),V.queue&&_.dequeue(this,V.queue)},V},_.fn.extend({fadeTo:function(T,A,N,V){return this.filter(je).css("opacity",0).show().end().animate({opacity:A},T,N,V)},animate:function(T,A,N,V){var ee=_.isEmptyObject(T),ne=_.speed(A,N,V),ue=function(){var Ae=hi(this,_.extend({},T),ne);(ee||be.get(this,"finish"))&&Ae.stop(!0)};return ue.finish=ue,ee||ne.queue===!1?this.each(ue):this.queue(ne.queue,ue)},stop:function(T,A,N){var V=function(ee){var ne=ee.stop;delete ee.stop,ne(N)};return typeof T!="string"&&(N=A,A=T,T=void 0),A&&this.queue(T||"fx",[]),this.each(function(){var ee=!0,ne=T!=null&&T+"queueHooks",ue=_.timers,Ae=be.get(this);if(ne)Ae[ne]&&Ae[ne].stop&&V(Ae[ne]);else for(ne in Ae)Ae[ne]&&Ae[ne].stop&&_i.test(ne)&&V(Ae[ne]);for(ne=ue.length;ne--;)ue[ne].elem===this&&(T==null||ue[ne].queue===T)&&(ue[ne].anim.stop(N),ee=!1,ue.splice(ne,1));(ee||!N)&&_.dequeue(this,T)})},finish:function(T){return T!==!1&&(T=T||"fx"),this.each(function(){var A,N=be.get(this),V=N[T+"queue"],ee=N[T+"queueHooks"],ne=_.timers,ue=V?V.length:0;for(N.finish=!0,_.queue(this,T,[]),ee&&ee.stop&&ee.stop.call(this,!0),A=ne.length;A--;)ne[A].elem===this&&ne[A].queue===T&&(ne[A].anim.stop(!0),ne.splice(A,1));for(A=0;A<ue;A++)V[A]&&V[A].finish&&V[A].finish.call(this);delete N.finish})}}),_.each(["toggle","show","hide"],function(T,A){var N=_.fn[A];_.fn[A]=function(V,ee,ne){return V==null||typeof V=="boolean"?N.apply(this,arguments):this.animate(xo(A,!0),V,ee,ne)}}),_.each({slideDown:xo("show"),slideUp:xo("hide"),slideToggle:xo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(T,A){_.fn[T]=function(N,V,ee){return this.animate(A,N,V,ee)}}),_.timers=[],_.fx.tick=function(){var T,A=0,N=_.timers;for(Bn=Date.now();A<N.length;A++)T=N[A],!T()&&N[A]===T&&N.splice(A--,1);N.length||_.fx.stop(),Bn=void 0},_.fx.timer=function(T){_.timers.push(T),_.fx.start()},_.fx.interval=13,_.fx.start=function(){dn||(dn=!0,qi())},_.fx.stop=function(){dn=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(T,A){return T=_.fx&&_.fx.speeds[T]||T,A=A||"fx",this.queue(A,function(N,V){var ee=t.setTimeout(N,T);V.stop=function(){t.clearTimeout(ee)}})},function(){var T=b.createElement("input"),A=b.createElement("select"),N=A.appendChild(b.createElement("option"));T.type="checkbox",d.checkOn=T.value!=="",d.optSelected=N.selected,T=b.createElement("input"),T.value="t",T.type="radio",d.radioValue=T.value==="t"}();var Ja,Ls=_.expr.attrHandle;_.fn.extend({attr:function(T,A){return ge(this,_.attr,T,A,arguments.length>1)},removeAttr:function(T){return this.each(function(){_.removeAttr(this,T)})}}),_.extend({attr:function(T,A,N){var V,ee,ne=T.nodeType;if(!(ne===3||ne===8||ne===2)){if(typeof T.getAttribute>"u")return _.prop(T,A,N);if((ne!==1||!_.isXMLDoc(T))&&(ee=_.attrHooks[A.toLowerCase()]||(_.expr.match.bool.test(A)?Ja:void 0)),N!==void 0){if(N===null){_.removeAttr(T,A);return}return ee&&"set"in ee&&(V=ee.set(T,N,A))!==void 0?V:(T.setAttribute(A,N+""),N)}return ee&&"get"in ee&&(V=ee.get(T,A))!==null?V:(V=_.find.attr(T,A),V??void 0)}},attrHooks:{type:{set:function(T,A){if(!d.radioValue&&A==="radio"&&U(T,"input")){var N=T.value;return T.setAttribute("type",A),N&&(T.value=N),A}}}},removeAttr:function(T,A){var N,V=0,ee=A&&A.match(X);if(ee&&T.nodeType===1)for(;N=ee[V++];)T.removeAttribute(N)}}),Ja={set:function(T,A,N){return A===!1?_.removeAttr(T,N):T.setAttribute(N,N),N}},_.each(_.expr.match.bool.source.match(/\w+/g),function(T,A){var N=Ls[A]||_.find.attr;Ls[A]=function(V,ee,ne){var ue,Ae,Ce=ee.toLowerCase();return ne||(Ae=Ls[Ce],Ls[Ce]=ue,ue=N(V,ee,ne)!=null?Ce:null,Ls[Ce]=Ae),ue}});var zh=/^(?:input|select|textarea|button)$/i,Qa=/^(?:a|area)$/i;_.fn.extend({prop:function(T,A){return ge(this,_.prop,T,A,arguments.length>1)},removeProp:function(T){return this.each(function(){delete this[_.propFix[T]||T]})}}),_.extend({prop:function(T,A,N){var V,ee,ne=T.nodeType;if(!(ne===3||ne===8||ne===2))return(ne!==1||!_.isXMLDoc(T))&&(A=_.propFix[A]||A,ee=_.propHooks[A]),N!==void 0?ee&&"set"in ee&&(V=ee.set(T,N,A))!==void 0?V:T[A]=N:ee&&"get"in ee&&(V=ee.get(T,A))!==null?V:T[A]},propHooks:{tabIndex:{get:function(T){var A=_.find.attr(T,"tabindex");return A?parseInt(A,10):zh.test(T.nodeName)||Qa.test(T.nodeName)&&T.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(_.propHooks.selected={get:function(T){var A=T.parentNode;return A&&A.parentNode&&A.parentNode.selectedIndex,null},set:function(T){var A=T.parentNode;A&&(A.selectedIndex,A.parentNode&&A.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});function $i(T){var A=T.match(X)||[];return A.join(" ")}function Xi(T){return T.getAttribute&&T.getAttribute("class")||""}function Ns(T){return Array.isArray(T)?T:typeof T=="string"?T.match(X)||[]:[]}_.fn.extend({addClass:function(T){var A,N,V,ee,ne,ue;return g(T)?this.each(function(Ae){_(this).addClass(T.call(this,Ae,Xi(this)))}):(A=Ns(T),A.length?this.each(function(){if(V=Xi(this),N=this.nodeType===1&&" "+$i(V)+" ",N){for(ne=0;ne<A.length;ne++)ee=A[ne],N.indexOf(" "+ee+" ")<0&&(N+=ee+" ");ue=$i(N),V!==ue&&this.setAttribute("class",ue)}}):this)},removeClass:function(T){var A,N,V,ee,ne,ue;return g(T)?this.each(function(Ae){_(this).removeClass(T.call(this,Ae,Xi(this)))}):arguments.length?(A=Ns(T),A.length?this.each(function(){if(V=Xi(this),N=this.nodeType===1&&" "+$i(V)+" ",N){for(ne=0;ne<A.length;ne++)for(ee=A[ne];N.indexOf(" "+ee+" ")>-1;)N=N.replace(" "+ee+" "," ");ue=$i(N),V!==ue&&this.setAttribute("class",ue)}}):this):this.attr("class","")},toggleClass:function(T,A){var N,V,ee,ne,ue=typeof T,Ae=ue==="string"||Array.isArray(T);return g(T)?this.each(function(Ce){_(this).toggleClass(T.call(this,Ce,Xi(this),A),A)}):typeof A=="boolean"&&Ae?A?this.addClass(T):this.removeClass(T):(N=Ns(T),this.each(function(){if(Ae)for(ne=_(this),ee=0;ee<N.length;ee++)V=N[ee],ne.hasClass(V)?ne.removeClass(V):ne.addClass(V);else(T===void 0||ue==="boolean")&&(V=Xi(this),V&&be.set(this,"__className__",V),this.setAttribute&&this.setAttribute("class",V||T===!1?"":be.get(this,"__className__")||""))}))},hasClass:function(T){var A,N,V=0;for(A=" "+T+" ";N=this[V++];)if(N.nodeType===1&&(" "+$i(Xi(N))+" ").indexOf(A)>-1)return!0;return!1}});var Jo=/\r/g;_.fn.extend({val:function(T){var A,N,V,ee=this[0];return arguments.length?(V=g(T),this.each(function(ne){var ue;this.nodeType===1&&(V?ue=T.call(this,ne,_(this).val()):ue=T,ue==null?ue="":typeof ue=="number"?ue+="":Array.isArray(ue)&&(ue=_.map(ue,function(Ae){return Ae==null?"":Ae+""})),A=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],(!A||!("set"in A)||A.set(this,ue,"value")===void 0)&&(this.value=ue))})):ee?(A=_.valHooks[ee.type]||_.valHooks[ee.nodeName.toLowerCase()],A&&"get"in A&&(N=A.get(ee,"value"))!==void 0?N:(N=ee.value,typeof N=="string"?N.replace(Jo,""):N??"")):void 0}}),_.extend({valHooks:{option:{get:function(T){var A=_.find.attr(T,"value");return A??$i(_.text(T))}},select:{get:function(T){var A,N,V,ee=T.options,ne=T.selectedIndex,ue=T.type==="select-one",Ae=ue?null:[],Ce=ue?ne+1:ee.length;for(ne<0?V=Ce:V=ue?ne:0;V<Ce;V++)if(N=ee[V],(N.selected||V===ne)&&!N.disabled&&(!N.parentNode.disabled||!U(N.parentNode,"optgroup"))){if(A=_(N).val(),ue)return A;Ae.push(A)}return Ae},set:function(T,A){for(var N,V,ee=T.options,ne=_.makeArray(A),ue=ee.length;ue--;)V=ee[ue],(V.selected=_.inArray(_.valHooks.option.get(V),ne)>-1)&&(N=!0);return N||(T.selectedIndex=-1),ne}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(T,A){if(Array.isArray(A))return T.checked=_.inArray(_(T).val(),A)>-1}},d.checkOn||(_.valHooks[this].get=function(T){return T.getAttribute("value")===null?"on":T.value})}),d.focusin="onfocusin"in t;var wi=/^(?:focusinfocus|focusoutblur)$/,Za=function(T){T.stopPropagation()};_.extend(_.event,{trigger:function(T,A,N,V){var ee,ne,ue,Ae,Ce,ze,Qe,mt,Ke=[N||b],it=m.call(T,"type")?T.type:T,Lt=m.call(T,"namespace")?T.namespace.split("."):[];if(ne=mt=ue=N=N||b,!(N.nodeType===3||N.nodeType===8)&&!wi.test(it+_.event.triggered)&&(it.indexOf(".")>-1&&(Lt=it.split("."),it=Lt.shift(),Lt.sort()),Ce=it.indexOf(":")<0&&"on"+it,T=T[_.expando]?T:new _.Event(it,typeof T=="object"&&T),T.isTrigger=V?2:3,T.namespace=Lt.join("."),T.rnamespace=T.namespace?new RegExp("(^|\\.)"+Lt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,T.result=void 0,T.target||(T.target=N),A=A==null?[T]:_.makeArray(A,[T]),Qe=_.event.special[it]||{},!(!V&&Qe.trigger&&Qe.trigger.apply(N,A)===!1))){if(!V&&!Qe.noBubble&&!y(N)){for(Ae=Qe.delegateType||it,wi.test(Ae+it)||(ne=ne.parentNode);ne;ne=ne.parentNode)Ke.push(ne),ue=ne;ue===(N.ownerDocument||b)&&Ke.push(ue.defaultView||ue.parentWindow||t)}for(ee=0;(ne=Ke[ee++])&&!T.isPropagationStopped();)mt=ne,T.type=ee>1?Ae:Qe.bindType||it,ze=(be.get(ne,"events")||Object.create(null))[T.type]&&be.get(ne,"handle"),ze&&ze.apply(ne,A),ze=Ce&&ne[Ce],ze&&ze.apply&&oe(ne)&&(T.result=ze.apply(ne,A),T.result===!1&&T.preventDefault());return T.type=it,!V&&!T.isDefaultPrevented()&&(!Qe._default||Qe._default.apply(Ke.pop(),A)===!1)&&oe(N)&&Ce&&g(N[it])&&!y(N)&&(ue=N[Ce],ue&&(N[Ce]=null),_.event.triggered=it,T.isPropagationStopped()&&mt.addEventListener(it,Za),N[it](),T.isPropagationStopped()&&mt.removeEventListener(it,Za),_.event.triggered=void 0,ue&&(N[Ce]=ue)),T.result}},simulate:function(T,A,N){var V=_.extend(new _.Event,N,{type:T,isSimulated:!0});_.event.trigger(V,null,A)}}),_.fn.extend({trigger:function(T,A){return this.each(function(){_.event.trigger(T,A,this)})},triggerHandler:function(T,A){var N=this[0];if(N)return _.event.trigger(T,A,N,!0)}}),d.focusin||_.each({focus:"focusin",blur:"focusout"},function(T,A){var N=function(V){_.event.simulate(A,V.target,_.event.fix(V))};_.event.special[A]={setup:function(){var V=this.ownerDocument||this.document||this,ee=be.access(V,A);ee||V.addEventListener(T,N,!0),be.access(V,A,(ee||0)+1)},teardown:function(){var V=this.ownerDocument||this.document||this,ee=be.access(V,A)-1;ee?be.access(V,A,ee):(V.removeEventListener(T,N,!0),be.remove(V,A))}}});var Bs=t.location,gs={guid:Date.now()},Qo=/\?/;_.parseXML=function(T){var A,N;if(!T||typeof T!="string")return null;try{A=new t.DOMParser().parseFromString(T,"text/xml")}catch{}return N=A&&A.getElementsByTagName("parsererror")[0],(!A||N)&&_.error("Invalid XML: "+(N?_.map(N.childNodes,function(V){return V.textContent}).join(`
`):T)),A};var Wh=/\[\]$/,Zo=/\r?\n/g,wu=/^(?:submit|button|image|reset|file)$/i,qh=/^(?:input|select|textarea|keygen)/i;function ea(T,A,N,V){var ee;if(Array.isArray(A))_.each(A,function(ne,ue){N||Wh.test(T)?V(T,ue):ea(T+"["+(typeof ue=="object"&&ue!=null?ne:"")+"]",ue,N,V)});else if(!N&&S(A)==="object")for(ee in A)ea(T+"["+ee+"]",A[ee],N,V);else V(T,A)}_.param=function(T,A){var N,V=[],ee=function(ne,ue){var Ae=g(ue)?ue():ue;V[V.length]=encodeURIComponent(ne)+"="+encodeURIComponent(Ae??"")};if(T==null)return"";if(Array.isArray(T)||T.jquery&&!_.isPlainObject(T))_.each(T,function(){ee(this.name,this.value)});else for(N in T)ea(N,T[N],A,ee);return V.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var T=_.prop(this,"elements");return T?_.makeArray(T):this}).filter(function(){var T=this.type;return this.name&&!_(this).is(":disabled")&&qh.test(this.nodeName)&&!wu.test(T)&&(this.checked||!$.test(T))}).map(function(T,A){var N=_(this).val();return N==null?null:Array.isArray(N)?_.map(N,function(V){return{name:A.name,value:V.replace(Zo,`\r
`)}}):{name:A.name,value:N.replace(Zo,`\r
`)}}).get()}});var xu=/%20/g,$h=/#.*$/,Su=/([?&])_=[^&]*/,Xh=/^(.*?):[ \t]*([^\r\n]*)$/mg,Yh=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Kh=/^(?:GET|HEAD)$/,Jh=/^\/\//,el={},di={},Oi="*/".concat("*"),ys=b.createElement("a");ys.href=Bs.href;function Fs(T){return function(A,N){typeof A!="string"&&(N=A,A="*");var V,ee=0,ne=A.toLowerCase().match(X)||[];if(g(N))for(;V=ne[ee++];)V[0]==="+"?(V=V.slice(1)||"*",(T[V]=T[V]||[]).unshift(N)):(T[V]=T[V]||[]).push(N)}}function Ii(T,A,N,V){var ee={},ne=T===di;function ue(Ae){var Ce;return ee[Ae]=!0,_.each(T[Ae]||[],function(ze,Qe){var mt=Qe(A,N,V);if(typeof mt=="string"&&!ne&&!ee[mt])return A.dataTypes.unshift(mt),ue(mt),!1;if(ne)return!(Ce=mt)}),Ce}return ue(A.dataTypes[0])||!ee["*"]&&ue("*")}function vs(T,A){var N,V,ee=_.ajaxSettings.flatOptions||{};for(N in A)A[N]!==void 0&&((ee[N]?T:V||(V={}))[N]=A[N]);return V&&_.extend(!0,T,V),T}function Qh(T,A,N){for(var V,ee,ne,ue,Ae=T.contents,Ce=T.dataTypes;Ce[0]==="*";)Ce.shift(),V===void 0&&(V=T.mimeType||A.getResponseHeader("Content-Type"));if(V){for(ee in Ae)if(Ae[ee]&&Ae[ee].test(V)){Ce.unshift(ee);break}}if(Ce[0]in N)ne=Ce[0];else{for(ee in N){if(!Ce[0]||T.converters[ee+" "+Ce[0]]){ne=ee;break}ue||(ue=ee)}ne=ne||ue}if(ne)return ne!==Ce[0]&&Ce.unshift(ne),N[ne]}function Yi(T,A,N,V){var ee,ne,ue,Ae,Ce,ze={},Qe=T.dataTypes.slice();if(Qe[1])for(ue in T.converters)ze[ue.toLowerCase()]=T.converters[ue];for(ne=Qe.shift();ne;)if(T.responseFields[ne]&&(N[T.responseFields[ne]]=A),!Ce&&V&&T.dataFilter&&(A=T.dataFilter(A,T.dataType)),Ce=ne,ne=Qe.shift(),ne){if(ne==="*")ne=Ce;else if(Ce!=="*"&&Ce!==ne){if(ue=ze[Ce+" "+ne]||ze["* "+ne],!ue){for(ee in ze)if(Ae=ee.split(" "),Ae[1]===ne&&(ue=ze[Ce+" "+Ae[0]]||ze["* "+Ae[0]],ue)){ue===!0?ue=ze[ee]:ze[ee]!==!0&&(ne=Ae[0],Qe.unshift(Ae[1]));break}}if(ue!==!0)if(ue&&T.throws)A=ue(A);else try{A=ue(A)}catch(mt){return{state:"parsererror",error:ue?mt:"No conversion from "+Ce+" to "+ne}}}}return{state:"success",data:A}}_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Bs.href,type:"GET",isLocal:Yh.test(Bs.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(T,A){return A?vs(vs(T,_.ajaxSettings),A):vs(_.ajaxSettings,T)},ajaxPrefilter:Fs(el),ajaxTransport:Fs(di),ajax:function(T,A){typeof T=="object"&&(A=T,T=void 0),A=A||{};var N,V,ee,ne,ue,Ae,Ce,ze,Qe,mt,Ke=_.ajaxSetup({},A),it=Ke.context||Ke,Lt=Ke.context&&(it.nodeType||it.jquery)?_(it):_.event,Yt=_.Deferred(),ot=_.Callbacks("once memory"),bn=Ke.statusCode||{},fn={},Sn={},Pr="canceled",sr={readyState:0,getResponseHeader:function(xr){var rn;if(Ce){if(!ne)for(ne={};rn=Xh.exec(ee);)ne[rn[1].toLowerCase()+" "]=(ne[rn[1].toLowerCase()+" "]||[]).concat(rn[2]);rn=ne[xr.toLowerCase()+" "]}return rn==null?null:rn.join(", ")},getAllResponseHeaders:function(){return Ce?ee:null},setRequestHeader:function(xr,rn){return Ce==null&&(xr=Sn[xr.toLowerCase()]=Sn[xr.toLowerCase()]||xr,fn[xr]=rn),this},overrideMimeType:function(xr){return Ce==null&&(Ke.mimeType=xr),this},statusCode:function(xr){var rn;if(xr)if(Ce)sr.always(xr[sr.status]);else for(rn in xr)bn[rn]=[bn[rn],xr[rn]];return this},abort:function(xr){var rn=xr||Pr;return N&&N.abort(rn),mr(0,rn),this}};if(Yt.promise(sr),Ke.url=((T||Ke.url||Bs.href)+"").replace(Jh,Bs.protocol+"//"),Ke.type=A.method||A.type||Ke.method||Ke.type,Ke.dataTypes=(Ke.dataType||"*").toLowerCase().match(X)||[""],Ke.crossDomain==null){Ae=b.createElement("a");try{Ae.href=Ke.url,Ae.href=Ae.href,Ke.crossDomain=ys.protocol+"//"+ys.host!=Ae.protocol+"//"+Ae.host}catch{Ke.crossDomain=!0}}if(Ke.data&&Ke.processData&&typeof Ke.data!="string"&&(Ke.data=_.param(Ke.data,Ke.traditional)),Ii(el,Ke,A,sr),Ce)return sr;ze=_.event&&Ke.global,ze&&_.active++===0&&_.event.trigger("ajaxStart"),Ke.type=Ke.type.toUpperCase(),Ke.hasContent=!Kh.test(Ke.type),V=Ke.url.replace($h,""),Ke.hasContent?Ke.data&&Ke.processData&&(Ke.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ke.data=Ke.data.replace(xu,"+")):(mt=Ke.url.slice(V.length),Ke.data&&(Ke.processData||typeof Ke.data=="string")&&(V+=(Qo.test(V)?"&":"?")+Ke.data,delete Ke.data),Ke.cache===!1&&(V=V.replace(Su,"$1"),mt=(Qo.test(V)?"&":"?")+"_="+gs.guid+++mt),Ke.url=V+mt),Ke.ifModified&&(_.lastModified[V]&&sr.setRequestHeader("If-Modified-Since",_.lastModified[V]),_.etag[V]&&sr.setRequestHeader("If-None-Match",_.etag[V])),(Ke.data&&Ke.hasContent&&Ke.contentType!==!1||A.contentType)&&sr.setRequestHeader("Content-Type",Ke.contentType),sr.setRequestHeader("Accept",Ke.dataTypes[0]&&Ke.accepts[Ke.dataTypes[0]]?Ke.accepts[Ke.dataTypes[0]]+(Ke.dataTypes[0]!=="*"?", "+Oi+"; q=0.01":""):Ke.accepts["*"]);for(Qe in Ke.headers)sr.setRequestHeader(Qe,Ke.headers[Qe]);if(Ke.beforeSend&&(Ke.beforeSend.call(it,sr,Ke)===!1||Ce))return sr.abort();if(Pr="abort",ot.add(Ke.complete),sr.done(Ke.success),sr.fail(Ke.error),N=Ii(di,Ke,A,sr),!N)mr(-1,"No Transport");else{if(sr.readyState=1,ze&&Lt.trigger("ajaxSend",[sr,Ke]),Ce)return sr;Ke.async&&Ke.timeout>0&&(ue=t.setTimeout(function(){sr.abort("timeout")},Ke.timeout));try{Ce=!1,N.send(fn,mr)}catch(xr){if(Ce)throw xr;mr(-1,xr)}}function mr(xr,rn,Fn,na){var ri,bs,_s,qn,Ki,ni=rn;Ce||(Ce=!0,ue&&t.clearTimeout(ue),N=void 0,ee=na||"",sr.readyState=xr>0?4:0,ri=xr>=200&&xr<300||xr===304,Fn&&(qn=Qh(Ke,sr,Fn)),!ri&&_.inArray("script",Ke.dataTypes)>-1&&_.inArray("json",Ke.dataTypes)<0&&(Ke.converters["text script"]=function(){}),qn=Yi(Ke,qn,sr,ri),ri?(Ke.ifModified&&(Ki=sr.getResponseHeader("Last-Modified"),Ki&&(_.lastModified[V]=Ki),Ki=sr.getResponseHeader("etag"),Ki&&(_.etag[V]=Ki)),xr===204||Ke.type==="HEAD"?ni="nocontent":xr===304?ni="notmodified":(ni=qn.state,bs=qn.data,_s=qn.error,ri=!_s)):(_s=ni,(xr||!ni)&&(ni="error",xr<0&&(xr=0))),sr.status=xr,sr.statusText=(rn||ni)+"",ri?Yt.resolveWith(it,[bs,ni,sr]):Yt.rejectWith(it,[sr,ni,_s]),sr.statusCode(bn),bn=void 0,ze&&Lt.trigger(ri?"ajaxSuccess":"ajaxError",[sr,Ke,ri?bs:_s]),ot.fireWith(it,[sr,ni]),ze&&(Lt.trigger("ajaxComplete",[sr,Ke]),--_.active||_.event.trigger("ajaxStop")))}return sr},getJSON:function(T,A,N){return _.get(T,A,N,"json")},getScript:function(T,A){return _.get(T,void 0,A,"script")}}),_.each(["get","post"],function(T,A){_[A]=function(N,V,ee,ne){return g(V)&&(ne=ne||ee,ee=V,V=void 0),_.ajax(_.extend({url:N,type:A,dataType:ne,data:V,success:ee},_.isPlainObject(N)&&N))}}),_.ajaxPrefilter(function(T){var A;for(A in T.headers)A.toLowerCase()==="content-type"&&(T.contentType=T.headers[A]||"")}),_._evalUrl=function(T,A,N){return _.ajax({url:T,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(V){_.globalEval(V,A,N)}})},_.fn.extend({wrapAll:function(T){var A;return this[0]&&(g(T)&&(T=T.call(this[0])),A=_(T,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&A.insertBefore(this[0]),A.map(function(){for(var N=this;N.firstElementChild;)N=N.firstElementChild;return N}).append(this)),this},wrapInner:function(T){return g(T)?this.each(function(A){_(this).wrapInner(T.call(this,A))}):this.each(function(){var A=_(this),N=A.contents();N.length?N.wrapAll(T):A.append(T)})},wrap:function(T){var A=g(T);return this.each(function(N){_(this).wrapAll(A?T.call(this,N):T)})},unwrap:function(T){return this.parent(T).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(T){return!_.expr.pseudos.visible(T)},_.expr.pseudos.visible=function(T){return!!(T.offsetWidth||T.offsetHeight||T.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var ta={0:200,1223:204},Us=_.ajaxSettings.xhr();d.cors=!!Us&&"withCredentials"in Us,d.ajax=Us=!!Us,_.ajaxTransport(function(T){var A,N;if(d.cors||Us&&!T.crossDomain)return{send:function(V,ee){var ne,ue=T.xhr();if(ue.open(T.type,T.url,T.async,T.username,T.password),T.xhrFields)for(ne in T.xhrFields)ue[ne]=T.xhrFields[ne];T.mimeType&&ue.overrideMimeType&&ue.overrideMimeType(T.mimeType),!T.crossDomain&&!V["X-Requested-With"]&&(V["X-Requested-With"]="XMLHttpRequest");for(ne in V)ue.setRequestHeader(ne,V[ne]);A=function(Ae){return function(){A&&(A=N=ue.onload=ue.onerror=ue.onabort=ue.ontimeout=ue.onreadystatechange=null,Ae==="abort"?ue.abort():Ae==="error"?typeof ue.status!="number"?ee(0,"error"):ee(ue.status,ue.statusText):ee(ta[ue.status]||ue.status,ue.statusText,(ue.responseType||"text")!=="text"||typeof ue.responseText!="string"?{binary:ue.response}:{text:ue.responseText},ue.getAllResponseHeaders()))}},ue.onload=A(),N=ue.onerror=ue.ontimeout=A("error"),ue.onabort!==void 0?ue.onabort=N:ue.onreadystatechange=function(){ue.readyState===4&&t.setTimeout(function(){A&&N()})},A=A("abort");try{ue.send(T.hasContent&&T.data||null)}catch(Ae){if(A)throw Ae}},abort:function(){A&&A()}}}),_.ajaxPrefilter(function(T){T.crossDomain&&(T.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(T){return _.globalEval(T),T}}}),_.ajaxPrefilter("script",function(T){T.cache===void 0&&(T.cache=!1),T.crossDomain&&(T.type="GET")}),_.ajaxTransport("script",function(T){if(T.crossDomain||T.scriptAttrs){var A,N;return{send:function(V,ee){A=_("<script>").attr(T.scriptAttrs||{}).prop({charset:T.scriptCharset,src:T.url}).on("load error",N=function(ne){A.remove(),N=null,ne&&ee(ne.type==="error"?404:200,ne.type)}),b.head.appendChild(A[0])},abort:function(){N&&N()}}}});var tl=[],ra=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var T=tl.pop()||_.expando+"_"+gs.guid++;return this[T]=!0,T}}),_.ajaxPrefilter("json jsonp",function(T,A,N){var V,ee,ne,ue=T.jsonp!==!1&&(ra.test(T.url)?"url":typeof T.data=="string"&&(T.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ra.test(T.data)&&"data");if(ue||T.dataTypes[0]==="jsonp")return V=T.jsonpCallback=g(T.jsonpCallback)?T.jsonpCallback():T.jsonpCallback,ue?T[ue]=T[ue].replace(ra,"$1"+V):T.jsonp!==!1&&(T.url+=(Qo.test(T.url)?"&":"?")+T.jsonp+"="+V),T.converters["script json"]=function(){return ne||_.error(V+" was not called"),ne[0]},T.dataTypes[0]="json",ee=t[V],t[V]=function(){ne=arguments},N.always(function(){ee===void 0?_(t).removeProp(V):t[V]=ee,T[V]&&(T.jsonpCallback=A.jsonpCallback,tl.push(V)),ne&&g(ee)&&ee(ne[0]),ne=ee=void 0}),"script"}),d.createHTMLDocument=function(){var T=b.implementation.createHTMLDocument("").body;return T.innerHTML="<form></form><form></form>",T.childNodes.length===2}(),_.parseHTML=function(T,A,N){if(typeof T!="string")return[];typeof A=="boolean"&&(N=A,A=!1);var V,ee,ne;return A||(d.createHTMLDocument?(A=b.implementation.createHTMLDocument(""),V=A.createElement("base"),V.href=b.location.href,A.head.appendChild(V)):A=b),ee=F.exec(T),ne=!N&&[],ee?[A.createElement(ee[1])]:(ee=ft([T],A,ne),ne&&ne.length&&_(ne).remove(),_.merge([],ee.childNodes))},_.fn.load=function(T,A,N){var V,ee,ne,ue=this,Ae=T.indexOf(" ");return Ae>-1&&(V=$i(T.slice(Ae)),T=T.slice(0,Ae)),g(A)?(N=A,A=void 0):A&&typeof A=="object"&&(ee="POST"),ue.length>0&&_.ajax({url:T,type:ee||"GET",dataType:"html",data:A}).done(function(Ce){ne=arguments,ue.html(V?_("<div>").append(_.parseHTML(Ce)).find(V):Ce)}).always(N&&function(Ce,ze){ue.each(function(){N.apply(this,ne||[Ce.responseText,ze,Ce])})}),this},_.expr.pseudos.animated=function(T){return _.grep(_.timers,function(A){return T===A.elem}).length},_.offset={setOffset:function(T,A,N){var V,ee,ne,ue,Ae,Ce,ze,Qe=_.css(T,"position"),mt=_(T),Ke={};Qe==="static"&&(T.style.position="relative"),Ae=mt.offset(),ne=_.css(T,"top"),Ce=_.css(T,"left"),ze=(Qe==="absolute"||Qe==="fixed")&&(ne+Ce).indexOf("auto")>-1,ze?(V=mt.position(),ue=V.top,ee=V.left):(ue=parseFloat(ne)||0,ee=parseFloat(Ce)||0),g(A)&&(A=A.call(T,N,_.extend({},Ae))),A.top!=null&&(Ke.top=A.top-Ae.top+ue),A.left!=null&&(Ke.left=A.left-Ae.left+ee),"using"in A?A.using.call(T,Ke):mt.css(Ke)}},_.fn.extend({offset:function(T){if(arguments.length)return T===void 0?this:this.each(function(ee){_.offset.setOffset(this,T,ee)});var A,N,V=this[0];if(V)return V.getClientRects().length?(A=V.getBoundingClientRect(),N=V.ownerDocument.defaultView,{top:A.top+N.pageYOffset,left:A.left+N.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var T,A,N,V=this[0],ee={top:0,left:0};if(_.css(V,"position")==="fixed")A=V.getBoundingClientRect();else{for(A=this.offset(),N=V.ownerDocument,T=V.offsetParent||N.documentElement;T&&(T===N.body||T===N.documentElement)&&_.css(T,"position")==="static";)T=T.parentNode;T&&T!==V&&T.nodeType===1&&(ee=_(T).offset(),ee.top+=_.css(T,"borderTopWidth",!0),ee.left+=_.css(T,"borderLeftWidth",!0))}return{top:A.top-ee.top-_.css(V,"marginTop",!0),left:A.left-ee.left-_.css(V,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var T=this.offsetParent;T&&_.css(T,"position")==="static";)T=T.offsetParent;return T||Fe})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(T,A){var N=A==="pageYOffset";_.fn[T]=function(V){return ge(this,function(ee,ne,ue){var Ae;if(y(ee)?Ae=ee:ee.nodeType===9&&(Ae=ee.defaultView),ue===void 0)return Ae?Ae[A]:ee[ne];Ae?Ae.scrollTo(N?Ae.pageXOffset:ue,N?ue:Ae.pageYOffset):ee[ne]=ue},T,V,arguments.length)}}),_.each(["top","left"],function(T,A){_.cssHooks[A]=ut(d.pixelPosition,function(N,V){if(V)return V=bt(N,A),vn.test(V)?_(N).position()[A]+"px":V})}),_.each({Height:"height",Width:"width"},function(T,A){_.each({padding:"inner"+T,content:A,"":"outer"+T},function(N,V){_.fn[V]=function(ee,ne){var ue=arguments.length&&(N||typeof ee!="boolean"),Ae=N||(ee===!0||ne===!0?"margin":"border");return ge(this,function(Ce,ze,Qe){var mt;return y(Ce)?V.indexOf("outer")===0?Ce["inner"+T]:Ce.document.documentElement["client"+T]:Ce.nodeType===9?(mt=Ce.documentElement,Math.max(Ce.body["scroll"+T],mt["scroll"+T],Ce.body["offset"+T],mt["offset"+T],mt["client"+T])):Qe===void 0?_.css(Ce,ze,Ae):_.style(Ce,ze,Qe,Ae)},A,ue?ee:void 0,ue)}})}),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(T,A){_.fn[A]=function(N){return this.on(A,N)}}),_.fn.extend({bind:function(T,A,N){return this.on(T,null,A,N)},unbind:function(T,A){return this.off(T,null,A)},delegate:function(T,A,N,V){return this.on(A,T,N,V)},undelegate:function(T,A,N){return arguments.length===1?this.off(T,"**"):this.off(A,T||"**",N)},hover:function(T,A){return this.mouseenter(T).mouseleave(A||T)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(T,A){_.fn[A]=function(N,V){return arguments.length>0?this.on(A,null,N,V):this.trigger(A)}});var ju=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;_.proxy=function(T,A){var N,V,ee;if(typeof A=="string"&&(N=T[A],A=T,T=N),!!g(T))return V=a.call(arguments,2),ee=function(){return T.apply(A||this,V.concat(a.call(arguments)))},ee.guid=T.guid=T.guid||_.guid++,ee},_.holdReady=function(T){T?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=U,_.isFunction=g,_.isWindow=y,_.camelCase=Te,_.type=S,_.now=Date.now,_.isNumeric=function(T){var A=_.type(T);return(A==="number"||A==="string")&&!isNaN(T-parseFloat(T))},_.trim=function(T){return T==null?"":(T+"").replace(ju,"$1")};var Cu=t.jQuery,Tu=t.$;return _.noConflict=function(T){return t.$===_&&(t.$=Tu),T&&t.jQuery===_&&(t.jQuery=Cu),_},typeof n>"u"&&(t.jQuery=t.$=_),_})})(yx);const zr=Ud,L0=`// vert file and comments from adam ferriss
// https://github.com/aferriss/p5jsShaderExamples

// our vertex data
attribute vec3 aPosition;
attribute vec2 aTexCoord;

// lets get texcoords just for fun!
varying vec2 vTexCoord;

void main() {
    // copy the texcoords
    vTexCoord = aTexCoord;
    
    // copy the position data into a vec4, using 1.0 as the w component
    vec4 positionVec4 = vec4(aPosition, 1.0);
    positionVec4.xy = positionVec4.xy * 2.0 - 1.0;
    
    // send the vertex information on to the fragment shader
    gl_Position = positionVec4;
}
`;function Eu(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vd={},vx={get exports(){return Vd},set exports(i){Vd=i}};/*! p5.js v1.6.0 February 22, 2023 */(function(i,t){(function(n){i.exports=n()})(function(){var n;return function r(s,a,o){function u(p,m){if(!a[p]){if(!s[p]){var h=typeof Eu=="function"&&Eu;if(!m&&h)return h(p,!0);if(l)return l(p,!0);throw(m=new Error("Cannot find module '"+p+"'")).code="MODULE_NOT_FOUND",m}h=a[p]={exports:{}},s[p][0].call(h.exports,function(f){return u(s[p][1][f]||f)},h,h.exports,r,s,a,o)}return a[p].exports}for(var l=typeof Eu=="function"&&Eu,c=0;c<o.length;c++)u(o[c]);return u}({1:[function(r,s,a){a.byteLength=function(g){var g=h(g),d=g[0],g=g[1];return 3*(d+g)/4-g},a.toByteArray=function(f){var d,g,b=h(f),y=b[0],b=b[1],x=new l(function(w,_){return 3*(w+_)/4-_}(y,b)),j=0,S=0<b?y-4:y;for(g=0;g<S;g+=4)d=u[f.charCodeAt(g)]<<18|u[f.charCodeAt(g+1)]<<12|u[f.charCodeAt(g+2)]<<6|u[f.charCodeAt(g+3)],x[j++]=d>>16&255,x[j++]=d>>8&255,x[j++]=255&d;return b===2&&(d=u[f.charCodeAt(g)]<<2|u[f.charCodeAt(g+1)]>>4,x[j++]=255&d),b===1&&(d=u[f.charCodeAt(g)]<<10|u[f.charCodeAt(g+1)]<<4|u[f.charCodeAt(g+2)]>>2,x[j++]=d>>8&255,x[j++]=255&d),x},a.fromByteArray=function(f){for(var d,g=f.length,y=g%3,b=[],x=0,j=g-y;x<j;x+=16383)b.push(function(S,w,_){for(var M,I=[],P=w;P<_;P+=3)M=(S[P]<<16&16711680)+(S[P+1]<<8&65280)+(255&S[P+2]),I.push(function(R){return o[R>>18&63]+o[R>>12&63]+o[R>>6&63]+o[63&R]}(M));return I.join("")}(f,x,j<x+16383?j:x+16383));return y==1?(d=f[g-1],b.push(o[d>>2]+o[d<<4&63]+"==")):y==2&&(d=(f[g-2]<<8)+f[g-1],b.push(o[d>>10]+o[d>>4&63]+o[d<<2&63]+"=")),b.join("")};for(var o=[],u=[],l=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,m=c.length;p<m;++p)o[p]=c[p],u[c.charCodeAt(p)]=p;function h(f){var d=f.length;if(0<d%4)throw new Error("Invalid string. Length must be a multiple of 4");return f=f.indexOf("="),d=(f=f===-1?d:f)===d?0:4-f%4,[f,d]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],2:[function(r,s,a){},{}],3:[function(r,s,a){arguments[4][2][0].apply(a,arguments)},{dup:2}],4:[function(r,s,a){(function(h){var u=r("base64-js"),l=r("ieee754"),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,p=(a.Buffer=h,a.SlowBuffer=function(O){return+O!=O&&(O=0),h.alloc(+O)},a.INSPECT_MAX_BYTES=50,2147483647);function m(O){if(p<O)throw new RangeError('The value "'+O+'" is invalid for option "size"');return O=new Uint8Array(O),Object.setPrototypeOf(O,h.prototype),O}function h(O,B,W){if(typeof O!="number")return f(O,B,W);if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(O)}function f(O,B,W){if(typeof O=="string"){var re=O,ae=B;if(h.isEncoding(ae=typeof ae=="string"&&ae!==""?ae:"utf8"))return me=0|x(re,ae),ge=m(me),ge=(re=ge.write(re,ae))!==me?ge.slice(0,re):ge;throw new TypeError("Unknown encoding: "+ae)}if(ArrayBuffer.isView(O))return y(O);if(O!=null){if(Y(O,ArrayBuffer)||O&&Y(O.buffer,ArrayBuffer)){var me=O,re=B,ge=W;if(re<0||me.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(me.byteLength<re+(ge||0))throw new RangeError('"length" is outside of buffer bounds');return me=re===void 0&&ge===void 0?new Uint8Array(me):ge===void 0?new Uint8Array(me,re):new Uint8Array(me,re,ge),Object.setPrototypeOf(me,h.prototype),me}if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(ae=O.valueOf&&O.valueOf(),ae!=null&&ae!==O)return h.from(ae,B,W);var xe=function(fe){{var ye,Te;if(h.isBuffer(fe))return ye=0|b(fe.length),(Te=m(ye)).length!==0&&fe.copy(Te,0,0,ye),Te}if(fe.length!==void 0)return typeof fe.length!="number"||X(fe.length)?m(0):y(fe);if(fe.type==="Buffer"&&Array.isArray(fe.data))return y(fe.data)}(O);if(xe)return xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return h.from(O[Symbol.toPrimitive]("string"),B,W)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function d(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function g(O){return d(O),m(O<0?0:0|b(O))}function y(O){for(var B=O.length<0?0:0|b(O.length),W=m(B),re=0;re<B;re+=1)W[re]=255&O[re];return W}function b(O){if(p<=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|O}function x(O,B){if(h.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Y(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var W=O.length,re=2<arguments.length&&arguments[2]===!0;if(!re&&W===0)return 0;for(var ae=!1;;)switch(B){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return te(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*W;case"hex":return W>>>1;case"base64":return Z(O).length;default:if(ae)return re?-1:te(O).length;B=(""+B).toLowerCase(),ae=!0}}function j(O,B,W){var re,ae=!1;if((B=B===void 0||B<0?0:B)>this.length||(W=W===void 0||W>this.length?this.length:W)<=0||(W>>>=0)<=(B>>>=0))return"";for(O=O||"utf8";;)switch(O){case"hex":var me=this,Me=B,ge=W,Te=me.length;(!ge||ge<0||Te<ge)&&(ge=Te);for(var xe="",fe=Me=!Me||Me<0?0:Me;fe<ge;++fe)xe+=ce[me[fe]];return xe;case"utf8":case"utf-8":return P(this,B,W);case"ascii":var ye=this,Te=B,oe=W,Se="";oe=Math.min(ye.length,oe);for(var be=Te;be<oe;++be)Se+=String.fromCharCode(127&ye[be]);return Se;case"latin1":case"binary":var Ie=this,Me=B,Ve=W,Be="";Ve=Math.min(Ie.length,Ve);for(var tt=Me;tt<Ve;++tt)Be+=String.fromCharCode(Ie[tt]);return Be;case"base64":return Ue=this,re=W,(ve=B)===0&&re===Ue.length?u.fromByteArray(Ue):u.fromByteArray(Ue.slice(ve,re));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Ue=B,ve=W,Le=this.slice(Ue,ve),Fe="",Ze=0;Ze<Le.length;Ze+=2)Fe+=String.fromCharCode(Le[Ze]+256*Le[Ze+1]);return Fe;default:if(ae)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),ae=!0}}function S(O,B,W){var re=O[B];O[B]=O[W],O[W]=re}function w(O,B,W,re,ae){if(O.length===0)return-1;if(typeof W=="string"?(re=W,W=0):2147483647<W?W=2147483647:W<-2147483648&&(W=-2147483648),(W=(W=X(W=+W)?ae?0:O.length-1:W)<0?O.length+W:W)>=O.length){if(ae)return-1;W=O.length-1}else if(W<0){if(!ae)return-1;W=0}if(typeof B=="string"&&(B=h.from(B,re)),h.isBuffer(B))return B.length===0?-1:_(O,B,W,re,ae);if(typeof B=="number")return B&=255,typeof Uint8Array.prototype.indexOf=="function"?(ae?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(O,B,W):_(O,[B],W,re,ae);throw new TypeError("val must be string, number or Buffer")}function _(O,B,W,re,ae){var me=1,ge=O.length,xe=B.length;if(re!==void 0&&((re=String(re).toLowerCase())==="ucs2"||re==="ucs-2"||re==="utf16le"||re==="utf-16le")){if(O.length<2||B.length<2)return-1;ge/=me=2,xe/=2,W/=2}function fe(be,Ie){return me===1?be[Ie]:be.readUInt16BE(Ie*me)}if(ae)for(var ye=-1,Te=W;Te<ge;Te++)if(fe(O,Te)===fe(B,ye===-1?0:Te-ye)){if(Te-(ye=ye===-1?Te:ye)+1===xe)return ye*me}else ye!==-1&&(Te-=Te-ye),ye=-1;else for(Te=W=ge<W+xe?ge-xe:W;0<=Te;Te--){for(var oe=!0,Se=0;Se<xe;Se++)if(fe(O,Te+Se)!==fe(B,Se)){oe=!1;break}if(oe)return Te}return-1}function M(O,B,W,re){return q(function(ae){for(var me=[],ge=0;ge<ae.length;++ge)me.push(255&ae.charCodeAt(ge));return me}(B),O,W,re)}function I(O,B,W,re){return q(function(ae,me){for(var ge,xe,fe=[],ye=0;ye<ae.length&&!((me-=2)<0);++ye)xe=ae.charCodeAt(ye),ge=xe>>8,xe=xe%256,fe.push(xe),fe.push(ge);return fe}(B,O.length-W),O,W,re)}function P(O,B,W){W=Math.min(O.length,W);for(var re=[],ae=B;ae<W;){var me,ge,xe,fe,ye=O[ae],Te=null,oe=239<ye?4:223<ye?3:191<ye?2:1;if(ae+oe<=W)switch(oe){case 1:ye<128&&(Te=ye);break;case 2:(192&(me=O[ae+1]))==128&&127<(fe=(31&ye)<<6|63&me)&&(Te=fe);break;case 3:me=O[ae+1],ge=O[ae+2],(192&me)==128&&(192&ge)==128&&2047<(fe=(15&ye)<<12|(63&me)<<6|63&ge)&&(fe<55296||57343<fe)&&(Te=fe);break;case 4:me=O[ae+1],ge=O[ae+2],xe=O[ae+3],(192&me)==128&&(192&ge)==128&&(192&xe)==128&&65535<(fe=(15&ye)<<18|(63&me)<<12|(63&ge)<<6|63&xe)&&fe<1114112&&(Te=fe)}Te===null?(Te=65533,oe=1):65535<Te&&(Te-=65536,re.push(Te>>>10&1023|55296),Te=56320|1023&Te),re.push(Te),ae+=oe}var Se=re,be=Se.length;if(be<=R)return String.fromCharCode.apply(String,Se);for(var Ie="",Me=0;Me<be;)Ie+=String.fromCharCode.apply(String,Se.slice(Me,Me+=R));return Ie}a.kMaxLength=p,(h.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(O,B),O.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=f,Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(O,B,W){return B=B,W=W,d(O=O),!(O<=0)&&B!==void 0?typeof W=="string"?m(O).fill(B,W):m(O).fill(B):m(O)},h.allocUnsafe=g,h.allocUnsafeSlow=g,h.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==h.prototype},h.compare=function(O,B){if(Y(O,Uint8Array)&&(O=h.from(O,O.offset,O.byteLength)),Y(B,Uint8Array)&&(B=h.from(B,B.offset,B.byteLength)),!h.isBuffer(O)||!h.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===B)return 0;for(var W=O.length,re=B.length,ae=0,me=Math.min(W,re);ae<me;++ae)if(O[ae]!==B[ae]){W=O[ae],re=B[ae];break}return W<re?-1:re<W?1:0},h.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(O,B){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return h.alloc(0);if(B===void 0)for(ae=B=0;ae<O.length;++ae)B+=O[ae].length;for(var W=h.allocUnsafe(B),re=0,ae=0;ae<O.length;++ae){var me=O[ae];if(Y(me,Uint8Array)&&(me=h.from(me)),!h.isBuffer(me))throw new TypeError('"list" argument must be an Array of Buffers');me.copy(W,re),re+=me.length}return W},h.byteLength=x,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<O;B+=2)S(this,B,B+1);return this},h.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<O;B+=4)S(this,B,B+3),S(this,B+1,B+2);return this},h.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<O;B+=8)S(this,B,B+7),S(this,B+1,B+6),S(this,B+2,B+5),S(this,B+3,B+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?P(this,0,O):j.apply(this,arguments)},h.prototype.equals=function(O){if(h.isBuffer(O))return this===O||h.compare(this,O)===0;throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var B="",O=a.INSPECT_MAX_BYTES,B=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim();return this.length>O&&(B+=" ... "),"<Buffer "+B+">"},c&&(h.prototype[c]=h.prototype.inspect),h.prototype.compare=function(O,B,W,re,ae){if(Y(O,Uint8Array)&&(O=h.from(O,O.offset,O.byteLength)),!h.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(W===void 0&&(W=O?O.length:0),re===void 0&&(re=0),ae===void 0&&(ae=this.length),(B=B===void 0?0:B)<0||W>O.length||re<0||ae>this.length)throw new RangeError("out of range index");if(ae<=re&&W<=B)return 0;if(ae<=re)return-1;if(W<=B)return 1;if(this===O)return 0;for(var me=(ae>>>=0)-(re>>>=0),ge=(W>>>=0)-(B>>>=0),xe=Math.min(me,ge),fe=this.slice(re,ae),ye=O.slice(B,W),Te=0;Te<xe;++Te)if(fe[Te]!==ye[Te]){me=fe[Te],ge=ye[Te];break}return me<ge?-1:ge<me?1:0},h.prototype.includes=function(O,B,W){return this.indexOf(O,B,W)!==-1},h.prototype.indexOf=function(O,B,W){return w(this,O,B,W,!0)},h.prototype.lastIndexOf=function(O,B,W){return w(this,O,B,W,!1)},h.prototype.write=function(O,B,W,re){if(B===void 0)re="utf8",W=this.length,B=0;else if(W===void 0&&typeof B=="string")re=B,W=this.length,B=0;else{if(!isFinite(B))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");B>>>=0,isFinite(W)?(W>>>=0,re===void 0&&(re="utf8")):(re=W,W=void 0)}var ae=this.length-B;if((W===void 0||ae<W)&&(W=ae),0<O.length&&(W<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");re=re||"utf8";for(var me,ge,xe,fe=!1;;)switch(re){case"hex":var ye=this,Te=O,oe=B,Se=W,be=(oe=Number(oe)||0,ye.length-oe);(!Se||be<(Se=Number(Se)))&&(Se=be),(be=Te.length)/2<Se&&(Se=be/2);for(var Ie=0;Ie<Se;++Ie){var Me=parseInt(Te.substr(2*Ie,2),16);if(X(Me))return Ie;ye[oe+Ie]=Me}return Ie;case"utf8":case"utf-8":return be=B,xe=W,q(te(O,(ge=this).length-be),ge,be,xe);case"ascii":return M(this,O,B,W);case"latin1":case"binary":return M(this,O,B,W);case"base64":return ge=this,xe=B,me=W,q(Z(O),ge,xe,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,O,B,W);default:if(fe)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),fe=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function D(O,B,W){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(W<O+B)throw new RangeError("Trying to access beyond buffer length")}function U(O,B,W,re,ae,me){if(!h.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(ae<B||B<me)throw new RangeError('"value" argument is out of bounds');if(W+re>O.length)throw new RangeError("Index out of range")}function F(O,B,W,re){if(W+re>O.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function z(O,B,W,re,ae){return B=+B,W>>>=0,ae||F(O,0,W,4),l.write(O,B,W,re,23,4),W+4}function K(O,B,W,re,ae){return B=+B,W>>>=0,ae||F(O,0,W,8),l.write(O,B,W,re,52,8),W+8}h.prototype.slice=function(O,B){var W=this.length,W=((O=~~O)<0?(O+=W)<0&&(O=0):W<O&&(O=W),(B=B===void 0?W:~~B)<0?(B+=W)<0&&(B=0):W<B&&(B=W),B<O&&(B=O),this.subarray(O,B));return Object.setPrototypeOf(W,h.prototype),W},h.prototype.readUIntLE=function(O,B,W){O>>>=0,B>>>=0,W||D(O,B,this.length);for(var re=this[O],ae=1,me=0;++me<B&&(ae*=256);)re+=this[O+me]*ae;return re},h.prototype.readUIntBE=function(O,B,W){O>>>=0,B>>>=0,W||D(O,B,this.length);for(var re=this[O+--B],ae=1;0<B&&(ae*=256);)re+=this[O+--B]*ae;return re},h.prototype.readUInt8=function(O,B){return O>>>=0,B||D(O,1,this.length),this[O]},h.prototype.readUInt16LE=function(O,B){return O>>>=0,B||D(O,2,this.length),this[O]|this[O+1]<<8},h.prototype.readUInt16BE=function(O,B){return O>>>=0,B||D(O,2,this.length),this[O]<<8|this[O+1]},h.prototype.readUInt32LE=function(O,B){return O>>>=0,B||D(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},h.prototype.readUInt32BE=function(O,B){return O>>>=0,B||D(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},h.prototype.readIntLE=function(O,B,W){O>>>=0,B>>>=0,W||D(O,B,this.length);for(var re=this[O],ae=1,me=0;++me<B&&(ae*=256);)re+=this[O+me]*ae;return(ae*=128)<=re&&(re-=Math.pow(2,8*B)),re},h.prototype.readIntBE=function(O,B,W){O>>>=0,B>>>=0,W||D(O,B,this.length);for(var re=B,ae=1,me=this[O+--re];0<re&&(ae*=256);)me+=this[O+--re]*ae;return(ae*=128)<=me&&(me-=Math.pow(2,8*B)),me},h.prototype.readInt8=function(O,B){return O>>>=0,B||D(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},h.prototype.readInt16LE=function(O,B){return O>>>=0,B||D(O,2,this.length),B=this[O]|this[O+1]<<8,32768&B?4294901760|B:B},h.prototype.readInt16BE=function(O,B){return O>>>=0,B||D(O,2,this.length),B=this[O+1]|this[O]<<8,32768&B?4294901760|B:B},h.prototype.readInt32LE=function(O,B){return O>>>=0,B||D(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},h.prototype.readInt32BE=function(O,B){return O>>>=0,B||D(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},h.prototype.readFloatLE=function(O,B){return O>>>=0,B||D(O,4,this.length),l.read(this,O,!0,23,4)},h.prototype.readFloatBE=function(O,B){return O>>>=0,B||D(O,4,this.length),l.read(this,O,!1,23,4)},h.prototype.readDoubleLE=function(O,B){return O>>>=0,B||D(O,8,this.length),l.read(this,O,!0,52,8)},h.prototype.readDoubleBE=function(O,B){return O>>>=0,B||D(O,8,this.length),l.read(this,O,!1,52,8)},h.prototype.writeUIntLE=function(O,B,W,re){O=+O,B>>>=0,W>>>=0,re||U(this,O,B,W,Math.pow(2,8*W)-1,0);var ae=1,me=0;for(this[B]=255&O;++me<W&&(ae*=256);)this[B+me]=O/ae&255;return B+W},h.prototype.writeUIntBE=function(O,B,W,re){O=+O,B>>>=0,W>>>=0,re||U(this,O,B,W,Math.pow(2,8*W)-1,0);var ae=W-1,me=1;for(this[B+ae]=255&O;0<=--ae&&(me*=256);)this[B+ae]=O/me&255;return B+W},h.prototype.writeUInt8=function(O,B,W){return O=+O,B>>>=0,W||U(this,O,B,1,255,0),this[B]=255&O,B+1},h.prototype.writeUInt16LE=function(O,B,W){return O=+O,B>>>=0,W||U(this,O,B,2,65535,0),this[B]=255&O,this[B+1]=O>>>8,B+2},h.prototype.writeUInt16BE=function(O,B,W){return O=+O,B>>>=0,W||U(this,O,B,2,65535,0),this[B]=O>>>8,this[B+1]=255&O,B+2},h.prototype.writeUInt32LE=function(O,B,W){return O=+O,B>>>=0,W||U(this,O,B,4,4294967295,0),this[B+3]=O>>>24,this[B+2]=O>>>16,this[B+1]=O>>>8,this[B]=255&O,B+4},h.prototype.writeUInt32BE=function(O,B,W){return O=+O,B>>>=0,W||U(this,O,B,4,4294967295,0),this[B]=O>>>24,this[B+1]=O>>>16,this[B+2]=O>>>8,this[B+3]=255&O,B+4},h.prototype.writeIntLE=function(O,B,W,re){O=+O,B>>>=0,re||U(this,O,B,W,(re=Math.pow(2,8*W-1))-1,-re);var ae=0,me=1,ge=0;for(this[B]=255&O;++ae<W&&(me*=256);)O<0&&ge===0&&this[B+ae-1]!==0&&(ge=1),this[B+ae]=(O/me>>0)-ge&255;return B+W},h.prototype.writeIntBE=function(O,B,W,re){O=+O,B>>>=0,re||U(this,O,B,W,(re=Math.pow(2,8*W-1))-1,-re);var ae=W-1,me=1,ge=0;for(this[B+ae]=255&O;0<=--ae&&(me*=256);)O<0&&ge===0&&this[B+ae+1]!==0&&(ge=1),this[B+ae]=(O/me>>0)-ge&255;return B+W},h.prototype.writeInt8=function(O,B,W){return O=+O,B>>>=0,W||U(this,O,B,1,127,-128),this[B]=255&(O=O<0?255+O+1:O),B+1},h.prototype.writeInt16LE=function(O,B,W){return O=+O,B>>>=0,W||U(this,O,B,2,32767,-32768),this[B]=255&O,this[B+1]=O>>>8,B+2},h.prototype.writeInt16BE=function(O,B,W){return O=+O,B>>>=0,W||U(this,O,B,2,32767,-32768),this[B]=O>>>8,this[B+1]=255&O,B+2},h.prototype.writeInt32LE=function(O,B,W){return O=+O,B>>>=0,W||U(this,O,B,4,2147483647,-2147483648),this[B]=255&O,this[B+1]=O>>>8,this[B+2]=O>>>16,this[B+3]=O>>>24,B+4},h.prototype.writeInt32BE=function(O,B,W){return O=+O,B>>>=0,W||U(this,O,B,4,2147483647,-2147483648),this[B]=(O=O<0?4294967295+O+1:O)>>>24,this[B+1]=O>>>16,this[B+2]=O>>>8,this[B+3]=255&O,B+4},h.prototype.writeFloatLE=function(O,B,W){return z(this,O,B,!0,W)},h.prototype.writeFloatBE=function(O,B,W){return z(this,O,B,!1,W)},h.prototype.writeDoubleLE=function(O,B,W){return K(this,O,B,!0,W)},h.prototype.writeDoubleBE=function(O,B,W){return K(this,O,B,!1,W)},h.prototype.copy=function(O,B,W,re){if(!h.isBuffer(O))throw new TypeError("argument should be a Buffer");if(W=W||0,re||re===0||(re=this.length),B>=O.length&&(B=O.length),(re=0<re&&re<W?W:re)===W||O.length===0||this.length===0)return 0;if((B=B||0)<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length);var ae=(re=O.length-B<re-W?O.length-B+W:re)-W;if(this===O&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(B,W,re);else if(this===O&&W<B&&B<re)for(var me=ae-1;0<=me;--me)O[me+B]=this[me+W];else Uint8Array.prototype.set.call(O,this.subarray(W,re),B);return ae},h.prototype.fill=function(O,B,W,re){if(typeof O=="string"){if(typeof B=="string"?(re=B,B=0,W=this.length):typeof W=="string"&&(re=W,W=this.length),re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!h.isEncoding(re))throw new TypeError("Unknown encoding: "+re);var ae;O.length===1&&(ae=O.charCodeAt(0),(re==="utf8"&&ae<128||re==="latin1")&&(O=ae))}else typeof O=="number"?O&=255:typeof O=="boolean"&&(O=Number(O));if(B<0||this.length<B||this.length<W)throw new RangeError("Out of range index");var me;if(!(W<=B))if(B>>>=0,W=W===void 0?this.length:W>>>0,typeof(O=O||0)=="number")for(me=B;me<W;++me)this[me]=O;else{var ge=h.isBuffer(O)?O:h.from(O,re),xe=ge.length;if(xe===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(me=0;me<W-B;++me)this[me+B]=ge[me%xe]}return this};var Q=/[^+/0-9A-Za-z-_]/g;function te(O,B){B=B||1/0;for(var W,re=O.length,ae=null,me=[],ge=0;ge<re;++ge){if(55295<(W=O.charCodeAt(ge))&&W<57344){if(!ae){if(56319<W){-1<(B-=3)&&me.push(239,191,189);continue}if(ge+1===re){-1<(B-=3)&&me.push(239,191,189);continue}ae=W;continue}if(W<56320){-1<(B-=3)&&me.push(239,191,189),ae=W;continue}W=65536+(ae-55296<<10|W-56320)}else ae&&-1<(B-=3)&&me.push(239,191,189);if(ae=null,W<128){if(--B<0)break;me.push(W)}else if(W<2048){if((B-=2)<0)break;me.push(W>>6|192,63&W|128)}else if(W<65536){if((B-=3)<0)break;me.push(W>>12|224,W>>6&63|128,63&W|128)}else{if(!(W<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;me.push(W>>18|240,W>>12&63|128,W>>6&63|128,63&W|128)}}return me}function Z(O){return u.toByteArray(function(B){if((B=(B=B.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B}(O))}function q(O,B,W,re){for(var ae=0;ae<re&&!(ae+W>=B.length||ae>=O.length);++ae)B[ae+W]=O[ae];return ae}function Y(O,B){return O instanceof B||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===B.name}function X(O){return O!=O}var ce=function(){for(var O="0123456789abcdef",B=new Array(256),W=0;W<16;++W)for(var re=16*W,ae=0;ae<16;++ae)B[re+ae]=O[W]+O[ae];return B}()}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:238}],5:[function(r,s,a){s.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},{}],6:[function(r,s,a){var o=r("../internals/is-object");s.exports=function(u){if(o(u)||u===null)return u;throw TypeError("Can't set "+String(u)+" as a prototype")}},{"../internals/is-object":74}],7:[function(l,s,a){var o=l("../internals/well-known-symbol"),u=l("../internals/object-create"),l=l("../internals/object-define-property"),c=o("unscopables"),p=Array.prototype;p[c]==null&&l.f(p,c,{configurable:!0,value:u(null)}),s.exports=function(m){p[c][m]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(r,s,a){var o=r("../internals/string-multibyte").charAt;s.exports=function(u,l,c){return l+(c?o(u,l).length:1)}},{"../internals/string-multibyte":123}],9:[function(r,s,a){s.exports=function(o,u,l){if(o instanceof u)return o;throw TypeError("Incorrect "+(l?l+" ":"")+"invocation")}},{}],10:[function(r,s,a){var o=r("../internals/is-object");s.exports=function(u){if(o(u))return u;throw TypeError(String(u)+" is not an object")}},{"../internals/is-object":74}],11:[function(r,s,a){s.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(F,s,a){function o(K){return m(K)&&h(z,f(K))}var u,l=F("../internals/array-buffer-native"),c=F("../internals/descriptors"),p=F("../internals/global"),m=F("../internals/is-object"),h=F("../internals/has"),f=F("../internals/classof"),d=F("../internals/create-non-enumerable-property"),g=F("../internals/redefine"),y=F("../internals/object-define-property").f,b=F("../internals/object-get-prototype-of"),x=F("../internals/object-set-prototype-of"),R=F("../internals/well-known-symbol"),F=F("../internals/uid"),j=p.Int8Array,S=j&&j.prototype,w=p.Uint8ClampedArray,w=w&&w.prototype,_=j&&b(j),M=S&&b(S),I=Object.prototype,P=I.isPrototypeOf,R=R("toStringTag"),D=F("TYPED_ARRAY_TAG"),U=l&&!!x&&f(p.opera)!=="Opera",F=!1,z={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(u in z)p[u]||(U=!1);if((!U||typeof _!="function"||_===Function.prototype)&&(_=function(){throw TypeError("Incorrect invocation")},U))for(u in z)p[u]&&x(p[u],_);if((!U||!M||M===I)&&(M=_.prototype,U))for(u in z)p[u]&&x(p[u].prototype,M);if(U&&b(w)!==M&&x(w,M),c&&!h(M,R))for(u in F=!0,y(M,R,{get:function(){return m(this)?this[D]:void 0}}),z)p[u]&&d(p[u],D,u);s.exports={NATIVE_ARRAY_BUFFER_VIEWS:U,TYPED_ARRAY_TAG:F&&D,aTypedArray:function(K){if(o(K))return K;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(K){if(x){if(P.call(_,K))return K}else for(var Q in z)if(h(z,u)&&(Q=p[Q],Q&&(K===Q||P.call(Q,K))))return K;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(K,Q,te){if(c){if(te)for(var Z in z)Z=p[Z],Z&&h(Z.prototype,K)&&delete Z.prototype[K];M[K]&&!te||g(M,K,!te&&U&&S[K]||Q)}},exportTypedArrayStaticMethod:function(K,Q,te){var Z,q;if(c){if(x){if(te)for(Z in z)(q=p[Z])&&h(q,K)&&delete q[K];if(_[K]&&!te)return;try{return g(_,K,!te&&U&&j[K]||Q)}catch{}}for(Z in z)!(q=p[Z])||q[K]&&!te||g(q,K,Q)}},isView:function(K){return K=f(K),K==="DataView"||h(z,K)},isTypedArray:o,TypedArray:_,TypedArrayPrototype:M}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(W,s,a){function o(oe){return[255&oe]}function u(oe){return[255&oe,oe>>8&255]}function l(oe){return[255&oe,oe>>8&255,oe>>16&255,oe>>24&255]}function c(oe){return oe[3]<<24|oe[2]<<16|oe[1]<<8|oe[0]}function p(oe){return me(oe,23,4)}function m(oe){return me(oe,52,8)}function h(oe,Se){F(oe[Y],Se,{get:function(){return Q(this)[Se]}})}function f(Be,Se,Ve,Ie){if(Ve=I(Ve),Be=Q(Be),Ve+Se>Be.byteLength)throw ae(X);var Me=Q(Be.buffer).bytes,Ve=Ve+Be.byteOffset,Be=Me.slice(Ve,Ve+Se);return Ie?Be:Be.reverse()}function d(oe,Se,be,Ie,Me,Ve){if(be=I(be),oe=Q(oe),be+Se>oe.byteLength)throw ae(X);for(var Be=Q(oe.buffer).bytes,tt=be+oe.byteOffset,Ue=Ie(+Me),ve=0;ve<Se;ve++)Be[tt+ve]=Ue[Ve?ve:Se-ve-1]}var g=W("../internals/global"),y=W("../internals/descriptors"),b=W("../internals/array-buffer-native"),x=W("../internals/create-non-enumerable-property"),j=W("../internals/redefine-all"),S=W("../internals/fails"),w=W("../internals/an-instance"),_=W("../internals/to-integer"),M=W("../internals/to-length"),I=W("../internals/to-index"),P=W("../internals/ieee754"),R=W("../internals/object-get-prototype-of"),D=W("../internals/object-set-prototype-of"),U=W("../internals/object-get-own-property-names").f,F=W("../internals/object-define-property").f,z=W("../internals/array-fill"),K=W("../internals/set-to-string-tag"),W=W("../internals/internal-state"),Q=W.get,te=W.set,Z="ArrayBuffer",q="DataView",Y="prototype",X="Wrong index",ce=g[Z],O=ce,B=g[q],W=B&&B[Y],re=Object.prototype,ae=g.RangeError,me=P.pack,ge=P.unpack;if(b){if(!S(function(){ce(1)})||!S(function(){new ce(-1)})||S(function(){return new ce,new ce(1.5),new ce(NaN),ce.name!=Z})){for(var xe,g=(O=function(be){return w(this,O),new ce(I(be))})[Y]=ce[Y],fe=U(ce),ye=0;fe.length>ye;)(xe=fe[ye++])in O||x(O,xe,ce[xe]);g.constructor=O}D&&R(W)!==re&&D(W,re);var P=new B(new O(2)),Te=W.setInt8;P.setInt8(0,2147483648),P.setInt8(1,2147483649),!P.getInt8(0)&&P.getInt8(1)||j(W,{setInt8:function(Se,be){Te.call(this,Se,be<<24>>24)},setUint8:function(Se,be){Te.call(this,Se,be<<24>>24)}},{unsafe:!0})}else O=function(oe){w(this,O,Z),oe=I(oe),te(this,{bytes:z.call(new Array(oe),0),byteLength:oe}),y||(this.byteLength=oe)},B=function(oe,Me,be){w(this,B,q),w(oe,O,q);var Ie=Q(oe).byteLength,Me=_(Me);if(Me<0||Ie<Me)throw ae("Wrong offset");if(Ie<Me+(be=be===void 0?Ie-Me:M(be)))throw ae("Wrong length");te(this,{buffer:oe,byteLength:be,byteOffset:Me}),y||(this.buffer=oe,this.byteLength=be,this.byteOffset=Me)},y&&(h(O,"byteLength"),h(B,"buffer"),h(B,"byteLength"),h(B,"byteOffset")),j(B[Y],{getInt8:function(oe){return f(this,1,oe)[0]<<24>>24},getUint8:function(oe){return f(this,1,oe)[0]},getInt16:function(oe){return oe=f(this,2,oe,1<arguments.length?arguments[1]:void 0),(oe[1]<<8|oe[0])<<16>>16},getUint16:function(oe){return oe=f(this,2,oe,1<arguments.length?arguments[1]:void 0),oe[1]<<8|oe[0]},getInt32:function(oe){return c(f(this,4,oe,1<arguments.length?arguments[1]:void 0))},getUint32:function(oe){return c(f(this,4,oe,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(oe){return ge(f(this,4,oe,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(oe){return ge(f(this,8,oe,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(oe,Se){d(this,1,oe,o,Se)},setUint8:function(oe,Se){d(this,1,oe,o,Se)},setInt16:function(oe,Se){d(this,2,oe,u,Se,2<arguments.length?arguments[2]:void 0)},setUint16:function(oe,Se){d(this,2,oe,u,Se,2<arguments.length?arguments[2]:void 0)},setInt32:function(oe,Se){d(this,4,oe,l,Se,2<arguments.length?arguments[2]:void 0)},setUint32:function(oe,Se){d(this,4,oe,l,Se,2<arguments.length?arguments[2]:void 0)},setFloat32:function(oe,Se){d(this,4,oe,p,Se,2<arguments.length?arguments[2]:void 0)},setFloat64:function(oe,Se){d(this,8,oe,m,Se,2<arguments.length?arguments[2]:void 0)}});K(O,Z),K(B,q),s.exports={ArrayBuffer:O,DataView:B}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(r,s,a){var o=r("../internals/to-object"),u=r("../internals/to-absolute-index"),l=r("../internals/to-length"),c=Math.min;s.exports=[].copyWithin||function(y,m){var h=o(this),f=l(h.length),d=u(y,f),g=u(m,f),y=2<arguments.length?arguments[2]:void 0,b=c((y===void 0?f:u(y,f))-g,f-d),x=1;for(g<d&&d<g+b&&(x=-1,g+=b-1,d+=b-1);0<b--;)g in h?h[d]=h[g]:delete h[d],d+=x,g+=x;return h}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(r,s,a){var o=r("../internals/to-object"),u=r("../internals/to-absolute-index"),l=r("../internals/to-length");s.exports=function(c){for(var p=o(this),m=l(p.length),f=arguments.length,h=u(1<f?arguments[1]:void 0,m),f=2<f?arguments[2]:void 0,d=f===void 0?m:u(f,m);h<d;)p[h++]=c;return p}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(l,s,a){var o=l("../internals/array-iteration").forEach,u=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),u=u("forEach"),l=l("forEach");s.exports=u&&l?[].forEach:function(c){return o(this,c,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(r,s,a){var o=r("../internals/function-bind-context"),u=r("../internals/to-object"),l=r("../internals/call-with-safe-iteration-closing"),c=r("../internals/is-array-iterator-method"),p=r("../internals/to-length"),m=r("../internals/create-property"),h=r("../internals/get-iterator-method");s.exports=function(w){var d,g,y,b,x,j,S=u(w),w=typeof this=="function"?this:Array,_=arguments.length,M=1<_?arguments[1]:void 0,I=M!==void 0,P=h(S),R=0;if(I&&(M=o(M,2<_?arguments[2]:void 0,2)),P==null||w==Array&&c(P))for(g=new w(d=p(S.length));R<d;R++)j=I?M(S[R],R):S[R],m(g,R,j);else for(x=(b=P.call(S)).next,g=new w;!(y=x.call(b)).done;R++)j=I?l(b,M,[y.value,R],!0):y.value,m(g,R,j);return g.length=R,g}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(r,s,a){function o(p){return function(m,h,f){var d,g=u(m),y=l(g.length),b=c(f,y);if(p&&h!=h){for(;b<y;)if((d=g[b++])!=d)return!0}else for(;b<y;b++)if((p||b in g)&&g[b]===h)return p||b||0;return!p&&-1}}var u=r("../internals/to-indexed-object"),l=r("../internals/to-length"),c=r("../internals/to-absolute-index");s.exports={includes:o(!0),indexOf:o(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(r,s,a){function o(f){var d=f==1,g=f==2,y=f==3,b=f==4,x=f==6,j=f==5||x;return function(S,w,_,M){for(var I,P,R=c(S),D=l(R),U=u(w,_,3),F=p(D.length),z=0,w=M||m,K=d?w(S,F):g?w(S,0):void 0;z<F;z++)if((j||z in D)&&(P=U(I=D[z],z,R),f)){if(d)K[z]=P;else if(P)switch(f){case 3:return!0;case 5:return I;case 6:return z;case 2:h.call(K,I)}else if(b)return!1}return x?-1:y||b?b:K}}var u=r("../internals/function-bind-context"),l=r("../internals/indexed-object"),c=r("../internals/to-object"),p=r("../internals/to-length"),m=r("../internals/array-species-create"),h=[].push;s.exports={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(f,s,a){var o=f("../internals/to-indexed-object"),u=f("../internals/to-integer"),l=f("../internals/to-length"),h=f("../internals/array-method-is-strict"),f=f("../internals/array-method-uses-to-length"),c=Math.min,p=[].lastIndexOf,m=!!p&&1/[1].lastIndexOf(1,-0)<0,h=h("lastIndexOf"),f=f("indexOf",{ACCESSORS:!0,1:0});s.exports=m||!h||!f?function(d){if(m)return p.apply(this,arguments)||0;var g=o(this),y=l(g.length),b=y-1;for((b=1<arguments.length?c(b,u(arguments[1])):b)<0&&(b=y+b);0<=b;b--)if(b in g&&g[b]===d)return b||0;return-1}:p},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(r,s,a){var o=r("../internals/fails"),u=r("../internals/well-known-symbol"),l=r("../internals/engine-v8-version"),c=u("species");s.exports=function(p){return 51<=l||!o(function(){var m=[];return(m.constructor={})[c]=function(){return{foo:1}},m[p](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":146}],22:[function(r,s,a){var o=r("../internals/fails");s.exports=function(u,l){var c=[][u];return!!c&&o(function(){c.call(null,l||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(r,s,a){function o(h){throw h}var u=r("../internals/descriptors"),l=r("../internals/fails"),c=r("../internals/has"),p=Object.defineProperty,m={};s.exports=function(h,f){var d,g,y,b;return c(m,h)?m[h]:(d=[][h],g=!!c(f=f||{},"ACCESSORS")&&f.ACCESSORS,y=c(f,0)?f[0]:o,b=c(f,1)?f[1]:void 0,m[h]=!!d&&!l(function(){if(g&&!u)return!0;var x={length:-1};g?p(x,1,{enumerable:!0,get:o}):x[1]=1,d.call(x,y,b)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(r,s,a){function o(m){return function(h,f,d,g){u(f);var y=l(h),b=c(y),x=p(y.length),j=m?x-1:0,S=m?-1:1;if(d<2)for(;;){if(j in b){g=b[j],j+=S;break}if(j+=S,m?j<0:x<=j)throw TypeError("Reduce of empty array with no initial value")}for(;m?0<=j:j<x;j+=S)j in b&&(g=f(g,b[j],j,y));return g}}var u=r("../internals/a-function"),l=r("../internals/to-object"),c=r("../internals/indexed-object"),p=r("../internals/to-length");s.exports={left:o(!1),right:o(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(r,s,a){var o=r("../internals/is-object"),u=r("../internals/is-array"),l=r("../internals/well-known-symbol")("species");s.exports=function(c,p){var m;return new((m=u(c)&&(typeof(m=c.constructor)=="function"&&(m===Array||u(m.prototype))||o(m)&&(m=m[l])===null)?void 0:m)===void 0?Array:m)(p===0?0:p)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(r,s,a){var o=r("../internals/an-object");s.exports=function(u,l,c,p){try{return p?l(o(c)[0],c[1]):l(c)}catch(m){throw p=u.return,p!==void 0&&o(p.call(u)),m}}},{"../internals/an-object":10}],27:[function(r,s,a){var o=r("../internals/well-known-symbol")("iterator"),u=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){u=!0}};c[o]=function(){return this},Array.from(c,function(){throw 2})}catch{}s.exports=function(p,m){if(!m&&!u)return!1;var h=!1;try{var f={};f[o]=function(){return{next:function(){return{done:h=!0}}}},p(f)}catch{}return h}},{"../internals/well-known-symbol":146}],28:[function(r,s,a){var o={}.toString;s.exports=function(u){return o.call(u).slice(8,-1)}},{}],29:[function(r,s,a){var o=r("../internals/to-string-tag-support"),u=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("toStringTag"),c=u(function(){return arguments}())=="Arguments";s.exports=o?u:function(p){var m;return p===void 0?"Undefined":p===null?"Null":typeof(m=function(h,f){try{return h[f]}catch{}}(p=Object(p),l))=="string"?m:c?u(p):(m=u(p))=="Object"&&typeof p.callee=="function"?"Arguments":m}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(y,s,a){var o=y("../internals/object-define-property").f,u=y("../internals/object-create"),l=y("../internals/redefine-all"),c=y("../internals/function-bind-context"),p=y("../internals/an-instance"),m=y("../internals/iterate"),h=y("../internals/define-iterator"),f=y("../internals/set-species"),d=y("../internals/descriptors"),g=y("../internals/internal-metadata").fastKey,y=y("../internals/internal-state"),b=y.set,x=y.getterFor;s.exports={getConstructor:function(j,S,w,_){function M(D,U,F){var z,K=R(D),Q=I(D,U);return Q?Q.value=F:(K.last=Q={index:z=g(U,!0),key:U,value:F,previous:U=K.last,next:void 0,removed:!1},K.first||(K.first=Q),U&&(U.next=Q),d?K.size++:D.size++,z!=="F"&&(K.index[z]=Q)),D}function I(z,U){var F,z=R(z),K=g(U);if(K!=="F")return z.index[K];for(F=z.first;F;F=F.next)if(F.key==U)return F}var P=j(function(D,U){p(D,P,S),b(D,{type:S,index:u(null),first:void 0,last:void 0,size:0}),d||(D.size=0),U!=null&&m(U,D[_],D,w)}),R=x(S);return l(P.prototype,{clear:function(){for(var D=R(this),U=D.index,F=D.first;F;)F.removed=!0,F.previous&&(F.previous=F.previous.next=void 0),delete U[F.index],F=F.next;D.first=D.last=void 0,d?D.size=0:this.size=0},delete:function(K){var U,F,z=R(this),K=I(this,K);return K&&(U=K.next,F=K.previous,delete z.index[K.index],K.removed=!0,F&&(F.next=U),U&&(U.previous=F),z.first==K&&(z.first=U),z.last==K&&(z.last=F),d?z.size--:this.size--),!!K},forEach:function(D){for(var U,F=R(this),z=c(D,1<arguments.length?arguments[1]:void 0,3);U=U?U.next:F.first;)for(z(U.value,U.key,this);U&&U.removed;)U=U.previous},has:function(D){return!!I(this,D)}}),l(P.prototype,w?{get:function(D){return D=I(this,D),D&&D.value},set:function(D,U){return M(this,D===0?0:D,U)}}:{add:function(D){return M(this,D=D===0?0:D,D)}}),d&&o(P.prototype,"size",{get:function(){return R(this).size}}),P},setStrong:function(j,S,w){var _=S+" Iterator",M=x(S),I=x(_);h(j,S,function(P,R){b(this,{type:_,target:P,state:M(P),kind:R,last:void 0})},function(){for(var P=I(this),R=P.kind,D=P.last;D&&D.removed;)D=D.previous;return P.target&&(P.last=D=D?D.next:P.state.first)?R=="keys"?{value:D.key,done:!1}:R=="values"?{value:D.value,done:!1}:{value:[D.key,D.value],done:!1}:{value:P.target=void 0,done:!0}},w?"entries":"values",!w,!0),f(S)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(b,s,a){function o(M){return M.frozen||(M.frozen=new u)}function u(){this.entries=[]}function l(M,I){return S(M.entries,function(P){return P[0]===I})}var c=b("../internals/redefine-all"),p=b("../internals/internal-metadata").getWeakData,m=b("../internals/an-object"),h=b("../internals/is-object"),f=b("../internals/an-instance"),d=b("../internals/iterate"),g=b("../internals/array-iteration"),y=b("../internals/has"),b=b("../internals/internal-state"),x=b.set,j=b.getterFor,S=g.find,w=g.findIndex,_=0;u.prototype={get:function(M){if(M=l(this,M),M)return M[1]},has:function(M){return!!l(this,M)},set:function(M,I){var P=l(this,M);P?P[1]=I:this.entries.push([M,I])},delete:function(M){var I=w(this.entries,function(P){return P[0]===M});return~I&&this.entries.splice(I,1),!!~I}},s.exports={getConstructor:function(M,I,P,R){function D(z,K,Q){var te=F(z),Z=p(m(K),!0);return Z===!0?o(te).set(K,Q):Z[te.id]=Q,z}var U=M(function(z,K){f(z,U,I),x(z,{type:I,id:_++,frozen:void 0}),K!=null&&d(K,z[R],z,P)}),F=j(I);return c(U.prototype,{delete:function(z){var K,Q=F(this);return!!h(z)&&((K=p(z))===!0?o(Q).delete(z):K&&y(K,Q.id)&&delete K[Q.id])},has:function(z){var K,Q=F(this);return!!h(z)&&((K=p(z))===!0?o(Q).has(z):K&&y(K,Q.id))}}),c(U.prototype,P?{get:function(z){var K,Q=F(this);if(h(z))return(K=p(z))===!0?o(Q).get(z):K?K[Q.id]:void 0},set:function(z,K){return D(this,z,K)}}:{add:function(z){return D(this,z,!0)}}),U}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/global"),l=r("../internals/is-forced"),c=r("../internals/redefine"),p=r("../internals/internal-metadata"),m=r("../internals/iterate"),h=r("../internals/an-instance"),f=r("../internals/is-object"),d=r("../internals/fails"),g=r("../internals/check-correctness-of-iteration"),y=r("../internals/set-to-string-tag"),b=r("../internals/inherit-if-required");s.exports=function(x,j,S){function w(Z){var q=K[Z];c(K,Z,Z=="add"?function(Y){return q.call(this,Y===0?0:Y),this}:Z=="delete"?function(Y){return!(U&&!f(Y))&&q.call(this,Y===0?0:Y)}:Z=="get"?function(Y){return U&&!f(Y)?void 0:q.call(this,Y===0?0:Y)}:Z=="has"?function(Y){return!(U&&!f(Y))&&q.call(this,Y===0?0:Y)}:function(Y,X){return q.call(this,Y===0?0:Y,X),this})}var _,M,I,P,R,D=x.indexOf("Map")!==-1,U=x.indexOf("Weak")!==-1,F=D?"set":"add",z=u[x],K=z&&z.prototype,Q=z,te={};return l(x,typeof z!="function"||!(U||K.forEach&&!d(function(){new z().entries().next()})))?(Q=S.getConstructor(j,x,D,F),p.REQUIRED=!0):l(x,!0)&&(M=(_=new Q)[F](U?{}:-0,1)!=_,I=d(function(){_.has(1)}),P=g(function(Z){new z(Z)}),R=!U&&d(function(){for(var Z=new z,q=5;q--;)Z[F](q,q);return!Z.has(-0)}),P||(((Q=j(function(Z,q){return h(Z,Q,x),Z=b(new z,Z,Q),q!=null&&m(q,Z[F],Z,D),Z})).prototype=K).constructor=Q),(I||R)&&(w("delete"),w("has"),D&&w("get")),(R||M)&&w(F),U&&K.clear&&delete K.clear),te[x]=Q,o({global:!0,forced:Q!=z},te),y(Q,x),U||S.setStrong(Q,x,D),Q}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(r,s,a){var o=r("../internals/has"),u=r("../internals/own-keys"),l=r("../internals/object-get-own-property-descriptor"),c=r("../internals/object-define-property");s.exports=function(p,m){for(var h=u(m),f=c.f,d=l.f,g=0;g<h.length;g++){var y=h[g];o(p,y)||f(p,y,d(m,y))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(r,s,a){var o=r("../internals/well-known-symbol")("match");s.exports=function(u){var l=/./;try{"/./"[u](l)}catch{try{return l[o]=!1,"/./"[u](l)}catch{}}return!1}},{"../internals/well-known-symbol":146}],35:[function(r,s,a){r=r("../internals/fails"),s.exports=!r(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":51}],36:[function(r,s,a){var o=r("../internals/require-object-coercible"),u=/"/g;s.exports=function(h,c,p,m){var h=String(o(h)),f="<"+c;return p!==""&&(f+=" "+p+'="'+String(m).replace(u,"&quot;")+'"'),f+">"+h+"</"+c+">"}},{"../internals/require-object-coercible":113}],37:[function(r,s,a){function o(){return this}var u=r("../internals/iterators-core").IteratorPrototype,l=r("../internals/object-create"),c=r("../internals/create-property-descriptor"),p=r("../internals/set-to-string-tag"),m=r("../internals/iterators");s.exports=function(h,f,d){return f+=" Iterator",h.prototype=l(u,{next:c(1,d)}),p(h,f,!1,!0),m[f]=o,h}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");s.exports=o?function(c,p,m){return u.f(c,p,l(1,m))}:function(c,p,m){return c[p]=m,c}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(r,s,a){s.exports=function(o,u){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:u}}},{}],40:[function(r,s,a){var o=r("../internals/to-primitive"),u=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");s.exports=function(c,p,m){p=o(p),p in c?u.f(c,p,l(0,m)):c[p]=m}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":138}],41:[function(b,s,a){function o(){return this}var u=b("../internals/export"),l=b("../internals/create-iterator-constructor"),c=b("../internals/object-get-prototype-of"),p=b("../internals/object-set-prototype-of"),m=b("../internals/set-to-string-tag"),h=b("../internals/create-non-enumerable-property"),f=b("../internals/redefine"),d=b("../internals/well-known-symbol"),g=b("../internals/is-pure"),y=b("../internals/iterators"),b=b("../internals/iterators-core"),x=b.IteratorPrototype,j=b.BUGGY_SAFARI_ITERATORS,S=d("iterator"),w="values",_="entries";s.exports=function(M,I,P,te,D,U,F){l(P,I,te);function z(O){if(O===D&&X)return X;if(!j&&O in q)return q[O];switch(O){case"keys":case w:case _:return function(){return new P(this,O)}}return function(){return new P(this)}}var K,Q,te=I+" Iterator",Z=!1,q=M.prototype,Y=q[S]||q["@@iterator"]||D&&q[D],X=!j&&Y||z(D),ce=I=="Array"&&q.entries||Y;if(ce&&(ce=c(ce.call(new M)),x!==Object.prototype&&ce.next&&(g||c(ce)===x||(p?p(ce,x):typeof ce[S]!="function"&&h(ce,S,o)),m(ce,te,!0,!0),g&&(y[te]=o))),D==w&&Y&&Y.name!==w&&(Z=!0,X=function(){return Y.call(this)}),g&&!F||q[S]===X||h(q,S,X),y[I]=X,D)if(K={values:z(w),keys:U?X:z("keys"),entries:z(_)},F)for(Q in K)!j&&!Z&&Q in q||f(q,Q,K[Q]);else u({target:I,proto:!0,forced:j||Z},K);return K}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],42:[function(r,s,a){var o=r("../internals/path"),u=r("../internals/has"),l=r("../internals/well-known-symbol-wrapped"),c=r("../internals/object-define-property").f;s.exports=function(p){var m=o.Symbol||(o.Symbol={});u(m,p)||c(m,p,{value:l.f(p)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],43:[function(r,s,a){r=r("../internals/fails"),s.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(u,s,a){var o=u("../internals/global"),u=u("../internals/is-object"),l=o.document,c=u(l)&&u(l.createElement);s.exports=function(p){return c?l.createElement(p):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(r,s,a){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(r,s,a){r=r("../internals/engine-user-agent"),s.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":47}],47:[function(r,s,a){r=r("../internals/get-built-in"),s.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(l,s,a){var o,u,c=l("../internals/global"),l=l("../internals/engine-user-agent"),c=c.process,c=c&&c.versions,c=c&&c.v8;c?u=(o=c.split("."))[0]+o[1]:l&&(!(o=l.match(/Edge\/(\d+)/))||74<=o[1])&&(o=l.match(/Chrome\/(\d+)/))&&(u=o[1]),s.exports=u&&+u},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(r,s,a){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(r,s,a){var o=r("../internals/global"),u=r("../internals/object-get-own-property-descriptor").f,l=r("../internals/create-non-enumerable-property"),c=r("../internals/redefine"),p=r("../internals/set-global"),m=r("../internals/copy-constructor-properties"),h=r("../internals/is-forced");s.exports=function(f,d){var g,y,b,x=f.target,j=f.global,S=f.stat,w=j?o:S?o[x]||p(x,{}):(o[x]||{}).prototype;if(w)for(g in d){if(y=d[g],b=f.noTargetGet?(b=u(w,g))&&b.value:w[g],!h(j?g:x+(S?".":"#")+g,f.forced)&&b!==void 0){if(typeof y==typeof b)continue;m(y,b)}(f.sham||b&&b.sham)&&l(y,"sham",!0),c(w,g,y,f)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(r,s,a){s.exports=function(o){try{return!!o()}catch{return!0}}},{}],52:[function(d,s,a){d("../modules/es.regexp.exec");var o=d("../internals/redefine"),u=d("../internals/fails"),l=d("../internals/well-known-symbol"),c=d("../internals/regexp-exec"),p=d("../internals/create-non-enumerable-property"),m=l("species"),h=!u(function(){var b=/./;return b.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(b,"$<a>")!=="7"}),f="a".replace(/./,"$0")==="$0",d=l("replace"),g=!!/./[d]&&/./[d]("a","$0")==="",y=!u(function(){var x=/(?:)/,b=x.exec,x=(x.exec=function(){return b.apply(this,arguments)},"ab".split(x));return x.length!==2||x[0]!=="a"||x[1]!=="b"});s.exports=function(b,x,j,S){var w,_,M=l(b),I=!u(function(){var R={};return R[M]=function(){return 7},""[b](R)!=7}),P=I&&!u(function(){var R=!1,D=/a/;return b==="split"&&((D={constructor:{}}).constructor[m]=function(){return D},D.flags="",D[M]=/./[M]),D.exec=function(){return R=!0,null},D[M](""),!R});I&&P&&(b!=="replace"||h&&f&&!g)&&(b!=="split"||y)||(w=/./[M],j=(P=j(M,""[b],function(R,D,U,F,z){return D.exec===c?I&&!z?{done:!0,value:w.call(D,U,F)}:{done:!0,value:R.call(U,D,F)}:{done:!1}},{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}))[0],_=P[1],o(String.prototype,b,j),o(RegExp.prototype,M,x==2?function(R,D){return _.call(R,this,D)}:function(R){return _.call(R,this)})),S&&p(RegExp.prototype[M],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],53:[function(r,s,a){r=r("../internals/fails"),s.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(r,s,a){var o=r("../internals/a-function");s.exports=function(u,l,c){if(o(u),l===void 0)return u;switch(c){case 0:return function(){return u.call(l)};case 1:return function(p){return u.call(l,p)};case 2:return function(p,m){return u.call(l,p,m)};case 3:return function(p,m,h){return u.call(l,p,m,h)}}return function(){return u.apply(l,arguments)}}},{"../internals/a-function":5}],55:[function(r,s,a){var o=r("../internals/a-function"),u=r("../internals/is-object"),l=[].slice,c={};s.exports=Function.bind||function(p){var m=o(this),h=l.call(arguments,1),f=function(){var d=h.concat(l.call(arguments));if(this instanceof f){var g=m,y=d.length,b=d;if(!(y in c)){for(var x=[],j=0;j<y;j++)x[j]="a["+j+"]";c[y]=Function("C,a","return new C("+x.join(",")+")")}return c[y](g,b)}return m.apply(p,d)};return u(m.prototype)&&(f.prototype=m.prototype),f}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(r,s,a){function o(c){return typeof c=="function"?c:void 0}var u=r("../internals/path"),l=r("../internals/global");s.exports=function(c,p){return arguments.length<2?o(u[c])||o(l[c]):u[c]&&u[c][p]||l[c]&&l[c][p]}},{"../internals/global":59,"../internals/path":104}],57:[function(r,s,a){var o=r("../internals/classof"),u=r("../internals/iterators"),l=r("../internals/well-known-symbol")("iterator");s.exports=function(c){if(c!=null)return c[l]||c["@@iterator"]||u[o(c)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(r,s,a){var o=r("../internals/an-object"),u=r("../internals/get-iterator-method");s.exports=function(l){var c=u(l);if(typeof c!="function")throw TypeError(String(l)+" is not iterable");return o(c.call(l))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(r,s,a){(function(o){function u(l){return l&&l.Math==Math&&l}s.exports=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof o=="object"&&o)||Function("return this")()}).call(this,typeof ca<"u"?ca:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(r,s,a){var o={}.hasOwnProperty;s.exports=function(u,l){return o.call(u,l)}},{}],61:[function(r,s,a){s.exports={}},{}],62:[function(r,s,a){var o=r("../internals/global");s.exports=function(u,l){var c=o.console;c&&c.error&&(arguments.length===1?c.error(u):c.error(u,l))}},{"../internals/global":59}],63:[function(r,s,a){r=r("../internals/get-built-in"),s.exports=r("document","documentElement")},{"../internals/get-built-in":56}],64:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/fails"),l=r("../internals/document-create-element");s.exports=!o&&!u(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(r,s,a){var o=Math.abs,u=Math.pow,l=Math.floor,c=Math.log,p=Math.LN2;s.exports={pack:function(m,h,j){var d,g,y,b=new Array(j),x=8*j-h-1,j=(1<<x)-1,S=j>>1,w=h===23?u(2,-24)-u(2,-77):0,_=m<0||m===0&&1/m<0?1:0,M=0;for((m=o(m))!=m||m===1/0?(g=m!=m?1:0,d=j):(d=l(c(m)/p),m*(y=u(2,-d))<1&&(d--,y*=2),2<=(m+=1<=d+S?w/y:w*u(2,1-S))*y&&(d++,y/=2),j<=d+S?(g=0,d=j):1<=d+S?(g=(m*y-1)*u(2,h),d+=S):(g=m*u(2,S-1)*u(2,h),d=0));8<=h;b[M++]=255&g,g/=256,h-=8);for(d=d<<h|g,x+=h;0<x;b[M++]=255&d,d/=256,x-=8);return b[--M]|=128*_,b},unpack:function(m,h){var f,d=m.length,j=8*d-h-1,g=(1<<j)-1,y=g>>1,b=j-7,x=d-1,j=m[x--],S=127&j;for(j>>=7;0<b;S=256*S+m[x],x--,b-=8);for(f=S&(1<<-b)-1,S>>=-b,b+=h;0<b;f=256*f+m[x],x--,b-=8);if(S===0)S=1-y;else{if(S===g)return f?NaN:j?-1/0:1/0;f+=u(2,h),S-=y}return(j?-1:1)*f*u(2,S-h)}}},{}],66:[function(r,s,a){var o=r("../internals/fails"),u=r("../internals/classof-raw"),l="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return u(c)=="String"?l.call(c,""):Object(c)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(r,s,a){var o=r("../internals/is-object"),u=r("../internals/object-set-prototype-of");s.exports=function(l,c,p){return u&&typeof(c=c.constructor)=="function"&&c!==p&&o(c=c.prototype)&&c!==p.prototype&&u(l,c),l}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(o,s,a){var o=o("../internals/shared-store"),u=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(l){return u.call(l)}),s.exports=o.inspectSource},{"../internals/shared-store":119}],69:[function(r,s,a){function o(b){p(b,f,{value:{objectID:"O"+ ++d,weakData:{}}})}var u=r("../internals/hidden-keys"),l=r("../internals/is-object"),c=r("../internals/has"),p=r("../internals/object-define-property").f,m=r("../internals/uid"),h=r("../internals/freezing"),f=m("meta"),d=0,g=Object.isExtensible||function(){return!0},y=s.exports={REQUIRED:!1,fastKey:function(b,x){if(!l(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!c(b,f)){if(!g(b))return"F";if(!x)return"E";o(b)}return b[f].objectID},getWeakData:function(b,x){if(!c(b,f)){if(!g(b))return!0;if(!x)return!1;o(b)}return b[f].weakData},onFreeze:function(b){return h&&y.REQUIRED&&g(b)&&!c(b,f)&&o(b),b}};u[f]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(j,s,a){var o,u,l,c,p,m,h,f,d=j("../internals/native-weak-map"),S=j("../internals/global"),g=j("../internals/is-object"),y=j("../internals/create-non-enumerable-property"),b=j("../internals/has"),x=j("../internals/shared-key"),j=j("../internals/hidden-keys"),S=S.WeakMap;h=d?(o=new S,u=o.get,l=o.has,c=o.set,p=function(w,_){return c.call(o,w,_),_},m=function(w){return u.call(o,w)||{}},function(w){return l.call(o,w)}):(j[f=x("state")]=!0,p=function(w,_){return y(w,f,_),_},m=function(w){return b(w,f)?w[f]:{}},function(w){return b(w,f)}),s.exports={set:p,get:m,has:h,enforce:function(w){return h(w)?m(w):p(w,{})},getterFor:function(w){return function(_){if(g(_)&&(_=m(_)).type===w)return _;throw TypeError("Incompatible receiver, "+w+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(r,s,a){var o=r("../internals/well-known-symbol"),u=r("../internals/iterators"),l=o("iterator"),c=Array.prototype;s.exports=function(p){return p!==void 0&&(u.Array===p||c[l]===p)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(r,s,a){var o=r("../internals/classof-raw");s.exports=Array.isArray||function(u){return o(u)=="Array"}},{"../internals/classof-raw":28}],73:[function(r,s,a){function o(f,d){return(f=p[c(f)])==h||f!=m&&(typeof d=="function"?u(d):!!d)}var u=r("../internals/fails"),l=/#|\.prototype\./,c=o.normalize=function(f){return String(f).replace(l,".").toLowerCase()},p=o.data={},m=o.NATIVE="N",h=o.POLYFILL="P";s.exports=o},{"../internals/fails":51}],74:[function(r,s,a){s.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},{}],75:[function(r,s,a){s.exports=!1},{}],76:[function(r,s,a){var o=r("../internals/is-object"),u=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("match");s.exports=function(c){var p;return o(c)&&((p=c[l])!==void 0?!!p:u(c)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(r,s,a){function o(f,d){this.stopped=f,this.result=d}var u=r("../internals/an-object"),l=r("../internals/is-array-iterator-method"),c=r("../internals/to-length"),p=r("../internals/function-bind-context"),m=r("../internals/get-iterator-method"),h=r("../internals/call-with-safe-iteration-closing");(s.exports=function(f,d,g,y,b){var x,j,S,w,_,M,I=p(d,g,y?2:1);if(b)x=f;else{if(typeof(d=m(f))!="function")throw TypeError("Target is not iterable");if(l(d)){for(j=0,S=c(f.length);j<S;j++)if((w=y?I(u(M=f[j])[0],M[1]):I(f[j]))&&w instanceof o)return w;return new o(!1)}x=d.call(f)}for(_=x.next;!(M=_.call(x)).done;)if(typeof(w=h(x,I,M.value,y))=="object"&&w&&w instanceof o)return w;return new o(!1)}).stop=function(f){return new o(!0,f)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(m,s,a){var o,u,l=m("../internals/object-get-prototype-of"),c=m("../internals/create-non-enumerable-property"),p=m("../internals/has"),h=m("../internals/well-known-symbol"),m=m("../internals/is-pure"),h=h("iterator"),f=!1;[].keys&&("next"in(u=[].keys())?(l=l(l(u)))!==Object.prototype&&(o=l):f=!0),o==null&&(o={}),m||p(o,h)||c(o,h,function(){return this}),s.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:f}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(r,s,a){s.exports={}},{}],80:[function(r,s,a){s.exports=Math.sign||function(o){return(o=+o)==0||o!=o?o:o<0?-1:1}},{}],81:[function(y,s,a){var o,u,l,c,p,m,h,f,d=y("../internals/global"),_=y("../internals/object-get-own-property-descriptor").f,w=y("../internals/classof-raw"),g=y("../internals/task").set,y=y("../internals/engine-is-ios"),b=d.MutationObserver||d.WebKitMutationObserver,x=d.process,j=d.Promise,S=w(x)=="process",w=_(d,"queueMicrotask"),_=w&&w.value;_||(o=function(){var M,I;for(S&&(M=x.domain)&&M.exit();u;){I=u.fn,u=u.next;try{I()}catch(P){throw u?c():l=void 0,P}}l=void 0,M&&M.enter()},c=S?function(){x.nextTick(o)}:b&&!y?(p=!0,m=document.createTextNode(""),new b(o).observe(m,{characterData:!0}),function(){m.data=p=!p}):j&&j.resolve?(h=j.resolve(void 0),f=h.then,function(){f.call(h,o)}):function(){g.call(d,o)}),s.exports=_||function(M){M={fn:M,next:void 0},l&&(l.next=M),u||(u=M,c()),l=M}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(r,s,a){r=r("../internals/global"),s.exports=r.Promise},{"../internals/global":59}],83:[function(r,s,a){r=r("../internals/fails"),s.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(r,s,a){var o=r("../internals/fails"),u=r("../internals/well-known-symbol"),l=r("../internals/is-pure"),c=u("iterator");s.exports=!o(function(){var p=new URL("b?a=1&b=2&c=3","http://a"),m=p.searchParams,h="";return p.pathname="c%20d",m.forEach(function(f,d){m.delete("b"),h+=d+f}),l&&!p.toJSON||!m.sort||p.href!=="http://a/c%20d?a=1&c=3"||m.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!m[c]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://ÑÐµÑÑ").host!=="xn--e1aybc"||new URL("http://a#Ð±").hash!=="#%D0%B1"||h!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(o,s,a){var u=o("../internals/global"),o=o("../internals/inspect-source"),u=u.WeakMap;s.exports=typeof u=="function"&&/native code/.test(o(u))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(r,s,a){function o(l){var c,p;this.promise=new l(function(m,h){if(c!==void 0||p!==void 0)throw TypeError("Bad Promise constructor");c=m,p=h}),this.resolve=u(c),this.reject=u(p)}var u=r("../internals/a-function");s.exports.f=function(l){return new o(l)}},{"../internals/a-function":5}],87:[function(r,s,a){var o=r("../internals/is-regexp");s.exports=function(u){if(o(u))throw TypeError("The method doesn't accept regular expressions");return u}},{"../internals/is-regexp":76}],88:[function(r,s,a){var o=r("../internals/global").isFinite;s.exports=Number.isFinite||function(u){return typeof u=="number"&&o(u)}},{"../internals/global":59}],89:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/fails"),l=r("../internals/object-keys"),c=r("../internals/object-get-own-property-symbols"),p=r("../internals/object-property-is-enumerable"),m=r("../internals/to-object"),h=r("../internals/indexed-object"),f=Object.assign,d=Object.defineProperty;s.exports=!f||u(function(){var g,y,b,x;return!(!o||f({b:1},f(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(y={},x="abcdefghijklmnopqrst",(g={})[b=Symbol()]=7,x.split("").forEach(function(j){y[j]=j}),f({},g)[b]!=7||l(f({},y)).join("")!=x)})?function(g,y){for(var b=m(g),x=arguments.length,j=1,S=c.f,w=p.f;j<x;)for(var _,M=h(arguments[j++]),I=S?l(M).concat(S(M)):l(M),P=I.length,R=0;R<P;)_=I[R++],o&&!w.call(M,_)||(b[_]=M[_]);return b}:f},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(d,s,a){function o(){}var u,l=d("../internals/an-object"),c=d("../internals/object-define-properties"),p=d("../internals/enum-bug-keys"),m=d("../internals/hidden-keys"),h=d("../internals/html"),f=d("../internals/document-create-element"),d=d("../internals/shared-key"),g="prototype",y="script",b=d("IE_PROTO"),x=function(S){return"<"+y+">"+S+"</"+y+">"},j=function(){try{u=document.domain&&new ActiveXObject("htmlfile")}catch{}j=u?((S=u).write(x("")),S.close(),w=S.parentWindow.Object,S=null,w):(S=f("iframe"),w="java"+y+":",S.style.display="none",h.appendChild(S),S.src=String(w),(w=S.contentWindow.document).open(),w.write(x("document.F=Object")),w.close(),w.F);for(var S,w,_=p.length;_--;)delete j[g][p[_]];return j()};m[b]=!0,s.exports=Object.create||function(S,w){var _;return S!==null?(o[g]=l(S),_=new o,o[g]=null,_[b]=S):_=j(),w===void 0?_:c(_,w)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/object-define-property"),l=r("../internals/an-object"),c=r("../internals/object-keys");s.exports=o?Object.defineProperties:function(p,m){l(p);for(var h,f=c(m),d=f.length,g=0;g<d;)u.f(p,h=f[g++],m[h]);return p}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/ie8-dom-define"),l=r("../internals/an-object"),c=r("../internals/to-primitive"),p=Object.defineProperty;a.f=o?p:function(m,h,f){if(l(m),h=c(h,!0),l(f),u)try{return p(m,h,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(m[h]=f.value),m}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/object-property-is-enumerable"),l=r("../internals/create-property-descriptor"),c=r("../internals/to-indexed-object"),p=r("../internals/to-primitive"),m=r("../internals/has"),h=r("../internals/ie8-dom-define"),f=Object.getOwnPropertyDescriptor;a.f=o?f:function(d,g){if(d=c(d),g=p(g,!0),h)try{return f(d,g)}catch{}if(m(d,g))return l(!u.f.call(d,g),d[g])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(r,s,a){var o=r("../internals/to-indexed-object"),u=r("../internals/object-get-own-property-names").f,l={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(p){if(!c||l.call(p)!="[object Window]")return u(o(p));try{return u(p)}catch{return c.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(r,s,a){var o=r("../internals/object-keys-internal"),u=r("../internals/enum-bug-keys").concat("length","prototype");a.f=Object.getOwnPropertyNames||function(l){return o(l,u)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(r,s,a){a.f=Object.getOwnPropertySymbols},{}],97:[function(c,s,a){var o=c("../internals/has"),u=c("../internals/to-object"),l=c("../internals/shared-key"),c=c("../internals/correct-prototype-getter"),p=l("IE_PROTO"),m=Object.prototype;s.exports=c?Object.getPrototypeOf:function(h){return h=u(h),o(h,p)?h[p]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?m:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(r,s,a){var o=r("../internals/has"),u=r("../internals/to-indexed-object"),l=r("../internals/array-includes").indexOf,c=r("../internals/hidden-keys");s.exports=function(p,m){var h,f=u(p),d=0,g=[];for(h in f)!o(c,h)&&o(f,h)&&g.push(h);for(;m.length>d;)!o(f,h=m[d++])||~l(g,h)||g.push(h);return g}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(r,s,a){var o=r("../internals/object-keys-internal"),u=r("../internals/enum-bug-keys");s.exports=Object.keys||function(l){return o(l,u)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(r,s,a){var o={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,l=u&&!o.call({1:2},1);a.f=l?function(c){return c=u(this,c),!!c&&c.enumerable}:o},{}],101:[function(r,s,a){var o=r("../internals/an-object"),u=r("../internals/a-possible-prototype");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,c=!1,p={};try{(l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(p,[]),c=p instanceof Array}catch{}return function(m,h){return o(m),u(h),c?l.call(m,h):m.__proto__=h,m}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(r,s,a){var o=r("../internals/to-string-tag-support"),u=r("../internals/classof");s.exports=o?{}.toString:function(){return"[object "+u(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(r,s,a){var o=r("../internals/get-built-in"),u=r("../internals/object-get-own-property-names"),l=r("../internals/object-get-own-property-symbols"),c=r("../internals/an-object");s.exports=o("Reflect","ownKeys")||function(p){var m=u.f(c(p)),h=l.f;return h?m.concat(h(p)):m}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(r,s,a){r=r("../internals/global"),s.exports=r},{"../internals/global":59}],105:[function(r,s,a){s.exports=function(o){try{return{error:!1,value:o()}}catch(u){return{error:!0,value:u}}}},{}],106:[function(r,s,a){var o=r("../internals/an-object"),u=r("../internals/is-object"),l=r("../internals/new-promise-capability");s.exports=function(c,p){return o(c),u(p)&&p.constructor===c?p:((0,(c=l.f(c)).resolve)(p),c.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(r,s,a){var o=r("../internals/redefine");s.exports=function(u,l,c){for(var p in l)o(u,p,l[p],c);return u}},{"../internals/redefine":108}],108:[function(m,s,a){var o=m("../internals/global"),u=m("../internals/create-non-enumerable-property"),l=m("../internals/has"),c=m("../internals/set-global"),p=m("../internals/inspect-source"),m=m("../internals/internal-state"),h=m.get,f=m.enforce,d=String(String).split("String");(s.exports=function(g,y,b,w){var j=!!w&&!!w.unsafe,S=!!w&&!!w.enumerable,w=!!w&&!!w.noTargetGet;typeof b=="function"&&(typeof y!="string"||l(b,"name")||u(b,"name",y),f(b).source=d.join(typeof y=="string"?y:"")),g===o?S?g[y]=b:c(y,b):(j?!w&&g[y]&&(S=!0):delete g[y],S?g[y]=b:u(g,y,b))})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||p(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(r,s,a){var o=r("./classof-raw"),u=r("./regexp-exec");s.exports=function(l,c){var p=l.exec;if(typeof p=="function"){if(p=p.call(l,c),typeof p!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return p}if(o(l)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return u.call(l,c)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(c,s,a){var o,u,l=c("./regexp-flags"),c=c("./regexp-sticky-helpers"),p=RegExp.prototype.exec,m=String.prototype.replace,h=p,f=(o=/a/,u=/b*/g,p.call(o,"a"),p.call(u,"a"),o.lastIndex!==0||u.lastIndex!==0),d=c.UNSUPPORTED_Y||c.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0;s.exports=h=f||g||d?function(y){var b,x,j,S,w=this,_=d&&w.sticky,M=l.call(w),I=w.source,P=0,R=y;return _&&((M=M.replace("y","")).indexOf("g")===-1&&(M+="g"),R=String(y).slice(w.lastIndex),0<w.lastIndex&&(!w.multiline||w.multiline&&y[w.lastIndex-1]!==`
`)&&(I="(?: "+I+")",R=" "+R,P++),x=new RegExp("^(?:"+I+")",M)),g&&(x=new RegExp("^"+I+"$(?!\\s)",M)),f&&(b=w.lastIndex),j=p.call(_?x:w,R),_?j?(j.input=j.input.slice(P),j[0]=j[0].slice(P),j.index=w.lastIndex,w.lastIndex+=j[0].length):w.lastIndex=0:f&&j&&(w.lastIndex=w.global?j.index+j[0].length:b),g&&j&&1<j.length&&m.call(j[0],x,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(j[S]=void 0)}),j}:h},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(r,s,a){var o=r("../internals/an-object");s.exports=function(){var u=o(this),l="";return u.global&&(l+="g"),u.ignoreCase&&(l+="i"),u.multiline&&(l+="m"),u.dotAll&&(l+="s"),u.unicode&&(l+="u"),u.sticky&&(l+="y"),l}},{"../internals/an-object":10}],112:[function(r,s,a){r=r("./fails");function o(u,l){return RegExp(u,l)}a.UNSUPPORTED_Y=r(function(){var u=o("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),a.BROKEN_CARET=r(function(){var u=o("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},{"./fails":51}],113:[function(r,s,a){s.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},{}],114:[function(r,s,a){s.exports=Object.is||function(o,u){return o===u?o!==0||1/o==1/u:o!=o&&u!=u}},{}],115:[function(r,s,a){var o=r("../internals/global"),u=r("../internals/create-non-enumerable-property");s.exports=function(l,c){try{u(o,l,c)}catch{o[l]=c}return c}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(r,s,a){var o=r("../internals/get-built-in"),u=r("../internals/object-define-property"),l=r("../internals/well-known-symbol"),c=r("../internals/descriptors"),p=l("species");s.exports=function(h){var h=o(h),f=u.f;c&&h&&!h[p]&&f(h,p,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(r,s,a){var o=r("../internals/object-define-property").f,u=r("../internals/has"),l=r("../internals/well-known-symbol")("toStringTag");s.exports=function(c,p,m){c&&!u(c=m?c:c.prototype,l)&&o(c,l,{configurable:!0,value:p})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(r,s,a){var o=r("../internals/shared"),u=r("../internals/uid"),l=o("keys");s.exports=function(c){return l[c]||(l[c]=u(c))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(o,s,a){var l=o("../internals/global"),o=o("../internals/set-global"),u="__core-js_shared__",l=l[u]||o(u,{});s.exports=l},{"../internals/global":59,"../internals/set-global":115}],120:[function(r,s,a){var o=r("../internals/is-pure"),u=r("../internals/shared-store");(s.exports=function(l,c){return u[l]||(u[l]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(r,s,a){var o=r("../internals/an-object"),u=r("../internals/a-function"),l=r("../internals/well-known-symbol")("species");s.exports=function(m,p){var m=o(m).constructor;return m===void 0||(m=o(m)[l])==null?p:u(m)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(r,s,a){var o=r("../internals/fails");s.exports=function(u){return o(function(){var l=""[u]('"');return l!==l.toLowerCase()||3<l.split('"').length})}},{"../internals/fails":51}],123:[function(r,s,a){function o(c){return function(f,d){var h,f=String(l(f)),d=u(d),g=f.length;return d<0||g<=d?c?"":void 0:(h=f.charCodeAt(d))<55296||56319<h||d+1===g||(g=f.charCodeAt(d+1))<56320||57343<g?c?f.charAt(d):h:c?f.slice(d,d+2):g-56320+(h-55296<<10)+65536}}var u=r("../internals/to-integer"),l=r("../internals/require-object-coercible");s.exports={codeAt:o(!1),charAt:o(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(r,s,a){function o(j){return j+22+75*(j<26)}function u(j){var S,w=[],_=(j=function(Y){for(var X=[],ce=0,O=Y.length;ce<O;){var B,W=Y.charCodeAt(ce++);55296<=W&&W<=56319&&ce<O?(64512&(B=Y.charCodeAt(ce++)))==56320?X.push(((1023&W)<<10)+(1023&B)+65536):(X.push(W),ce--):X.push(W)}return X}(j)).length,M=128,I=0,P=72;for(F=0;F<j.length;F++)(S=j[F])<128&&w.push(x(S));var R=w.length,D=R;for(R&&w.push("-");D<_;){for(var U=l,F=0;F<j.length;F++)M<=(S=j[F])&&S<U&&(U=S);var z=D+1;if(U-M>b((l-I)/z))throw RangeError(g);for(I+=(U-M)*z,M=U,F=0;F<j.length;F++){if((S=j[F])<M&&++I>l)throw RangeError(g);if(S==M){for(var K=I,Q=c;;Q+=c){var te=Q<=P?1:P+p<=Q?p:Q-P;if(K<te)break;var Z=K-te,q=c-te;w.push(x(o(te+Z%q))),K=b(Z/q)}w.push(x(o(K))),P=function(Y,X,ce){var O=0;for(Y=ce?b(Y/h):Y>>1,Y+=b(Y/X);y*p>>1<Y;O+=c)Y=b(Y/y);return b(O+(y+1)*Y/(Y+m))}(I,z,D==R),I=0,++D}}++I,++M}return w.join("")}var l=2147483647,c=36,p=26,m=38,h=700,f=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,g="Overflow: input needs wider integers to process",y=c-1,b=Math.floor,x=String.fromCharCode;s.exports=function(j){for(var S,w=[],_=j.toLowerCase().replace(d,".").split("."),M=0;M<_.length;M++)S=_[M],w.push(f.test(S)?"xn--"+u(S):S);return w.join(".")}},{}],125:[function(r,s,a){var o=r("../internals/to-integer"),u=r("../internals/require-object-coercible");s.exports="".repeat||function(l){var c=String(u(this)),p="",m=o(l);if(m<0||m==1/0)throw RangeError("Wrong number of repetitions");for(;0<m;(m>>>=1)&&(c+=c))1&m&&(p+=c);return p}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(r,s,a){var o=r("../internals/fails"),u=r("../internals/whitespaces");s.exports=function(l){return o(function(){return!!u[l]()||"âÂá "[l]()!="âÂá "||u[l].name!==l})}},{"../internals/fails":51,"../internals/whitespaces":147}],127:[function(l,s,a){function o(m){return function(h){return h=String(u(h)),1&m&&(h=h.replace(c,"")),h=2&m?h.replace(p,""):h}}var u=l("../internals/require-object-coercible"),l="["+l("../internals/whitespaces")+"]",c=RegExp("^"+l+l+"*"),p=RegExp(l+l+"*$");s.exports={start:o(1),end:o(2),trim:o(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(y,s,a){function o(D){return function(){R(D)}}function u(D){R(D.data)}function l(D){p.postMessage(D+"",b.protocol+"//"+b.host)}var c,p=y("../internals/global"),m=y("../internals/fails"),h=y("../internals/classof-raw"),f=y("../internals/function-bind-context"),d=y("../internals/html"),g=y("../internals/document-create-element"),y=y("../internals/engine-is-ios"),b=p.location,x=p.setImmediate,j=p.clearImmediate,S=p.process,w=p.MessageChannel,_=p.Dispatch,M=0,I={},P="onreadystatechange",R=function(D){var U;I.hasOwnProperty(D)&&(U=I[D],delete I[D],U())};x&&j||(x=function(D){for(var U=[],F=1;F<arguments.length;)U.push(arguments[F++]);return I[++M]=function(){(typeof D=="function"?D:Function(D)).apply(void 0,U)},c(M),M},j=function(D){delete I[D]},h(S)=="process"?c=function(D){S.nextTick(o(D))}:_&&_.now?c=function(D){_.now(o(D))}:w&&!y?(y=(h=new w).port2,h.port1.onmessage=u,c=f(y.postMessage,y,1)):!p.addEventListener||typeof postMessage!="function"||p.importScripts||m(l)||b.protocol==="file:"?c=P in g("script")?function(D){d.appendChild(g("script"))[P]=function(){d.removeChild(this),R(D)}}:function(D){setTimeout(o(D),0)}:(c=l,p.addEventListener("message",u,!1))),s.exports={set:x,clear:j}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(r,s,a){var o=r("../internals/classof-raw");s.exports=function(u){if(typeof u!="number"&&o(u)!="Number")throw TypeError("Incorrect invocation");return+u}},{"../internals/classof-raw":28}],130:[function(r,s,a){var o=r("../internals/to-integer"),u=Math.max,l=Math.min;s.exports=function(c,p){return c=o(c),c<0?u(c+p,0):l(c,p)}},{"../internals/to-integer":133}],131:[function(r,s,a){var o=r("../internals/to-integer"),u=r("../internals/to-length");s.exports=function(c){if(c===void 0)return 0;var c=o(c),p=u(c);if(c!==p)throw RangeError("Wrong length or index");return p}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(r,s,a){var o=r("../internals/indexed-object"),u=r("../internals/require-object-coercible");s.exports=function(l){return o(u(l))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(r,s,a){var o=Math.ceil,u=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(0<l?u:o)(l)}},{}],134:[function(r,s,a){var o=r("../internals/to-integer"),u=Math.min;s.exports=function(l){return 0<l?u(o(l),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(r,s,a){var o=r("../internals/require-object-coercible");s.exports=function(u){return Object(o(u))}},{"../internals/require-object-coercible":113}],136:[function(r,s,a){var o=r("../internals/to-positive-integer");s.exports=function(u,l){if(u=o(u),u%l)throw RangeError("Wrong offset");return u}},{"../internals/to-positive-integer":137}],137:[function(r,s,a){var o=r("../internals/to-integer");s.exports=function(u){if(u=o(u),u<0)throw RangeError("The argument can't be less than 0");return u}},{"../internals/to-integer":133}],138:[function(r,s,a){var o=r("../internals/is-object");s.exports=function(u,l){if(!o(u))return u;var c,p;if(l&&typeof(c=u.toString)=="function"&&!o(p=c.call(u))||typeof(c=u.valueOf)=="function"&&!o(p=c.call(u))||!l&&typeof(c=u.toString)=="function"&&!o(p=c.call(u)))return p;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(r,s,a){var o={};o[r("../internals/well-known-symbol")("toStringTag")]="z",s.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":146}],140:[function(r,s,a){function o(Me,Ve){for(var Be=0,tt=Ve.length,Ue=new(oe(Me))(tt);Be<tt;)Ue[Be]=Ve[Be++];return Ue}function u(Me,Ve){B(Me,Ve,{get:function(){return ce(this)[Ve]}})}function l(Me){return Me instanceof me||(Me=R(Me))=="ArrayBuffer"||Me=="SharedArrayBuffer"}function c(Me,Ve){return Se(Me)&&typeof Ve!="symbol"&&Ve in Me&&String(+Ve)==String(Ve)}function p(Me,Ve){return c(Me,Ve=I(Ve,!0))?j(2,Me[Ve]):W(Me,Ve)}function m(Me,Ve,Be){return!(c(Me,Ve=I(Ve,!0))&&D(Be)&&P(Be,"value"))||P(Be,"get")||P(Be,"set")||Be.configurable||P(Be,"writable")&&!Be.writable||P(Be,"enumerable")&&!Be.enumerable?B(Me,Ve,Be):(Me[Ve]=Be.value,Me)}var h=r("../internals/export"),f=r("../internals/global"),d=r("../internals/descriptors"),g=r("../internals/typed-array-constructors-require-wrappers"),y=r("../internals/array-buffer-view-core"),b=r("../internals/array-buffer"),x=r("../internals/an-instance"),j=r("../internals/create-property-descriptor"),S=r("../internals/create-non-enumerable-property"),w=r("../internals/to-length"),_=r("../internals/to-index"),M=r("../internals/to-offset"),I=r("../internals/to-primitive"),P=r("../internals/has"),R=r("../internals/classof"),D=r("../internals/is-object"),U=r("../internals/object-create"),F=r("../internals/object-set-prototype-of"),z=r("../internals/object-get-own-property-names").f,K=r("../internals/typed-array-from"),Q=r("../internals/array-iteration").forEach,te=r("../internals/set-species"),Z=r("../internals/object-define-property"),q=r("../internals/object-get-own-property-descriptor"),Y=r("../internals/internal-state"),X=r("../internals/inherit-if-required"),ce=Y.get,O=Y.set,B=Z.f,W=q.f,re=Math.round,ae=f.RangeError,me=b.ArrayBuffer,ge=b.DataView,xe=y.NATIVE_ARRAY_BUFFER_VIEWS,fe=y.TYPED_ARRAY_TAG,ye=y.TypedArray,Te=y.TypedArrayPrototype,oe=y.aTypedArrayConstructor,Se=y.isTypedArray,be="BYTES_PER_ELEMENT",Ie="Wrong length";d?(xe||(q.f=p,Z.f=m,u(Te,"buffer"),u(Te,"byteOffset"),u(Te,"byteLength"),u(Te,"length")),h({target:"Object",stat:!0,forced:!xe},{getOwnPropertyDescriptor:p,defineProperty:m}),s.exports=function(je,Ve,Be){function tt(Pe,J){B(Pe,J,{get:function(){var ie=this,$=J;return(ie=ce(ie)).view[Le]($*Ue+ie.byteOffset,!0)},set:function(ie){var $=this,le=J;$=ce($),Be&&(ie=(ie=re(ie))<0?0:255<ie?255:255&ie),$.view[Fe](le*Ue+$.byteOffset,ie,!0)},enumerable:!0})}var Ue=je.match(/\d+$/)[0]/8,ve=je+(Be?"Clamped":"")+"Array",Le="get"+je,Fe="set"+je,Ze=f[ve],et=Ze,je=et&&et.prototype,$e={};xe?g&&(et=Ve(function(Pe,J,ie,$){return x(Pe,et,ve),X(D(J)?l(J)?$!==void 0?new Ze(J,M(ie,Ue),$):ie!==void 0?new Ze(J,M(ie,Ue)):new Ze(J):Se(J)?o(et,J):K.call(et,J):new Ze(_(J)),Pe,et)}),F&&F(et,ye),Q(z(Ze),function(Pe){Pe in et||S(et,Pe,Ze[Pe])}),et.prototype=je):(et=Ve(function(Pe,J,ie,$){x(Pe,et,ve);var le,Ee,Re=0,Ge=0;if(D(J)){if(!l(J))return Se(J)?o(et,J):K.call(et,J);var st=J,Ge=M(ie,Ue),ie=J.byteLength;if($===void 0){if(ie%Ue||(le=ie-Ge)<0)throw ae(Ie)}else if(ie<(le=w($)*Ue)+Ge)throw ae(Ie);Ee=le/Ue}else Ee=_(J),st=new me(le=Ee*Ue);for(O(Pe,{buffer:st,byteOffset:Ge,byteLength:le,length:Ee,view:new ge(st)});Re<Ee;)tt(Pe,Re++)}),F&&F(et,ye),je=et.prototype=U(Te)),je.constructor!==et&&S(je,"constructor",et),fe&&S(je,fe,ve),$e[ve]=et,h({global:!0,forced:et!=Ze,sham:!xe},$e),be in et||S(et,be,Ue),be in je||S(je,be,Ue),te(ve)}):s.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(c,s,a){var o=c("../internals/global"),u=c("../internals/fails"),l=c("../internals/check-correctness-of-iteration"),c=c("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,p=o.ArrayBuffer,m=o.Int8Array;s.exports=!c||!u(function(){m(1)})||!u(function(){new m(-1)})||!l(function(h){new m,new m(null),new m(1.5),new m(h)},!0)||u(function(){return new m(new p(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],142:[function(r,s,a){var o=r("../internals/to-object"),u=r("../internals/to-length"),l=r("../internals/get-iterator-method"),c=r("../internals/is-array-iterator-method"),p=r("../internals/function-bind-context"),m=r("../internals/array-buffer-view-core").aTypedArrayConstructor;s.exports=function(h){var f,d,g,y,b,x,j=o(h),S=arguments.length,w=1<S?arguments[1]:void 0,_=w!==void 0,M=l(j);if(M!=null&&!c(M))for(x=(b=M.call(j)).next,j=[];!(y=x.call(b)).done;)j.push(y.value);for(_&&2<S&&(w=p(w,arguments[2],2)),d=u(j.length),g=new(m(this))(d),f=0;f<d;f++)g[f]=_?w(j[f],f):j[f];return g}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(r,s,a){var o=0,u=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+u).toString(36)}},{}],144:[function(r,s,a){r=r("../internals/native-symbol"),s.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],145:[function(r,s,a){r=r("../internals/well-known-symbol"),a.f=r},{"../internals/well-known-symbol":146}],146:[function(m,s,a){var o=m("../internals/global"),u=m("../internals/shared"),l=m("../internals/has"),c=m("../internals/uid"),p=m("../internals/native-symbol"),m=m("../internals/use-symbol-as-uid"),h=u("wks"),f=o.Symbol,d=m?f:f&&f.withoutSetter||c;s.exports=function(g){return l(h,g)||(p&&l(f,g)?h[g]=f[g]:h[g]=d("Symbol."+g)),h[g]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(r,s,a){s.exports=`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF`},{}],148:[function(l,s,a){var o=l("../internals/export"),u=l("../internals/global"),p=l("../internals/array-buffer"),l=l("../internals/set-species"),c="ArrayBuffer",p=p[c];o({global:!0,forced:u[c]!==p},{ArrayBuffer:p}),l(c)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],149:[function(j,s,a){var o=j("../internals/export"),u=j("../internals/fails"),l=j("../internals/is-array"),c=j("../internals/is-object"),p=j("../internals/to-object"),m=j("../internals/to-length"),h=j("../internals/create-property"),f=j("../internals/array-species-create"),d=j("../internals/array-method-has-species-support"),x=j("../internals/well-known-symbol"),j=j("../internals/engine-v8-version"),g=x("isConcatSpreadable"),y=9007199254740991,b="Maximum allowed index exceeded",x=51<=j||!u(function(){var S=[];return S[g]=!1,S.concat()[0]!==S}),j=d("concat");o({target:"Array",proto:!0,forced:!x||!j},{concat:function(S){for(var w,_,M,I,P,R=p(this),D=f(R,0),U=0,F=-1,z=arguments.length;F<z;F++)if(P=void 0,!c(I=M=F===-1?R:arguments[F])||((P=I[g])!==void 0?!P:!l(I))){if(y<=U)throw TypeError(b);h(D,U++,M)}else{if(_=m(M.length),y<U+_)throw TypeError(b);for(w=0;w<_;w++,U++)w in M&&h(D,U,M[w])}return D.length=U,D}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(l,s,a){var o=l("../internals/export"),u=l("../internals/array-copy-within"),l=l("../internals/add-to-unscopables");o({target:"Array",proto:!0},{copyWithin:u}),l("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],151:[function(c,s,a){var o=c("../internals/export"),u=c("../internals/array-iteration").every,l=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),l=l("every"),c=c("every");o({target:"Array",proto:!0,forced:!l||!c},{every:function(p){return u(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],152:[function(l,s,a){var o=l("../internals/export"),u=l("../internals/array-fill"),l=l("../internals/add-to-unscopables");o({target:"Array",proto:!0},{fill:u}),l("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],153:[function(c,s,a){var o=c("../internals/export"),u=c("../internals/array-iteration").filter,l=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),l=l("filter"),c=c("filter");o({target:"Array",proto:!0,forced:!l||!c},{filter:function(p){return u(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(u,s,a){var o=u("../internals/export"),u=u("../internals/array-for-each");o({target:"Array",proto:!0,forced:[].forEach!=u},{forEach:u})},{"../internals/array-for-each":16,"../internals/export":50}],155:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/array-from");o({target:"Array",stat:!0,forced:!r("../internals/check-correctness-of-iteration")(function(l){Array.from(l)})},{from:u})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],156:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/array-includes").includes,l=r("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:!r("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(c){return u(this,c,1<arguments.length?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(m,s,a){var o=m("../internals/export"),u=m("../internals/array-includes").indexOf,p=m("../internals/array-method-is-strict"),m=m("../internals/array-method-uses-to-length"),l=[].indexOf,c=!!l&&1/[1].indexOf(1,-0)<0,p=p("indexOf"),m=m("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:c||!p||!m},{indexOf:function(h){return c?l.apply(this,arguments)||0:u(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(p,s,a){var o=p("../internals/to-indexed-object"),u=p("../internals/add-to-unscopables"),l=p("../internals/iterators"),c=p("../internals/internal-state"),p=p("../internals/define-iterator"),m="Array Iterator",h=c.set,f=c.getterFor(m);s.exports=p(Array,"Array",function(d,g){h(this,{type:m,target:o(d),index:0,kind:g})},function(){var d=f(this),g=d.target,y=d.kind,b=d.index++;return!g||b>=g.length?{value:d.target=void 0,done:!0}:y=="keys"?{value:b,done:!1}:y=="values"?{value:g[b],done:!1}:{value:[b,g[b]],done:!1}},"values"),l.Arguments=l.Array,u("keys"),u("values"),u("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(p,s,a){var o=p("../internals/export"),c=p("../internals/indexed-object"),u=p("../internals/to-indexed-object"),p=p("../internals/array-method-is-strict"),l=[].join,c=c!=Object,p=p("join",",");o({target:"Array",proto:!0,forced:c||!p},{join:function(m){return l.call(u(this),m===void 0?",":m)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(u,s,a){var o=u("../internals/export"),u=u("../internals/array-last-index-of");o({target:"Array",proto:!0,forced:u!==[].lastIndexOf},{lastIndexOf:u})},{"../internals/array-last-index-of":20,"../internals/export":50}],161:[function(c,s,a){var o=c("../internals/export"),u=c("../internals/array-iteration").map,l=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),l=l("map"),c=c("map");o({target:"Array",proto:!0,forced:!l||!c},{map:function(p){return u(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],162:[function(g,s,a){var o=g("../internals/export"),u=g("../internals/is-object"),l=g("../internals/is-array"),c=g("../internals/to-absolute-index"),p=g("../internals/to-length"),m=g("../internals/to-indexed-object"),h=g("../internals/create-property"),f=g("../internals/well-known-symbol"),d=g("../internals/array-method-has-species-support"),g=g("../internals/array-method-uses-to-length"),d=d("slice"),g=g("slice",{ACCESSORS:!0,0:0,1:2}),y=f("species"),b=[].slice,x=Math.max;o({target:"Array",proto:!0,forced:!d||!g},{slice:function(j,S){var w,_,M,I=m(this),P=p(I.length),R=c(j,P),D=c(S===void 0?P:S,P);if(l(I)&&((w=typeof(w=I.constructor)=="function"&&(w===Array||l(w.prototype))||u(w)&&(w=w[y])===null?void 0:w)===Array||w===void 0))return b.call(I,R,D);for(_=new(w===void 0?Array:w)(x(D-R,0)),M=0;R<D;R++,M++)R in I&&h(_,M,I[R]);return _.length=M,_}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(c,s,a){var o=c("../internals/export"),u=c("../internals/array-iteration").some,l=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),l=l("some"),c=c("some");o({target:"Array",proto:!0,forced:!l||!c},{some:function(p){return u(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(d,s,a){var o=d("../internals/export"),u=d("../internals/to-absolute-index"),l=d("../internals/to-integer"),c=d("../internals/to-length"),p=d("../internals/to-object"),m=d("../internals/array-species-create"),h=d("../internals/create-property"),f=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),f=f("splice"),d=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,y=Math.min;o({target:"Array",proto:!0,forced:!f||!d},{splice:function(U,x){var j,S,w,_,M,I,P=p(this),R=c(P.length),D=u(U,R),U=arguments.length;if(U===0?j=S=0:S=U===1?(j=0,R-D):(j=U-2,y(g(l(x),0),R-D)),9007199254740991<R+j-S)throw TypeError("Maximum allowed length exceeded");for(w=m(P,S),_=0;_<S;_++)(M=D+_)in P&&h(w,_,P[M]);if(j<(w.length=S)){for(_=D;_<R-S;_++)I=_+j,(M=_+S)in P?P[I]=P[M]:delete P[I];for(_=R;R-S+j<_;_--)delete P[_-1]}else if(S<j)for(_=R-S;D<_;_--)I=_+j-1,(M=_+S-1)in P?P[I]=P[M]:delete P[I];for(_=0;_<j;_++)P[_+D]=arguments[_+2];return P.length=R-S+j,w}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(u,s,a){var o=u("../internals/descriptors"),u=u("../internals/object-define-property").f,l=Function.prototype,c=l.toString,p=/^\s*function ([^ (]*)/;!o||"name"in l||u(l,"name",{configurable:!0,get:function(){try{return c.call(this).match(p)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],166:[function(u,s,a){var o=u("../internals/collection"),u=u("../internals/collection-strong");s.exports=o("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},u)},{"../internals/collection":32,"../internals/collection-strong":30}],167:[function(o,s,a){var o=o("../internals/export"),u=Math.hypot,l=Math.abs,c=Math.sqrt;o({target:"Math",stat:!0,forced:!!u&&u(1/0,NaN)!==1/0},{hypot:function(p,m){for(var h,f,d=0,g=0,y=arguments.length,b=0;g<y;)b<(h=l(arguments[g++]))?(d=d*(f=b/h)*f+1,b=h):d+=0<h?(f=h/b)*f:h;return b===1/0?1/0:b*c(d)}})},{"../internals/export":50}],168:[function(r,s,a){r("../internals/export")({target:"Math",stat:!0},{sign:r("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],169:[function(r,s,a){function o(F){var z,K,Q,te,Z,q,Y,X=d(F,!1);if(typeof X=="string"&&2<X.length){if((F=(X=S(X)).charCodeAt(0))===43||F===45){if((z=X.charCodeAt(2))===88||z===120)return NaN}else if(F===48){switch(X.charCodeAt(1)){case 66:case 98:K=2,Q=49;break;case 79:case 111:K=8,Q=55;break;default:return+X}for(Z=(te=X.slice(2)).length,q=0;q<Z;q++)if((Y=te.charCodeAt(q))<48||Q<Y)return NaN;return parseInt(te,K)}}return+X}var u=r("../internals/descriptors"),l=r("../internals/global"),c=r("../internals/is-forced"),p=r("../internals/redefine"),m=r("../internals/has"),h=r("../internals/classof-raw"),f=r("../internals/inherit-if-required"),d=r("../internals/to-primitive"),g=r("../internals/fails"),y=r("../internals/object-create"),b=r("../internals/object-get-own-property-names").f,x=r("../internals/object-get-own-property-descriptor").f,j=r("../internals/object-define-property").f,S=r("../internals/string-trim").trim,w="Number",_=l[w],M=_.prototype,I=h(y(M))==w;if(c(w,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var P,R=function(z){var z=arguments.length<1?0:z,K=this;return K instanceof R&&(I?g(function(){M.valueOf.call(K)}):h(K)!=w)?f(new _(o(z)),K,R):o(z)},D=u?b(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),U=0;D.length>U;U++)m(_,P=D[U])&&!m(R,P)&&j(R,P,x(_,P));(R.prototype=M).constructor=R,p(l,w,R)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],170:[function(r,s,a){r("../internals/export")({target:"Number",stat:!0},{isFinite:r("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],171:[function(m,s,a){function o(d,g,y){return g===0?y:g%2==1?o(d,g-1,y*d):o(d*d,g/2,y)}var u=m("../internals/export"),l=m("../internals/to-integer"),c=m("../internals/this-number-value"),p=m("../internals/string-repeat"),m=m("../internals/fails"),h=1 .toFixed,f=Math.floor;u({target:"Number",proto:!0,forced:h&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!m(function(){h.call({})})},{toFixed:function(w){function g(P,R){for(var D=-1,U=R;++D<6;)U+=P*_[D],_[D]=U%1e7,U=f(U/1e7)}function y(P){for(var R=6,D=0;0<=--R;)D+=_[R],_[R]=f(D/P),D=D%P*1e7}function b(){for(var P,R=6,D="";0<=--R;)D===""&&R!==0&&_[R]===0||(P=String(_[R]),D=D===""?P:D+p.call("0",7-P.length)+P);return D}var x,j,S=c(this),w=l(w),_=[0,0,0,0,0,0],M="",I="0";if(w<0||20<w)throw RangeError("Incorrect fraction digits");if(S!=S)return"NaN";if(S<=-1e21||1e21<=S)return String(S);if(S<0&&(M="-",S=-S),1e-21<S)if(S=(x=function(P){for(var R=0,D=P;4096<=D;)R+=12,D/=4096;for(;2<=D;)R+=1,D/=2;return R}(S*o(2,69,1))-69)<0?S*o(2,-x,1):S/o(2,x,1),S*=4503599627370496,0<(x=52-x)){for(g(0,S),j=w;7<=j;)g(1e7,0),j-=7;for(g(o(10,j,1),0),j=x-1;23<=j;)y(1<<23),j-=23;y(1<<j),g(1,1),y(2),I=b()}else g(0,S),g(1<<-x,0),I=b()+p.call("0",w);return I=0<w?M+((S=I.length)<=w?"0."+p.call("0",w-S)+I:I.slice(0,S-w)+"."+I.slice(S-w)):M+I}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],172:[function(u,s,a){var o=u("../internals/export"),u=u("../internals/object-assign");o({target:"Object",stat:!0,forced:Object.assign!==u},{assign:u})},{"../internals/export":50,"../internals/object-assign":89}],173:[function(c,s,a){var o=c("../internals/export"),p=c("../internals/fails"),u=c("../internals/to-indexed-object"),l=c("../internals/object-get-own-property-descriptor").f,c=c("../internals/descriptors"),p=p(function(){l(1)});o({target:"Object",stat:!0,forced:!c||p,sham:!c},{getOwnPropertyDescriptor:function(m,h){return l(u(m),h)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":132}],174:[function(l,s,a){var o=l("../internals/export"),u=l("../internals/fails"),l=l("../internals/object-get-own-property-names-external").f;o({target:"Object",stat:!0,forced:u(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:l})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],175:[function(p,s,a){var o=p("../internals/export"),u=p("../internals/fails"),l=p("../internals/to-object"),c=p("../internals/object-get-prototype-of"),p=p("../internals/correct-prototype-getter");o({target:"Object",stat:!0,forced:u(function(){c(1)}),sham:!p},{getPrototypeOf:function(m){return c(l(m))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/to-object"),l=r("../internals/object-keys");o({target:"Object",stat:!0,forced:r("../internals/fails")(function(){l(1)})},{keys:function(c){return l(u(c))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(l,s,a){var o=l("../internals/to-string-tag-support"),u=l("../internals/redefine"),l=l("../internals/object-to-string");o||u(Object.prototype,"toString",l,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(Be,s,a){var o,u,l,c,p=Be("../internals/export"),m=Be("../internals/is-pure"),h=Be("../internals/global"),f=Be("../internals/get-built-in"),d=Be("../internals/native-promise-constructor"),g=Be("../internals/redefine"),y=Be("../internals/redefine-all"),b=Be("../internals/set-to-string-tag"),x=Be("../internals/set-species"),j=Be("../internals/is-object"),S=Be("../internals/a-function"),w=Be("../internals/an-instance"),_=Be("../internals/classof-raw"),M=Be("../internals/inspect-source"),I=Be("../internals/iterate"),P=Be("../internals/check-correctness-of-iteration"),R=Be("../internals/species-constructor"),D=Be("../internals/task").set,U=Be("../internals/microtask"),F=Be("../internals/promise-resolve"),z=Be("../internals/host-report-errors"),K=Be("../internals/new-promise-capability"),Q=Be("../internals/perform"),te=Be("../internals/internal-state"),Z=Be("../internals/is-forced"),tt=Be("../internals/well-known-symbol"),q=Be("../internals/engine-v8-version"),Y=tt("species"),X="Promise",ce=te.get,O=te.set,B=te.getterFor(X),W=d,re=h.TypeError,ae=h.document,me=h.process,ge=f("fetch"),xe=K.f,fe=xe,ye=_(me)=="process",Te=!!(ae&&ae.createEvent&&h.dispatchEvent),oe="unhandledrejection",Se="rejectionhandled",be=1,Ie=2,Me=1,Ve=2,Be=Z(X,function(){var $e,Pe;return M(W)===String(W)&&(q===66||!ye&&typeof PromiseRejectionEvent!="function")?!0:!(!m||W.prototype.finally)||!(51<=q&&/native code/.test(W))&&(Pe=function(J){J(function(){},function(){})},(($e=W.resolve(1)).constructor={})[Y]=Pe,!($e.then(function(){})instanceof Pe))}),tt=Be||!P(function($e){W.all($e).catch(function(){})}),Ue=function($e){var Pe;return!(!j($e)||typeof(Pe=$e.then)!="function")&&Pe},ve=function($e,Pe,J){var ie;Pe.notified||(Pe.notified=!0,ie=Pe.reactions,U(function(){for(var $,le,Ee=Pe.value,Re=Pe.state==be,Ge=0;ie.length>Ge;){var st,ht,ft,yt=ie[Ge++],Ht=Re?yt.ok:yt.fail,Dt=yt.resolve,kt=yt.reject,qt=yt.domain;try{Ht?(Re||(Pe.rejection===Ve&&function(Rt,nr){D.call(h,function(){ye?me.emit("rejectionHandled",Rt):Le(Se,Rt,nr.value)})}($e,Pe),Pe.rejection=Me),Ht===!0?st=Ee:(qt&&qt.enter(),st=Ht(Ee),qt&&(qt.exit(),ft=!0)),st===yt.promise?kt(re("Promise-chain cycle")):(ht=Ue(st))?ht.call(st,Dt,kt):Dt(st)):kt(Ee)}catch(Rt){qt&&!ft&&qt.exit(),kt(Rt)}}Pe.reactions=[],Pe.notified=!1,J&&!Pe.rejection&&($=$e,le=Pe,D.call(h,function(){var Rt=le.value,nr=Fe(le);if(nr&&(nr=Q(function(){ye?me.emit("unhandledRejection",Rt,$):Le(oe,$,Rt)}),le.rejection=ye||Fe(le)?Ve:Me,nr.error))throw nr.value}))}))},Le=function($e,Pe,J){var ie;Te?((ie=ae.createEvent("Event")).promise=Pe,ie.reason=J,ie.initEvent($e,!1,!0),h.dispatchEvent(ie)):ie={promise:Pe,reason:J},(Pe=h["on"+$e])?Pe(ie):$e===oe&&z("Unhandled promise rejection",J)},Fe=function($e){return $e.rejection!==Me&&!$e.parent},Ze=function($e,Pe,J,ie){return function($){$e(Pe,J,$,ie)}},et=function($e,Pe,J,ie){Pe.done||(Pe.done=!0,(Pe=ie||Pe).value=J,Pe.state=Ie,ve($e,Pe,!0))},je=function($e,Pe,J,ie){if(!Pe.done){Pe.done=!0,ie&&(Pe=ie);try{if($e===J)throw re("Promise can't be resolved itself");var $=Ue(J);$?U(function(){var le={done:!1};try{$.call(J,Ze(je,$e,le,Pe),Ze(et,$e,le,Pe))}catch(Ee){et($e,le,Ee,Pe)}}):(Pe.value=J,Pe.state=be,ve($e,Pe,!1))}catch(le){et($e,{done:!1},le,Pe)}}};Be&&(W=function($e){w(this,W,X),S($e),o.call(this);var Pe=ce(this);try{$e(Ze(je,this,Pe),Ze(et,this,Pe))}catch(J){et(this,Pe,J)}},(o=function($e){O(this,{type:X,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=y(W.prototype,{then:function($e,Pe){var J=B(this),ie=xe(R(this,W));return ie.ok=typeof $e!="function"||$e,ie.fail=typeof Pe=="function"&&Pe,ie.domain=ye?me.domain:void 0,J.parent=!0,J.reactions.push(ie),J.state!=0&&ve(this,J,!1),ie.promise},catch:function($e){return this.then(void 0,$e)}}),u=function(){var $e=new o,Pe=ce($e);this.promise=$e,this.resolve=Ze(je,$e,Pe),this.reject=Ze(et,$e,Pe)},K.f=xe=function($e){return $e===W||$e===l?new u:fe($e)},m||typeof d!="function"||(c=d.prototype.then,g(d.prototype,"then",function($e,Pe){var J=this;return new W(function(ie,$){c.call(J,ie,$)}).then($e,Pe)},{unsafe:!0}),typeof ge=="function"&&p({global:!0,enumerable:!0,forced:!0},{fetch:function($e){return F(W,ge.apply(h,arguments))}}))),p({global:!0,wrap:!0,forced:Be},{Promise:W}),b(W,X,!1,!0),x(X),l=f(X),p({target:X,stat:!0,forced:Be},{reject:function($e){var Pe=xe(this);return Pe.reject.call(void 0,$e),Pe.promise}}),p({target:X,stat:!0,forced:m||Be},{resolve:function($e){return F(m&&this===l?W:this,$e)}}),p({target:X,stat:!0,forced:tt},{all:function($e){var Pe=this,J=xe(Pe),ie=J.resolve,$=J.reject,le=Q(function(){var Ee=S(Pe.resolve),Re=[],Ge=0,st=1;I($e,function(ht){var ft=Ge++,yt=!1;Re.push(void 0),st++,Ee.call(Pe,ht).then(function(Ht){yt||(yt=!0,Re[ft]=Ht,--st||ie(Re))},$)}),--st||ie(Re)});return le.error&&$(le.value),J.promise},race:function($e){var Pe=this,J=xe(Pe),ie=J.reject,$=Q(function(){var le=S(Pe.resolve);I($e,function(Ee){le.call(Pe,Ee).then(J.resolve,ie)})});return $.error&&ie($.value),J.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(h,s,a){var o=h("../internals/export"),y=h("../internals/get-built-in"),u=h("../internals/a-function"),l=h("../internals/an-object"),c=h("../internals/is-object"),p=h("../internals/object-create"),m=h("../internals/function-bind"),h=h("../internals/fails"),f=y("Reflect","construct"),d=h(function(){function b(){}return!(f(function(){},[],b)instanceof b)}),g=!h(function(){f(function(){})}),y=d||g;o({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(b,x){u(b),l(x);var j=arguments.length<3?b:u(arguments[2]);if(g&&!d)return f(b,x,j);if(b==j){switch(x.length){case 0:return new b;case 1:return new b(x[0]);case 2:return new b(x[0],x[1]);case 3:return new b(x[0],x[1],x[2]);case 4:return new b(x[0],x[1],x[2],x[3])}var S=[null];return S.push.apply(S,x),new(m.apply(b,S))}return S=j.prototype,j=p(c(S)?S:Object.prototype),S=Function.apply.call(b,j,x),c(S)?S:j}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(r,s,a){var o=r("../internals/descriptors"),u=r("../internals/global"),l=r("../internals/is-forced"),c=r("../internals/inherit-if-required"),p=r("../internals/object-define-property").f,m=r("../internals/object-get-own-property-names").f,h=r("../internals/is-regexp"),f=r("../internals/regexp-flags"),d=r("../internals/regexp-sticky-helpers"),g=r("../internals/redefine"),y=r("../internals/fails"),b=r("../internals/internal-state").set,x=r("../internals/set-species"),j=r("../internals/well-known-symbol")("match"),S=u.RegExp,w=S.prototype,_=/a/g,M=/a/g,I=new S(_)!==_,P=d.UNSUPPORTED_Y;if(o&&l("RegExp",!I||P||y(function(){return M[j]=!1,S(_)!=_||S(M)==M||S(_,"i")!="/a/i"}))){for(var R=function(F,z){var K,Q=this instanceof R,te=h(F),Z=z===void 0;return!Q&&te&&F.constructor===R&&Z?F:(I?te&&!Z&&(F=F.source):F instanceof R&&(Z&&(z=f.call(F)),F=F.source),P&&(K=!!z&&-1<z.indexOf("y"))&&(z=z.replace(/y/g,"")),te=c(I?new S(F,z):S(F,z),Q?this:w,R),P&&K&&b(te,{sticky:K}),te)},D=m(S),U=0;D.length>U;)(function(F){F in R||p(R,F,{configurable:!0,get:function(){return S[F]},set:function(z){S[F]=z}})})(D[U++]);(w.constructor=R).prototype=w,g(u,"RegExp",R)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(u,s,a){var o=u("../internals/export"),u=u("../internals/regexp-exec");o({target:"RegExp",proto:!0,forced:/./.exec!==u},{exec:u})},{"../internals/export":50,"../internals/regexp-exec":110}],182:[function(c,s,a){var o=c("../internals/redefine"),u=c("../internals/an-object"),h=c("../internals/fails"),l=c("../internals/regexp-flags"),c="toString",p=RegExp.prototype,m=p[c],h=h(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),f=m.name!=c;(h||f)&&o(RegExp.prototype,c,function(){var d=u(this),g=String(d.source),y=d.flags;return"/"+g+"/"+String(y===void 0&&d instanceof RegExp&&!("flags"in p)?l.call(d):y)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(u,s,a){var o=u("../internals/collection"),u=u("../internals/collection-strong");s.exports=o("Set",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},u)},{"../internals/collection":32,"../internals/collection-strong":30}],184:[function(m,s,a){var o=m("../internals/export"),u=m("../internals/object-get-own-property-descriptor").f,l=m("../internals/to-length"),c=m("../internals/not-a-regexp"),p=m("../internals/require-object-coercible"),d=m("../internals/correct-is-regexp-logic"),m=m("../internals/is-pure"),h="".endsWith,f=Math.min,d=d("endsWith");o({target:"String",proto:!0,forced:!!(m||d||!(o=u(String.prototype,"endsWith"))||o.writable)&&!d},{endsWith:function(g){var y=String(p(this)),b=(c(g),1<arguments.length?arguments[1]:void 0),x=l(y.length),b=b===void 0?x:f(l(b),x),x=String(g);return h?h.call(y,x,b):y.slice(b-x.length,b)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/not-a-regexp"),l=r("../internals/require-object-coercible");o({target:"String",proto:!0,forced:!r("../internals/correct-is-regexp-logic")("includes")},{includes:function(c){return!!~String(l(this)).indexOf(u(c),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(l,s,a){var o=l("../internals/string-multibyte").charAt,u=l("../internals/internal-state"),l=l("../internals/define-iterator"),c="String Iterator",p=u.set,m=u.getterFor(c);l(String,"String",function(h){p(this,{type:c,string:String(h),index:0})},function(){var h=m(this),f=h.string,d=h.index;return d>=f.length?{value:void 0,done:!0}:(f=o(f,d),h.index+=f.length,{value:f,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(r,s,a){var o=r("../internals/fix-regexp-well-known-symbol-logic"),u=r("../internals/an-object"),l=r("../internals/to-length"),c=r("../internals/require-object-coercible"),p=r("../internals/advance-string-index"),m=r("../internals/regexp-exec-abstract");o("match",1,function(h,f,d){return[function(g){var y=c(this),b=g==null?void 0:g[h];return b!==void 0?b.call(g,y):new RegExp(g)[h](String(y))},function(g){var y=d(f,g,this);if(y.done)return y.value;var b=u(g),x=String(this);if(!b.global)return m(b,x);for(var j=b.unicode,S=[],w=b.lastIndex=0;(_=m(b,x))!==null;){var _=String(_[0]);(S[w]=_)===""&&(b.lastIndex=p(x,l(b.lastIndex),j)),w++}return w===0?null:S}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(r,s,a){r("../internals/export")({target:"String",proto:!0},{repeat:r("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":125}],189:[function(r,s,a){var o=r("../internals/fix-regexp-well-known-symbol-logic"),u=r("../internals/an-object"),l=r("../internals/to-object"),c=r("../internals/to-length"),p=r("../internals/to-integer"),m=r("../internals/require-object-coercible"),h=r("../internals/advance-string-index"),f=r("../internals/regexp-exec-abstract"),d=Math.max,g=Math.min,y=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;o("replace",2,function(j,S,w,_){var M=_.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,I=_.REPLACE_KEEPS_$0,P=M?"$":"$0";return[function(R,D){var U=m(this),F=R==null?void 0:R[j];return F!==void 0?F.call(R,U,D):S.call(String(U),R,D)},function(R,D){if(!M&&I||typeof D=="string"&&D.indexOf(P)===-1){var U=w(S,R,this,D);if(U.done)return U.value}for(var F,z=u(R),K=String(this),Q=typeof D=="function",te=(Q||(D=String(D)),z.global),Z=(te&&(F=z.unicode,z.lastIndex=0),[]);(O=f(z,K))!==null&&(Z.push(O),te);)String(O[0])===""&&(z.lastIndex=h(K,c(z.lastIndex),F));for(var q,Y="",X=0,ce=0;ce<Z.length;ce++){for(var O=Z[ce],B=String(O[0]),W=d(g(p(O.index),K.length),0),re=[],ae=1;ae<O.length;ae++)re.push((q=O[ae])===void 0?q:String(q));var me=O.groups,ge=Q?(ge=[B].concat(re,W,K),me!==void 0&&ge.push(me),String(D.apply(void 0,ge))):function(xe,fe,ye,Te,oe,Se){var be=ye+xe.length,Ie=Te.length,Me=x;return oe!==void 0&&(oe=l(oe),Me=b),S.call(Se,Me,function(Ve,Be){var tt;switch(Be.charAt(0)){case"$":return"$";case"&":return xe;case"`":return fe.slice(0,ye);case"'":return fe.slice(be);case"<":tt=oe[Be.slice(1,-1)];break;default:var Ue,ve=+Be;if(ve==0)return Ve;if(Ie<ve)return(Ue=y(ve/10))!==0&&Ue<=Ie?Te[Ue-1]===void 0?Be.charAt(1):Te[Ue-1]+Be.charAt(1):Ve;tt=Te[ve-1]}return tt===void 0?"":tt})}(B,K,W,re,me,D);X<=W&&(Y+=K.slice(X,W)+ge,X=W+B.length)}return Y+K.slice(X)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(r,s,a){var o=r("../internals/fix-regexp-well-known-symbol-logic"),u=r("../internals/an-object"),l=r("../internals/require-object-coercible"),c=r("../internals/same-value"),p=r("../internals/regexp-exec-abstract");o("search",1,function(m,h,f){return[function(d){var g=l(this),y=d==null?void 0:d[m];return y!==void 0?y.call(d,g):new RegExp(d)[m](String(g))},function(d){var g,y=f(h,d,this);return y.done?y.value:(y=u(d),d=String(this),g=y.lastIndex,c(g,0)||(y.lastIndex=0),d=p(y,d),c(y.lastIndex,g)||(y.lastIndex=g),d===null?-1:d.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(g,s,a){var o=g("../internals/fix-regexp-well-known-symbol-logic"),u=g("../internals/is-regexp"),l=g("../internals/an-object"),c=g("../internals/require-object-coercible"),p=g("../internals/species-constructor"),m=g("../internals/advance-string-index"),h=g("../internals/to-length"),f=g("../internals/regexp-exec-abstract"),d=g("../internals/regexp-exec"),g=g("../internals/fails"),y=[].push,b=Math.min,x=4294967295,j=!g(function(){return!RegExp(x,"y")});o("split",2,function(S,w,_){var M="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(I,P){var R=String(c(this)),D=P===void 0?x:P>>>0;if(D==0)return[];if(I===void 0)return[R];if(!u(I))return w.call(R,I,D);for(var U,F,z,K=[],P=(I.ignoreCase?"i":"")+(I.multiline?"m":"")+(I.unicode?"u":"")+(I.sticky?"y":""),Q=0,te=new RegExp(I.source,P+"g");(U=d.call(te,R))&&!(Q<(F=te.lastIndex)&&(K.push(R.slice(Q,U.index)),1<U.length&&U.index<R.length&&y.apply(K,U.slice(1)),z=U[0].length,Q=F,K.length>=D));)te.lastIndex===U.index&&te.lastIndex++;return Q===R.length?!z&&te.test("")||K.push(""):K.push(R.slice(Q)),K.length>D?K.slice(0,D):K}:"0".split(void 0,0).length?function(I,P){return I===void 0&&P===0?[]:w.call(this,I,P)}:w;return[function(I,P){var R=c(this),D=I==null?void 0:I[S];return D!==void 0?D.call(I,R,P):M.call(String(R),I,P)},function(U,P){var R=_(M,U,this,P,M!==w);if(R.done)return R.value;var R=l(U),D=String(this),U=p(R,RegExp),F=R.unicode,z=(R.ignoreCase?"i":"")+(R.multiline?"m":"")+(R.unicode?"u":"")+(j?"y":"g"),K=new U(j?R:"^(?:"+R.source+")",z),Q=P===void 0?x:P>>>0;if(Q==0)return[];if(D.length===0)return f(K,D)===null?[D]:[];for(var te=0,Z=0,q=[];Z<D.length;){K.lastIndex=j?Z:0;var Y,X=f(K,j?D:D.slice(Z));if(X===null||(Y=b(h(K.lastIndex+(j?0:Z)),D.length))===te)Z=m(D,Z,F);else{if(q.push(D.slice(te,Z)),q.length===Q)return q;for(var ce=1;ce<=X.length-1;ce++)if(q.push(X[ce]),q.length===Q)return q;Z=te=Y}}return q.push(D.slice(te)),q}]},!j)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/create-html");o({target:"String",proto:!0,forced:r("../internals/string-html-forced")("sub")},{sub:function(){return u(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],193:[function(r,s,a){var o=r("../internals/export"),u=r("../internals/string-trim").trim;o({target:"String",proto:!0,forced:r("../internals/string-trim-forced")("trim")},{trim:function(){return u(this)}})},{"../internals/export":50,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(b,s,a){var o,u,l,c,p,m=b("../internals/export"),h=b("../internals/descriptors"),f=b("../internals/global"),d=b("../internals/has"),g=b("../internals/is-object"),y=b("../internals/object-define-property").f,b=b("../internals/copy-constructor-properties"),x=f.Symbol;!h||typeof x!="function"||"description"in x.prototype&&x().description===void 0||(o={},b(u=function(){var j=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),S=this instanceof u?new x(j):j===void 0?x():x(j);return j===""&&(o[S]=!0),S},x),(f=u.prototype=x.prototype).constructor=u,l=f.toString,c=String(x("test"))=="Symbol(test)",p=/^Symbol\((.*)\)[^)]+$/,y(f,"description",{configurable:!0,get:function(){var j=g(this)?this.valueOf():this,S=l.call(j);return d(o,j)?"":(j=c?S.slice(7,-1):S.replace(p,"$1"))===""?void 0:j}}),m({global:!0,forced:!0},{Symbol:u}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(r,s,a){r("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],196:[function(fe,s,a){function o($,le){var Ee=tt[$]=R(Se[xe]);return ye(Ee,{type:ge,tag:$,description:le}),d||(Ee.description=le),Ee}function u($,Re){w($);var Ee=M(Re),Re=D(Ee).concat(ie(Ee));return ae(Re,function(Ge){d&&!J.call(Ee,Ge)||Pe($,Ge,Ee[Ge])}),$}function l(Re,Ge){var Ee,Re=M(Re),Ge=I(Ge,!0);if(Re!==oe||!x(tt,Ge)||x(Ue,Ge))return!(Ee=Ie(Re,Ge))||!x(tt,Ge)||x(Re,me)&&Re[me][Ge]||(Ee.enumerable=!0),Ee}function c(le){var le=Ve(M(le)),Ee=[];return ae(le,function(Re){x(tt,Re)||x(X,Re)||Ee.push(Re)}),Ee}var p=fe("../internals/export"),m=fe("../internals/global"),h=fe("../internals/get-built-in"),f=fe("../internals/is-pure"),d=fe("../internals/descriptors"),g=fe("../internals/native-symbol"),y=fe("../internals/use-symbol-as-uid"),b=fe("../internals/fails"),x=fe("../internals/has"),j=fe("../internals/is-array"),S=fe("../internals/is-object"),w=fe("../internals/an-object"),_=fe("../internals/to-object"),M=fe("../internals/to-indexed-object"),I=fe("../internals/to-primitive"),P=fe("../internals/create-property-descriptor"),R=fe("../internals/object-create"),D=fe("../internals/object-keys"),U=fe("../internals/object-get-own-property-names"),F=fe("../internals/object-get-own-property-names-external"),z=fe("../internals/object-get-own-property-symbols"),K=fe("../internals/object-get-own-property-descriptor"),Q=fe("../internals/object-define-property"),te=fe("../internals/object-property-is-enumerable"),Z=fe("../internals/create-non-enumerable-property"),q=fe("../internals/redefine"),Y=fe("../internals/shared"),Fe=fe("../internals/shared-key"),X=fe("../internals/hidden-keys"),ce=fe("../internals/uid"),O=fe("../internals/well-known-symbol"),B=fe("../internals/well-known-symbol-wrapped"),W=fe("../internals/define-well-known-symbol"),re=fe("../internals/set-to-string-tag"),Ze=fe("../internals/internal-state"),ae=fe("../internals/array-iteration").forEach,me=Fe("hidden"),ge="Symbol",xe="prototype",fe=O("toPrimitive"),ye=Ze.set,Te=Ze.getterFor(ge),oe=Object[xe],Se=m.Symbol,be=h("JSON","stringify"),Ie=K.f,Me=Q.f,Ve=F.f,Be=te.f,tt=Y("symbols"),Ue=Y("op-symbols"),ve=Y("string-to-symbol-registry"),Le=Y("symbol-to-string-registry"),Fe=Y("wks"),Ze=m.QObject,et=!Ze||!Ze[xe]||!Ze[xe].findChild,je=d&&b(function(){return R(Me({},"a",{get:function(){return Me(this,"a",{value:7}).a}})).a!=7})?function($,le,Ee){var Re=Ie(oe,le);Re&&delete oe[le],Me($,le,Ee),Re&&$!==oe&&Me(oe,le,Re)}:Me,$e=y?function($){return typeof $=="symbol"}:function($){return Object($)instanceof Se},Pe=function($,le,Ee){return $===oe&&Pe(Ue,le,Ee),w($),le=I(le,!0),w(Ee),(x(tt,le)?(Ee.enumerable?(x($,me)&&$[me][le]&&($[me][le]=!1),Ee=R(Ee,{enumerable:P(0,!1)})):(x($,me)||Me($,me,P(1,{})),$[me][le]=!0),je):Me)($,le,Ee)},J=function(le){var le=I(le,!0),Ee=Be.call(this,le);return!(this===oe&&x(tt,le)&&!x(Ue,le))&&(!(Ee||!x(this,le)||!x(tt,le)||x(this,me)&&this[me][le])||Ee)},ie=function(Ee){var le=Ee===oe,Ee=Ve(le?Ue:M(Ee)),Re=[];return ae(Ee,function(Ge){!x(tt,Ge)||le&&!x(oe,Ge)||Re.push(tt[Ge])}),Re};g||(q((Se=function(){if(this instanceof Se)throw TypeError("Symbol is not a constructor");var $=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,le=ce($),Ee=function(Re){this===oe&&Ee.call(Ue,Re),x(this,me)&&x(this[me],le)&&(this[me][le]=!1),je(this,le,P(1,Re))};return d&&et&&je(oe,le,{configurable:!0,set:Ee}),o(le,$)})[xe],"toString",function(){return Te(this).tag}),q(Se,"withoutSetter",function($){return o(ce($),$)}),te.f=J,Q.f=Pe,K.f=l,U.f=F.f=c,z.f=ie,B.f=function($){return o(O($),$)},d&&(Me(Se[xe],"description",{configurable:!0,get:function(){return Te(this).description}}),f||q(oe,"propertyIsEnumerable",J,{unsafe:!0}))),p({global:!0,wrap:!0,forced:!g,sham:!g},{Symbol:Se}),ae(D(Fe),function($){W($)}),p({target:ge,stat:!0,forced:!g},{for:function(Ee){var le,Ee=String(Ee);return x(ve,Ee)?ve[Ee]:(le=Se(Ee),ve[Ee]=le,Le[le]=Ee,le)},keyFor:function($){if(!$e($))throw TypeError($+" is not a symbol");if(x(Le,$))return Le[$]},useSetter:function(){et=!0},useSimple:function(){et=!1}}),p({target:"Object",stat:!0,forced:!g,sham:!d},{create:function($,le){return le===void 0?R($):u(R($),le)},defineProperty:Pe,defineProperties:u,getOwnPropertyDescriptor:l}),p({target:"Object",stat:!0,forced:!g},{getOwnPropertyNames:c,getOwnPropertySymbols:ie}),p({target:"Object",stat:!0,forced:b(function(){z.f(1)})},{getOwnPropertySymbols:function($){return z.f(_($))}}),be&&p({target:"JSON",stat:!0,forced:!g||b(function(){var $=Se();return be([$])!="[null]"||be({a:$})!="{}"||be(Object($))!="{}"})},{stringify:function($,le,Ee){for(var Re,Ge=[$],st=1;st<arguments.length;)Ge.push(arguments[st++]);if((S(Re=le)||$!==void 0)&&!$e($))return j(le)||(le=function(ht,ft){if(typeof Re=="function"&&(ft=Re.call(this,ht,ft)),!$e(ft))return ft}),Ge[1]=le,be.apply(null,Ge)}}),Se[xe][fe]||Z(Se[xe],fe,Se[xe].valueOf),re(Se,ge),X[me]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-copy-within"),l=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",function(c,p){return u.call(l(this),c,p,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").every,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("every",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-fill"),l=o.aTypedArray;(0,o.exportTypedArrayMethod)("fill",function(c){return u.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").filter,l=r("../internals/species-constructor"),c=o.aTypedArray,p=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("filter",function(m){for(var h=u(c(this),m,1<arguments.length?arguments[1]:void 0),m=l(this,this.constructor),f=0,d=h.length,g=new(p(m))(d);f<d;)g[f]=h[f++];return g})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").findIndex,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("findIndex",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").find,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("find",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(r,s,a){r("../internals/typed-array-constructor")("Float32",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],204:[function(r,s,a){r("../internals/typed-array-constructor")("Float64",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],205:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").forEach,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("forEach",function(c){u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-includes").includes,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("includes",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-includes").indexOf,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("indexOf",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(r,s,a){r("../internals/typed-array-constructor")("Int16",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],209:[function(r,s,a){r("../internals/typed-array-constructor")("Int32",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],210:[function(u,s,a){function o(){return l.call(m(this))}var d=u("../internals/global"),f=u("../internals/array-buffer-view-core"),h=u("../modules/es.array.iterator"),u=u("../internals/well-known-symbol")("iterator"),d=d.Uint8Array,l=h.values,c=h.keys,p=h.entries,m=f.aTypedArray,h=f.exportTypedArrayMethod,f=d&&d.prototype[u],d=!!f&&(f.name=="values"||f.name==null);h("entries",function(){return p.call(m(this))}),h("keys",function(){return c.call(m(this))}),h("values",o,!d),h(u,o,!d)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(u,s,a){var u=u("../internals/array-buffer-view-core"),o=u.aTypedArray,u=u.exportTypedArrayMethod,l=[].join;u("join",function(c){return l.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-last-index-of"),l=o.aTypedArray;(0,o.exportTypedArrayMethod)("lastIndexOf",function(c){return u.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").map,l=r("../internals/species-constructor"),c=o.aTypedArray,p=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("map",function(m){return u(c(this),m,1<arguments.length?arguments[1]:void 0,function(h,f){return new(p(l(h,h.constructor)))(f)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-reduce").right,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduceRight",function(c){return u(l(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-reduce").left,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduce",function(c){return u(l(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(u,s,a){var u=u("../internals/array-buffer-view-core"),o=u.aTypedArray,u=u.exportTypedArrayMethod,l=Math.floor;u("reverse",function(){for(var c,p=o(this).length,m=l(p/2),h=0;h<m;)c=this[h],this[h++]=this[--p],this[p]=c;return this})},{"../internals/array-buffer-view-core":12}],217:[function(p,s,a){var o=p("../internals/array-buffer-view-core"),u=p("../internals/to-length"),l=p("../internals/to-offset"),c=p("../internals/to-object"),p=p("../internals/fails"),m=o.aTypedArray;(0,o.exportTypedArrayMethod)("set",function(h){m(this);var f=l(1<arguments.length?arguments[1]:void 0,1),d=this.length,g=c(h),y=u(g.length),b=0;if(d<y+f)throw RangeError("Wrong length");for(;b<y;)this[f+b]=g[b++]},p(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(u,s,a){var p=u("../internals/array-buffer-view-core"),o=u("../internals/species-constructor"),u=u("../internals/fails"),l=p.aTypedArray,c=p.aTypedArrayConstructor,p=p.exportTypedArrayMethod,m=[].slice;p("slice",function(h,f){for(var d=m.call(l(this),h,f),h=o(this,this.constructor),g=0,y=d.length,b=new(c(h))(y);g<y;)b[g]=d[g++];return b},u(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],219:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/array-iteration").some,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("some",function(c){return u(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(u,s,a){var u=u("../internals/array-buffer-view-core"),o=u.aTypedArray,u=u.exportTypedArrayMethod,l=[].sort;u("sort",function(c){return l.call(o(this),c)})},{"../internals/array-buffer-view-core":12}],221:[function(r,s,a){var o=r("../internals/array-buffer-view-core"),u=r("../internals/to-length"),l=r("../internals/to-absolute-index"),c=r("../internals/species-constructor"),p=o.aTypedArray;(0,o.exportTypedArrayMethod)("subarray",function(g,h){var f=p(this),d=f.length,g=l(g,d);return new(c(f,f.constructor))(f.buffer,f.byteOffset+g*f.BYTES_PER_ELEMENT,u((h===void 0?d:l(h,d))-g))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(u,s,a){var p=u("../internals/global"),o=u("../internals/array-buffer-view-core"),u=u("../internals/fails"),l=p.Int8Array,c=o.aTypedArray,p=o.exportTypedArrayMethod,m=[].toLocaleString,h=[].slice,f=!!l&&u(function(){m.call(new l(1))});p("toLocaleString",function(){return m.apply(f?h.call(c(this)):c(this),arguments)},u(function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()})||!u(function(){l.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],223:[function(u,s,a){var o=u("../internals/array-buffer-view-core").exportTypedArrayMethod,p=u("../internals/fails"),u=u("../internals/global").Uint8Array,u=u&&u.prototype||{},l=[].toString,c=[].join,p=(p(function(){l.call({})})&&(l=function(){return c.call(this)}),u.toString!=l);o("toString",l,p)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],224:[function(r,s,a){r("../internals/typed-array-constructor")("Uint16",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],225:[function(r,s,a){r("../internals/typed-array-constructor")("Uint32",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],226:[function(r,s,a){r("../internals/typed-array-constructor")("Uint8",function(o){return function(u,l,c){return o(this,u,l,c)}})},{"../internals/typed-array-constructor":140}],227:[function(r,s,a){r("../internals/typed-array-constructor")("Uint8",function(o){return function(u,l,c){return o(this,u,l,c)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(x,w,a){function o(_){return function(){return _(this,arguments.length?arguments[0]:void 0)}}var u,l,c,p,m,j=x("../internals/global"),h=x("../internals/redefine-all"),f=x("../internals/internal-metadata"),d=x("../internals/collection"),g=x("../internals/collection-weak"),y=x("../internals/is-object"),b=x("../internals/internal-state").enforce,x=x("../internals/native-weak-map"),j=!j.ActiveXObject&&"ActiveXObject"in j,S=Object.isExtensible,w=w.exports=d("WeakMap",o,g);x&&j&&(u=g.getConstructor(o,"WeakMap",!0),f.REQUIRED=!0,d=w.prototype,l=d.delete,c=d.has,p=d.get,m=d.set,h(d,{delete:function(_){var M;return y(_)&&!S(_)?((M=b(this)).frozen||(M.frozen=new u),l.call(this,_)||M.frozen.delete(_)):l.call(this,_)},has:function(_){var M;return y(_)&&!S(_)?((M=b(this)).frozen||(M.frozen=new u),c.call(this,_)||M.frozen.has(_)):c.call(this,_)},get:function(_){var M;return!y(_)||S(_)||((M=b(this)).frozen||(M.frozen=new u),c.call(this,_))?p.call(this,_):M.frozen.get(_)},set:function(_,M){var I;return!y(_)||S(_)||((I=b(this)).frozen||(I.frozen=new u),c.call(this,_))?m.call(this,_,M):I.frozen.set(_,M),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],229:[function(r,s,a){var o,u=r("../internals/global"),l=r("../internals/dom-iterables"),c=r("../internals/array-for-each"),p=r("../internals/create-non-enumerable-property");for(o in l){var m=u[o],m=m&&m.prototype;if(m&&m.forEach!==c)try{p(m,"forEach",c)}catch{m.forEach=c}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],230:[function(m,s,a){var o,u=m("../internals/global"),l=m("../internals/dom-iterables"),c=m("../modules/es.array.iterator"),p=m("../internals/create-non-enumerable-property"),m=m("../internals/well-known-symbol"),h=m("iterator"),f=m("toStringTag"),d=c.values;for(o in l){var g=u[o],y=g&&g.prototype;if(y){if(y[h]!==d)try{p(y,h,d)}catch{y[h]=d}if(y[f]||p(y,f,o),l[o]){for(var b in c)if(y[b]!==c[b])try{p(y,b,c[b])}catch{y[b]=c[b]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(me,s,a){me("../modules/es.array.iterator");function o(ge){try{return decodeURIComponent(ge)}catch{return ge}}function u(ge){return W[ge]}function l(ge){return encodeURIComponent(ge).replace(B,u)}function c(ge){this.entries.length=0,re(this.entries,ge)}function p(ge,xe){if(ge<xe)throw TypeError("Not enough arguments")}function m(){j(this,m,Q);var ge,xe,fe,ye,Te,oe,Se,be,Ie=0<arguments.length?arguments[0]:void 0,Me=[];if(Z(this,{type:Q,entries:Me,updateURL:function(){},updateSearchParams:c}),Ie!==void 0)if(I(Ie))if(typeof(ge=U(Ie))=="function")for(fe=(xe=ge.call(Ie)).next;!(ye=fe.call(xe)).done;){if((oe=(Te=(ye=D(M(ye.value))).next).call(ye)).done||(Se=Te.call(ye)).done||!Te.call(ye).done)throw TypeError("Expected sequence with length 2");Me.push({key:oe.value+"",value:Se.value+""})}else for(be in Ie)S(Ie,be)&&Me.push({key:be,value:Ie[be]+""});else re(Me,typeof Ie=="string"?Ie.charAt(0)==="?"?Ie.slice(1):Ie:Ie+"")}var h=me("../internals/export"),K=me("../internals/get-built-in"),f=me("../internals/native-url"),d=me("../internals/redefine"),g=me("../internals/redefine-all"),y=me("../internals/set-to-string-tag"),b=me("../internals/create-iterator-constructor"),x=me("../internals/internal-state"),j=me("../internals/an-instance"),S=me("../internals/has"),w=me("../internals/function-bind-context"),_=me("../internals/classof"),M=me("../internals/an-object"),I=me("../internals/is-object"),P=me("../internals/object-create"),R=me("../internals/create-property-descriptor"),D=me("../internals/get-iterator"),U=me("../internals/get-iterator-method"),me=me("../internals/well-known-symbol"),F=K("fetch"),z=K("Headers"),K=me("iterator"),Q="URLSearchParams",te=Q+"Iterator",Z=x.set,q=x.getterFor(Q),Y=x.getterFor(te),X=/\+/g,ce=Array(4),O=function(ge){var xe,fe=ge.replace(X," "),ye=4;try{return decodeURIComponent(fe)}catch{for(;ye;)fe=fe.replace((xe=ye--,ce[xe-1]||(ce[xe-1]=RegExp("((?:%[\\da-f]{2}){"+xe+"})","gi"))),o);return fe}},B=/[!'()~]|%20/g,W={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},re=function(ge,xe){if(xe)for(var fe,ye=xe.split("&"),Te=0;Te<ye.length;)(fe=ye[Te++]).length&&(fe=fe.split("="),ge.push({key:O(fe.shift()),value:O(fe.join("="))}))},ae=b(function(ge,xe){Z(this,{type:te,iterator:D(q(ge).entries),kind:xe})},"Iterator",function(){var xe=Y(this),ge=xe.kind,xe=xe.iterator.next(),fe=xe.value;return xe.done||(xe.value=ge==="keys"?fe.key:ge==="values"?fe.value:[fe.key,fe.value]),xe}),me=m.prototype;g(me,{append:function(ge,xe){p(arguments.length,2);var fe=q(this);fe.entries.push({key:ge+"",value:xe+""}),fe.updateURL()},delete:function(ge){p(arguments.length,1);for(var xe=q(this),fe=xe.entries,ye=ge+"",Te=0;Te<fe.length;)fe[Te].key===ye?fe.splice(Te,1):Te++;xe.updateURL()},get:function(ge){p(arguments.length,1);for(var xe=q(this).entries,fe=ge+"",ye=0;ye<xe.length;ye++)if(xe[ye].key===fe)return xe[ye].value;return null},getAll:function(ge){p(arguments.length,1);for(var xe=q(this).entries,fe=ge+"",ye=[],Te=0;Te<xe.length;Te++)xe[Te].key===fe&&ye.push(xe[Te].value);return ye},has:function(ge){p(arguments.length,1);for(var xe=q(this).entries,fe=ge+"",ye=0;ye<xe.length;)if(xe[ye++].key===fe)return!0;return!1},set:function(ge,xe){p(arguments.length,1);for(var fe,ye=q(this),Te=ye.entries,oe=!1,Se=ge+"",be=xe+"",Ie=0;Ie<Te.length;Ie++)(fe=Te[Ie]).key===Se&&(oe?Te.splice(Ie--,1):(oe=!0,fe.value=be));oe||Te.push({key:Se,value:be}),ye.updateURL()},sort:function(){for(var ge,xe,fe=q(this),ye=fe.entries,Te=ye.slice(),oe=ye.length=0;oe<Te.length;oe++){for(ge=Te[oe],xe=0;xe<oe;xe++)if(ye[xe].key>ge.key){ye.splice(xe,0,ge);break}xe===oe&&ye.push(ge)}fe.updateURL()},forEach:function(ge){for(var xe,fe=q(this).entries,ye=w(ge,1<arguments.length?arguments[1]:void 0,3),Te=0;Te<fe.length;)ye((xe=fe[Te++]).value,xe.key,this)},keys:function(){return new ae(this,"keys")},values:function(){return new ae(this,"values")},entries:function(){return new ae(this,"entries")}},{enumerable:!0}),d(me,K,me.entries),d(me,"toString",function(){for(var ge,xe=q(this).entries,fe=[],ye=0;ye<xe.length;)ge=xe[ye++],fe.push(l(ge.key)+"="+l(ge.value));return fe.join("&")},{enumerable:!0}),y(m,Q),h({global:!0,forced:!f},{URLSearchParams:m}),f||typeof F!="function"||typeof z!="function"||h({global:!0,enumerable:!0,forced:!0},{fetch:function(Te){var xe,fe,ye,Te=[Te];return 1<arguments.length&&(I(xe=arguments[1])&&(fe=xe.body,_(fe)===Q&&((ye=xe.headers?new z(xe.headers):new z).has("content-type")||ye.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),xe=P(xe,{body:R(0,String(fe)),headers:R(0,ye)}))),Te.push(xe)),F.apply(this,Te)}}),s.exports={URLSearchParams:m,getState:q}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],232:[function(D,s,a){D("../modules/es.string.iterator");function o(_e){var dt,bt,ut,ir;if(typeof _e=="number"){for(dt=[],bt=0;bt<4;bt++)dt.unshift(_e%256),_e=te(_e/256);return dt.join(".")}if(typeof _e!="object")return _e;for(dt="",ut=Se(_e),bt=0;bt<8;bt++)ir&&_e[bt]===0||(ir=ir&&!1,ut===bt?(dt+=bt?":":"::",ir=!0):(dt+=_e[bt].toString(16),bt<7&&(dt+=":")));return"["+dt+"]"}function u(_e){return!_e.host||_e.cannotBeABaseURL||_e.scheme=="file"}function l(_e,dt,bt,ut){var ir,nt,fr,wt=bt||$e,ur=0,St="",Lr=!1,Kr=!1,tn=!1;for(bt||(_e.scheme="",_e.username="",_e.password="",_e.host=null,_e.port=null,_e.path=[],_e.query=null,_e.fragment=null,_e.cannotBeABaseURL=!1,dt=dt.replace(ye,"")),dt=dt.replace(Te,""),ir=_(dt);ur<=ir.length;){switch(nt=ir[ur],wt){case $e:if(!nt||!O.test(nt)){if(bt)return Y;wt=J;continue}St+=nt.toLowerCase(),wt=Pe;break;case Pe:if(nt&&(B.test(nt)||nt=="+"||nt=="-"||nt=="."))St+=nt.toLowerCase();else{if(nt!=":"){if(bt)return Y;St="",wt=J,ur=0;continue}if(bt&&(Ue(_e)!=S(tt,St)||St=="file"&&(ve(_e)||_e.port!==null)||_e.scheme=="file"&&!_e.host))return;if(_e.scheme=St,bt)return void(Ue(_e)&&tt[_e.scheme]==_e.port&&(_e.port=null));St="",_e.scheme=="file"?wt=Ht:Ue(_e)&&ut&&ut.scheme==_e.scheme?wt=ie:Ue(_e)?wt=Re:ir[ur+1]=="/"?(wt=$,ur++):(_e.cannotBeABaseURL=!0,_e.path.push(""),wt=nr)}break;case J:if(!ut||ut.cannotBeABaseURL&&nt!="#")return Y;if(ut.cannotBeABaseURL&&nt=="#"){_e.scheme=ut.scheme,_e.path=ut.path.slice(),_e.query=ut.query,_e.fragment="",_e.cannotBeABaseURL=!0,wt=Tr;break}wt=ut.scheme=="file"?Ht:le;continue;case ie:if(nt!="/"||ir[ur+1]!="/"){wt=le;continue}wt=Ge,ur++;break;case $:if(nt=="/"){wt=st;break}wt=Rt;continue;case le:if(_e.scheme=ut.scheme,nt==m)_e.username=ut.username,_e.password=ut.password,_e.host=ut.host,_e.port=ut.port,_e.path=ut.path.slice(),_e.query=ut.query;else if(nt=="/"||nt=="\\"&&Ue(_e))wt=Ee;else if(nt=="?")_e.username=ut.username,_e.password=ut.password,_e.host=ut.host,_e.port=ut.port,_e.path=ut.path.slice(),_e.query="",wt=en;else{if(nt!="#"){_e.username=ut.username,_e.password=ut.password,_e.host=ut.host,_e.port=ut.port,_e.path=ut.path.slice(),_e.path.pop(),wt=Rt;continue}_e.username=ut.username,_e.password=ut.password,_e.host=ut.host,_e.port=ut.port,_e.path=ut.path.slice(),_e.query=ut.query,_e.fragment="",wt=Tr}break;case Ee:if(!Ue(_e)||nt!="/"&&nt!="\\"){if(nt!="/"){_e.username=ut.username,_e.password=ut.password,_e.host=ut.host,_e.port=ut.port,wt=Rt;continue}wt=st}else wt=Ge;break;case Re:if(wt=Ge,nt!="/"||St.charAt(ur+1)!="/")continue;ur++;break;case Ge:if(nt=="/"||nt=="\\")break;wt=st;continue;case st:if(nt=="@"){Lr&&(St="%40"+St);for(var Lr=!0,gn=_(St),bi=0;bi<gn.length;bi++){var Vr=gn[bi];Vr!=":"||tn?(Vr=Be(Vr,Ve),tn?_e.password+=Vr:_e.username+=Vr):tn=!0}St=""}else if(nt==m||nt=="/"||nt=="?"||nt=="#"||nt=="\\"&&Ue(_e)){if(Lr&&St=="")return q;ur-=_(St).length+1,St="",wt=ht}else St+=nt;break;case ht:case ft:if(bt&&_e.scheme=="file"){wt=kt;continue}if(nt!=":"||Kr){if(nt==m||nt=="/"||nt=="?"||nt=="#"||nt=="\\"&&Ue(_e)){if(Ue(_e)&&St=="")return X;if(bt&&St==""&&(ve(_e)||_e.port!==null))return;if(fr=oe(_e,St))return fr;if(St="",wt=qt,bt)return;continue}nt=="["?Kr=!0:nt=="]"&&(Kr=!1),St+=nt}else{if(St=="")return X;if(fr=oe(_e,St))return fr;if(St="",wt=yt,bt==ft)return}break;case yt:if(!W.test(nt)){if(nt==m||nt=="/"||nt=="?"||nt=="#"||nt=="\\"&&Ue(_e)||bt){if(St!=""){var Bn=parseInt(St,10);if(65535<Bn)return ce;_e.port=Ue(_e)&&Bn===tt[_e.scheme]?null:Bn,St=""}if(bt)return;wt=qt;continue}return ce}St+=nt;break;case Ht:if(_e.scheme="file",nt=="/"||nt=="\\")wt=Dt;else{if(!ut||ut.scheme!="file"){wt=Rt;continue}if(nt==m)_e.host=ut.host,_e.path=ut.path.slice(),_e.query=ut.query;else if(nt=="?")_e.host=ut.host,_e.path=ut.path.slice(),_e.query="",wt=en;else{if(nt!="#"){Fe(ir.slice(ur).join(""))||(_e.host=ut.host,_e.path=ut.path.slice(),Ze(_e)),wt=Rt;continue}_e.host=ut.host,_e.path=ut.path.slice(),_e.query=ut.query,_e.fragment="",wt=Tr}}break;case Dt:if(nt=="/"||nt=="\\"){wt=kt;break}ut&&ut.scheme=="file"&&!Fe(ir.slice(ur).join(""))&&(Le(ut.path[0],!0)?_e.path.push(ut.path[0]):_e.host=ut.host),wt=Rt;continue;case kt:if(nt==m||nt=="/"||nt=="\\"||nt=="?"||nt=="#"){if(!bt&&Le(St))wt=Rt;else{if(St==""){if(_e.host="",bt)return}else{if(fr=oe(_e,St))return fr;if(_e.host=="localhost"&&(_e.host=""),bt)return;St=""}wt=qt}continue}St+=nt;break;case qt:if(Ue(_e)){if(wt=Rt,nt!="/"&&nt!="\\")continue}else if(bt||nt!="?")if(bt||nt!="#"){if(nt!=m&&(wt=Rt,nt!="/"))continue}else _e.fragment="",wt=Tr;else _e.query="",wt=en;break;case Rt:if(nt==m||nt=="/"||nt=="\\"&&Ue(_e)||!bt&&(nt=="?"||nt=="#")){if(je(St)?(Ze(_e),nt=="/"||nt=="\\"&&Ue(_e)||_e.path.push("")):et(St)?nt=="/"||nt=="\\"&&Ue(_e)||_e.path.push(""):(_e.scheme=="file"&&!_e.path.length&&Le(St)&&(_e.host&&(_e.host=""),St=St.charAt(0)+":"),_e.path.push(St)),St="",_e.scheme=="file"&&(nt==m||nt=="?"||nt=="#"))for(;1<_e.path.length&&_e.path[0]==="";)_e.path.shift();nt=="?"?(_e.query="",wt=en):nt=="#"&&(_e.fragment="",wt=Tr)}else St+=Be(nt,Me);break;case nr:nt=="?"?(_e.query="",wt=en):nt=="#"?(_e.fragment="",wt=Tr):nt!=m&&(_e.path[0]+=Be(nt,be));break;case en:bt||nt!="#"?nt!=m&&(nt=="'"&&Ue(_e)?_e.query+="%27":_e.query+=nt=="#"?"%23":Be(nt,be)):(_e.fragment="",wt=Tr);break;case Tr:nt!=m&&(_e.fragment+=Be(nt,Ie))}ur++}}function c(nt){var dt,bt,ut=j(this,c,"URL"),ir=1<arguments.length?arguments[1]:void 0,nt=String(nt),fr=K(ut,{type:"URL"});if(ir!==void 0){if(ir instanceof c)dt=Q(ir);else if(bt=l(dt={},String(ir)))throw TypeError(bt)}if(bt=l(fr,nt,null,dt))throw TypeError(bt);var wt=fr.searchParams=new F;(ir=z(wt)).updateSearchParams(fr.query),ir.updateURL=function(){fr.query=String(wt)||null},g||(ut.href=zt.call(ut),ut.origin=At.call(ut),ut.protocol=xt.call(ut),ut.username=Cr.call(ut),ut.password=wr.call(ut),ut.host=Ir.call(ut),ut.hostname=ci.call(ut),ut.port=vn.call(ut),ut.pathname=gr.call(ut),ut.search=Wn.call(ut),ut.searchParams=ei.call(ut),ut.hash=ti.call(ut))}function p(_e,dt){return{get:_e,set:dt,configurable:!0,enumerable:!0}}var m,h,f,d=D("../internals/export"),g=D("../internals/descriptors"),y=D("../internals/native-url"),tr=D("../internals/global"),b=D("../internals/object-define-properties"),x=D("../internals/redefine"),j=D("../internals/an-instance"),S=D("../internals/has"),w=D("../internals/object-assign"),_=D("../internals/array-from"),M=D("../internals/string-multibyte").codeAt,I=D("../internals/string-punycode-to-ascii"),P=D("../internals/set-to-string-tag"),R=D("../modules/web.url-search-params"),D=D("../internals/internal-state"),U=tr.URL,F=R.URLSearchParams,z=R.getState,K=D.set,Q=D.getterFor("URL"),te=Math.floor,Z=Math.pow,q="Invalid authority",Y="Invalid scheme",X="Invalid host",ce="Invalid port",O=/[A-Za-z]/,B=/[\d+-.A-Za-z]/,W=/\d/,re=/^(0x|0X)/,ae=/^[0-7]+$/,me=/^\d+$/,ge=/^[\dA-Fa-f]+$/,xe=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,fe=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ye=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Te=/[\u0009\u000A\u000D]/g,oe=function(_e,dt){var bt,ut,ir;if(dt.charAt(0)=="[")return dt.charAt(dt.length-1)=="]"&&(bt=function(nt){var fr=[0,0,0,0,0,0,0,0],wt=0,ur=null,St=0,Lr,Kr,tn,gn,bi,Vr,Bn,dn=function(){return nt.charAt(St)};if(dn()==":"){if(nt.charAt(1)!=":")return;St+=2,wt++,ur=wt}for(;dn();){if(wt==8)return;if(dn()==":"){if(ur!==null)return;St++,wt++,ur=wt;continue}for(Lr=Kr=0;Kr<4&&ge.test(dn());)Lr=Lr*16+parseInt(dn(),16),St++,Kr++;if(dn()=="."){if(Kr==0||(St-=Kr,wt>6))return;for(tn=0;dn();){if(gn=null,tn>0)if(dn()=="."&&tn<4)St++;else return;if(!W.test(dn()))return;for(;W.test(dn());){if(bi=parseInt(dn(),10),gn===null)gn=bi;else{if(gn==0)return;gn=gn*10+bi}if(gn>255)return;St++}fr[wt]=fr[wt]*256+gn,tn++,(tn==2||tn==4)&&wt++}if(tn!=4)return;break}else if(dn()==":"){if(St++,!dn())return}else if(dn())return;fr[wt++]=Lr}if(ur!==null)for(Vr=wt-ur,wt=7;wt!=0&&Vr>0;)Bn=fr[wt],fr[wt--]=fr[ur+Vr-1],fr[ur+--Vr]=Bn;else if(wt!=8)return;return fr}(dt.slice(1,-1)))?void(_e.host=bt):X;if(Ue(_e))return dt=I(dt),xe.test(dt)||(bt=function(nt){var fr=nt.split("."),wt,ur,St,Lr,Kr,tn,gn;if(fr.length&&fr[fr.length-1]==""&&fr.pop(),(wt=fr.length)>4)return nt;for(ur=[],St=0;St<wt;St++){if(Lr=fr[St],Lr=="")return nt;if(Kr=10,Lr.length>1&&Lr.charAt(0)=="0"&&(Kr=re.test(Lr)?16:8,Lr=Lr.slice(Kr==8?1:2)),Lr==="")tn=0;else{if(!(Kr==10?me:Kr==8?ae:ge).test(Lr))return nt;tn=parseInt(Lr,Kr)}ur.push(tn)}for(St=0;St<wt;St++)if(tn=ur[St],St==wt-1){if(tn>=Z(256,5-wt))return null}else if(tn>255)return null;for(gn=ur.pop(),St=0;St<ur.length;St++)gn+=ur[St]*Z(256,3-St);return gn}(dt))===null?X:void(_e.host=bt);if(fe.test(dt))return X;for(bt="",ut=_(dt),ir=0;ir<ut.length;ir++)bt+=Be(ut[ir],be);_e.host=bt},Se=function(_e){for(var dt=null,bt=1,ut=null,ir=0,nt=0;nt<8;nt++)_e[nt]!==0?(bt<ir&&(dt=ut,bt=ir),ut=null,ir=0):(ut===null&&(ut=nt),++ir);return bt<ir&&(dt=ut,bt=ir),dt},be={},Ie=w({},be,{" ":1,'"':1,"<":1,">":1,"`":1}),Me=w({},Ie,{"#":1,"?":1,"{":1,"}":1}),Ve=w({},Me,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Be=function(_e,dt){var bt=M(_e,0);return 32<bt&&bt<127&&!S(dt,_e)?_e:encodeURIComponent(_e)},tt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ue=function(_e){return S(tt,_e.scheme)},ve=function(_e){return _e.username!=""||_e.password!=""},Le=function(_e,dt){return _e.length==2&&O.test(_e.charAt(0))&&((_e=_e.charAt(1))==":"||!dt&&_e=="|")},Fe=function(_e){return 1<_e.length&&Le(_e.slice(0,2))&&(_e.length==2||(_e=_e.charAt(2))==="/"||_e==="\\"||_e==="?"||_e==="#")},Ze=function(_e){var dt=_e.path,bt=dt.length;!bt||_e.scheme=="file"&&bt==1&&Le(dt[0],!0)||dt.pop()},et=function(_e){return _e==="."||_e.toLowerCase()==="%2e"},je=function(_e){return(_e=_e.toLowerCase())===".."||_e==="%2e."||_e===".%2e"||_e==="%2e%2e"},$e={},Pe={},J={},ie={},$={},le={},Ee={},Re={},Ge={},st={},ht={},ft={},yt={},Ht={},Dt={},kt={},qt={},Rt={},nr={},en={},Tr={},tr=c.prototype,zt=function(){var _e=Q(this),dt=_e.scheme,bt=_e.username,ut=_e.password,ir=_e.host,nt=_e.port,fr=_e.path,wt=_e.query,ur=_e.fragment,St=dt+":";return ir!==null?(St+="//",ve(_e)&&(St+=bt+(ut?":"+ut:"")+"@"),St+=o(ir),nt!==null&&(St+=":"+nt)):dt=="file"&&(St+="//"),St+=_e.cannotBeABaseURL?fr[0]:fr.length?"/"+fr.join("/"):"",wt!==null&&(St+="?"+wt),ur!==null&&(St+="#"+ur),St},At=function(){var _e=Q(this),dt=_e.scheme,bt=_e.port;if(dt=="blob")try{return new URL(dt.path[0]).origin}catch{return"null"}return dt!="file"&&Ue(_e)?dt+"://"+o(_e.host)+(bt!==null?":"+bt:""):"null"},xt=function(){return Q(this).scheme+":"},Cr=function(){return Q(this).username},wr=function(){return Q(this).password},Ir=function(){var dt=Q(this),_e=dt.host,dt=dt.port;return _e===null?"":dt===null?o(_e):o(_e)+":"+dt},ci=function(){var _e=Q(this).host;return _e===null?"":o(_e)},vn=function(){var _e=Q(this).port;return _e===null?"":String(_e)},gr=function(){var _e=Q(this),dt=_e.path;return _e.cannotBeABaseURL?dt[0]:dt.length?"/"+dt.join("/"):""},Wn=function(){var _e=Q(this).query;return _e?"?"+_e:""},ei=function(){return Q(this).searchParams},ti=function(){var _e=Q(this).fragment;return _e?"#"+_e:""};g&&b(tr,{href:p(zt,function(bt){var dt=Q(this),bt=String(bt),bt=l(dt,bt);if(bt)throw TypeError(bt);z(dt.searchParams).updateSearchParams(dt.query)}),origin:p(At),protocol:p(xt,function(_e){var dt=Q(this);l(dt,String(_e)+":",$e)}),username:p(Cr,function(_e){var dt=Q(this),bt=_(String(_e));if(!u(dt)){dt.username="";for(var ut=0;ut<bt.length;ut++)dt.username+=Be(bt[ut],Ve)}}),password:p(wr,function(_e){var dt=Q(this),bt=_(String(_e));if(!u(dt)){dt.password="";for(var ut=0;ut<bt.length;ut++)dt.password+=Be(bt[ut],Ve)}}),host:p(Ir,function(_e){var dt=Q(this);dt.cannotBeABaseURL||l(dt,String(_e),ht)}),hostname:p(ci,function(_e){var dt=Q(this);dt.cannotBeABaseURL||l(dt,String(_e),ft)}),port:p(vn,function(_e){var dt=Q(this);u(dt)||((_e=String(_e))==""?dt.port=null:l(dt,_e,yt))}),pathname:p(gr,function(_e){var dt=Q(this);dt.cannotBeABaseURL||(dt.path=[],l(dt,_e+"",qt))}),search:p(Wn,function(_e){var dt=Q(this);(_e=String(_e))==""?dt.query=null:(_e.charAt(0)=="?"&&(_e=_e.slice(1)),dt.query="",l(dt,_e,en)),z(dt.searchParams).updateSearchParams(dt.query)}),searchParams:p(ei),hash:p(ti,function(_e){var dt=Q(this);(_e=String(_e))==""?dt.fragment=null:(_e.charAt(0)=="#"&&(_e=_e.slice(1)),dt.fragment="",l(dt,_e,Tr))})}),x(tr,"toJSON",function(){return zt.call(this)},{enumerable:!0}),x(tr,"toString",function(){return zt.call(this)},{enumerable:!0}),U&&(h=U.createObjectURL,f=U.revokeObjectURL,h&&x(c,"createObjectURL",function(_e){return h.apply(U,arguments)}),f&&x(c,"revokeObjectURL",function(_e){return f.apply(U,arguments)})),P(c,"URL"),d({global:!0,forced:!y,sham:!g},{URL:c})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":231}],233:[function(r,s,a){s.exports=r("./").polyfill()},{"./":234}],234:[function(r,s,a){(function(o,u){var l,c;l=this,c=function(){function p(oe){return typeof oe=="function"}var m=Array.isArray||function(oe){return Object.prototype.toString.call(oe)==="[object Array]"},h=0,f=void 0,d=void 0,g=function(oe,Se){w[h]=oe,w[h+1]=Se,(h+=2)===2&&(d?d(_):F())},y=typeof window<"u"?window:void 0,b=y||{},b=b.MutationObserver||b.WebKitMutationObserver,x=typeof self>"u"&&o!==void 0&&{}.toString.call(o)==="[object process]",j=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function S(){var oe=setTimeout;return function(){return oe(_,1)}}var w=new Array(1e3);function _(){for(var oe=0;oe<h;oe+=2)(0,w[oe])(w[oe+1]),w[oe]=void 0,w[oe+1]=void 0;h=0}function M(){try{var oe=Function("return this")().require("vertx");return(f=oe.runOnLoop||oe.runOnContext)!==void 0?function(){f(_)}:S()}catch{return S()}}var I,P,R,F=void 0;function D(oe,Se){var be,Ie=this,Me=new this.constructor(K),Ve=(Me[z]===void 0&&ge(Me),Ie._state);return Ve?(be=arguments[Ve-1],g(function(){return ae(Ve,Me,be,Ie._result)})):W(Ie,Me,oe,Se),Me}function U(oe){var Se;return oe&&typeof oe=="object"&&oe.constructor===this?oe:(X(Se=new this(K),oe),Se)}var F=x?function(){return o.nextTick(_)}:b?(P=0,x=new b(_),R=document.createTextNode(""),x.observe(R,{characterData:!0}),function(){R.data=P=++P%2}):j?((I=new MessageChannel).port1.onmessage=_,function(){return I.port2.postMessage(0)}):(y===void 0&&typeof r=="function"?M:S)(),z=Math.random().toString(36).substring(2);function K(){}var Q=void 0,te=1,Z=2;function q(oe,Se,be){g(function(Ie){var Me=!1,Ve=function(Be,tt,Ue,ve){try{Be.call(tt,Ue,ve)}catch(Le){return Le}}(be,Se,function(Be){Me||(Me=!0,(Se!==Be?X:O)(Ie,Be))},function(Be){Me||(Me=!0,B(Ie,Be))},Ie._label);!Me&&Ve&&(Me=!0,B(Ie,Ve))},oe)}function Y(oe,Se,be){var Ie,Me;Se.constructor===oe.constructor&&be===D&&Se.constructor.resolve===U?(Ie=oe,(Me=Se)._state===te?O(Ie,Me._result):Me._state===Z?B(Ie,Me._result):W(Me,void 0,function(Ve){return X(Ie,Ve)},function(Ve){return B(Ie,Ve)})):be!==void 0&&p(be)?q(oe,Se,be):O(oe,Se)}function X(oe,Se){if(oe===Se)B(oe,new TypeError("You cannot resolve a promise with itself"));else if(be=typeof Se,Se===null||be!="object"&&be!="function")O(oe,Se);else{be=void 0;try{be=Se.then}catch(Ie){return void B(oe,Ie)}Y(oe,Se,be)}var be}function ce(oe){oe._onerror&&oe._onerror(oe._result),re(oe)}function O(oe,Se){oe._state===Q&&(oe._result=Se,oe._state=te,oe._subscribers.length!==0&&g(re,oe))}function B(oe,Se){oe._state===Q&&(oe._state=Z,oe._result=Se,g(ce,oe))}function W(oe,Se,be,Ie){var Me=oe._subscribers,Ve=Me.length;oe._onerror=null,Me[Ve]=Se,Me[Ve+te]=be,Me[Ve+Z]=Ie,Ve===0&&oe._state&&g(re,oe)}function re(oe){var Se=oe._subscribers,be=oe._state;if(Se.length!==0){for(var Ie,Me=void 0,Ve=oe._result,Be=0;Be<Se.length;Be+=3)Ie=Se[Be],Me=Se[Be+be],Ie?ae(be,Ie,Me,Ve):Me(Ve);oe._subscribers.length=0}}function ae(oe,Se,be,Ie){var Me=p(be),Ve=void 0,Be=void 0,tt=!0;if(Me){try{Ve=be(Ie)}catch(Ue){tt=!1,Be=Ue}if(Se===Ve)return void B(Se,new TypeError("A promises callback cannot return that same promise."))}else Ve=Ie;Se._state===Q&&(Me&&tt?X(Se,Ve):tt===!1?B(Se,Be):oe===te?O(Se,Ve):oe===Z&&B(Se,Ve))}var me=0;function ge(oe){oe[z]=me++,oe._state=void 0,oe._result=void 0,oe._subscribers=[]}fe.prototype._enumerate=function(oe){for(var Se=0;this._state===Q&&Se<oe.length;Se++)this._eachEntry(oe[Se],Se)},fe.prototype._eachEntry=function(oe,Se){var be=this._instanceConstructor,Ie=be.resolve;if(Ie===U){var Me,Ve=void 0,Be=void 0,tt=!1;try{Ve=oe.then}catch(Ue){tt=!0,Be=Ue}Ve===D&&oe._state!==Q?this._settledAt(oe._state,Se,oe._result):typeof Ve!="function"?(this._remaining--,this._result[Se]=oe):be===ye?(Me=new be(K),tt?B(Me,Be):Y(Me,oe,Ve),this._willSettleAt(Me,Se)):this._willSettleAt(new be(function(Ue){return Ue(oe)}),Se)}else this._willSettleAt(Ie(oe),Se)},fe.prototype._settledAt=function(oe,Se,be){var Ie=this.promise;Ie._state===Q&&(this._remaining--,oe===Z?B(Ie,be):this._result[Se]=be),this._remaining===0&&O(Ie,this._result)},fe.prototype._willSettleAt=function(oe,Se){var be=this;W(oe,void 0,function(Ie){return be._settledAt(te,Se,Ie)},function(Ie){return be._settledAt(Z,Se,Ie)})};var xe=fe;function fe(oe,Se){this._instanceConstructor=oe,this.promise=new oe(K),this.promise[z]||ge(this.promise),m(Se)?(this.length=Se.length,this._remaining=Se.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(Se),this._remaining!==0)||O(this.promise,this._result)):B(this.promise,new Error("Array Methods must be provided an Array"))}Te.prototype.catch=function(oe){return this.then(null,oe)},Te.prototype.finally=function(oe){var Se=this.constructor;return p(oe)?this.then(function(be){return Se.resolve(oe()).then(function(){return be})},function(be){return Se.resolve(oe()).then(function(){throw be})}):this.then(oe,oe)};var ye=Te;function Te(oe){if(this[z]=me++,this._result=this._state=void 0,this._subscribers=[],K!==oe){if(typeof oe!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof Te))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var Se=this;try{oe(function(be){X(Se,be)},function(be){B(Se,be)})}catch(be){B(Se,be)}}}return ye.prototype.then=D,ye.all=function(oe){return new xe(this,oe).promise},ye.race=function(oe){var Se=this;return m(oe)?new Se(function(be,Ie){for(var Me=oe.length,Ve=0;Ve<Me;Ve++)Se.resolve(oe[Ve]).then(be,Ie)}):new Se(function(be,Ie){return Ie(new TypeError("You must pass an array to race."))})},ye.resolve=U,ye.reject=function(oe){var Se=new this(K);return B(Se,oe),Se},ye._setScheduler=function(oe){d=oe},ye._setAsap=function(oe){g=oe},ye._asap=g,ye.polyfill=function(){var oe=void 0;if(u!==void 0)oe=u;else if(typeof self<"u")oe=self;else try{oe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Se=oe.Promise;if(Se){var be=null;try{be=Object.prototype.toString.call(Se.resolve())}catch{}if(be==="[object Promise]"&&!Se.cast)return}oe.Promise=ye},ye.Promise=ye},typeof a=="object"&&s!==void 0?s.exports=c():l.ES6Promise=c()}).call(this,r("_process"),typeof ca<"u"?ca:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:243}],235:[function(r,s,a){var o,u;o=this,u=function(l,c){var p=5e3,m="callback";function h(d){try{delete window[d]}catch{window[d]=void 0}}function f(d){d=document.getElementById(d),d&&document.getElementsByTagName("head")[0].removeChild(d)}c.exports=function(d){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=d,b=g.timeout||p,x=g.jsonpCallback||m,j=void 0;return new Promise(function(S,w){var _=g.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),M=x+"_"+_,I=(window[_]=function(P){S({ok:!0,json:function(){return Promise.resolve(P)}}),j&&clearTimeout(j),f(M),h(_)},y+=y.indexOf("?")===-1?"?":"&",document.createElement("script"));I.setAttribute("src",""+y+x+"="+_),g.charset&&I.setAttribute("charset",g.charset),I.id=M,document.getElementsByTagName("head")[0].appendChild(I),j=setTimeout(function(){w(new Error("JSONP request to "+d+" timed out")),h(_),f(M),window[_]=function(){h(_)}},b),I.onerror=function(){w(new Error("JSONP request to "+d+" failed")),h(_),f(M),j&&clearTimeout(j)}})}},a!==void 0&&s!==void 0?u(0,s):(u(u={exports:{}},u),o.fetchJsonp=u.exports)},{}],236:[function(r,s,a){var o=function(u){var l,c,p,m,h,f,d,g,y,b,x;if(!(u===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return x=u.document,l=function(){return u.URL||u.webkitURL||u},c=x.createElementNS("http://www.w3.org/1999/xhtml","a"),p="download"in c,m=/constructor/i.test(u.HTMLElement)||u.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(j){(u.setImmediate||u.setTimeout)(function(){throw j},0)},d=4e4,g=function(j){setTimeout(function(){typeof j=="string"?l().revokeObjectURL(j):j.remove()},d)},y=function(j){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(j.type)?new Blob([String.fromCharCode(65279),j],{type:j.type}):j},x=(b=function(j,S,P){P||(j=y(j));var _,M,I=this,P=j.type==="application/octet-stream",R=function(){for(var D=I,U="writestart progress write writeend".split(" "),F=void 0,z=(U=[].concat(U)).length;z--;){var K=D["on"+U[z]];if(typeof K=="function")try{K.call(D,F||D)}catch(Q){f(Q)}}};I.readyState=I.INIT,p?(_=l().createObjectURL(j),setTimeout(function(){var D,U;c.href=_,c.download=S,D=c,U=new MouseEvent("click"),D.dispatchEvent(U),R(),g(_),I.readyState=I.DONE})):(h||P&&m)&&u.FileReader?((M=new FileReader).onloadend=function(){var D=h?M.result:M.result.replace(/^data:[^;]*;/,"data:attachment/file;");u.open(D,"_blank")||(u.location.href=D),D=void 0,I.readyState=I.DONE,R()},M.readAsDataURL(j),I.readyState=I.INIT):(_=_||l().createObjectURL(j),!P&&u.open(_,"_blank")||(u.location.href=_),I.readyState=I.DONE,R(),g(_))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(j,S,w){return S=S||j.name||"download",w||(j=y(j)),navigator.msSaveOrOpenBlob(j,S)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(j,S,w){return new b(j,S||j.name||"download",w)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);s!==void 0&&s.exports?s.exports.saveAs=o:n!=null},{}],237:[function(r,s,a){var o,u=Object.defineProperty,l=(u(a,"__esModule",{value:!0}),a),c={GIFEncoder:()=>R,applyPalette:()=>function(Q,te,Z="rgb565"){if(!Q||!Q.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Q instanceof Uint8Array||Q instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<te.length)throw new Error("applyPalette() only works with 256 colors or less");const q=new Uint32Array(Q.buffer),Y=q.length,X=Z==="rgb444"?4096:65536,ce=new Uint8Array(Y),O=new Array(X);if(Z==="rgba4444")for(let Te=0;Te<Y;Te++){var ae=q[Te],B=ae>>24&255,W=ae>>16&255,re=ae>>8&255,ae=255&ae,me=g(ae,re,W,B),me=me in O?O[me]:O[me]=function(oe,Se,be,Ie,Me){let Ve=0,Be=1e100;for(let Le=0;Le<Me.length;Le++){var tt,Ue=Me[Le],ve=M(Ue[3]-Ie);ve>Be||(tt=Ue[0],(ve+=M(tt-oe))>Be||(tt=Ue[1],(ve+=M(tt-Se))>Be||(tt=Ue[2],(ve+=M(tt-be))>Be||(Be=ve,Ve=Le))))}return Ve}(ae,re,W,B,te);ce[Te]=me}else{const Te=Z==="rgb444"?y:d;for(let oe=0;oe<Y;oe++){var fe=q[oe],ge=fe>>16&255,xe=fe>>8&255,fe=255&fe,ye=Te(fe,xe,ge),ye=ye in O?O[ye]:O[ye]=function(Se,be,Ie,Me){let Ve=0,Be=1e100;for(let Le=0;Le<Me.length;Le++){var tt,Ue=Me[Le],ve=M(Ue[0]-Se);ve>Be||(tt=Ue[1],(ve+=M(tt-be))>Be||(tt=Ue[2],(ve+=M(tt-Ie))>Be||(Be=ve,Ve=Le)))}return Ve}(fe,xe,ge,te);ce[oe]=ye}}return ce},default:()=>K,nearestColor:()=>function(Q,te,Z=w){return Q[I(Q,te,Z)]},nearestColorIndex:()=>I,nearestColorIndexWithDistance:()=>P,prequantize:()=>function(Q,{roundRGB:te=5,roundAlpha:Z=10,oneBitAlpha:q=null}={}){const Y=new Uint32Array(Q.buffer);for(let W=0;W<Y.length;W++){var B=Y[W];let re=B>>24&255;var X,ce=B>>16&255,O=B>>8&255,B=255&B;re=_(re,Z),q&&(X=typeof q=="number"?q:127,re=re<=X?0:255),B=_(B,te),O=_(O,te),ce=_(ce,te),Y[W]=re<<24|ce<<16|O<<8|B<<0}},quantize:()=>function(Q,te,Z={}){var{format:q="rgb565",clearAlpha:Y=!0,clearAlphaColor:X=0,clearAlphaThreshold:ce=0,oneBitAlpha:O=!1}=Z;if(!Q||!Q.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Q instanceof Uint8Array||Q instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");Q=new Uint32Array(Q.buffer);let B=Z.useSqrt!==!1;const W=q==="rgba4444",re=function(Fe,Ze){const et=Ze==="rgb444"?4096:65536,je=new Array(et),$e=Fe.length;if(Ze==="rgba4444")for(let Dt=0;Dt<$e;++Dt){var $=Fe[Dt],Pe=$>>24&255,J=$>>16&255,ie=$>>8&255,$=255&$,le=g($,ie,J,Pe);let kt=le in je?je[le]:je[le]=S();kt.rc+=$,kt.gc+=ie,kt.bc+=J,kt.ac+=Pe,kt.cnt++}else if(Ze==="rgb444")for(let Dt=0;Dt<$e;++Dt){var Ge=Fe[Dt],Ee=Ge>>16&255,Re=Ge>>8&255,Ge=255&Ge,st=y(Ge,Re,Ee);let kt=st in je?je[st]:je[st]=S();kt.rc+=Ge,kt.gc+=Re,kt.bc+=Ee,kt.cnt++}else for(let Dt=0;Dt<$e;++Dt){var yt=Fe[Dt],ht=yt>>16&255,ft=yt>>8&255,yt=255&yt,Ht=d(yt,ft,ht);let kt=Ht in je?je[Ht]:je[Ht]=S();kt.rc+=yt,kt.gc+=ft,kt.bc+=ht,kt.cnt++}return je}(Q,q),ae=re.length,me=ae-1,ge=new Uint32Array(ae+1);for(var xe=0,fe=0;fe<ae;++fe){const Fe=re[fe];Fe!=null&&(Ue=1/Fe.cnt,W&&(Fe.ac*=Ue),Fe.rc*=Ue,Fe.gc*=Ue,Fe.bc*=Ue,re[xe++]=Fe)}x(te)/xe<.022&&(B=!1);for(var ye,Te,oe,fe=0;fe<xe-1;++fe)re[fe].fw=fe+1,re[fe+1].bk=fe,B&&(re[fe].cnt=Math.sqrt(re[fe].cnt));for(B&&(re[fe].cnt=Math.sqrt(re[fe].cnt)),fe=0;fe<xe;++fe){j(re,fe,!1);var Se=re[fe].err;for(Te=++ge[0];1<Te&&(oe=Te>>1,!(re[ye=ge[oe]].err<=Se));Te=oe)ge[Te]=ye;ge[Te]=fe}var be,Ie=xe-te;for(fe=0;fe<Ie;){for(;;){var Me=ge[1];if((be=re[Me]).tm>=be.mtm&&re[be.nn].mtm<=be.tm)break;for(be.mtm==me?Me=ge[1]=ge[ge[0]--]:(j(re,Me,!1),be.tm=fe),Se=re[Me].err,Te=1;(oe=Te+Te)<=ge[0]&&(oe<ge[0]&&re[ge[oe]].err>re[ge[oe+1]].err&&oe++,!(Se<=re[ye=ge[oe]].err));Te=oe)ge[Te]=ye;ge[Te]=Me}var Ve=re[be.nn],Be=be.cnt,tt=Ve.cnt,Ue=1/(Be+tt);W&&(be.ac=Ue*(Be*be.ac+tt*Ve.ac)),be.rc=Ue*(Be*be.rc+tt*Ve.rc),be.gc=Ue*(Be*be.gc+tt*Ve.gc),be.bc=Ue*(Be*be.bc+tt*Ve.bc),be.cnt+=Ve.cnt,be.mtm=++fe,re[Ve.bk].fw=Ve.fw,re[Ve.fw].bk=Ve.bk,Ve.mtm=me}let ve=[];for(fe=0;;0){let Fe=b(Math.round(re[fe].rc),0,255),Ze=b(Math.round(re[fe].gc),0,255),et=b(Math.round(re[fe].bc),0,255),je=255;W&&(je=b(Math.round(re[fe].ac),0,255),O&&(Le=typeof O=="number"?O:127,je=je<=Le?0:255),Y&&je<=ce&&(Fe=Ze=et=X,je=0));var Le=W?[Fe,Ze,et,je]:[Fe,Ze,et];if(function($e,Pe){for(let $=0;$<$e.length;$++){var ie=$e[$],J=ie[0]===Pe[0]&&ie[1]===Pe[1]&&ie[2]===Pe[2],ie=!(4<=ie.length&&4<=Pe.length)||ie[3]===Pe[3];if(J&&ie)return!0}return!1}(ve,Le)||ve.push(Le),(fe=re[fe].fw)==0)break}return ve},snapColorsToPalette:()=>function(Q,te,Z=5){if(Q.length&&te.length){var q=Q.map(B=>B.slice(0,3)),Y=Z*Z,X=Q[0].length;for(let B=0;B<te.length;B++){let W=te[B];W=W.length<X?[W[0],W[1],W[2],255]:W.length>X?W.slice(0,3):W.slice();var O=P(q,W.slice(0,3),w),ce=O[0],O=O[1];0<O&&O<=Y&&(Q[ce]=W)}}}};for(o in c)u(l,o,{get:c[o],enumerable:!0});var p={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function m(Q=256){let te=0,Z=new Uint8Array(Q);return{get buffer(){return Z.buffer},reset(){te=0},bytesView(){return Z.subarray(0,te)},bytes(){return Z.slice(0,te)},writeByte(Y){q(te+1),Z[te]=Y,te++},writeBytes(Y,X=0,ce=Y.length){q(te+ce);for(let O=0;O<ce;O++)Z[te++]=Y[O+X]},writeBytesView(Y,X=0,ce=Y.byteLength){q(te+ce),Z.set(Y.subarray(X,X+ce),te),te+=ce}};function q(Y){var X=Z.length;if(!(Y<=X)){Y=Math.max(Y,X*(X<1048576?2:1.125)>>>0),X!=0&&(Y=Math.max(Y,256));const ce=Z;Z=new Uint8Array(Y),0<te&&Z.set(ce.subarray(0,te),0)}}}var h=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],f=function(Q,te,Z,W,Y=m(512),X=new Uint8Array(256),ce=new Int32Array(5003),O=new Int32Array(5003)){var B=ce.length,W=Math.max(2,W);X.fill(0),O.fill(0),ce.fill(-1);let re=0,ae=0;var me=W+1;const ge=me;let xe=!1,fe=ge,ye=(1<<fe)-1;var Te=1<<me-1;const oe=1+Te;let Se=2+Te,be=0,Ie=Z[0],Me=0;for(let Le=B;Le<65536;Le*=2)++Me;Me=8-Me,Y.writeByte(W),ve(Te);var Ve=Z.length;for(let Le=1;Le<Ve;Le++)e:{var Be=Z[Le],tt=(Be<<12)+Ie;let Fe=Be<<Me^Ie;if(ce[Fe]===tt)Ie=O[Fe];else{for(var Ue=Fe===0?1:B-Fe;0<=ce[Fe];)if((Fe-=Ue)<0&&(Fe+=B),ce[Fe]===tt){Ie=O[Fe];break e}ve(Ie),Ie=Be,Se<4096?(O[Fe]=Se++,ce[Fe]=tt):(ce.fill(-1),Se=2+Te,xe=!0,ve(Te))}}return ve(Ie),ve(oe),Y.writeByte(0),Y.bytesView();function ve(Le){for(re&=h[ae],0<ae?re|=Le<<ae:re=Le,ae+=fe;8<=ae;)X[be++]=255&re,254<=be&&(Y.writeByte(be),Y.writeBytesView(X,0,be),be=0),re>>=8,ae-=8;if((Se>ye||xe)&&(xe?(fe=ge,ye=(1<<fe)-1,xe=!1):(++fe,ye=fe===12?1<<fe:(1<<fe)-1)),Le==oe){for(;0<ae;)X[be++]=255&re,254<=be&&(Y.writeByte(be),Y.writeBytesView(X,0,be),be=0),re>>=8,ae-=8;0<be&&(Y.writeByte(be),Y.writeBytesView(X,0,be),be=0)}}};function d(Q,te,Z){return Q<<8&63488|te<<2&992|Z>>3}function g(Q,te,Z,q){return Q>>4|240&te|(240&Z)<<4|(240&q)<<8}function y(Q,te,Z){return Q>>4<<8|240&te|Z>>4}function b(Q,te,Z){return Q<te?te:Z<Q?Z:Q}function x(Q){return Q*Q}function j(Q,te,Z){var q=0,Y=1e100;const X=Q[te];for(var ce=X.cnt,O=X.ac,B=X.rc,W=X.gc,re=X.bc,ae=X.fw;ae!=0;ae=Q[ae].fw){var me,ge=Q[ae],xe=ge.cnt,xe=ce*xe/(ce+xe);Y<=xe||(me=0,Z&&Y<=(me+=xe*x(ge.ac-O))||Y<=(me+=xe*x(ge.rc-B))||Y<=(me+=xe*x(ge.gc-W))||Y<=(me+=xe*x(ge.bc-re))||(Y=me,q=ae))}X.err=Y,X.nn=q}function S(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function w(Q,te){for(var Z=0,q=0;q<Q.length;q++){var Y=Q[q]-te[q];Z+=Y*Y}return Z}function _(Q,te){return 1<te?Math.round(Q/te)*te:Q}function M(Q){return Q*Q}function I(Q,te,Z=w){let q=1/0,Y=-1;for(let ce=0;ce<Q.length;ce++){var X=Z(te,Q[ce]);X<q&&(q=X,Y=ce)}return Y}function P(Q,te,Z=w){let q=1/0,Y=-1;for(let ce=0;ce<Q.length;ce++){var X=Z(te,Q[ce]);X<q&&(q=X,Y=ce)}return[Y,q]}function R(Q={}){const{initialCapacity:te=4096,auto:Z=!0}=Q,q=m(te),Y=new Uint8Array(256),X=new Int32Array(5003),ce=new Int32Array(5003);let O=!1;return{reset(){q.reset(),O=!1},finish(){q.writeByte(p.trailer)},bytes(){return q.bytes()},bytesView(){return q.bytesView()},get buffer(){return q.buffer},get stream(){return q},writeHeader:B,writeFrame(W,re,ae,Ie={}){var{transparent:ge=!1,transparentIndex:xe=0,delay:Ue=0,palette:fe=null,repeat:Ve=0,colorDepth:ye=8,dispose:Te=-1}=Ie;let oe=!1;if(Z?O||(oe=!0,B(),O=!0):oe=Boolean(Ie.first),re=Math.max(0,Math.floor(re)),ae=Math.max(0,Math.floor(ae)),oe){if(!fe)throw new Error("First frame must include a { palette } option");var[Ie,Be,be,tt,Me=8]=[q,re,ae,fe,ye];tt=z(tt.length)-1,Me=128|Me-1<<4|tt,U(Ie,Be),U(Ie,be),Ie.writeBytes([Me,0,0]),D(q,fe),0<=Ve&&(tt=q,Be=Ve,tt.writeByte(33),tt.writeByte(255),tt.writeByte(11),F(tt,"NETSCAPE2.0"),tt.writeByte(3),tt.writeByte(1),U(tt,Be),tt.writeByte(0))}var Se,be=Math.round(Ue/10),Ie=q,Me=Te,Ve=be,Be=ge,tt=xe,Ue=(Ie.writeByte(33),Ie.writeByte(249),Ie.writeByte(4),tt<0&&(tt=0,Be=!1),Be=Be?(Se=1,2):Se=0,0<=Me&&(Be=7&Me),Be<<=2,Ie.writeByte(0|Be|Se),U(Ie,Ve),Ie.writeByte(tt||0),Ie.writeByte(0),Boolean(fe)&&!oe);Te=q,ge=re,xe=ae,Se=Ue?fe:null,Te.writeByte(44),U(Te,0),U(Te,0),U(Te,ge),U(Te,xe),Se?(ge=z(Se.length)-1,Te.writeByte(128|ge)):Te.writeByte(0),Ue&&D(q,fe),[Ve,Ie,xe,ge,Te=8,Ue,fe,W]=[q,W,re,ae,ye,Y,X,ce],f(xe,ge,Ie,Te,Ve,Ue,fe,W)}};function B(){F(q,"GIF89a")}}function D(Q,te){var Z=1<<z(te.length);for(let q=0;q<Z;q++){let Y=[0,0,0];q<te.length&&(Y=te[q]),Q.writeByte(Y[0]),Q.writeByte(Y[1]),Q.writeByte(Y[2])}}function U(Q,te){Q.writeByte(255&te),Q.writeByte(te>>8&255)}function F(Q,te){for(var Z=0;Z<te.length;Z++)Q.writeByte(te.charCodeAt(Z))}function z(Q){return Math.max(Math.ceil(Math.log2(Q)),1)}var K=R},{}],238:[function(r,s,a){a.read=function(o,u,l,c,j){var m,h,f=8*j-c-1,d=(1<<f)-1,g=d>>1,y=-7,b=l?j-1:0,x=l?-1:1,j=o[u+b];for(b+=x,m=j&(1<<-y)-1,j>>=-y,y+=f;0<y;m=256*m+o[u+b],b+=x,y-=8);for(h=m&(1<<-y)-1,m>>=-y,y+=c;0<y;h=256*h+o[u+b],b+=x,y-=8);if(m===0)m=1-g;else{if(m===d)return h?NaN:1/0*(j?-1:1);h+=Math.pow(2,c),m-=g}return(j?-1:1)*h*Math.pow(2,m-c)},a.write=function(o,u,l,c,p,S){var h,f,d=8*S-p-1,g=(1<<d)-1,y=g>>1,b=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=c?0:S-1,j=c?1:-1,S=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(f=isNaN(u)?1:0,h=g):(h=Math.floor(Math.log(u)/Math.LN2),u*(c=Math.pow(2,-h))<1&&(h--,c*=2),2<=(u+=1<=h+y?b/c:b*Math.pow(2,1-y))*c&&(h++,c/=2),g<=h+y?(f=0,h=g):1<=h+y?(f=(u*c-1)*Math.pow(2,p),h+=y):(f=u*Math.pow(2,y-1)*Math.pow(2,p),h=0));8<=p;o[l+x]=255&f,x+=j,f/=256,p-=8);for(h=h<<p|f,d+=p;0<d;o[l+x]=255&h,x+=j,h/=256,d-=8);o[l+x-j]|=128*S}},{}],239:[function(r,s,a){var o;function u(J,ie){return J.b===ie.b&&J.a===ie.a}function l(J,ie){return J.b<ie.b||J.b===ie.b&&J.a<=ie.a}function c(J,ie,$){var le=ie.b-J.b,Ee=$.b-ie.b;return 0<le+Ee?le<Ee?ie.a-J.a+le/(le+Ee)*(J.a-$.a):ie.a-$.a+Ee/(le+Ee)*($.a-J.a):0}function p(J,ie,$){var le=ie.b-J.b,Ee=$.b-ie.b;return 0<le+Ee?(ie.a-$.a)*le+(ie.a-J.a)*Ee:0}function m(J,ie){return J.a<ie.a||J.a===ie.a&&J.b<=ie.b}function h(J,ie,$){var le=ie.a-J.a,Ee=$.a-ie.a;return 0<le+Ee?le<Ee?ie.b-J.b+le/(le+Ee)*(J.b-$.b):ie.b-$.b+Ee/(le+Ee)*($.b-J.b):0}function f(J,ie,$){var le=ie.a-J.a,Ee=$.a-ie.a;return 0<le+Ee?(ie.b-$.b)*le+(ie.b-J.b)*Ee:0}function d(J,ie,$,le){return(J=J<0?0:J)<=($=$<0?0:$)?$===0?(ie+le)/2:ie+J/(J+$)*(le-ie):le+$/(J+$)*(ie-le)}function g(J){var ie=S(J.b);return _(ie,J.c),_(ie.b,J.c),M(ie,J.a),ie}function y(J,ie){var $=!1,le=!1;J!==ie&&(ie.a!==J.a&&(le=!0,P(ie.a,J.a)),ie.d!==J.d&&($=!0,R(ie.d,J.d)),w(ie,J),le||(_(ie,J.a),J.a.c=J),$||(M(ie,J.d),J.d.a=J))}function b(J){var ie=J.b,$=!1;J.d!==J.b.d&&($=!0,R(J.d,J.b.d)),J.c===J?P(J.a,null):(J.b.d.a=J.b.e,J.a.c=J.c,w(J,J.b.e),$||M(J,J.d)),ie.c===ie?(P(ie.a,null),R(ie.d,null)):(J.d.a=ie.b.e,ie.a.c=ie.c,w(ie,ie.b.e)),I(J)}function x(J){var ie=S(J),$=ie.b;return w(ie,J.e),ie.a=J.b.a,_($,ie.a),ie.d=$.d=J.d,ie=ie.b,w(J.b,J.b.b.e),w(J.b,ie),J.b.a=ie.a,ie.b.a.c=ie.b,ie.b.d=J.b.d,ie.f=J.f,ie.b.f=J.b.f,ie}function j(J,ie){var $=!1,le=S(J),Ee=le.b;return ie.d!==J.d&&($=!0,R(ie.d,J.d)),w(le,J.e),w(Ee,ie),le.a=J.b.a,Ee.a=ie.a,le.d=Ee.d=J.d,J.d.a=Ee,$||M(le,J.d),le}function S(J){var ie=new be,$=new be,le=J.b.h;return((($.h=le).b.h=ie).h=J).b.h=$,ie.b=$,((ie.c=ie).e=$).b=ie,($.c=$).e=ie}function w(J,ie){var $=J.c,le=ie.c;$.b.e=ie,(le.b.e=J).c=le,ie.c=$}function _(J,ie){var $=ie.f,le=new Me(ie,$);for($.e=le,$=(ie.f=le).c=J;$.a=le,($=$.c)!==J;);}function M(J,ie){var $=ie.d,le=new Se(ie,$);for($.b=le,(ie.d=le).a=J,le.c=ie.c,$=J;$.d=le,($=$.e)!==J;);}function I(J){var ie=J.h;J=J.b.h,(ie.b.h=J).b.h=ie}function P(J,ie){for(var $=J.c,le=$;le.a=ie,(le=le.c)!==$;);$=J.f,((le=J.e).f=$).e=le}function R(J,ie){for(var $=J.a,le=$;le.d=ie,(le=le.e)!==$;);$=J.d,((le=J.b).d=$).b=le}function D(J){var ie=0;return Math.abs(J[1])>Math.abs(J[0])&&(ie=1),ie=Math.abs(J[2])>Math.abs(J[ie])?2:ie}function U(J,ie){J.f+=ie.f,J.b.f+=ie.b.f}function F(J,ie,$){return J=J.a,ie=ie.a,$=$.a,ie.b.a===J?$.b.a===J?l(ie.a,$.a)?p($.b.a,ie.a,$.a)<=0:0<=p(ie.b.a,$.a,ie.a):p($.b.a,J,$.a)<=0:$.b.a===J?0<=p(ie.b.a,J,ie.a):(ie=c(ie.b.a,J,ie.a),(J=c($.b.a,J,$.a))<=ie)}function z(J){J.a.i=null;var ie=J.e;ie.a.c=ie.c,ie.c.a=ie.a,J.e=null}function K(J,ie){b(J.a),J.c=!1,(J.a=ie).i=J}function Q(J){for(var ie=J.a.a;(J=Pe(J)).a.a===ie;);return J.c&&(K(J,ie=j($e(J).a.b,J.a.e)),J=Pe(J)),J}function te(J,ie,$){var le=new je;return le.a=$,le.e=xe(J.f,ie.e,le),$.i=le}function Z(J,ie){switch(J.s){case 100130:return(1&ie)!=0;case 100131:return ie!==0;case 100132:return 0<ie;case 100133:return ie<0;case 100134:return 2<=ie||ie<=-2}return!1}function q(J){var ie=J.a,$=ie.d;$.c=J.d,$.a=ie,z(J)}function Y(J,ie,$){for(ie=(J=ie).a;J!==$;){J.c=!1;var le=$e(J),Ee=le.a;if(Ee.a!==ie.a){if(!le.c){q(J);break}K(le,Ee=j(ie.c.b,Ee.b))}ie.c!==Ee&&(y(Ee.b.e,Ee),y(ie,Ee)),q(J),ie=le.a,J=le}return ie}function X(J,ie,$,le,Ee,Re){for(var Ge=!0;te(J,ie,$.b),($=$.c)!==le;);for(Ee===null&&(Ee=$e(ie).a.b.c);($=(le=$e(ie)).a.b).a===Ee.a;)$.c!==Ee&&(y($.b.e,$),y(Ee.b.e,$)),le.f=ie.f-$.f,le.d=Z(J,le.f),ie.b=!0,!Ge&&W(J,ie)&&(U($,Ee),z(ie),b(Ee)),Ge=!1,ie=le,Ee=$;ie.b=!0,Re&&ae(J,ie)}function ce(J,ie,$,le,Ee){var Re=[ie.g[0],ie.g[1],ie.g[2]];ie.d=null,ie.d=J.o&&J.o(Re,$,le,J.c)||null,ie.d===null&&(Ee?J.n||(oe(J,100156),J.n=!0):ie.d=$[0])}function O(J,ie,$){var le=[null,null,null,null];le[0]=ie.a.d,le[1]=$.a.d,ce(J,ie.a,le,[.5,.5,0,0],!1),y(ie,$)}function B(J,ie,$,le,Ee){var Re=Math.abs(ie.b-J.b)+Math.abs(ie.a-J.a),Ge=Math.abs($.b-J.b)+Math.abs($.a-J.a),st=Ee+1;le[Ee]=.5*Ge/(Re+Ge),le[st]=.5*Re/(Re+Ge),J.g[0]+=le[Ee]*ie.g[0]+le[st]*$.g[0],J.g[1]+=le[Ee]*ie.g[1]+le[st]*$.g[1],J.g[2]+=le[Ee]*ie.g[2]+le[st]*$.g[2]}function W(J,ie){var $=$e(ie),le=ie.a,Ee=$.a;if(l(le.a,Ee.a)){if(0<p(Ee.b.a,le.a,Ee.a))return;if(u(le.a,Ee.a)){if(le.a!==Ee.a){var $=J.e,Re=le.a.h;if(0<=Re){var Ge=($=$.b).d,st=$.e,ht=$.c,ft=ht[Re];Ge[ft]=Ge[$.a],(ht[Ge[ft]]=ft)<=--$.a&&(ft<=1||l(st[Ge[ft>>1]],st[Ge[ft]])?Ze:et)($,ft),st[Re]=null,ht[Re]=$.b,$.b=Re}else for($.c[-(Re+1)]=null;0<$.a&&$.c[$.d[$.a-1]]===null;)--$.a;O(J,Ee.b.e,le)}}else x(Ee.b),y(le,Ee.b.e),ie.b=$.b=!0}else{if(p(le.b.a,Ee.a,le.a)<0)return;Pe(ie).b=ie.b=!0,x(le.b),y(Ee.b.e,le)}return 1}function re(J,ie){var $=$e(ie),le=ie.a,Ee=$.a,Re=le.a,Ge=Ee.a,st=le.b.a,ht=Ee.b.a,ft=new Me;if(p(st,J.a,Re),p(ht,J.a,Ge),!(Re===Ge||Math.min(Re.a,st.a)>Math.max(Ge.a,ht.a))){if(l(Re,Ge)){if(0<p(ht,Re,Ge))return}else if(p(st,Ge,Re)<0)return;var yt,Ht,Dt=st,kt=Re,qt=ht,Rt=Ge;if(l(Dt,kt)||(yt=Dt,Dt=kt,kt=yt),l(qt,Rt)||(yt=qt,qt=Rt,Rt=yt),l(Dt,qt)||(yt=Dt,Dt=qt,qt=yt,yt=kt,kt=Rt,Rt=yt),l(qt,kt)?l(kt,Rt)?((yt=c(Dt,qt,kt))+(Ht=c(qt,kt,Rt))<0&&(yt=-yt,Ht=-Ht),ft.b=d(yt,qt.b,Ht,kt.b)):((yt=p(Dt,qt,kt))+(Ht=-p(Dt,Rt,kt))<0&&(yt=-yt,Ht=-Ht),ft.b=d(yt,qt.b,Ht,Rt.b)):ft.b=(qt.b+kt.b)/2,m(Dt,kt)||(yt=Dt,Dt=kt,kt=yt),m(qt,Rt)||(yt=qt,qt=Rt,Rt=yt),m(Dt,qt)||(yt=Dt,Dt=qt,qt=yt,yt=kt,kt=Rt,Rt=yt),m(qt,kt)?m(kt,Rt)?((yt=h(Dt,qt,kt))+(Ht=h(qt,kt,Rt))<0&&(yt=-yt,Ht=-Ht),ft.a=d(yt,qt.a,Ht,kt.a)):((yt=f(Dt,qt,kt))+(Ht=-f(Dt,Rt,kt))<0&&(yt=-yt,Ht=-Ht),ft.a=d(yt,qt.a,Ht,Rt.a)):ft.a=(qt.a+kt.a)/2,l(ft,J.a)&&(ft.b=J.a.b,ft.a=J.a.a),Dt=l(Re,Ge)?Re:Ge,l(Dt,ft)&&(ft.b=Dt.b,ft.a=Dt.a),u(ft,Re)||u(ft,Ge))return W(J,ie),0;if(!u(st,J.a)&&0<=p(st,J.a,ft)||!u(ht,J.a)&&p(ht,J.a,ft)<=0){if(ht===J.a)x(le.b),y(Ee.b,le),le=$e(ie=Q(ie)).a,Y(J,$e(ie),$),X(J,ie,le.b.e,le,le,!0);else{if(st!==J.a)return 0<=p(st,J.a,ft)&&(Pe(ie).b=ie.b=!0,x(le.b),le.a.b=J.a.b,le.a.a=J.a.a),void(p(ht,J.a,ft)<=0&&(ie.b=$.b=!0,x(Ee.b),Ee.a.b=J.a.b,Ee.a.a=J.a.a));for(x(Ee.b),y(le.e,Ee.b.e),Ge=(Re=$=ie).a.b.a;(Re=Pe(Re)).a.b.a===Ge;);Re=$e(ie=Re).a.b.c,$.a=Ee.b.e,X(J,ie,(Ee=Y(J,$,null)).c,le.b.c,Re,!0)}return 1}x(le.b),x(Ee.b),y(Ee.b.e,le),le.a.b=ft.b,le.a.a=ft.a,le.a.h=Be(J.e,le.a),le=le.a,Ee=[0,0,0,0],ft=[Re.d,st.d,Ge.d,ht.d],le.g[0]=le.g[1]=le.g[2]=0,B(le,Re,st,Ee,0),B(le,Ge,ht,Ee,2),ce(J,le,ft,Ee,!0),Pe(ie).b=ie.b=$.b=!0}}function ae(J,ie){for(var $=$e(ie);;){for(;$.b;)$=$e(ie=$);if(!ie.b&&((ie=Pe($=ie))===null||!ie.b))break;ie.b=!1;var le=ie.a,Ee=$.a;if(Re=le.b.a!==Ee.b.a)e:{var Re,Ge=$e(Re=ie),st=Re.a,ht=Ge.a,ft=void 0;if(l(st.b.a,ht.b.a)){if(p(st.b.a,ht.b.a,st.a)<0){Re=!1;break e}Pe(Re).b=Re.b=!0,ft=x(st),y(ht.b,ft),ft.d.c=Re.d}else{if(0<p(ht.b.a,st.b.a,ht.a)){Re=!1;break e}Re.b=Ge.b=!0,ft=x(ht),y(st.e,ht.b),ft.b.d.c=Re.d}Re=!0}if(Re&&($.c?(z($),b(Ee),Ee=($=$e(ie)).a):ie.c&&(z(ie),b(le),le=(ie=Pe($)).a)),le.a!==Ee.a){if(le.b.a===Ee.b.a||ie.c||$.c||le.b.a!==J.a&&Ee.b.a!==J.a)W(J,ie);else if(re(J,ie))break}le.a===Ee.a&&le.b.a===Ee.b.a&&(U(Ee,le),z(ie),b(le),ie=Pe($))}}function me(J,ie){var $=new je,le=g(J.b);le.a.b=4e150,le.a.a=ie,le.b.a.b=-4e150,le.b.a.a=ie,J.a=le.b.a,$.a=le,$.f=0,$.d=!1,$.c=!1,$.h=!0,$.b=!1,le=xe(le=J.f,le.a,$),$.e=le}function ge(J){this.a=new fe,this.b=J,this.c=F}function xe(J,ie,$){for(;(ie=ie.c).b!==null&&!J.c(J.b,ie.b,$););return J=new fe($,ie.a,ie),ie.a.c=J,ie.a=J}function fe(J,ie,$){this.b=J||null,this.a=ie||this,this.c=$||this}function ye(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Te(J,ie){if(J.d!==ie)for(;J.d!==ie;)if(J.d<ie)switch(J.d){case 0:oe(J,100151),J.u(null);break;case 1:oe(J,100152),J.t()}else switch(J.d){case 2:oe(J,100154),J.v();break;case 1:oe(J,100153),J.w()}}function oe(J,ie){J.p&&J.p(ie,J.c)}function Se(J,ie){this.b=J||this,this.d=ie||this,this.a=null,this.c=!1}function be(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ie(){this.c=new Me,this.a=new Se,this.b=new be,this.d=new be,this.b.b=this.d,this.d.b=this.b}function Me(J,ie){this.e=J||this,this.f=ie||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Ve(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Ue}function Be(J,ie){var $,le,Ee;return J.e?(2*(le=++($=J.b).a)>$.f&&($.f*=2,$.c=ve($.c,$.f+1)),$.b===0?Ee=le:(Ee=$.b,$.b=$.c[$.b]),$.e[Ee]=ie,$.c[Ee]=le,$.d[le]=Ee,$.h&&et($,le),Ee):($=J.a++,J.c[$]=ie,-($+1))}function tt(J){if(J.a===0)return Fe(J.b);var ie=J.c[J.d[J.a-1]];if(J.b.a!==0&&l(Le(J.b),ie))return Fe(J.b);for(;--J.a,0<J.a&&J.c[J.d[J.a-1]]===null;);return ie}function Ue(){this.d=ve([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ve(J,ie){for(var $=Array(ie),le=0;le<J.length;le++)$[le]=J[le];for(;le<ie;le++)$[le]=0;return $}function Le(J){return J.e[J.d[1]]}function Fe(J){var ie=J.d,$=J.e,le=J.c,Ee=ie[1],Re=$[Ee];return 0<J.a&&(ie[1]=ie[J.a],le[ie[1]]=1,$[Ee]=null,le[Ee]=J.b,J.b=Ee,0<--J.a&&Ze(J,1)),Re}function Ze(J,ie){for(var $=J.d,le=J.e,Ee=J.c,Re=ie,Ge=$[Re];;){var st=Re<<1,ht=(st<J.a&&l(le[$[st+1]],le[$[st]])&&(st+=1),$[st]);if(st>J.a||l(le[Ge],le[ht])){Ee[$[Re]=Ge]=Re;break}Ee[$[Re]=ht]=Re,Re=st}}function et(J,ie){for(var $=J.d,le=J.e,Ee=J.c,Re=ie,Ge=$[Re];;){var st=Re>>1,ht=$[st];if(st==0||l(le[ht],le[Ge])){Ee[$[Re]=Ge]=Re;break}Ee[$[Re]=ht]=Re,Re=st}}function je(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function $e(J){return J.e.c.b}function Pe(J){return J.e.a.b}(o=ye.prototype).x=function(){Te(this,0)},o.B=function(J,ie){switch(J){case 100142:return;case 100140:switch(ie){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ie)}break;case 100141:return void(this.m=!!ie);default:return void oe(this,100900)}oe(this,100901)},o.y=function(J){switch(J){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:oe(this,100900)}return!1},o.A=function(J,ie,$){this.j[0]=J,this.j[1]=ie,this.j[2]=$},o.z=function(J,ie){var $=ie||null;switch(J){case 100100:case 100106:this.h=$;break;case 100104:case 100110:this.l=$;break;case 100101:case 100107:this.k=$;break;case 100102:case 100108:this.i=$;break;case 100103:case 100109:this.p=$;break;case 100105:case 100111:this.o=$;break;case 100112:this.r=$;break;default:oe(this,100900)}},o.C=function(J,ie){var $=!1,le=[0,0,0];Te(this,2);for(var Ee=0;Ee<3;++Ee){var Re=J[Ee];Re<-1e150&&(Re=-1e150,$=!0),1e150<Re&&(Re=1e150,$=!0),le[Ee]=Re}$&&oe(this,100155),($=this.q)===null?y($=g(this.b),$.b):(x($),$=$.e),$.a.d=ie,$.a.g[0]=le[0],$.a.g[1]=le[1],$.a.g[2]=le[2],$.f=1,$.b.f=-1,this.q=$},o.u=function(J){Te(this,0),this.d=1,this.b=new Ie,this.c=J},o.t=function(){Te(this,1),this.d=2,this.q=null},o.v=function(){Te(this,2),this.d=1},o.w=function(){Te(this,1),this.d=0;var J,ie,$=this.j[0],le=this.j[1],Ee=this.j[2],Re=!1,Ge=[$,le,Ee];if($===0&&le===0&&Ee===0){for(var le=[-2e150,-2e150,-2e150],st=[2e150,2e150,2e150],Ee=[],ht=[],$=(Re=this.b.c).e;$!==Re;$=$.e)for(var ft=0;ft<3;++ft){var yt=$.g[ft];yt<st[ft]&&(st[ft]=yt,ht[ft]=$),yt>le[ft]&&(le[ft]=yt,Ee[ft]=$)}if(le[1]-st[1]>le[$=0]-st[0]&&($=1),st[$=le[2]-st[2]>le[$]-st[$]?2:$]>=le[$])Ge[0]=0,Ge[1]=0,Ge[2]=1;else{for(st=ht[$],Ee=Ee[$],ht=[le=0,0,0],st=[st.g[0]-Ee.g[0],st.g[1]-Ee.g[1],st.g[2]-Ee.g[2]],ft=[0,0,0],$=Re.e;$!==Re;$=$.e)ft[0]=$.g[0]-Ee.g[0],ft[1]=$.g[1]-Ee.g[1],ft[2]=$.g[2]-Ee.g[2],ht[0]=st[1]*ft[2]-st[2]*ft[1],ht[1]=st[2]*ft[0]-st[0]*ft[2],ht[2]=st[0]*ft[1]-st[1]*ft[0],le<(yt=ht[0]*ht[0]+ht[1]*ht[1]+ht[2]*ht[2])&&(le=yt,Ge[0]=ht[0],Ge[1]=ht[1],Ge[2]=ht[2]);le<=0&&(Ge[0]=Ge[1]=Ge[2]=0,Ge[D(st)]=1)}Re=!0}for(ht=D(Ge),$=this.b.c,le=(ht+1)%3,Ee=(ht+2)%3,ht=0<Ge[ht]?1:-1,Ge=$.e;Ge!==$;Ge=Ge.e)Ge.b=Ge.g[le],Ge.a=ht*Ge.g[Ee];if(Re){for(Ge=0,$=(Re=this.b.a).b;$!==Re;$=$.b)if(!((le=$.a).f<=0))for(;Ge+=(le.a.b-le.b.a.b)*(le.a.a+le.b.a.a),(le=le.e)!==$.a;);if(Ge<0)for(Re=(Ge=this.b.c).e;Re!==Ge;Re=Re.e)Re.a=-Re.a}for(this.n=!1,Ge=this.b.b,$=Ge.h;$!==Ge;$=Re)Re=$.h,le=$.e,u($.a,$.b.a)&&$.e.e!==$&&(O(this,le,$),b($),le=($=le).e),le.e===$&&(le!==$&&(le!==Re&&le!==Re.b||(Re=Re.h),b(le)),$!==Re&&$!==Re.b||(Re=Re.h),b($));for(this.e=Ge=new Ve,Re=this.b.c,$=Re.e;$!==Re;$=$.e)$.h=Be(Ge,$);var Ht=Ge;Ht.d=[];for(var Dt=0;Dt<Ht.a;Dt++)Ht.d[Dt]=Dt;Ht.d.sort(function(Rt){return function(nr,en){return l(Rt[nr],Rt[en])?1:-1}}(Ht.c)),Ht.e=!0;for(var kt=Ht.b,qt=kt.a;1<=qt;--qt)Ze(kt,qt);for(kt.h=!0,this.f=new ge(this),me(this,-4e150),me(this,4e150);(Ge=tt(this.e))!==null;){for(;;){e:if(($=this.e).a===0)Re=Le($.b);else if(Re=$.c[$.d[$.a-1]],$.b.a!==0&&l($=Le($.b),Re)){Re=$;break e}if(Re===null||!u(Re,Ge))break;Re=tt(this.e),O(this,Ge.c,Re.c)}(function Rt(nr,en){for(var Tr,tr=(nr.a=en).c;tr.i===null;)if((tr=tr.c)===en.c){var tr=nr,zt=en;(wr=new je).a=zt.c.b;for(var Ir=(At=tr.f).a;(Ir=Ir.a).b!==null&&!At.c(At.b,wr,Ir.b););var At,xt,Cr=$e(At=Ir.b),wr=At.a,Ir=Cr.a;return void(p(wr.b.a,zt,wr.a)===0?u((wr=At.a).a,zt)||u(wr.b.a,zt)||(x(wr.b),At.c&&(b(wr.c),At.c=!1),y(zt.c,wr),Rt(tr,zt)):(xt=l(Ir.b.a,wr.b.a)?At:Cr,Cr=void 0,At.d||xt.c?(Cr=xt===At?j(zt.c.b,wr.e):j(Ir.b.c.b,zt.c).b,xt.c?K(xt,Cr):((At=te(wr=tr,At,Cr)).f=Pe(At).f+At.a.f,At.d=Z(wr,At.f)),Rt(tr,zt)):X(tr,At,zt.c,zt.c,null,!0)))}At=(wr=$e(tr=Q(tr.i))).a,(wr=Y(nr,wr,null)).c===At?(wr=(At=wr).c,Ir=$e(tr),Cr=tr.a,xt=Ir.a,Tr=!1,Cr.b.a!==xt.b.a&&re(nr,tr),u(Cr.a,nr.a)&&(y(wr.b.e,Cr),wr=$e(tr=Q(tr)).a,Y(nr,$e(tr),Ir),Tr=!0),u(xt.a,nr.a)&&(y(At,xt.b.e),At=Y(nr,Ir,null),Tr=!0),Tr?X(nr,tr,At.c,wr,wr,!0):(zt=l(xt.a,Cr.a)?xt.b.e:Cr,X(nr,tr,zt=j(At.c.b,zt),zt.c,zt.c,!1),zt.b.i.c=!0,ae(nr,tr))):X(nr,tr,wr.c,At,At,!0)})(this,Ge)}for(this.a=this.f.a.a.b.a.a,Ge=0;(Re=this.f.a.a.b)!==null;)Re.h||++Ge,z(Re);for(this.f=null,(Ge=this.e).b=null,Ge.d=null,this.e=Ge.c=null,Ge=this.b,$=Ge.a.b;$!==Ge.a;$=Re)Re=$.b,($=$.a).e.e===$&&(U($.c,$),b($));if(!this.n){if(Ge=this.b,this.m)for($=Ge.b.h;$!==Ge.b;$=Re)Re=$.h,$.b.d.c!==$.d.c?$.f=$.d.c?1:-1:b($);else for($=Ge.a.b;$!==Ge.a;$=Re)if(Re=$.b,$.c){for($=$.a;l($.b.a,$.a);$=$.c.b);for(;l($.a,$.b.a);$=$.e);for(le=$.c.b,Ee=void 0;$.e!==le;)if(l($.b.a,le.a)){for(;le.e!==$&&(l((ie=le.e).b.a,ie.a)||p(le.a,le.b.a,le.e.b.a)<=0);)le=(Ee=j(le.e,le)).b;le=le.c.b}else{for(;le.e!==$&&(l((J=$.c.b).a,J.b.a)||0<=p($.b.a,$.a,$.c.b.a));)$=(Ee=j($,$.c.b)).b;$=$.e}for(;le.e.e!==$;)Ee=j(le.e,le),le=Ee.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Re=(Ge=this.b).a.b;Re!==Ge.a;Re=Re.b)if(Re.c){for(this.h&&this.h(2,this.c),$=Re.a;this.k&&this.k($.a.d,this.c),($=$.e)!==Re.a;);this.i&&this.i(this.c)}}else{for(Ge=this.b,Re=!!this.l,$=!1,le=-1,Ee=Ge.a.d;Ee!==Ge.a;Ee=Ee.d)if(Ee.c)for($||(this.h&&this.h(4,this.c),$=!0),ht=Ee.a;Re&&(st=ht.b.d.c?0:1,le!==st&&(le=st,this.l&&this.l(!!le,this.c))),this.k&&this.k(ht.a.d,this.c),(ht=ht.e)!==Ee.a;);$&&this.i&&this.i(this.c)}if(this.r){for(Ge=this.b,$=Ge.a.b;$!==Ge.a;$=Re)if(Re=$.b,!$.c){for(Ee=(le=$.a).e,ht=void 0;Ee=(ht=Ee).e,(ht.d=null)===ht.b.d&&(ht.c===ht?P(ht.a,null):(ht.a.c=ht.c,w(ht,ht.b.e)),(st=ht.b).c===st?P(st.a,null):(st.a.c=st.c,w(st,st.b.e)),I(ht)),ht!==le;);le=$.d,(($=$.b).d=le).b=$}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:ye,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},ye.prototype.gluDeleteTess=ye.prototype.x,ye.prototype.gluTessProperty=ye.prototype.B,ye.prototype.gluGetTessProperty=ye.prototype.y,ye.prototype.gluTessNormal=ye.prototype.A,ye.prototype.gluTessCallback=ye.prototype.z,ye.prototype.gluTessVertex=ye.prototype.C,ye.prototype.gluTessBeginPolygon=ye.prototype.u,ye.prototype.gluTessBeginContour=ye.prototype.t,ye.prototype.gluTessEndContour=ye.prototype.v,ye.prototype.gluTessEndPolygon=ye.prototype.w,s!==void 0&&(s.exports=this.libtess)},{}],240:[function(r,s,a){function o(l,c,p,m){var h=0,f=(m=m===void 0?{}:m).loop===void 0?null:m.loop,d=m.palette===void 0?null:m.palette;if(c<=0||p<=0||65535<c||65535<p)throw new Error("Width/Height invalid.");function g(M){if(M=M.length,M<2||256<M||M&M-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return M}l[h++]=71,l[h++]=73,l[h++]=70,l[h++]=56,l[h++]=57,l[h++]=97;var y=0,b=0;if(d!==null){for(var x=g(d);x>>=1;)++y;if(x=1<<y,--y,m.background!==void 0){if(x<=(b=m.background))throw new Error("Background index out of range.");if(b===0)throw new Error("Background index explicitly passed as 0.")}}if(l[h++]=255&c,l[h++]=c>>8&255,l[h++]=255&p,l[h++]=p>>8&255,l[h++]=(d!==null?128:0)|y,l[h++]=b,l[h++]=0,d!==null)for(var j=0,S=d.length;j<S;++j){var w=d[j];l[h++]=w>>16&255,l[h++]=w>>8&255,l[h++]=255&w}if(f!==null){if(f<0||65535<f)throw new Error("Loop count invalid.");l[h++]=33,l[h++]=255,l[h++]=11,l[h++]=78,l[h++]=69,l[h++]=84,l[h++]=83,l[h++]=67,l[h++]=65,l[h++]=80,l[h++]=69,l[h++]=50,l[h++]=46,l[h++]=48,l[h++]=3,l[h++]=1,l[h++]=255&f,l[h++]=f>>8&255,l[h++]=0}var _=!1;this.addFrame=function(M,I,P,R,D,U){if(_===!0&&(--h,_=!1),U=U===void 0?{}:U,M<0||I<0||65535<M||65535<I)throw new Error("x/y invalid.");if(P<=0||R<=0||65535<P||65535<R)throw new Error("Width/Height invalid.");if(D.length<P*R)throw new Error("Not enough pixels for the frame size.");var F=!0,z=U.palette;if(z==null&&(F=!1,z=d),z==null)throw new Error("Must supply either a local or global palette.");for(var Q=g(z),K=0;Q>>=1;)++K;var Q=1<<K,te=U.delay===void 0?0:U.delay,Z=U.disposal===void 0?0:U.disposal;if(Z<0||3<Z)throw new Error("Disposal out of range.");var q=!1,Y=0;if(U.transparent!==void 0&&U.transparent!==null&&(q=!0,(Y=U.transparent)<0||Q<=Y))throw new Error("Transparent color index.");if(Z===0&&!q&&te===0||(l[h++]=33,l[h++]=249,l[h++]=4,l[h++]=Z<<2|(q===!0?1:0),l[h++]=255&te,l[h++]=te>>8&255,l[h++]=Y,l[h++]=0),l[h++]=44,l[h++]=255&M,l[h++]=M>>8&255,l[h++]=255&I,l[h++]=I>>8&255,l[h++]=255&P,l[h++]=P>>8&255,l[h++]=255&R,l[h++]=R>>8&255,l[h++]=F===!0?128|K-1:0,F===!0)for(var X=0,ce=z.length;X<ce;++X){var O=z[X];l[h++]=O>>16&255,l[h++]=O>>8&255,l[h++]=255&O}return h=function(B,W,re,ae){B[W++]=re;var me=W++,ge=1<<re,xe=ge-1,fe=1+ge,ye=1+fe,Te=re+1,oe=0,Se=0;function be(Fe){for(;Fe<=oe;)B[W++]=255&Se,Se>>=8,oe-=8,W===me+256&&(B[me]=255,me=W++)}function Ie(Fe){Se|=Fe<<oe,oe+=Te,be(8)}var Me=ae[0]&xe,Ve={};Ie(ge);for(var Be=1,tt=ae.length;Be<tt;++Be){var Ue=ae[Be]&xe,ve=Me<<8|Ue,Le=Ve[ve];if(Le===void 0){for(Se|=Me<<oe,oe+=Te;8<=oe;)B[W++]=255&Se,Se>>=8,oe-=8,W===me+256&&(B[me]=255,me=W++);ye===4096?(Ie(ge),ye=1+fe,Te=re+1,Ve={}):(1<<Te<=ye&&++Te,Ve[ve]=ye++),Me=Ue}else Me=Le}return Ie(Me),Ie(fe),be(1),me+1===W?B[me]=0:(B[me]=W-me-1,B[W++]=0),W}(l,h,K<2?2:K,D)},this.end=function(){return _===!1&&(l[h++]=59,_=!0),h},this.getOutputBuffer=function(){return l},this.setOutputBuffer=function(M){l=M},this.getOutputBufferPosition=function(){return h},this.setOutputBufferPosition=function(M){h=M}}function u(l,c,p,m){for(var h=l[c++],f=1<<h,d=1+f,g=1+d,y=h+1,b=(1<<y)-1,x=0,j=0,S=0,w=l[c++],_=new Int32Array(4096),M=null;;){for(;x<16&&w!==0;)j|=l[c++]<<x,x+=8,w===1?w=l[c++]:--w;if(x<y)break;var I=j&b;if(j>>=y,x-=y,I==f)g=1+d,b=(1<<(y=h+1))-1,M=null;else{if(I==d)break;for(var P=I<g?I:M,R=0,D=P;f<D;)D=_[D]>>8,++R;var U=D;if(m<S+R+(P!==I?1:0))return void console.log("Warning, gif stream longer than expected.");p[S++]=U;var F=S+=R;for(P!==I&&(p[S++]=U),D=P;R--;)D=_[D],p[--F]=255&D,D>>=8;M!==null&&g<4096&&(_[g++]=M<<8|U,b+1<=g&&y<12&&(++y,b=b<<1|1)),M=I}}S!==m&&console.log("Warning, gif stream shorter than expected.")}try{a.GifWriter=o,a.GifReader=function(l){var c=0;if(l[c++]!==71||l[c++]!==73||l[c++]!==70||l[c++]!==56||(l[c++]+1&253)!=56||l[c++]!==97)throw new Error("Invalid GIF 87a/89a header.");var p=l[c++]|l[c++]<<8,m=l[c++]|l[c++]<<8,h=l[c++],f=1<<1+(7&h),d=(l[c++],l[c++],null),g=null,y=(h>>7&&(d=c,c+=3*(g=f)),!0),b=[],x=0,j=null,S=0,w=null;for(this.width=p,this.height=m;y&&c<l.length;)switch(l[c++]){case 33:switch(l[c++]){case 255:if(l[c]!==11||l[c+1]==78&&l[c+2]==69&&l[c+3]==84&&l[c+4]==83&&l[c+5]==67&&l[c+6]==65&&l[c+7]==80&&l[c+8]==69&&l[c+9]==50&&l[c+10]==46&&l[c+11]==48&&l[c+12]==3&&l[c+13]==1&&l[c+16]==0)c+=14,w=l[c++]|l[c++]<<8,c++;else for(c+=12;;){if(!(0<=(M=l[c++])))throw Error("Invalid block size");if(M===0)break;c+=M}break;case 249:if(l[c++]!==4||l[c+4]!==0)throw new Error("Invalid graphics extension block.");var _=l[c++],x=l[c++]|l[c++]<<8,j=l[c++];!(1&_)&&(j=null),S=_>>2&7,c++;break;case 254:for(;;){if(!(0<=(M=l[c++])))throw Error("Invalid block size");if(M===0)break;c+=M}break;default:throw new Error("Unknown graphic control label: 0x"+l[c-1].toString(16))}break;case 44:var M,I=l[c++]|l[c++]<<8,P=l[c++]|l[c++]<<8,R=l[c++]|l[c++]<<8,D=l[c++]|l[c++]<<8,te=l[c++],U=te>>6&1,F=1<<1+(7&te),z=d,K=g,Q=!1,te=(te>>7&&(Q=!0,z=c,c+=3*(K=F)),c);for(c++;;){if(!(0<=(M=l[c++])))throw Error("Invalid block size");if(M===0)break;c+=M}b.push({x:I,y:P,width:R,height:D,has_local_palette:Q,palette_offset:z,palette_size:K,data_offset:te,data_length:c-te,transparent_index:j,interlaced:!!U,delay:x,disposal:S});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+l[c-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return w},this.frameInfo=function(Z){if(Z<0||Z>=b.length)throw new Error("Frame index out of range.");return b[Z]},this.decodeAndBlitFrameBGRA=function(Z,q){for(var Z=this.frameInfo(Z),Y=Z.width*Z.height,X=new Uint8Array(Y),ce=(u(l,Z.data_offset,X,Y),Z.palette_offset),O=Z.transparent_index,B=(O===null&&(O=256),Z.width),W=p-B,re=B,ae=4*(Z.y*p+Z.x),me=4*((Z.y+Z.height)*p+Z.x),ge=ae,xe=4*W,fe=(Z.interlaced===!0&&(xe+=4*p*7),8),ye=0,Te=X.length;ye<Te;++ye){var oe,Se,be=X[ye];re===0&&(re=B,me<=(ge+=xe)&&(xe=4*W+4*p*(fe-1),ge=ae+(B+W)*(fe<<1),fe>>=1)),be===O?ge+=4:(oe=l[ce+3*be],Se=l[ce+3*be+1],be=l[ce+3*be+2],q[ge++]=be,q[ge++]=Se,q[ge++]=oe,q[ge++]=255),--re}},this.decodeAndBlitFrameRGBA=function(Z,q){for(var Z=this.frameInfo(Z),Y=Z.width*Z.height,X=new Uint8Array(Y),ce=(u(l,Z.data_offset,X,Y),Z.palette_offset),O=Z.transparent_index,B=(O===null&&(O=256),Z.width),W=p-B,re=B,ae=4*(Z.y*p+Z.x),me=4*((Z.y+Z.height)*p+Z.x),ge=ae,xe=4*W,fe=(Z.interlaced===!0&&(xe+=4*p*7),8),ye=0,Te=X.length;ye<Te;++ye){var oe,Se,be=X[ye];re===0&&(re=B,me<=(ge+=xe)&&(xe=4*W+4*p*(fe-1),ge=ae+(B+W)*(fe<<1),fe>>=1)),be===O?ge+=4:(oe=l[ce+3*be],Se=l[ce+3*be+1],be=l[ce+3*be+2],q[ge++]=oe,q[ge++]=Se,q[ge++]=be,q[ge++]=255),--re}}}}catch{}},{}],241:[function(r,s,a){(function(o){var u,l;u=this,l=function(c){function p(L){if(this==null)throw TypeError();var C,k=String(this),E=k.length,L=L?Number(L):0;if(!((L=L!=L?0:L)<0||E<=L))return 55296<=(C=k.charCodeAt(L))&&C<=56319&&L+1<E&&56320<=(E=k.charCodeAt(L+1))&&E<=57343?1024*(C-55296)+E-56320+65536:C}String.prototype.codePointAt||((m=function(){try{var v={},C=Object.defineProperty,k=C(v,v,v)&&C}catch{}return k}())?m(String.prototype,"codePointAt",{value:p,configurable:!0,writable:!0}):String.prototype.codePointAt=p);var m,h=0,f=-3;function d(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function g(v,C){this.source=v,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=C,this.destLen=0,this.ltree=new d,this.dtree=new d}var y=new d,b=new d,x=new Uint8Array(30),j=new Uint16Array(30),S=new Uint8Array(30),w=new Uint16Array(30),_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=new d,I=new Uint8Array(320);function P(v,C,k,E){for(var L,G=0;G<k;++G)v[G]=0;for(G=0;G<30-k;++G)v[G+k]=G/k|0;for(L=E,G=0;G<30;++G)C[G]=L,L+=1<<v[G]}var R=new Uint16Array(16);function D(v,C,k,E){for(var L,G=0;G<16;++G)v.table[G]=0;for(G=0;G<E;++G)v.table[C[k+G]]++;for(G=L=v.table[0]=0;G<16;++G)R[G]=L,L+=v.table[G];for(G=0;G<E;++G)C[k+G]&&(v.trans[R[C[k+G]]++]=G)}function U(v,C,k){if(!C)return k;for(;v.bitcount<24;)v.tag|=v.source[v.sourceIndex++]<<v.bitcount,v.bitcount+=8;var E=v.tag&65535>>>16-C;return v.tag>>>=C,v.bitcount-=C,E+k}function F(v,C){for(;v.bitcount<24;)v.tag|=v.source[v.sourceIndex++]<<v.bitcount,v.bitcount+=8;for(var k=0,E=0,L=0,G=v.tag;E=2*E+(1&G),G>>>=1,k+=C.table[++L],0<=(E-=C.table[L]););return v.tag=G,v.bitcount-=L,C.trans[k+E]}function z(v,C,k){for(;;){var E=F(v,C);if(E===256)return h;if(E<256)v.dest[v.destLen++]=E;else for(var L,G=U(v,x[E-=257],j[E]),E=F(v,k),H=L=v.destLen-U(v,S[E],w[E]);H<L+G;++H)v.dest[v.destLen++]=v.dest[H]}}for(var K=y,Q=b,te=0;te<7;++te)K.table[te]=0;for(K.table[7]=24,K.table[8]=152,K.table[9]=112,te=0;te<24;++te)K.trans[te]=256+te;for(te=0;te<144;++te)K.trans[24+te]=te;for(te=0;te<8;++te)K.trans[168+te]=280+te;for(te=0;te<112;++te)K.trans[176+te]=144+te;for(te=0;te<5;++te)Q.table[te]=0;for(Q.table[5]=32,te=0;te<32;++te)Q.trans[te]=te;P(x,j,4,3),P(S,w,2,1),x[28]=0,j[28]=258;var Z=function(v,C){var k,E,L,G=new g(v,C);do{switch(L=void 0,(E=G).bitcount--||(E.tag=E.source[E.sourceIndex++],E.bitcount=7),L=1&E.tag,E.tag>>>=1,E=L,U(G,2,0)){case 0:k=function(Xe){for(var Nt,$t;8<Xe.bitcount;)Xe.sourceIndex--,Xe.bitcount-=8;if((Nt=256*Xe.source[Xe.sourceIndex+1]+Xe.source[Xe.sourceIndex])!==(65535&~(256*Xe.source[Xe.sourceIndex+3]+Xe.source[Xe.sourceIndex+2])))return f;for(Xe.sourceIndex+=4,$t=Nt;$t;--$t)Xe.dest[Xe.destLen++]=Xe.source[Xe.sourceIndex++];return Xe.bitcount=0,h}(G);break;case 1:k=z(G,y,b);break;case 2:rt=Ye=at=We=H=we=Ne=He=Oe=de=pe=se=void 0;for(var H,se=G,pe=G.ltree,de=G.dtree,Oe=U(se,5,257),He=U(se,5,1),Ne=U(se,4,4),we=0;we<19;++we)I[we]=0;for(we=0;we<Ne;++we){var at=U(se,3,0);I[_[we]]=at}for(D(M,I,0,19),H=0;H<Oe+He;){var Ye=F(se,M);switch(Ye){case 16:for(var rt=I[H-1],We=U(se,2,3);We;--We)I[H++]=rt;break;case 17:for(We=U(se,3,3);We;--We)I[H++]=0;break;case 18:for(We=U(se,7,11);We;--We)I[H++]=0;break;default:I[H++]=Ye}}D(pe,I,0,Oe),D(de,I,Oe,He),k=z(G,G.ltree,G.dtree);break;default:k=f}if(k!==h)throw new Error("Data error")}while(!E);return G.destLen<G.dest.length?typeof G.dest.slice=="function"?G.dest.slice(0,G.destLen):G.dest.subarray(0,G.destLen):G.dest};function q(v,C,k,E,L){return Math.pow(1-L,3)*v+3*Math.pow(1-L,2)*L*C+3*(1-L)*Math.pow(L,2)*k+Math.pow(L,3)*E}function Y(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function X(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function ce(v){throw new Error(v)}function O(v,C){v||ce(C)}Y.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Y.prototype.addPoint=function(v,C){typeof v=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=v,this.x2=v),v<this.x1&&(this.x1=v),v>this.x2&&(this.x2=v)),typeof C=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=C,this.y2=C),C<this.y1&&(this.y1=C),C>this.y2&&(this.y2=C))},Y.prototype.addX=function(v){this.addPoint(v,null)},Y.prototype.addY=function(v){this.addPoint(null,v)},Y.prototype.addBezier=function(v,C,k,E,L,G,H,se){var pe=[v,C],de=[k,E],Oe=[L,G],He=[H,se];this.addPoint(v,C),this.addPoint(H,se);for(var Ne=0;Ne<=1;Ne++){var we,at=6*pe[Ne]-12*de[Ne]+6*Oe[Ne],Ye=-3*pe[Ne]+9*de[Ne]-9*Oe[Ne]+3*He[Ne],rt=3*de[Ne]-3*pe[Ne];Ye==0?at==0||0<(we=-rt/at)&&we<1&&(Ne===0&&this.addX(q(pe[Ne],de[Ne],Oe[Ne],He[Ne],we)),Ne===1&&this.addY(q(pe[Ne],de[Ne],Oe[Ne],He[Ne],we))):(we=Math.pow(at,2)-4*rt*Ye)<0||(0<(rt=(-at+Math.sqrt(we))/(2*Ye))&&rt<1&&(Ne===0&&this.addX(q(pe[Ne],de[Ne],Oe[Ne],He[Ne],rt)),Ne===1&&this.addY(q(pe[Ne],de[Ne],Oe[Ne],He[Ne],rt))),0<(rt=(-at-Math.sqrt(we))/(2*Ye))&&rt<1&&(Ne===0&&this.addX(q(pe[Ne],de[Ne],Oe[Ne],He[Ne],rt)),Ne===1&&this.addY(q(pe[Ne],de[Ne],Oe[Ne],He[Ne],rt))))}},Y.prototype.addQuad=function(v,C,k,E,L,G){k=v+2/3*(k-v),E=C+2/3*(E-C),this.addBezier(v,C,k,E,k+1/3*(L-v),E+1/3*(G-C),L,G)},X.prototype.moveTo=function(v,C){this.commands.push({type:"M",x:v,y:C})},X.prototype.lineTo=function(v,C){this.commands.push({type:"L",x:v,y:C})},X.prototype.curveTo=X.prototype.bezierCurveTo=function(v,C,k,E,L,G){this.commands.push({type:"C",x1:v,y1:C,x2:k,y2:E,x:L,y:G})},X.prototype.quadTo=X.prototype.quadraticCurveTo=function(v,C,k,E){this.commands.push({type:"Q",x1:v,y1:C,x:k,y:E})},X.prototype.close=X.prototype.closePath=function(){this.commands.push({type:"Z"})},X.prototype.extend=function(v){var C;if(v.commands)v=v.commands;else if(v instanceof Y)return C=v,this.moveTo(C.x1,C.y1),this.lineTo(C.x2,C.y1),this.lineTo(C.x2,C.y2),this.lineTo(C.x1,C.y2),void this.close();Array.prototype.push.apply(this.commands,v)},X.prototype.getBoundingBox=function(){for(var v=new Y,C=0,k=0,E=0,L=0,G=0;G<this.commands.length;G++){var H=this.commands[G];switch(H.type){case"M":v.addPoint(H.x,H.y),C=E=H.x,k=L=H.y;break;case"L":v.addPoint(H.x,H.y),E=H.x,L=H.y;break;case"Q":v.addQuad(E,L,H.x1,H.y1,H.x,H.y),E=H.x,L=H.y;break;case"C":v.addBezier(E,L,H.x1,H.y1,H.x2,H.y2,H.x,H.y),E=H.x,L=H.y;break;case"Z":E=C,L=k;break;default:throw new Error("Unexpected path command "+H.type)}}return v.isEmpty()&&v.addPoint(0,0),v},X.prototype.draw=function(v){v.beginPath();for(var C=0;C<this.commands.length;C+=1){var k=this.commands[C];k.type==="M"?v.moveTo(k.x,k.y):k.type==="L"?v.lineTo(k.x,k.y):k.type==="C"?v.bezierCurveTo(k.x1,k.y1,k.x2,k.y2,k.x,k.y):k.type==="Q"?v.quadraticCurveTo(k.x1,k.y1,k.x,k.y):k.type==="Z"&&v.closePath()}this.fill&&(v.fillStyle=this.fill,v.fill()),this.stroke&&(v.strokeStyle=this.stroke,v.lineWidth=this.strokeWidth,v.stroke())},X.prototype.toPathData=function(v){function C(){for(var G=arguments,H="",se=0;se<arguments.length;se+=1){var pe=G[se];0<=pe&&0<se&&(H+=" "),H+=(pe=pe,Math.round(pe)===pe?""+Math.round(pe):pe.toFixed(v))}return H}v=v!==void 0?v:2;for(var k="",E=0;E<this.commands.length;E+=1){var L=this.commands[E];L.type==="M"?k+="M"+C(L.x,L.y):L.type==="L"?k+="L"+C(L.x,L.y):L.type==="C"?k+="C"+C(L.x1,L.y1,L.x2,L.y2,L.x,L.y):L.type==="Q"?k+="Q"+C(L.x1,L.y1,L.x,L.y):L.type==="Z"&&(k+="Z")}return k},X.prototype.toSVG=function(v){var C=(C='<path d="')+this.toPathData(v)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?C+=' fill="none"':C+=' fill="'+this.fill+'"'),this.stroke&&(C+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),C+="/>"},X.prototype.toDOMElement=function(C){var C=this.toPathData(C),k=document.createElementNS("http://www.w3.org/2000/svg","path");return k.setAttribute("d",C),k};var B={fail:ce,argument:O,assert:O},W={},re={},ae={};function me(v){return function(){return v}}re.BYTE=function(v){return B.argument(0<=v&&v<=255,"Byte value should be between 0 and 255."),[v]},ae.BYTE=me(1),re.CHAR=function(v){return[v.charCodeAt(0)]},ae.CHAR=me(1),re.CHARARRAY=function(v){for(var C=[],k=0;k<v.length;k+=1)C[k]=v.charCodeAt(k);return C},ae.CHARARRAY=function(v){return v.length},re.USHORT=function(v){return[v>>8&255,255&v]},ae.USHORT=me(2),re.SHORT=function(v){return[(v=32768<=v?-(65536-v):v)>>8&255,255&v]},ae.SHORT=me(2),re.UINT24=function(v){return[v>>16&255,v>>8&255,255&v]},ae.UINT24=me(3),re.ULONG=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},ae.ULONG=me(4),re.LONG=function(v){return[(v=2147483648<=v?-(4294967296-v):v)>>24&255,v>>16&255,v>>8&255,255&v]},ae.LONG=me(4),re.FIXED=re.ULONG,ae.FIXED=ae.ULONG,re.FWORD=re.SHORT,ae.FWORD=ae.SHORT,re.UFWORD=re.USHORT,ae.UFWORD=ae.USHORT,re.LONGDATETIME=function(v){return[0,0,0,0,v>>24&255,v>>16&255,v>>8&255,255&v]},ae.LONGDATETIME=me(8),re.TAG=function(v){return B.argument(v.length===4,"Tag should be exactly 4 ASCII characters."),[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]},ae.TAG=me(4),re.Card8=re.BYTE,ae.Card8=ae.BYTE,re.Card16=re.USHORT,ae.Card16=ae.USHORT,re.OffSize=re.BYTE,ae.OffSize=ae.BYTE,re.SID=re.USHORT,ae.SID=ae.USHORT,re.NUMBER=function(v){return-107<=v&&v<=107?[v+139]:108<=v&&v<=1131?[247+((v-=108)>>8),255&v]:-1131<=v&&v<=-108?[251+((v=-v-108)>>8),255&v]:-32768<=v&&v<=32767?re.NUMBER16(v):re.NUMBER32(v)},ae.NUMBER=function(v){return re.NUMBER(v).length},re.NUMBER16=function(v){return[28,v>>8&255,255&v]},ae.NUMBER16=me(3),re.NUMBER32=function(v){return[29,v>>24&255,v>>16&255,v>>8&255,255&v]},ae.NUMBER32=me(5),re.REAL=function(v){for(var C=v.toString(),k=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(C),E=(k&&(k=parseFloat("1e"+((k[2]?+k[2]:0)+k[1].length)),C=(Math.round(v*k)/k).toString()),""),L=0,G=C.length;L<G;L+=1){var H=C[L];E+=H==="e"?C[++L]==="-"?"c":"b":H==="."?"a":H==="-"?"e":H}for(var se=[30],pe=0,de=(E+=1&E.length?"f":"ff").length;pe<de;pe+=2)se.push(parseInt(E.substr(pe,2),16));return se},ae.REAL=function(v){return re.REAL(v).length},re.NAME=re.CHARARRAY,ae.NAME=ae.CHARARRAY,re.STRING=re.CHARARRAY,ae.STRING=ae.CHARARRAY,W.UTF8=function(v,C,k){for(var E=[],L=k,G=0;G<L;G++,C+=1)E[G]=v.getUint8(C);return String.fromCharCode.apply(null,E)},W.UTF16=function(v,C,k){for(var E=[],L=k/2,G=0;G<L;G++,C+=2)E[G]=v.getUint16(C);return String.fromCharCode.apply(null,E)},re.UTF16=function(v){for(var C=[],k=0;k<v.length;k+=1){var E=v.charCodeAt(k);C[C.length]=E>>8&255,C[C.length]=255&E}return C},ae.UTF16=function(v){return 2*v.length};var ge,xe={"x-mac-croatian":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Å â¢Â´Â¨â Å½ÃâÂ±â¤â¥âÂµâââÅ¡â«ÂªÂºÎ©Å¾Ã¸Â¿Â¡Â¬âÆâÄÂ«Äâ¦Â ÃÃÃÅÅÄâââââÃ·âï£¿Â©ââ¬â¹âºÃÂ»âÂ·âââ°ÃÄÃÄÃÃÃÃÃÃÃÄÃÃÃÃÄ±ËËÂ¯ÏÃËÂ¸ÃÃ¦Ë","x-mac-cyrillic":"ÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐ Ð¡Ð¢Ð£Ð¤Ð¥Ð¦Ð§Ð¨Ð©ÐªÐ«Ð¬Ð­Ð®Ð¯â Â°ÒÂ£Â§â¢Â¶ÐÂ®Â©â¢ÐÑâ ÐÑâÂ±â¤â¥ÑÂµÒÐÐÑÐÑÐÑÐÑÑÐÂ¬âÆââÂ«Â»â¦Â ÐÑÐÑÑââââââÃ·âÐÑÐÑâÐÑÑÐ°Ð±Ð²Ð³Ð´ÐµÐ¶Ð·Ð¸Ð¹ÐºÐ»Ð¼Ð½Ð¾Ð¿ÑÑÑÑÑÑÑÑÑÑÑÑÑÑÑ","x-mac-gaelic":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃá¸Â±â¤â¥á¸ÄÄá¸á¸á¸á¸Ä Ä¡á¹Ã¦Ã¸á¹á¹á¹É¼ÆÅ¿á¹ Â«Â»â¦Â ÃÃÃÅÅââââââá¹¡áºÃ¿Å¸á¹ªâ¬â¹âºÅ¶Å·á¹«Â·á»²á»³âÃÃÃÃÃÃÃÃÃÃÃâ£ÃÃÃÃÄ±ÃÃ½Å´Åµáºáºáºáºáºáº","x-mac-greek":"ÃÂ¹Â²ÃÂ³ÃÃÎÃ Ã¢Ã¤ÎÂ¨Ã§Ã©Ã¨ÃªÃ«Â£â¢Ã®Ã¯â¢Â½â°Ã´Ã¶Â¦â¬Ã¹Ã»Ã¼â ÎÎÎÎÎÎ ÃÂ®Â©Î£ÎªÂ§â Â°Â·ÎÂ±â¤â¥Â¥ÎÎÎÎÎÎÎÎ¦Î«Î¨Î©Î¬ÎÂ¬ÎÎ¡âÎ¤Â«Â»â¦Â Î¥Î§ÎÎÅââââââÃ·ÎÎÎÎÎ­Î®Î¯ÏÎÏÎ±Î²ÏÎ´ÎµÏÎ³Î·Î¹Î¾ÎºÎ»Î¼Î½Î¿ÏÏÏÏÏÎ¸ÏÏÏÏÎ¶ÏÏÎÎ°Â­","x-mac-icelandic":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼ÃÂ°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬ÃÃ°ÃÃ¾Ã½Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-inuit":"ááááááá±á²á³á´á¸á¹áááááááá¦á­á®á¯á°á²á³áááááááÂ°á¡á¥á¦â¢Â¶á§Â®Â©â¢á¨áªá«á»áááááááá¯á°á±á²á´áµááááááááªá¨á©áªá«á­â¦Â á®á¾áááââââââáááááááááááá¿áááááááááááááá±á²á³á´áµá¶áá á¡á¢á£á¤á¥á¦á¼ÅÅ","x-mac-ce":"ÃÄÄÃÄÃÃÃ¡ÄÄÃ¤ÄÄÄÃ©Å¹ÅºÄÃ­ÄÄÄÄÃ³ÄÃ´Ã¶ÃµÃºÄÄÃ¼â Â°ÄÂ£Â§â¢Â¶ÃÂ®Â©â¢ÄÂ¨â Ä£Ä®Ä¯Äªâ¤â¥Ä«Ä¶ââÅÄ»Ä¼Ä½Ä¾Ä¹ÄºÅÅÅÂ¬âÅÅâÂ«Â»â¦Â ÅÅÃÅÅââââââÃ·âÅÅÅÅâ¹âºÅÅÅÅ ââÅ¡ÅÅÃÅ¤Å¥ÃÅ½Å¾ÅªÃÃÅ«Å®ÃÅ¯Å°Å±Å²Å³ÃÃ½Ä·Å»ÅÅ¼Ä¢Ë",macintosh:"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬â¹âºï¬ï¬â¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-romanian":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÄÈâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©ÄÈÂ¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬â¹âºÈÈâ¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-turkish":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ÄÄÄ°Ä±ÅÅâ¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃï¢ ËËÂ¯ËËËÂ¸ËËË"},fe=(W.MACSTRING=function(v,C,k,E){var L=xe[E];if(L!==void 0){for(var G="",H=0;H<k;H++){var se=v.getUint8(C+H);G+=se<=127?String.fromCharCode(se):L[127&se]}return G}},typeof WeakMap=="function"&&new WeakMap);function ye(v){return-128<=v&&v<=127}re.MACSTRING=function(v,C){var k=function(H){if(!ge)for(var se in ge={},xe)ge[se]=new String(se);var pe=ge[H];if(pe!==void 0){if(fe){var de=fe.get(pe);if(de!==void 0)return de}var Oe=xe[H];if(Oe!==void 0){for(var He={},Ne=0;Ne<Oe.length;Ne++)He[Oe.charCodeAt(Ne)]=Ne+128;return fe&&fe.set(pe,He),He}}}(C);if(k!==void 0){for(var E=[],L=0;L<v.length;L++){var G=v.charCodeAt(L);if(128<=G&&(G=k[G])===void 0)return;E[L]=G}return E}},ae.MACSTRING=function(v,C){return v=re.MACSTRING(v,C),v!==void 0?v.length:0},re.VARDELTAS=function(v){for(var E=0,C=[];E<v.length;)var k=v[E],E=(k===0?function(L,G,H){for(var se=0,pe=L.length;G<pe&&se<64&&L[G]===0;)++G,++se;return H.push(128|se-1),G}:-128<=k&&k<=127?function(L,G,H){for(var se=0,pe=L.length,de=G;de<pe&&se<64;){var Oe=L[de];if(!ye(Oe)||Oe===0&&de+1<pe&&L[de+1]===0)break;++de,++se}H.push(se-1);for(var He=G;He<de;++He)H.push(L[He]+256&255);return de}:function(L,G,H){for(var se=0,pe=L.length,de=G;de<pe&&se<64;){var Oe=L[de];if(Oe===0||ye(Oe)&&de+1<pe&&ye(L[de+1]))break;++de,++se}H.push(64|se-1);for(var He=G;He<de;++He){var Ne=L[He];H.push(Ne+65536>>8&255,Ne+256&255)}return de})(v,E,C);return C},re.INDEX=function(v){for(var C=1,k=[C],E=[],L=0;L<v.length;L+=1){var G=re.OBJECT(v[L]);Array.prototype.push.apply(E,G),C+=G.length,k.push(C)}if(E.length===0)return[0,0];for(var H=[],se=1+Math.floor(Math.log(C)/Math.log(2))/8|0,pe=[void 0,re.BYTE,re.USHORT,re.UINT24,re.ULONG][se],de=0;de<k.length;de+=1){var Oe=pe(k[de]);Array.prototype.push.apply(H,Oe)}return Array.prototype.concat(re.Card16(v.length),re.OffSize(se),H,E)},ae.INDEX=function(v){return re.INDEX(v).length},re.DICT=function(v){for(var C=[],k=Object.keys(v),E=k.length,L=0;L<E;L+=1){var G=parseInt(k[L],0),H=v[G];C=(C=C.concat(re.OPERAND(H.value,H.type))).concat(re.OPERATOR(G))}return C},ae.DICT=function(v){return re.DICT(v).length},re.OPERATOR=function(v){return v<1200?[v]:[12,v-1200]},re.OPERAND=function(v,C){var k=[];if(Array.isArray(C))for(var E=0;E<C.length;E+=1)B.argument(v.length===C.length,"Not enough arguments given for type"+C),k=k.concat(re.OPERAND(v[E],C[E]));else if(C==="SID")k=k.concat(re.NUMBER(v));else if(C==="offset")k=k.concat(re.NUMBER32(v));else if(C==="number")k=k.concat(re.NUMBER(v));else{if(C!=="real")throw new Error("Unknown operand type "+C);k=k.concat(re.REAL(v))}return k},re.OP=re.BYTE,ae.OP=ae.BYTE;var Te=typeof WeakMap=="function"&&new WeakMap;function oe(v,C,k){for(var E=0;E<C.length;E+=1){var L=C[E];this[L.name]=L.value}if(this.tableName=v,this.fields=C,k)for(var G=Object.keys(k),H=0;H<G.length;H+=1){var se=G[H],pe=k[se];this[se]!==void 0&&(this[se]=pe)}}function Se(v,C,k){k===void 0&&(k=C.length);var E=new Array(C.length+1);E[0]={name:v+"Count",type:"USHORT",value:k};for(var L=0;L<C.length;L++)E[L+1]={name:v+L,type:"USHORT",value:C[L]};return E}function be(v,C,k){var E=C.length,L=new Array(E+1);L[0]={name:v+"Count",type:"USHORT",value:E};for(var G=0;G<E;G++)L[G+1]={name:v+G,type:"TABLE",value:k(C[G],G)};return L}function Ie(v,C,k){var E=C.length,L=[];L[0]={name:v+"Count",type:"USHORT",value:E};for(var G=0;G<E;G++)L=L.concat(k(C[G],G));return L}function Me(v){v.format===1?oe.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Se("glyph",v.glyphs))):B.assert(!1,"Can't create coverage table format 2 yet.")}function Ve(v){oe.call(this,"scriptListTable",Ie("scriptRecord",v,function(C,k){var E=C.script,L=E.defaultLangSys;return B.assert(!!L,"Unable to write GSUB: script "+C.tag+" has no default language system."),[{name:"scriptTag"+k,type:"TAG",value:C.tag},{name:"script"+k,type:"TABLE",value:new oe("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new oe("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:L.reqFeatureIndex}].concat(Se("featureIndex",L.featureIndexes)))}].concat(Ie("langSys",E.langSysRecords,function(G,H){var se=G.langSys;return[{name:"langSysTag"+H,type:"TAG",value:G.tag},{name:"langSys"+H,type:"TABLE",value:new oe("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:se.reqFeatureIndex}].concat(Se("featureIndex",se.featureIndexes)))}]})))}]}))}function Be(v){oe.call(this,"featureListTable",Ie("featureRecord",v,function(C,k){var E=C.feature;return[{name:"featureTag"+k,type:"TAG",value:C.tag},{name:"feature"+k,type:"TABLE",value:new oe("featureTable",[{name:"featureParams",type:"USHORT",value:E.featureParams}].concat(Se("lookupListIndex",E.lookupListIndexes)))}]}))}function tt(v,C){oe.call(this,"lookupListTable",be("lookup",v,function(k){var E=C[k.lookupType];return B.assert(!!E,"Unable to write GSUB lookup type "+k.lookupType+" tables."),new oe("lookupTable",[{name:"lookupType",type:"USHORT",value:k.lookupType},{name:"lookupFlag",type:"USHORT",value:k.lookupFlag}].concat(be("subtable",k.subtables,E)))}))}re.CHARSTRING=function(v){if(Te){var C=Te.get(v);if(C!==void 0)return C}for(var G=[],k=v.length,E=0;E<k;E+=1)var L=v[E],G=G.concat(re[L.type](L.value));return Te&&Te.set(v,G),G},ae.CHARSTRING=function(v){return re.CHARSTRING(v).length},re.OBJECT=function(v){var C=re[v.type];return B.argument(C!==void 0,"No encoding function for type "+v.type),C(v.value)},ae.OBJECT=function(v){var C=ae[v.type];return B.argument(C!==void 0,"No sizeOf function for type "+v.type),C(v.value)},re.TABLE=function(v){for(var C=[],k=v.fields.length,E=[],L=[],G=0;G<k;G+=1){var H=v.fields[G],pe=re[H.type],se=(B.argument(pe!==void 0,"No encoding function for field type "+H.type+" ("+H.name+")"),v[H.name]),pe=pe(se=se===void 0?H.value:se);H.type==="TABLE"?(L.push(C.length),C=C.concat([0,0]),E.push(pe)):C=C.concat(pe)}for(var de=0;de<E.length;de+=1){var Oe=L[de],He=C.length;B.argument(He<65536,"Table "+v.tableName+" too big."),C[Oe]=He>>8,C[Oe+1]=255&He,C=C.concat(E[de])}return C},ae.TABLE=function(v){for(var C=0,k=v.fields.length,E=0;E<k;E+=1){var L=v.fields[E],G=ae[L.type],H=(B.argument(G!==void 0,"No sizeOf function for field type "+L.type+" ("+L.name+")"),v[L.name]);C+=G(H=H===void 0?L.value:H),L.type==="TABLE"&&(C+=2)}return C},re.RECORD=re.TABLE,ae.RECORD=ae.TABLE,re.LITERAL=function(v){return v},ae.LITERAL=function(v){return v.length},oe.prototype.encode=function(){return re.TABLE(this)},oe.prototype.sizeOf=function(){return ae.TABLE(this)};var Ue={Table:oe,Record:oe,Coverage:(Me.prototype=Object.create(oe.prototype)).constructor=Me,ScriptList:(Ve.prototype=Object.create(oe.prototype)).constructor=Ve,FeatureList:(Be.prototype=Object.create(oe.prototype)).constructor=Be,LookupList:(tt.prototype=Object.create(oe.prototype)).constructor=tt,ushortList:Se,tableList:be,recordList:Ie};function ve(v,C){return v.getUint8(C)}function Le(v,C){return v.getUint16(C,!1)}function Fe(v,C){return v.getUint32(C,!1)}function Ze(v,C){return v.getInt16(C,!1)+v.getUint16(C+2,!1)/65535}var et={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function je(v,C){this.data=v,this.offset=C,this.relativeOffset=0}je.prototype.parseByte=function(){var v=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},je.prototype.parseChar=function(){var v=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},je.prototype.parseCard8=je.prototype.parseByte,je.prototype.parseCard16=je.prototype.parseUShort=function(){var v=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},je.prototype.parseSID=je.prototype.parseUShort,je.prototype.parseOffset16=je.prototype.parseUShort,je.prototype.parseShort=function(){var v=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},je.prototype.parseF2Dot14=function(){var v=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,v},je.prototype.parseOffset32=je.prototype.parseULong=function(){var v=Fe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},je.prototype.parseFixed=function(){var v=Ze(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},je.prototype.parseString=function(v){var C=this.data,k=this.offset+this.relativeOffset,E="";this.relativeOffset+=v;for(var L=0;L<v;L++)E+=String.fromCharCode(C.getUint8(k+L));return E},je.prototype.parseTag=function(){return this.parseString(4)},je.prototype.parseLongDateTime=function(){var v=Fe(this.data,this.offset+this.relativeOffset+4);return v-=2082844800,this.relativeOffset+=8,v},je.prototype.parseVersion=function(v){var C=Le(this.data,this.offset+this.relativeOffset),k=Le(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,C+k/(v=v===void 0?4096:v)/10},je.prototype.skip=function(v,C){this.relativeOffset+=et[v]*(C=C===void 0?1:C)},je.prototype.parseULongList=function(v){v===void 0&&(v=this.parseULong());for(var C=new Array(v),k=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)C[L]=k.getUint32(E),E+=4;return this.relativeOffset+=4*v,C},je.prototype.parseOffset16List=je.prototype.parseUShortList=function(v){v===void 0&&(v=this.parseUShort());for(var C=new Array(v),k=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)C[L]=k.getUint16(E),E+=2;return this.relativeOffset+=2*v,C},je.prototype.parseShortList=function(v){for(var C=new Array(v),k=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)C[L]=k.getInt16(E),E+=2;return this.relativeOffset+=2*v,C},je.prototype.parseByteList=function(v){for(var C=new Array(v),k=this.data,E=this.offset+this.relativeOffset,L=0;L<v;L++)C[L]=k.getUint8(E++);return this.relativeOffset+=v,C},je.prototype.parseList=function(v,C){C||(C=v,v=this.parseUShort());for(var k=new Array(v),E=0;E<v;E++)k[E]=C.call(this);return k},je.prototype.parseList32=function(v,C){C||(C=v,v=this.parseULong());for(var k=new Array(v),E=0;E<v;E++)k[E]=C.call(this);return k},je.prototype.parseRecordList=function(v,C){C||(C=v,v=this.parseUShort());for(var k=new Array(v),E=Object.keys(C),L=0;L<v;L++){for(var G={},H=0;H<E.length;H++){var se=E[H],pe=C[se];G[se]=pe.call(this)}k[L]=G}return k},je.prototype.parseRecordList32=function(v,C){C||(C=v,v=this.parseULong());for(var k=new Array(v),E=Object.keys(C),L=0;L<v;L++){for(var G={},H=0;H<E.length;H++){var se=E[H],pe=C[se];G[se]=pe.call(this)}k[L]=G}return k},je.prototype.parseStruct=function(v){if(typeof v=="function")return v.call(this);for(var C=Object.keys(v),k={},E=0;E<C.length;E++){var L=C[E],G=v[L];k[L]=G.call(this)}return k},je.prototype.parseValueRecord=function(v){var C;if((v=v===void 0?this.parseUShort():v)!==0)return C={},1&v&&(C.xPlacement=this.parseShort()),2&v&&(C.yPlacement=this.parseShort()),4&v&&(C.xAdvance=this.parseShort()),8&v&&(C.yAdvance=this.parseShort()),16&v&&(C.xPlaDevice=void 0,this.parseShort()),32&v&&(C.yPlaDevice=void 0,this.parseShort()),64&v&&(C.xAdvDevice=void 0,this.parseShort()),128&v&&(C.yAdvDevice=void 0,this.parseShort()),C},je.prototype.parseValueRecordList=function(){for(var v=this.parseUShort(),C=this.parseUShort(),k=new Array(C),E=0;E<C;E++)k[E]=this.parseValueRecord(v);return k},je.prototype.parsePointer=function(v){var C=this.parseOffset16();if(0<C)return new je(this.data,this.offset+C).parseStruct(v)},je.prototype.parsePointer32=function(v){var C=this.parseOffset32();if(0<C)return new je(this.data,this.offset+C).parseStruct(v)},je.prototype.parseListOfLists=function(v){for(var C=this.parseOffset16List(),k=C.length,E=this.relativeOffset,L=new Array(k),G=0;G<k;G++){var H=C[G];if(H===0)L[G]=void 0;else if(this.relativeOffset=H,v){for(var se=this.parseOffset16List(),pe=new Array(se.length),de=0;de<se.length;de++)this.relativeOffset=H+se[de],pe[de]=v.call(this);L[G]=pe}else L[G]=this.parseUShortList()}return this.relativeOffset=E,L},je.prototype.parseCoverage=function(){var v=this.offset+this.relativeOffset,C=this.parseUShort(),k=this.parseUShort();if(C===1)return{format:1,glyphs:this.parseUShortList(k)};if(C!==2)throw new Error("0x"+v.toString(16)+": Coverage format must be 1 or 2.");for(var E=new Array(k),L=0;L<k;L++)E[L]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:E}},je.prototype.parseClassDef=function(){var v=this.offset+this.relativeOffset,C=this.parseUShort();if(C===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(C===2)return{format:2,ranges:this.parseRecordList({start:je.uShort,end:je.uShort,classId:je.uShort})};throw new Error("0x"+v.toString(16)+": ClassDef format must be 1 or 2.")},je.list=function(v,C){return function(){return this.parseList(v,C)}},je.list32=function(v,C){return function(){return this.parseList32(v,C)}},je.recordList=function(v,C){return function(){return this.parseRecordList(v,C)}},je.recordList32=function(v,C){return function(){return this.parseRecordList32(v,C)}},je.pointer=function(v){return function(){return this.parsePointer(v)}},je.pointer32=function(v){return function(){return this.parsePointer32(v)}},je.tag=je.prototype.parseTag,je.byte=je.prototype.parseByte,je.uShort=je.offset16=je.prototype.parseUShort,je.uShortList=je.prototype.parseUShortList,je.uLong=je.offset32=je.prototype.parseULong,je.uLongList=je.prototype.parseULongList,je.struct=je.prototype.parseStruct,je.coverage=je.prototype.parseCoverage,je.classDef=je.prototype.parseClassDef;var $e={reserved:je.uShort,reqFeatureIndex:je.uShort,featureIndexes:je.uShortList},Pe=(je.prototype.parseScriptList=function(){return this.parsePointer(je.recordList({tag:je.tag,script:je.pointer({defaultLangSys:je.pointer($e),langSysRecords:je.recordList({tag:je.tag,langSys:je.pointer($e)})})}))||[]},je.prototype.parseFeatureList=function(){return this.parsePointer(je.recordList({tag:je.tag,feature:je.pointer({featureParams:je.offset16,lookupListIndexes:je.uShortList})}))||[]},je.prototype.parseLookupList=function(v){return this.parsePointer(je.list(je.pointer(function(){var C=this.parseUShort(),k=(B.argument(1<=C&&C<=9,"GPOS/GSUB lookup type "+C+" unknown."),this.parseUShort()),E=16&k;return{lookupType:C,lookupFlag:k,subtables:this.parseList(je.pointer(v[C])),markFilteringSet:E?this.parseUShort():void 0}})))||[]},je.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var v=this.parseUShort(),C=this.parseUShort();return B.argument(v===1&&C<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:je.offset32,featureTableSubstitutionOffset:je.offset32})})||[]},{getByte:ve,getCard8:ve,getUShort:Le,getCard16:Le,getShort:function(v,C){return v.getInt16(C,!1)},getULong:Fe,getFixed:Ze,getTag:function(v,C){for(var k="",E=C;E<C+4;E+=1)k+=String.fromCharCode(v.getInt8(E));return k},getOffset:function(v,C,k){for(var E=0,L=0;L<k;L+=1)E=(E<<=8)+v.getUint8(C+L);return E},getBytes:function(v,C,k){for(var E=[],L=C;L<k;L+=1)E.push(v.getUint8(L));return E},bytesToString:function(v){for(var C="",k=0;k<v.length;k+=1)C+=String.fromCharCode(v[k]);return C},Parser:je}),J={parse:function(v,C){for(var k={},E=(k.version=Pe.getUShort(v,C),B.argument(k.version===0,"cmap table version should be 0."),k.numTables=Pe.getUShort(v,C+2),-1),L=k.numTables-1;0<=L;--L){var G=Pe.getUShort(v,C+4+8*L),H=Pe.getUShort(v,C+4+8*L+2);if(G===3&&(H===0||H===1||H===10)||G===0&&(H===0||H===1||H===2||H===3||H===4)){E=Pe.getULong(v,C+4+8*L+4);break}}if(E===-1)throw new Error("No valid cmap sub-tables found.");var se=new Pe.Parser(v,C+E);if(k.format=se.parseUShort(),k.format===12){var pe,de=k,Oe=se;Oe.parseUShort(),de.length=Oe.parseULong(),de.language=Oe.parseULong(),de.groupCount=pe=Oe.parseULong(),de.glyphIndexMap={};for(var He=0;He<pe;He+=1)for(var Ne=Oe.parseULong(),we=Oe.parseULong(),at=Oe.parseULong(),Ye=Ne;Ye<=we;Ye+=1)de.glyphIndexMap[Ye]=at,at++}else{if(k.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+k.format+").");var rt=k,We=v,Xe=C,Nt=E;rt.length=se.parseUShort(),rt.language=se.parseUShort(),rt.segCount=$t=se.parseUShort()>>1,se.skip("uShort",3),rt.glyphIndexMap={};for(var $t,Pt=new Pe.Parser(We,Xe+Nt+14),Ft=new Pe.Parser(We,Xe+Nt+16+2*$t),pr=new Pe.Parser(We,Xe+Nt+16+4*$t),Br=new Pe.Parser(We,Xe+Nt+16+6*$t),ln=Xe+Nt+16+8*$t,rr=0;rr<$t-1;rr+=1)for(var _n=void 0,Gr=Pt.parseUShort(),un=Ft.parseUShort(),Mr=pr.parseShort(),Hr=Br.parseUShort(),Ar=un;Ar<=Gr;Ar+=1)Hr!==0?(ln=(ln=Br.offset+Br.relativeOffset-2)+Hr+2*(Ar-un),(_n=Pe.getUShort(We,ln))!==0&&(_n=_n+Mr&65535)):_n=Ar+Mr&65535,rt.glyphIndexMap[Ar]=_n}return k},make:function(v){for(var C=!0,k=v.length-1;0<k;--k)if(65535<v.get(k).unicode){console.log("Adding CMAP format 12 (needed!)"),C=!1;break}var E,L,G=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:C?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:C?12:20}],H=(G=(G=C?G:G.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Ue.Table("cmap",G));for(H.segments=[],k=0;k<v.length;k+=1){for(var se=v.get(k),pe=0;pe<se.unicodes.length;pe+=1)E=se.unicodes[pe],L=k,H.segments.push({end:E,start:E,delta:-(E-L),offset:0,glyphIndex:L});H.segments=H.segments.sort(function(Xe,Nt){return Xe.start-Nt.start})}H.segments.push({end:65535,start:65535,delta:1,offset:0});var de=H.segments.length,Oe=0,He=[],Ne=[],we=[],at=[],Ye=[],rt=[];for(k=0;k<de;k+=1){var We=H.segments[k];We.end<=65535&&We.start<=65535?(He=He.concat({name:"end_"+k,type:"USHORT",value:We.end}),Ne=Ne.concat({name:"start_"+k,type:"USHORT",value:We.start}),we=we.concat({name:"idDelta_"+k,type:"SHORT",value:We.delta}),at=at.concat({name:"idRangeOffset_"+k,type:"USHORT",value:We.offset}),We.glyphId!==void 0&&(Ye=Ye.concat({name:"glyph_"+k,type:"USHORT",value:We.glyphId}))):Oe+=1,C||We.glyphIndex===void 0||(rt=(rt=(rt=rt.concat({name:"cmap12Start_"+k,type:"ULONG",value:We.start})).concat({name:"cmap12End_"+k,type:"ULONG",value:We.end})).concat({name:"cmap12Glyph_"+k,type:"ULONG",value:We.glyphIndex}))}return H.segCountX2=2*(de-Oe),H.searchRange=2*Math.pow(2,Math.floor(Math.log(de-Oe)/Math.log(2))),H.entrySelector=Math.log(H.searchRange/2)/Math.log(2),H.rangeShift=H.segCountX2-H.searchRange,H.fields=H.fields.concat(He),H.fields.push({name:"reservedPad",type:"USHORT",value:0}),H.fields=H.fields.concat(Ne),H.fields=H.fields.concat(we),H.fields=H.fields.concat(at),H.fields=H.fields.concat(Ye),H.cmap4Length=14+2*He.length+2+2*Ne.length+2*we.length+2*at.length+2*Ye.length,C||(G=16+4*rt.length,H.cmap12Offset=20+H.cmap4Length,H.fields=H.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:G},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:rt.length/3}]),H.fields=H.fields.concat(rt)),H}},ie=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],$=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],le=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Ee=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Re(v){this.font=v}function Ge(v){this.cmap=v}function st(v,C){this.encoding=v,this.charset=C}function ht(v){switch(v.version){case 1:this.names=Ee.slice();break;case 2:this.names=new Array(v.numberOfGlyphs);for(var C=0;C<v.numberOfGlyphs;C++)v.glyphNameIndex[C]<Ee.length?this.names[C]=Ee[v.glyphNameIndex[C]]:this.names[C]=v.names[v.glyphNameIndex[C]-Ee.length];break;case 2.5:this.names=new Array(v.numberOfGlyphs);for(var k=0;k<v.numberOfGlyphs;k++)this.names[k]=Ee[k+v.glyphNameIndex[k]];break;default:this.names=[]}}Re.prototype.charToGlyphIndex=function(v){var C=v.codePointAt(0),k=this.font.glyphs;if(k){for(var E=0;E<k.length;E+=1)for(var L=k.get(E),G=0;G<L.unicodes.length;G+=1)if(L.unicodes[G]===C)return E}return null},Ge.prototype.charToGlyphIndex=function(v){return this.cmap.glyphIndexMap[v.codePointAt(0)]||0},st.prototype.charToGlyphIndex=function(v){return v=v.codePointAt(0),v=this.encoding[v],this.charset.indexOf(v)},ht.prototype.nameToGlyphIndex=function(v){return this.names.indexOf(v)},ht.prototype.glyphIndexToName=function(v){return this.names[v]};var ft={line:function(v,C,k,E,L){v.beginPath(),v.moveTo(C,k),v.lineTo(E,L),v.stroke()}};function yt(v){this.bindConstructorValues(v)}function Ht(v,C,k){Object.defineProperty(v,C,{get:function(){return v.path,v[k]},set:function(E){v[k]=E},enumerable:!0,configurable:!0})}function Dt(v,C){if(this.font=v,this.glyphs={},Array.isArray(C))for(var k=0;k<C.length;k++)this.glyphs[k]=C[k];this.length=C&&C.length||0}yt.prototype.bindConstructorValues=function(v){var C;this.index=v.index||0,this.name=v.name||null,this.unicode=v.unicode||void 0,this.unicodes=v.unicodes||v.unicode!==void 0?[v.unicode]:[],v.xMin&&(this.xMin=v.xMin),v.yMin&&(this.yMin=v.yMin),v.xMax&&(this.xMax=v.xMax),v.yMax&&(this.yMax=v.yMax),v.advanceWidth&&(this.advanceWidth=v.advanceWidth),Object.defineProperty(this,"path",(v=v.path,C=v||new X,{configurable:!0,get:function(){return C=typeof C=="function"?C():C},set:function(k){C=k}}))},yt.prototype.addUnicode=function(v){this.unicodes.length===0&&(this.unicode=v),this.unicodes.push(v)},yt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},yt.prototype.getPath=function(v,C,k,E,L){v=v!==void 0?v:0,C=C!==void 0?C:0,k=k!==void 0?k:72;for(var G,H,se=(E=E||{}).xScale,pe=E.yScale,de=((G=E.hinting&&L&&L.hinting?this.path&&L.hinting.exec(this,k):G)?(H=L.hinting.getCommands(G),v=Math.round(v),C=Math.round(C),se=pe=1):(H=this.path.commands,E=1/this.path.unitsPerEm*k,se===void 0&&(se=E),pe===void 0&&(pe=E)),new X),Oe=0;Oe<H.length;Oe+=1){var He=H[Oe];He.type==="M"?de.moveTo(v+He.x*se,C+-He.y*pe):He.type==="L"?de.lineTo(v+He.x*se,C+-He.y*pe):He.type==="Q"?de.quadraticCurveTo(v+He.x1*se,C+-He.y1*pe,v+He.x*se,C+-He.y*pe):He.type==="C"?de.curveTo(v+He.x1*se,C+-He.y1*pe,v+He.x2*se,C+-He.y2*pe,v+He.x*se,C+-He.y*pe):He.type==="Z"&&de.closePath()}return de},yt.prototype.getContours=function(){if(this.points===void 0)return[];for(var v=[],C=[],k=0;k<this.points.length;k+=1){var E=this.points[k];C.push(E),E.lastPointOfContour&&(v.push(C),C=[])}return B.argument(C.length===0,"There are still points left in the current contour."),v},yt.prototype.getMetrics=function(){for(var v=this.path.commands,C=[],k=[],E=0;E<v.length;E+=1){var L=v[E];L.type!=="Z"&&(C.push(L.x),k.push(L.y)),L.type!=="Q"&&L.type!=="C"||(C.push(L.x1),k.push(L.y1)),L.type==="C"&&(C.push(L.x2),k.push(L.y2))}var G={xMin:Math.min.apply(null,C),yMin:Math.min.apply(null,k),xMax:Math.max.apply(null,C),yMax:Math.max.apply(null,k),leftSideBearing:this.leftSideBearing};return isFinite(G.xMin)||(G.xMin=0),isFinite(G.xMax)||(G.xMax=this.advanceWidth),isFinite(G.yMin)||(G.yMin=0),isFinite(G.yMax)||(G.yMax=0),G.rightSideBearing=this.advanceWidth-G.leftSideBearing-(G.xMax-G.xMin),G},yt.prototype.draw=function(v,C,k,E,L){this.getPath(C,k,E,L).draw(v)},yt.prototype.drawPoints=function(v,C,k,E){function L(Oe,He,Ne,we){var at=2*Math.PI;v.beginPath();for(var Ye=0;Ye<Oe.length;Ye+=1)v.moveTo(He+Oe[Ye].x*we,Ne+Oe[Ye].y*we),v.arc(He+Oe[Ye].x*we,Ne+Oe[Ye].y*we,2,0,at,!1);v.closePath(),v.fill()}C=C!==void 0?C:0,k=k!==void 0?k:0;for(var E=1/this.path.unitsPerEm*(E=E!==void 0?E:24),G=[],H=[],se=this.path,pe=0;pe<se.commands.length;pe+=1){var de=se.commands[pe];de.x!==void 0&&G.push({x:de.x,y:-de.y}),de.x1!==void 0&&H.push({x:de.x1,y:-de.y1}),de.x2!==void 0&&H.push({x:de.x2,y:-de.y2})}v.fillStyle="blue",L(G,C,k,E),v.fillStyle="red",L(H,C,k,E)},yt.prototype.drawMetrics=function(v,C,k,E){C=C!==void 0?C:0,k=k!==void 0?k:0,E=1/this.path.unitsPerEm*(E=E!==void 0?E:24),v.lineWidth=1,v.strokeStyle="black",ft.line(v,C,-1e4,C,1e4),ft.line(v,-1e4,k,1e4,k);var L=this.xMin||0,G=this.yMin||0,H=this.xMax||0,se=this.yMax||0,pe=this.advanceWidth||0;v.strokeStyle="blue",ft.line(v,C+L*E,-1e4,C+L*E,1e4),ft.line(v,C+H*E,-1e4,C+H*E,1e4),ft.line(v,-1e4,k+-G*E,1e4,k+-G*E),ft.line(v,-1e4,k+-se*E,1e4,k+-se*E),v.strokeStyle="green",ft.line(v,C+pe*E,-1e4,C+pe*E,1e4)},Dt.prototype.get=function(v){return typeof this.glyphs[v]=="function"&&(this.glyphs[v]=this.glyphs[v]()),this.glyphs[v]},Dt.prototype.push=function(v,C){this.glyphs[v]=C,this.length++};var kt={GlyphSet:Dt,glyphLoader:function(v,C){return new yt({index:C,font:v})},ttfGlyphLoader:function(v,C,k,E,L,G){return function(){var H=new yt({index:C,font:v});return H.path=function(){k(H,E,L);var se=G(v.glyphs,H);return se.unitsPerEm=v.unitsPerEm,se},Ht(H,"xMin","_xMin"),Ht(H,"xMax","_xMax"),Ht(H,"yMin","_yMin"),Ht(H,"yMax","_yMax"),H}},cffGlyphLoader:function(v,C,k,E){return function(){var L=new yt({index:C,font:v});return L.path=function(){var G=k(v,L,E);return G.unitsPerEm=v.unitsPerEm,G},L}}};function qt(v){return v=v.length<1240?107:v.length<33900?1131:32768,v}function Rt(v,C,k){var E,L=[],G=[],H=Pe.getCard16(v,C);if(H!==0){for(var se=Pe.getByte(v,C+2),pe=C+(H+1)*se+2,de=C+3,Oe=0;Oe<H+1;Oe+=1)L.push(Pe.getOffset(v,de,se)),de+=se;E=pe+L[H]}else E=C+2;for(var He=0;He<L.length-1;He+=1){var Ne=Pe.getBytes(v,pe+L[He],pe+L[He+1]);k&&(Ne=k(Ne)),G.push(Ne)}return{objects:G,startOffset:C,endOffset:E}}function nr(v,C){if(C===28)return v.parseByte()<<8|v.parseByte();if(C===29)return v.parseByte()<<24|v.parseByte()<<16|v.parseByte()<<8|v.parseByte();if(C===30){for(var k=v,E="",L=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var H=k.parseByte(),G=H>>4,H=15&H;if(G==15||(E+=L[G],H==15))break;E+=L[H]}return parseFloat(E)}if(32<=C&&C<=246)return C-139;if(247<=C&&C<=250)return 256*(C-247)+v.parseByte()+108;if(251<=C&&C<=254)return 256*-(C-251)-v.parseByte()-108;throw new Error("Invalid b0 "+C)}function en(v,C,k){var E=new Pe.Parser(v,C=C!==void 0?C:0),L=[],G=[];for(k=k!==void 0?k:v.length;E.relativeOffset<k;){var H=E.parseByte();H<=21?(H===12&&(H=1200+E.parseByte()),L.push([H,G]),G=[]):G.push(nr(E,H))}for(var se=L,pe={},de=0;de<se.length;de+=1){var Oe=se[de][0],He=se[de][1],Ne=void 0,Ne=He.length===1?He[0]:He;if(pe.hasOwnProperty(Oe)&&!isNaN(pe[Oe]))throw new Error("Object "+pe+" already has key "+Oe);pe[Oe]=Ne}return pe}function Tr(v,C){return C=C<=390?ie[C]:v[C-391]}function tr(v,C,k){for(var E,L={},G=0;G<C.length;G+=1){var H=C[G];if(Array.isArray(H.type)){var se=[];se.length=H.type.length;for(var pe=0;pe<H.type.length;pe++)(E=v[H.op]!==void 0?v[H.op][pe]:void 0)===void 0&&(E=H.value!==void 0&&H.value[pe]!==void 0?H.value[pe]:null),H.type[pe]==="SID"&&(E=Tr(k,E)),se[pe]=E;L[H.name]=se}else(E=v[H.op])===void 0&&(E=H.value!==void 0?H.value:null),H.type==="SID"&&(E=Tr(k,E)),L[H.name]=E}return L}var zt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],At=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function xt(v,C,k,E){return tr(en(v,C,k),At,E)}function Cr(v,C,k,E){for(var L=[],G=0;G<k.length;G+=1){var H=new DataView(new Uint8Array(k[G]).buffer),H=(se=E,tr(en(H,0,H.byteLength),zt,se)),se=(H._subrs=[],H._subrsBias=0,H.private[0]),pe=H.private[1];se!==0&&pe!==0&&(se=xt(v,pe+C,se,E),H._defaultWidthX=se.defaultWidthX,H._nominalWidthX=se.nominalWidthX,se.subrs!==0&&(pe=Rt(v,pe+se.subrs+C),H._subrs=pe.objects,H._subrsBias=qt(H._subrs)),H._privateDict=se),L.push(H)}return L}function wr(v,C,k){var E,L,G,H,se,pe,de,Oe,He,Ne=new X,we=[],at=0,Ye=!1,rt=!1,We=0,Xe=0,Nt=(He=(v.isCIDFont?(se=v.tables.cff.topDict._fdSelect[C.index],se=v.tables.cff.topDict._fdArray[se],pe=se._subrs,de=se._subrsBias,Oe=se._defaultWidthX,se):(pe=v.tables.cff.topDict._subrs,de=v.tables.cff.topDict._subrsBias,Oe=v.tables.cff.topDict._defaultWidthX,v.tables.cff.topDict))._nominalWidthX,Oe);function $t(Ft,pr){rt&&Ne.closePath(),Ne.moveTo(Ft,pr),rt=!0}function Pt(){we.length%2==0||Ye||(Nt=we.shift()+He),at+=we.length>>1,we.length=0,Ye=!0}return function Ft(pr){for(var Br,ln,rr,_n,Gr,un,Mr,Hr,Ar,Pn,Jr,nn,Fr=0;Fr<pr.length;){var wn=pr[Fr];switch(Fr+=1,wn){case 1:case 3:Pt();break;case 4:1<we.length&&!Ye&&(Nt=we.shift()+He,Ye=!0),Xe+=we.pop(),$t(We,Xe);break;case 5:for(;0<we.length;)We+=we.shift(),Xe+=we.shift(),Ne.lineTo(We,Xe);break;case 6:for(;0<we.length&&(We+=we.shift(),Ne.lineTo(We,Xe),we.length!==0);)Xe+=we.shift(),Ne.lineTo(We,Xe);break;case 7:for(;0<we.length&&(Xe+=we.shift(),Ne.lineTo(We,Xe),we.length!==0);)We+=we.shift(),Ne.lineTo(We,Xe);break;case 8:for(;0<we.length;)E=We+we.shift(),L=Xe+we.shift(),G=E+we.shift(),H=L+we.shift(),We=G+we.shift(),Xe=H+we.shift(),Ne.curveTo(E,L,G,H,We,Xe);break;case 10:Gr=we.pop()+de,(un=pe[Gr])&&Ft(un);break;case 11:return;case 12:switch(wn=pr[Fr],Fr+=1,wn){case 35:E=We+we.shift(),L=Xe+we.shift(),G=E+we.shift(),H=L+we.shift(),Mr=G+we.shift(),Hr=H+we.shift(),Ar=Mr+we.shift(),Pn=Hr+we.shift(),Jr=Ar+we.shift(),nn=Pn+we.shift(),We=Jr+we.shift(),Xe=nn+we.shift(),we.shift(),Ne.curveTo(E,L,G,H,Mr,Hr),Ne.curveTo(Ar,Pn,Jr,nn,We,Xe);break;case 34:E=We+we.shift(),L=Xe,G=E+we.shift(),H=L+we.shift(),Mr=G+we.shift(),Hr=H,Ar=Mr+we.shift(),Pn=H,Jr=Ar+we.shift(),nn=Xe,We=Jr+we.shift(),Ne.curveTo(E,L,G,H,Mr,Hr),Ne.curveTo(Ar,Pn,Jr,nn,We,Xe);break;case 36:E=We+we.shift(),L=Xe+we.shift(),G=E+we.shift(),H=L+we.shift(),Mr=G+we.shift(),Hr=H,Ar=Mr+we.shift(),Pn=H,Jr=Ar+we.shift(),nn=Pn+we.shift(),We=Jr+we.shift(),Ne.curveTo(E,L,G,H,Mr,Hr),Ne.curveTo(Ar,Pn,Jr,nn,We,Xe);break;case 37:E=We+we.shift(),L=Xe+we.shift(),G=E+we.shift(),H=L+we.shift(),Mr=G+we.shift(),Hr=H+we.shift(),Ar=Mr+we.shift(),Pn=Hr+we.shift(),Jr=Ar+we.shift(),nn=Pn+we.shift(),Math.abs(Jr-We)>Math.abs(nn-Xe)?We=Jr+we.shift():Xe=nn+we.shift(),Ne.curveTo(E,L,G,H,Mr,Hr),Ne.curveTo(Ar,Pn,Jr,nn,We,Xe);break;default:console.log("Glyph "+C.index+": unknown operator 1200"+wn),we.length=0}break;case 14:0<we.length&&!Ye&&(Nt=we.shift()+He,Ye=!0),rt&&(Ne.closePath(),rt=!1);break;case 18:Pt();break;case 19:case 20:Pt(),Fr+=at+7>>3;break;case 21:2<we.length&&!Ye&&(Nt=we.shift()+He,Ye=!0),Xe+=we.pop(),$t(We+=we.pop(),Xe);break;case 22:1<we.length&&!Ye&&(Nt=we.shift()+He,Ye=!0),$t(We+=we.pop(),Xe);break;case 23:Pt();break;case 24:for(;2<we.length;)E=We+we.shift(),L=Xe+we.shift(),G=E+we.shift(),H=L+we.shift(),We=G+we.shift(),Xe=H+we.shift(),Ne.curveTo(E,L,G,H,We,Xe);We+=we.shift(),Xe+=we.shift(),Ne.lineTo(We,Xe);break;case 25:for(;6<we.length;)We+=we.shift(),Xe+=we.shift(),Ne.lineTo(We,Xe);E=We+we.shift(),L=Xe+we.shift(),G=E+we.shift(),H=L+we.shift(),We=G+we.shift(),Xe=H+we.shift(),Ne.curveTo(E,L,G,H,We,Xe);break;case 26:for(we.length%2&&(We+=we.shift());0<we.length;)E=We,L=Xe+we.shift(),G=E+we.shift(),H=L+we.shift(),We=G,Xe=H+we.shift(),Ne.curveTo(E,L,G,H,We,Xe);break;case 27:for(we.length%2&&(Xe+=we.shift());0<we.length;)E=We+we.shift(),L=Xe,G=E+we.shift(),H=L+we.shift(),We=G+we.shift(),Xe=H,Ne.curveTo(E,L,G,H,We,Xe);break;case 28:Br=pr[Fr],ln=pr[Fr+1],we.push((Br<<24|ln<<16)>>16),Fr+=2;break;case 29:Gr=we.pop()+v.gsubrsBias,(un=v.gsubrs[Gr])&&Ft(un);break;case 30:for(;0<we.length&&(E=We,L=Xe+we.shift(),G=E+we.shift(),H=L+we.shift(),We=G+we.shift(),Xe=H+(we.length===1?we.shift():0),Ne.curveTo(E,L,G,H,We,Xe),we.length!==0);)E=We+we.shift(),L=Xe,G=E+we.shift(),H=L+we.shift(),Xe=H+we.shift(),We=G+(we.length===1?we.shift():0),Ne.curveTo(E,L,G,H,We,Xe);break;case 31:for(;0<we.length&&(E=We+we.shift(),L=Xe,G=E+we.shift(),H=L+we.shift(),Xe=H+we.shift(),We=G+(we.length===1?we.shift():0),Ne.curveTo(E,L,G,H,We,Xe),we.length!==0);)E=We,L=Xe+we.shift(),G=E+we.shift(),H=L+we.shift(),We=G+we.shift(),Xe=H+(we.length===1?we.shift():0),Ne.curveTo(E,L,G,H,We,Xe);break;default:wn<32?console.log("Glyph "+C.index+": unknown operator "+wn):wn<247?we.push(wn-139):wn<251?(Br=pr[Fr],Fr+=1,we.push(256*(wn-247)+Br+108)):wn<255?(Br=pr[Fr],Fr+=1,we.push(256*-(wn-251)-Br-108)):(Br=pr[Fr],ln=pr[Fr+1],rr=pr[Fr+2],_n=pr[Fr+3],Fr+=4,we.push((Br<<24|ln<<16|rr<<8|_n)/65536))}}}(k),C.advanceWidth=Nt,Ne}function Ir(v,C){var k,E=ie.indexOf(v);return 0<=E&&(k=E),0<=(E=C.indexOf(v))?k=E+ie.length:(k=ie.length+C.length,C.push(v)),k}function ci(v,C,k){for(var E={},L=0;L<v.length;L+=1){var G=v[L],H=C[G.name];H===void 0||function se(pe,de){if(pe===de)return 1;if(Array.isArray(pe)&&Array.isArray(de)&&pe.length===de.length){for(var Oe=0;Oe<pe.length;Oe+=1)if(!se(pe[Oe],de[Oe]))return;return 1}}(H,G.value)||(G.type==="SID"&&(H=Ir(H,k)),E[G.op]={name:G.name,type:G.type,value:H})}return E}function vn(v,C){var k=new Ue.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return k.dict=ci(zt,v,C),k}function gr(v){var C=new Ue.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return C.topDicts=[{name:"topDict_0",type:"TABLE",value:v}],C}function Wn(v){for(var C=new Ue.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),k=0;k<v.length;k+=1){var E=v.get(k),L=function(G){for(var H=[],se=G.path,pe=(H.push({name:"width",type:"NUMBER",value:G.advanceWidth}),0),de=0,Oe=0;Oe<se.commands.length;Oe+=1){var He,Ne,we,at,Ye=void 0,rt=void 0,We=se.commands[Oe];(We=We.type==="Q"?{type:"C",x:We.x,y:We.y,x1:1/3*pe+2/3*We.x1,y1:1/3*de+2/3*We.y1,x2:1/3*We.x+2/3*We.x1,y2:1/3*We.y+2/3*We.y1}:We).type==="M"?(Ye=Math.round(We.x-pe),rt=Math.round(We.y-de),H.push({name:"dx",type:"NUMBER",value:Ye}),H.push({name:"dy",type:"NUMBER",value:rt}),H.push({name:"rmoveto",type:"OP",value:21}),pe=Math.round(We.x),de=Math.round(We.y)):We.type==="L"?(Ye=Math.round(We.x-pe),rt=Math.round(We.y-de),H.push({name:"dx",type:"NUMBER",value:Ye}),H.push({name:"dy",type:"NUMBER",value:rt}),H.push({name:"rlineto",type:"OP",value:5}),pe=Math.round(We.x),de=Math.round(We.y)):We.type==="C"&&(He=Math.round(We.x1-pe),Ne=Math.round(We.y1-de),we=Math.round(We.x2-We.x1),at=Math.round(We.y2-We.y1),Ye=Math.round(We.x-We.x2),rt=Math.round(We.y-We.y2),H.push({name:"dx1",type:"NUMBER",value:He}),H.push({name:"dy1",type:"NUMBER",value:Ne}),H.push({name:"dx2",type:"NUMBER",value:we}),H.push({name:"dy2",type:"NUMBER",value:at}),H.push({name:"dx",type:"NUMBER",value:Ye}),H.push({name:"dy",type:"NUMBER",value:rt}),H.push({name:"rrcurveto",type:"OP",value:8}),pe=Math.round(We.x),de=Math.round(We.y))}return H.push({name:"endchar",type:"OP",value:14}),H}(E);C.charStrings.push({name:E.name,type:"CHARSTRING",value:L})}return C}var ei={parse:function(v,C,k){k.tables.cff={},se=v,E=C,(L={}).formatMajor=Pe.getCard8(se,E),L.formatMinor=Pe.getCard8(se,E+1),L.size=Pe.getCard8(se,E+2),L.offsetSize=Pe.getCard8(se,E+3),L.startOffset=E,L.endOffset=E+4;var se=Rt(v,L.endOffset,Pe.bytesToString),E=Rt(v,se.endOffset),L=Rt(v,E.endOffset,Pe.bytesToString),se=Rt(v,L.endOffset);if(k.gsubrs=se.objects,k.gsubrsBias=qt(k.gsubrs),(se=Cr(v,C,E.objects,L.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+se.length);if(E=se[0],(k.tables.cff.topDict=E)._privateDict&&(k.defaultWidthX=E._privateDict.defaultWidthX,k.nominalWidthX=E._privateDict.nominalWidthX),E.ros[0]!==void 0&&E.ros[1]!==void 0&&(k.isCIDFont=!0),k.isCIDFont){var se=E.fdArray,G=E.fdSelect;if(se===0||G===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");se=Cr(v,C,Rt(v,se+=C).objects,L.objects),E._fdArray=se,E._fdSelect=function(Ne,we,at,Ye){var rt,We=[],Xe=new Pe.Parser(Ne,we);if((Ne=Xe.parseCard8())===0)for(var Nt=0;Nt<at;Nt++){if(Ye<=(rt=Xe.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+rt+" (FD count "+Ye+")");We.push(rt)}else{if(Ne!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ne);var $t,Pt=Xe.parseCard16(),Ft=Xe.parseCard16();if(Ft!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Ft);for(var pr=0;pr<Pt;pr++){if(rt=Xe.parseCard8(),$t=Xe.parseCard16(),Ye<=rt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+rt+" (FD count "+Ye+")");if(at<$t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+$t);for(;Ft<$t;Ft++)We.push(rt);Ft=$t}if($t!==at)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+$t)}return We}(v,G+=C,k.numGlyphs,se.length)}var G=C+E.private[1],se=xt(v,G,E.private[0],L.objects),H=(k.defaultWidthX=se.defaultWidthX,k.nominalWidthX=se.nominalWidthX,se.subrs!==0?(G=Rt(v,G+se.subrs),k.subrs=G.objects,k.subrsBias=qt(k.subrs)):(k.subrs=[],k.subrsBias=0),Rt(v,C+E.charStrings)),se=(k.nGlyphs=H.objects.length,function(Oe,He,Ne,we){var at=new Pe.Parser(Oe,He),Ye=(--Ne,[".notdef"]);if((Oe=at.parseCard8())===0)for(var rt=0;rt<Ne;rt+=1)We=at.parseSID(),Ye.push(Tr(we,We));else if(Oe===1)for(;Ye.length<=Ne;)for(var We=at.parseSID(),Xe=at.parseCard8(),Nt=0;Nt<=Xe;Nt+=1)Ye.push(Tr(we,We)),We+=1;else{if(Oe!==2)throw new Error("Unknown charset format "+Oe);for(;Ye.length<=Ne;){We=at.parseSID(),Xe=at.parseCard16();for(var $t=0;$t<=Xe;$t+=1)Ye.push(Tr(we,We)),We+=1}}return Ye}(v,C+E.charset,k.nGlyphs,L.objects));E.encoding===0?k.cffEncoding=new st($,se):E.encoding===1?k.cffEncoding=new st(le,se):k.cffEncoding=function(Oe,He,Ne){var we={},at=new Pe.Parser(Oe,He);if((Oe=at.parseCard8())===0)for(var Ye=at.parseCard8(),rt=0;rt<Ye;rt+=1)we[Xe=at.parseCard8()]=rt;else{if(Oe!==1)throw new Error("Unknown encoding format "+Oe);for(var We=at.parseCard8(),Xe=1,Nt=0;Nt<We;Nt+=1)for(var $t=at.parseCard8(),Pt=at.parseCard8(),Ft=$t;Ft<=$t+Pt;Ft+=1)we[Ft]=Xe,Xe+=1}return new st(we,Ne)}(v,C+E.encoding,se),k.encoding=k.encoding||k.cffEncoding,k.glyphs=new kt.GlyphSet(k);for(var pe=0;pe<k.nGlyphs;pe+=1){var de=H.objects[pe];k.glyphs.push(pe,kt.cffGlyphLoader(k,pe,wr,de))}},make:function(v,Oe){for(var k,E=new Ue.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),L=1/Oe.unitsPerEm,L={version:Oe.version,fullName:Oe.fullName,familyName:Oe.familyName,weight:Oe.weightName,fontBBox:Oe.fontBBox||[0,0,0,0],fontMatrix:[L,0,0,L,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},G=[],H=1;H<v.length;H+=1)k=v.get(H),G.push(k.name);var se,pe,de=[],Oe=(E.header=new Ue.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),E.nameIndex=function(Ne){var we=new Ue.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);we.names=[];for(var at=0;at<Ne.length;at+=1)we.names.push({name:"name_"+at,type:"NAME",value:Ne[at]});return we}([Oe.postScriptName]),vn(L,de)),He=(E.topDictIndex=gr(Oe),E.globalSubrIndex=new Ue.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),E.charsets=function(Ne,we){for(var at=new Ue.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Ye=0;Ye<Ne.length;Ye+=1){var rt=Ir(Ne[Ye],we);at.fields.push({name:"glyph_"+Ye,type:"SID",value:rt})}return at}(G,de),E.charStringsIndex=Wn(v),E.privateDict=(He={},se=de,(pe=new Ue.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=ci(At,He,se),pe),E.stringIndex=function(Ne){var we=new Ue.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);we.strings=[];for(var at=0;at<Ne.length;at+=1)we.strings.push({name:"string_"+at,type:"STRING",value:Ne[at]});return we}(de),E.header.sizeOf()+E.nameIndex.sizeOf()+E.topDictIndex.sizeOf()+E.stringIndex.sizeOf()+E.globalSubrIndex.sizeOf());return L.charset=He,L.encoding=0,L.charStrings=L.charset+E.charsets.sizeOf(),L.private[1]=L.charStrings+E.charStringsIndex.sizeOf(),Oe=vn(L,de),E.topDictIndex=gr(Oe),E}},ti={parse:function(E,C){var k={},E=new Pe.Parser(E,C);return k.version=E.parseVersion(),k.fontRevision=Math.round(1e3*E.parseFixed())/1e3,k.checkSumAdjustment=E.parseULong(),k.magicNumber=E.parseULong(),B.argument(k.magicNumber===1594834165,"Font header has wrong magic number."),k.flags=E.parseUShort(),k.unitsPerEm=E.parseUShort(),k.created=E.parseLongDateTime(),k.modified=E.parseLongDateTime(),k.xMin=E.parseShort(),k.yMin=E.parseShort(),k.xMax=E.parseShort(),k.yMax=E.parseShort(),k.macStyle=E.parseUShort(),k.lowestRecPPEM=E.parseUShort(),k.fontDirectionHint=E.parseShort(),k.indexToLocFormat=E.parseShort(),k.glyphDataFormat=E.parseShort(),k},make:function(v){var C=Math.round(new Date().getTime()/1e3)+2082844800,k=C;return v.createdTimestamp&&(k=v.createdTimestamp+2082844800),new Ue.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:k},{name:"modified",type:"LONGDATETIME",value:C},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],v)}},_e={parse:function(E,C){var k={},E=new Pe.Parser(E,C);return k.version=E.parseVersion(),k.ascender=E.parseShort(),k.descender=E.parseShort(),k.lineGap=E.parseShort(),k.advanceWidthMax=E.parseUShort(),k.minLeftSideBearing=E.parseShort(),k.minRightSideBearing=E.parseShort(),k.xMaxExtent=E.parseShort(),k.caretSlopeRise=E.parseShort(),k.caretSlopeRun=E.parseShort(),k.caretOffset=E.parseShort(),E.relativeOffset+=8,k.metricDataFormat=E.parseShort(),k.numberOfHMetrics=E.parseUShort(),k},make:function(v){return new Ue.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],v)}},dt={parse:function(v,C,k,E,L){for(var G,H,se=new Pe.Parser(v,C),pe=0;pe<E;pe+=1){pe<k&&(G=se.parseUShort(),H=se.parseShort());var de=L.get(pe);de.advanceWidth=G,de.leftSideBearing=H}},make:function(v){for(var C=new Ue.Table("hmtx",[]),k=0;k<v.length;k+=1){var L=v.get(k),E=L.advanceWidth||0,L=L.leftSideBearing||0;C.fields.push({name:"advanceWidth_"+k,type:"USHORT",value:E}),C.fields.push({name:"leftSideBearing_"+k,type:"SHORT",value:L})}return C}},bt={make:function(v){for(var C=new Ue.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:v.length}]),k="",E=12+4*v.length,L=0;L<v.length;++L){var G=k.indexOf(v[L]);G<0&&(G=k.length,k+=v[L]),C.fields.push({name:"offset "+L,type:"USHORT",value:E+G}),C.fields.push({name:"length "+L,type:"USHORT",value:v[L].length})}return C.fields.push({name:"stringPool",type:"CHARARRAY",value:k}),C},parse:function(v,C){for(var k=new Pe.Parser(v,C),E=k.parseULong(),L=(B.argument(E===1,"Unsupported ltag table version."),k.skip("uLong",1),k.parseULong()),G=[],H=0;H<L;H++){for(var se="",pe=C+k.parseUShort(),de=k.parseUShort(),Oe=pe;Oe<pe+de;++Oe)se+=String.fromCharCode(v.getInt8(Oe));G.push(se)}return G}},ut={parse:function(E,C){var k={},E=new Pe.Parser(E,C);return k.version=E.parseVersion(),k.numGlyphs=E.parseUShort(),k.version===1&&(k.maxPoints=E.parseUShort(),k.maxContours=E.parseUShort(),k.maxCompositePoints=E.parseUShort(),k.maxCompositeContours=E.parseUShort(),k.maxZones=E.parseUShort(),k.maxTwilightPoints=E.parseUShort(),k.maxStorage=E.parseUShort(),k.maxFunctionDefs=E.parseUShort(),k.maxInstructionDefs=E.parseUShort(),k.maxStackElements=E.parseUShort(),k.maxSizeOfInstructions=E.parseUShort(),k.maxComponentElements=E.parseUShort(),k.maxComponentDepth=E.parseUShort()),k},make:function(v){return new Ue.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:v}])}},ir=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],nt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},fr={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},wt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},ur="utf-16",St={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Lr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Kr(v,C,k){switch(v){case 0:return ur;case 1:return Lr[k]||St[C];case 3:if(C===1||C===10)return ur}}function tn(v){var C,k={};for(C in v)k[v[C]]=parseInt(C);return k}function gn(v,C,k,E,L,G){return new Ue.Record("NameRecord",[{name:"platformID",type:"USHORT",value:v},{name:"encodingID",type:"USHORT",value:C},{name:"languageID",type:"USHORT",value:k},{name:"nameID",type:"USHORT",value:E},{name:"length",type:"USHORT",value:L},{name:"offset",type:"USHORT",value:G}])}function bi(v,C){if((k=function(G,H){var se=G.length,pe=H.length-se+1;e:for(var de=0;de<pe;de++)for(;de<pe;de++){for(var Oe=0;Oe<se;Oe++)if(H[de+Oe]!==G[Oe])continue e;return de}return-1}(v,C))<0)for(var k=C.length,E=0,L=v.length;E<L;++E)C.push(v[E]);return k}var Vr={parse:function(v,C,k){for(var E={},L=new Pe.Parser(v,C),C=L.parseUShort(),G=L.parseUShort(),H=L.offset+L.parseUShort(),se=0;se<G;se++){var at=L.parseUShort(),pe=L.parseUShort(),de=L.parseUShort(),Oe=L.parseUShort(),Oe=ir[Oe]||Oe,He=L.parseUShort(),Ne=L.parseUShort(),we=function(rt,We,Xe){switch(rt){case 0:if(We===65535)return"und";if(Xe)return Xe[We];break;case 1:return nt[We];case 3:return wt[We]}}(at,de,k),at=Kr(at,pe,de);at!==void 0&&we!==void 0&&(pe=void 0,(pe=at===ur?W.UTF16(v,H+Ne,He):W.MACSTRING(v,H+Ne,He,at))&&((de=(de=E[Oe])===void 0?E[Oe]={}:de)[we]=pe))}return C===1&&L.parseUShort(),E},make:function(v,C){var k,E=[],L={},G=tn(ir);for(k in v){var H=G[k];if(H===void 0&&(H=k),Ne=parseInt(H),isNaN(Ne))throw new Error('Name table entry "'+k+'" does not exist, see nameTableNames for complete list.');L[Ne]=v[k],E.push(Ne)}for(var se=tn(nt),pe=tn(wt),de=[],Oe=[],He=0;He<E.length;He++){var Ne,we,at=L[Ne=E[He]];for(we in at){var Ye=at[we],$t=1,rt=se[we],We=fr[rt],Xe=Kr($t,We,rt),Xe=re.MACSTRING(Ye,Xe),Nt=(Xe===void 0&&($t=0,(rt=C.indexOf(we))<0&&(rt=C.length,C.push(we)),We=4,Xe=re.UTF16(Ye)),bi(Xe,Oe)),$t=(de.push(gn($t,We,rt,Ne,Xe.length,Nt)),pe[we]);$t!==void 0&&(rt=bi(We=re.UTF16(Ye),Oe),de.push(gn(3,1,$t,Ne,We.length,rt)))}}de.sort(function(pr,Br){return pr.platformID-Br.platformID||pr.encodingID-Br.encodingID||pr.languageID-Br.languageID||pr.nameID-Br.nameID});for(var Pt=new Ue.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:de.length},{name:"stringOffset",type:"USHORT",value:6+12*de.length}]),Ft=0;Ft<de.length;Ft++)Pt.fields.push({name:"record_"+Ft,type:"RECORD",value:de[Ft]});return Pt.fields.push({name:"strings",type:"LITERAL",value:Oe}),Pt}},Bn=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],dn={parse:function(v,C){var k={},E=new Pe.Parser(v,C);k.version=E.parseUShort(),k.xAvgCharWidth=E.parseShort(),k.usWeightClass=E.parseUShort(),k.usWidthClass=E.parseUShort(),k.fsType=E.parseUShort(),k.ySubscriptXSize=E.parseShort(),k.ySubscriptYSize=E.parseShort(),k.ySubscriptXOffset=E.parseShort(),k.ySubscriptYOffset=E.parseShort(),k.ySuperscriptXSize=E.parseShort(),k.ySuperscriptYSize=E.parseShort(),k.ySuperscriptXOffset=E.parseShort(),k.ySuperscriptYOffset=E.parseShort(),k.yStrikeoutSize=E.parseShort(),k.yStrikeoutPosition=E.parseShort(),k.sFamilyClass=E.parseShort(),k.panose=[];for(var L=0;L<10;L++)k.panose[L]=E.parseByte();return k.ulUnicodeRange1=E.parseULong(),k.ulUnicodeRange2=E.parseULong(),k.ulUnicodeRange3=E.parseULong(),k.ulUnicodeRange4=E.parseULong(),k.achVendID=String.fromCharCode(E.parseByte(),E.parseByte(),E.parseByte(),E.parseByte()),k.fsSelection=E.parseUShort(),k.usFirstCharIndex=E.parseUShort(),k.usLastCharIndex=E.parseUShort(),k.sTypoAscender=E.parseShort(),k.sTypoDescender=E.parseShort(),k.sTypoLineGap=E.parseShort(),k.usWinAscent=E.parseUShort(),k.usWinDescent=E.parseUShort(),1<=k.version&&(k.ulCodePageRange1=E.parseULong(),k.ulCodePageRange2=E.parseULong()),2<=k.version&&(k.sxHeight=E.parseShort(),k.sCapHeight=E.parseShort(),k.usDefaultChar=E.parseUShort(),k.usBreakChar=E.parseUShort(),k.usMaxContent=E.parseUShort()),k},make:function(v){return new Ue.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],v)},unicodeRanges:Bn,getUnicodeRange:function(v){for(var C=0;C<Bn.length;C+=1){var k=Bn[C];if(v>=k.begin&&v<k.end)return C}return-1}},bu={parse:function(v,C){var k={},E=new Pe.Parser(v,C);switch(k.version=E.parseVersion(),k.italicAngle=E.parseFixed(),k.underlinePosition=E.parseShort(),k.underlineThickness=E.parseShort(),k.isFixedPitch=E.parseULong(),k.minMemType42=E.parseULong(),k.maxMemType42=E.parseULong(),k.minMemType1=E.parseULong(),k.maxMemType1=E.parseULong(),k.version){case 1:k.names=Ee.slice();break;case 2:k.numberOfGlyphs=E.parseUShort(),k.glyphNameIndex=new Array(k.numberOfGlyphs);for(var L=0;L<k.numberOfGlyphs;L++)k.glyphNameIndex[L]=E.parseUShort();k.names=[];for(var G,H=0;H<k.numberOfGlyphs;H++)k.glyphNameIndex[H]>=Ee.length&&(G=E.parseChar(),k.names.push(E.parseString(G)));break;case 2.5:k.numberOfGlyphs=E.parseUShort(),k.offset=new Array(k.numberOfGlyphs);for(var se=0;se<k.numberOfGlyphs;se++)k.offset[se]=E.parseChar()}return k},make:function(){return new Ue.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},_i=new Array(9),qi=(_i[1]=function(){var v=this.offset+this.relativeOffset,C=this.parseUShort();return C===1?{substFormat:1,coverage:this.parsePointer(je.coverage),deltaGlyphId:this.parseUShort()}:C===2?{substFormat:2,coverage:this.parsePointer(je.coverage),substitute:this.parseOffset16List()}:void B.assert(!1,"0x"+v.toString(16)+": lookup type 1 format must be 1 or 2.")},_i[2]=function(){var v=this.parseUShort();return B.argument(v===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(je.coverage),sequences:this.parseListOfLists()}},_i[3]=function(){var v=this.parseUShort();return B.argument(v===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(je.coverage),alternateSets:this.parseListOfLists()}},_i[4]=function(){var v=this.parseUShort();return B.argument(v===1,"GSUB ligature table identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(je.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:je.uShort,lookupListIndex:je.uShort});_i[5]=function(){var v,C,k=this.offset+this.relativeOffset,E=this.parseUShort();return E===1?{substFormat:E,coverage:this.parsePointer(je.coverage),ruleSets:this.parseListOfLists(function(){var L=this.parseUShort(),G=this.parseUShort();return{input:this.parseUShortList(L-1),lookupRecords:this.parseRecordList(G,qi)}})}:E===2?{substFormat:E,coverage:this.parsePointer(je.coverage),classDef:this.parsePointer(je.classDef),classSets:this.parseListOfLists(function(){var L=this.parseUShort(),G=this.parseUShort();return{classes:this.parseUShortList(L-1),lookupRecords:this.parseRecordList(G,qi)}})}:E===3?(v=this.parseUShort(),C=this.parseUShort(),{substFormat:E,coverages:this.parseList(v,je.pointer(je.coverage)),lookupRecords:this.parseRecordList(C,qi)}):void B.assert(!1,"0x"+k.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},_i[6]=function(){var v=this.offset+this.relativeOffset,C=this.parseUShort();return C===1?{substFormat:1,coverage:this.parsePointer(je.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(qi)}})}:C===2?{substFormat:2,coverage:this.parsePointer(je.coverage),backtrackClassDef:this.parsePointer(je.classDef),inputClassDef:this.parsePointer(je.classDef),lookaheadClassDef:this.parsePointer(je.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(qi)}})}:C===3?{substFormat:3,backtrackCoverage:this.parseList(je.pointer(je.coverage)),inputCoverage:this.parseList(je.pointer(je.coverage)),lookaheadCoverage:this.parseList(je.pointer(je.coverage)),lookupRecords:this.parseRecordList(qi)}:void B.assert(!1,"0x"+v.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},_i[7]=function(){var v=this.parseUShort(),v=(B.argument(v===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),C=new je(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:v,extension:_i[v].call(C)}},_i[8]=function(){var v=this.parseUShort();return B.argument(v===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(je.coverage),backtrackCoverage:this.parseList(je.pointer(je.coverage)),lookaheadCoverage:this.parseList(je.pointer(je.coverage)),substitutes:this.parseUShortList()}};var wo=new Array(9);wo[1]=function(v){return v.substFormat===1?new Ue.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ue.Coverage(v.coverage)},{name:"deltaGlyphID",type:"USHORT",value:v.deltaGlyphId}]):new Ue.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Ue.Coverage(v.coverage)}].concat(Ue.ushortList("substitute",v.substitute)))},wo[3]=function(v){return B.assert(v.substFormat===1,"Lookup type 3 substFormat must be 1."),new Ue.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ue.Coverage(v.coverage)}].concat(Ue.tableList("altSet",v.alternateSets,function(C){return new Ue.Table("alternateSetTable",Ue.ushortList("alternate",C))})))},wo[4]=function(v){return B.assert(v.substFormat===1,"Lookup type 4 substFormat must be 1."),new Ue.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ue.Coverage(v.coverage)}].concat(Ue.tableList("ligSet",v.ligatureSets,function(C){return new Ue.Table("ligatureSetTable",Ue.tableList("ligature",C,function(k){return new Ue.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:k.ligGlyph}].concat(Ue.ushortList("component",k.components,k.components.length+1)))}))})))};var xo={parse:function(v,C){return C=(v=new je(v,C=C||0)).parseVersion(1),B.argument(C===1||C===1.1,"Unsupported GSUB table version."),C===1?{version:C,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList(_i)}:{version:C,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList(_i),variations:v.parseFeatureVariationsList()}},make:function(v){return new Ue.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ue.ScriptList(v.scripts)},{name:"features",type:"TABLE",value:new Ue.FeatureList(v.features)},{name:"lookups",type:"TABLE",value:new Ue.LookupList(v.lookups,wo)}])}},Ya={parse:function(v,C){for(var k=new Pe.Parser(v,C),E=k.parseULong(),L=(B.argument(E===1,"Unsupported META table version."),k.parseULong(),k.parseULong(),k.parseULong()),G={},H=0;H<L;H++){var se=k.parseTag(),de=k.parseULong(),pe=k.parseULong(),de=W.UTF8(v,C+de,pe);G[se]=de}return G},make:function(v){var C,k=Object.keys(v).length,E="",L=16+12*k,G=new Ue.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:L},{name:"numTags",type:"ULONG",value:k}]);for(C in v){var H=E.length;E+=v[C],G.fields.push({name:"tag "+C,type:"TAG",value:C}),G.fields.push({name:"offset "+C,type:"ULONG",value:L+H}),G.fields.push({name:"length "+C,type:"ULONG",value:v[C].length})}return G.fields.push({name:"stringPool",type:"CHARARRAY",value:E}),G}};function _u(v){return Math.log(v)/Math.log(2)|0}function Ka(v){for(;v.length%4!=0;)v.push(0);for(var C=0,k=0;k<v.length;k+=4)C+=(v[k]<<24)+(v[k+1]<<16)+(v[k+2]<<8)+v[k+3];return C%=Math.pow(2,32)}function hi(v,C,k,E){return new Ue.Record("Table Record",[{name:"tag",type:"TAG",value:v!==void 0?v:""},{name:"checkSum",type:"ULONG",value:C!==void 0?C:0},{name:"offset",type:"ULONG",value:k!==void 0?k:0},{name:"length",type:"ULONG",value:E!==void 0?E:0}])}function Ja(v){for(var C=new Ue.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),k=(C.tables=v,C.numTables=v.length,Math.pow(2,_u(C.numTables))),E=(C.searchRange=16*k,C.entrySelector=_u(k),C.rangeShift=16*C.numTables-C.searchRange,[]),L=[],G=C.sizeOf()+hi().sizeOf()*C.numTables;G%4!=0;)G+=1,L.push({name:"padding",type:"BYTE",value:0});for(var H=0;H<v.length;H+=1){var se=v[H],pe=(B.argument(se.tableName.length===4,"Table name"+se.tableName+" is invalid."),se.sizeOf()),de=hi(se.tableName,Ka(se.encode()),G,pe);for(E.push({name:de.tag+" Table Record",type:"RECORD",value:de}),L.push({name:se.tableName+" table",type:"RECORD",value:se}),G+=pe,B.argument(!isNaN(G),"Something went wrong calculating the offset.");G%4!=0;)G+=1,L.push({name:"padding",type:"BYTE",value:0})}return E.sort(function(Oe,He){return Oe.value.tag>He.value.tag?1:-1}),C.fields=C.fields.concat(E),C.fields=C.fields.concat(L),C}function Ls(v,C,k){for(var E=0;E<C.length;E+=1){var L=v.charToGlyphIndex(C[E]);if(0<L)return v.glyphs.get(L).getMetrics()}return k}var zh={make:Ja,fontToTable:function(v){for(var C,k=[],E=[],L=[],G=[],H=[],se=[],pe=[],de=0,Oe=0,He=0,Ne=0,we=0,at=0;at<v.glyphs.length;at+=1){var Ye=v.glyphs.get(at),rt=0|Ye.unicode;if(isNaN(Ye.advanceWidth))throw new Error("Glyph "+Ye.name+" ("+at+"): advanceWidth is not a number.");(rt<C||C===void 0)&&0<rt&&(C=rt),de<rt&&(de=rt);var rt=dn.getUnicodeRange(rt);if(rt<32)Oe|=1<<rt;else if(rt<64)He|=1<<rt-32;else if(rt<96)Ne|=1<<rt-64;else{if(!(rt<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");we|=1<<rt-96}Ye.name!==".notdef"&&(rt=Ye.getMetrics(),k.push(rt.xMin),E.push(rt.yMin),L.push(rt.xMax),G.push(rt.yMax),se.push(rt.leftSideBearing),pe.push(rt.rightSideBearing),H.push(Ye.advanceWidth))}var We,Xe={xMin:Math.min.apply(null,k),yMin:Math.min.apply(null,E),xMax:Math.max.apply(null,L),yMax:Math.max.apply(null,G),advanceWidthMax:Math.max.apply(null,H),advanceWidthAvg:function(wn){for(var Ji=0,Fi=0;Fi<wn.length;Fi+=1)Ji+=wn[Fi];return Ji/wn.length}(H),minLeftSideBearing:Math.min.apply(null,se),maxLeftSideBearing:Math.max.apply(null,se),minRightSideBearing:Math.min.apply(null,pe)},Nt=(Xe.ascender=v.ascender,Xe.descender=v.descender,ti.make({flags:3,unitsPerEm:v.unitsPerEm,xMin:Xe.xMin,yMin:Xe.yMin,xMax:Xe.xMax,yMax:Xe.yMax,lowestRecPPEM:3,createdTimestamp:v.createdTimestamp})),$t=_e.make({ascender:Xe.ascender,descender:Xe.descender,advanceWidthMax:Xe.advanceWidthMax,minLeftSideBearing:Xe.minLeftSideBearing,minRightSideBearing:Xe.minRightSideBearing,xMaxExtent:Xe.maxLeftSideBearing+(Xe.xMax-Xe.xMin),numberOfHMetrics:v.glyphs.length}),Pt=ut.make(v.glyphs.length),Ft=dn.make({xAvgCharWidth:Math.round(Xe.advanceWidthAvg),usWeightClass:v.tables.os2.usWeightClass,usWidthClass:v.tables.os2.usWidthClass,usFirstCharIndex:C,usLastCharIndex:de,ulUnicodeRange1:Oe,ulUnicodeRange2:He,ulUnicodeRange3:Ne,ulUnicodeRange4:we,fsSelection:v.tables.os2.fsSelection,sTypoAscender:Xe.ascender,sTypoDescender:Xe.descender,sTypoLineGap:0,usWinAscent:Xe.yMax,usWinDescent:Math.abs(Xe.yMin),ulCodePageRange1:1,sxHeight:Ls(v,"xyvw",{yMax:Math.round(Xe.ascender/2)}).yMax,sCapHeight:Ls(v,"HIKLEFJMNTZBDPRAGOQSUVWXY",Xe).yMax,usDefaultChar:v.hasChar(" ")?32:0,usBreakChar:v.hasChar(" ")?32:0}),pr=dt.make(v.glyphs),Br=J.make(v.glyphs),Hr=v.getEnglishName("fontFamily"),Ar=v.getEnglishName("fontSubfamily"),Mr=Hr+" "+Ar,ln=(ln=v.getEnglishName("postScriptName"))||Hr.replace(/\s/g,"")+"-"+Ar,rr={};for(We in v.names)rr[We]=v.names[We];rr.uniqueID||(rr.uniqueID={en:v.getEnglishName("manufacturer")+":"+Mr}),rr.postScriptName||(rr.postScriptName={en:ln}),rr.preferredFamily||(rr.preferredFamily=v.names.fontFamily),rr.preferredSubfamily||(rr.preferredSubfamily=v.names.fontSubfamily);var Gr=[],_n=Vr.make(rr,Gr),Gr=0<Gr.length?bt.make(Gr):void 0,un=bu.make(),Mr=ei.make(v.glyphs,{version:v.getEnglishName("version"),fullName:Mr,familyName:Hr,weightName:Ar,postScriptName:ln,unitsPerEm:v.unitsPerEm,fontBBox:[0,Xe.yMin,Xe.ascender,Xe.advanceWidthMax]}),Hr=v.metas&&0<Object.keys(v.metas).length?Ya.make(v.metas):void 0,Ar=[Nt,$t,Pt,Ft,_n,Br,un,Mr,pr];Gr&&Ar.push(Gr),v.tables.gsub&&Ar.push(xo.make(v.tables.gsub)),Hr&&Ar.push(Hr);for(var Pn=Ka((ln=Ja(Ar)).encode()),Jr=ln.fields,nn=!1,Fr=0;Fr<Jr.length;Fr+=1)if(Jr[Fr].name==="head table"){Jr[Fr].value.checkSumAdjustment=2981146554-Pn,nn=!0;break}if(nn)return ln;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Ka};function Qa(v,C){for(var k=0,E=v.length-1;k<=E;){var L=k+E>>>1,G=v[L].tag;if(G===C)return L;G<C?k=1+L:E=L-1}return-k-1}function $i(v,C){for(var k=0,E=v.length-1;k<=E;){var L=k+E>>>1,G=v[L];if(G===C)return L;G<C?k=1+L:E=L-1}return-k-1}function Xi(v,C){for(var k=0,E=v.length-1;k<=E;){var L,G=k+E>>>1,H=(L=v[G]).start;if(H===C)return L;H<C?k=1+G:E=G-1}if(0<k)return C>(L=v[k-1]).end?0:L}function Ns(v,C){this.font=v,this.tableName=C}function Jo(v){Ns.call(this,v,"gpos")}function wi(v){Ns.call(this,v,"gsub")}function Za(v,C,k){for(var E=v.subtables,L=0;L<E.length;L++){var G=E[L];if(G.substFormat===C)return G}if(k)return E.push(k),k}function Bs(v){for(var C=new ArrayBuffer(v.length),k=new Uint8Array(C),E=0;E<v.length;++E)k[E]=v[E];return C}function gs(v,C){if(!v)throw C}function Qo(v,C,k,E,L){var G=0<(C&E)?(G=v.parseByte(),k+(G=C&L?G:-G)):0<(C&L)?k:k+v.parseShort();return G}function Wh(v,C,k){var E,L=new Pe.Parser(C,k);if(v.numberOfContours=L.parseShort(),v._xMin=L.parseShort(),v._yMin=L.parseShort(),v._xMax=L.parseShort(),v._yMax=L.parseShort(),0<v.numberOfContours){for(var G=v.endPointIndices=[],H=0;H<v.numberOfContours;H+=1)G.push(L.parseUShort());v.instructionLength=L.parseUShort(),v.instructions=[];for(var se=0;se<v.instructionLength;se+=1)v.instructions.push(L.parseByte());for(var pe=G[G.length-1]+1,de=[],Oe=0;Oe<pe;Oe+=1)if(E=L.parseByte(),de.push(E),0<(8&E))for(var He=L.parseByte(),Ne=0;Ne<He;Ne+=1)de.push(E),Oe+=1;if(B.argument(de.length===pe,"Bad flags."),0<G.length){var we,at=[];if(0<pe){for(var Ye=0;Ye<pe;Ye+=1)E=de[Ye],(we={}).onCurve=!!(1&E),we.lastPointOfContour=0<=G.indexOf(Ye),at.push(we);for(var rt=0,We=0;We<pe;We+=1)E=de[We],(we=at[We]).x=Qo(L,E,rt,2,16),rt=we.x;for(var Xe=0,Nt=0;Nt<pe;Nt+=1)E=de[Nt],(we=at[Nt]).y=Qo(L,E,Xe,4,32),Xe=we.y}v.points=at}else v.points=[]}else if(v.numberOfContours===0)v.points=[];else{v.isComposite=!0,v.points=[],v.components=[];for(var $t=!0;$t;){de=L.parseUShort();var Pt={glyphIndex:L.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&de)?0<(2&de)?(Pt.dx=L.parseShort(),Pt.dy=L.parseShort()):Pt.matchedPoints=[L.parseUShort(),L.parseUShort()]:0<(2&de)?(Pt.dx=L.parseChar(),Pt.dy=L.parseChar()):Pt.matchedPoints=[L.parseByte(),L.parseByte()],0<(8&de)?Pt.xScale=Pt.yScale=L.parseF2Dot14():0<(64&de)?(Pt.xScale=L.parseF2Dot14(),Pt.yScale=L.parseF2Dot14()):0<(128&de)&&(Pt.xScale=L.parseF2Dot14(),Pt.scale01=L.parseF2Dot14(),Pt.scale10=L.parseF2Dot14(),Pt.yScale=L.parseF2Dot14()),v.components.push(Pt),$t=!!(32&de)}if(256&de){v.instructionLength=L.parseUShort(),v.instructions=[];for(var Ft=0;Ft<v.instructionLength;Ft+=1)v.instructions.push(L.parseByte())}}}function Zo(v,C){for(var k=[],E=0;E<v.length;E+=1){var L=v[E],L={x:C.xScale*L.x+C.scale01*L.y+C.dx,y:C.scale10*L.x+C.yScale*L.y+C.dy,onCurve:L.onCurve,lastPointOfContour:L.lastPointOfContour};k.push(L)}return k}function wu(v){var C=new X;if(v)for(var k=function(He){for(var Ne=[],we=[],at=0;at<He.length;at+=1){var Ye=He[at];we.push(Ye),Ye.lastPointOfContour&&(Ne.push(we),we=[])}return B.argument(we.length===0,"There are still points left in the current contour."),Ne}(v),E=0;E<k.length;++E){var L,G=k[E],H=G[G.length-1],se=G[0];H.onCurve?C.moveTo(H.x,H.y):se.onCurve?C.moveTo(se.x,se.y):(L={x:.5*(H.x+se.x),y:.5*(H.y+se.y)},C.moveTo(L.x,L.y));for(var pe=0;pe<G.length;++pe){var de,Oe=H,H=se,se=G[(pe+1)%G.length];H.onCurve?C.lineTo(H.x,H.y):(de=se,Oe.onCurve||(H.x,Oe.x,H.y,Oe.y),se.onCurve||(de={x:.5*(H.x+se.x),y:.5*(H.y+se.y)}),C.quadraticCurveTo(H.x,H.y,de.x,de.y))}C.closePath()}return C}function qh(v,C){if(C.isComposite)for(var k=0;k<C.components.length;k+=1){var E=C.components[k],L=v.get(E.glyphIndex);if(L.getPath(),L.points){var G=void 0;if(E.matchedPoints===void 0)G=Zo(L.points,E);else{if(E.matchedPoints[0]>C.points.length-1||E.matchedPoints[1]>L.points.length-1)throw Error("Matched points out of range in "+C.name);var H=C.points[E.matchedPoints[0]],se=L.points[E.matchedPoints[1]],E={xScale:E.xScale,scale01:E.scale01,scale10:E.scale10,yScale:E.yScale,dx:0,dy:0},se=Zo([se],E)[0];E.dx=H.x-se.x,E.dy=H.y-se.y,G=Zo(L.points,E)}C.points=C.points.concat(G)}}return wu(C.points)}(Jo.prototype=Ns.prototype={searchTag:Qa,binSearch:$i,getTable:function(v){var C=this.font.tables[this.tableName];return C=!C&&v?this.font.tables[this.tableName]=this.createDefaultTable():C},getScriptNames:function(){var v=this.getTable();return v?v.scripts.map(function(C){return C.tag}):[]},getDefaultScriptName:function(){var v=this.getTable();if(v){for(var C=!1,k=0;k<v.scripts.length;k++){var E=v.scripts[k].tag;if(E==="DFLT")return E;E==="latn"&&(C=!0)}return C?"latn":void 0}},getScriptTable:function(v,C){var k,E=this.getTable(C);if(E)return k=E.scripts,0<=(E=Qa(E.scripts,v=v||"DFLT"))?k[E].script:C?(k.splice(-1-E,0,C={tag:v,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),C.script):void 0},getLangSysTable:function(L,C,k){var E,L=this.getScriptTable(L,k);if(L)return C&&C!=="dflt"&&C!=="DFLT"?0<=(E=Qa(L.langSysRecords,C))?L.langSysRecords[E].langSys:k?(L.langSysRecords.splice(-1-E,0,k={tag:C,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),k.langSys):void 0:L.defaultLangSys},getFeatureTable:function(v,C,k,E){if(v=this.getLangSysTable(v,C,E),v){for(var L,G=v.featureIndexes,H=this.font.tables[this.tableName].features,se=0;se<G.length;se++)if((L=H[G[se]]).tag===k)return L.feature;if(E)return C=H.length,B.assert(C===0||k>=H[C-1].tag,"Features must be added in alphabetical order."),H.push(L={tag:k,feature:{params:0,lookupListIndexes:[]}}),G.push(C),L.feature}},getLookupTables:function(G,C,k,E,L){var G=this.getFeatureTable(G,C,k,L),H=[];if(G){for(var se,pe=G.lookupListIndexes,de=this.font.tables[this.tableName].lookups,Oe=0;Oe<pe.length;Oe++)(se=de[pe[Oe]]).lookupType===E&&H.push(se);if(H.length===0&&L)return C=de.length,de.push(se={lookupType:E,lookupFlag:0,subtables:[],markFilteringSet:void 0}),pe.push(C),[se]}return H},getGlyphClass:function(v,C){switch(v.format){case 1:return v.startGlyph<=C&&C<v.startGlyph+v.classes.length?v.classes[C-v.startGlyph]:0;case 2:var k=Xi(v.ranges,C);return k?k.classId:0}},getCoverageIndex:function(v,C){switch(v.format){case 1:var k=$i(v.glyphs,C);return 0<=k?k:-1;case 2:return k=Xi(v.ranges,C),k?k.index+C-k.start:-1}},expandCoverage:function(v){if(v.format===1)return v.glyphs;for(var C=[],k=v.ranges,E=0;E<k.length;E++)for(var L=k[E],G=L.start,H=L.end,se=G;se<=H;se++)C.push(se);return C}}).init=function(){var v=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(v)},Jo.prototype.getKerningValue=function(v,C,k){for(var E=0;E<v.length;E++)for(var L=v[E].subtables,G=0;G<L.length;G++){var H=L[G],se=this.getCoverageIndex(H.coverage,C);if(!(se<0))switch(H.posFormat){case 1:for(var pe=H.pairSets[se],de=0;de<pe.length;de++){var Oe=pe[de];if(Oe.secondGlyph===k)return Oe.value1&&Oe.value1.xAdvance||0}break;case 2:var Ne=this.getGlyphClass(H.classDef1,C),He=this.getGlyphClass(H.classDef2,k),Ne=H.classRecords[Ne][He];return Ne.value1&&Ne.value1.xAdvance||0}}return 0},Jo.prototype.getKerningTables=function(v,C){if(this.font.tables.gpos)return this.getLookupTables(v,C,"kern",2)},(wi.prototype=Ns.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},wi.prototype.getSingle=function(v,C,k){for(var E=[],L=this.getLookupTables(C,k,v,1),G=0;G<L.length;G++)for(var H=L[G].subtables,se=0;se<H.length;se++){var pe=H[se],de=this.expandCoverage(pe.coverage),Oe=void 0;if(pe.substFormat===1)for(var He=pe.deltaGlyphId,Oe=0;Oe<de.length;Oe++){var Ne=de[Oe];E.push({sub:Ne,by:Ne+He})}else{var we=pe.substitute;for(Oe=0;Oe<de.length;Oe++)E.push({sub:de[Oe],by:we[Oe]})}}return E},wi.prototype.getAlternates=function(v,C,k){for(var E=[],L=this.getLookupTables(C,k,v,3),G=0;G<L.length;G++)for(var H=L[G].subtables,se=0;se<H.length;se++)for(var pe=H[se],de=this.expandCoverage(pe.coverage),Oe=pe.alternateSets,He=0;He<de.length;He++)E.push({sub:de[He],by:Oe[He]});return E},wi.prototype.getLigatures=function(v,C,k){for(var E=[],L=this.getLookupTables(C,k,v,4),G=0;G<L.length;G++)for(var H=L[G].subtables,se=0;se<H.length;se++)for(var pe=H[se],de=this.expandCoverage(pe.coverage),Oe=pe.ligatureSets,He=0;He<de.length;He++)for(var Ne=de[He],we=Oe[He],at=0;at<we.length;at++){var Ye=we[at];E.push({sub:[Ne].concat(Ye.components),by:Ye.ligGlyph})}return E},wi.prototype.addSingle=function(v,C,k,E){k=Za(this.getLookupTables(k,E,v,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),B.assert(k.coverage.format===1,"Ligature: unable to modify coverage table format "+k.coverage.format),E=C.sub,v=this.binSearch(k.coverage.glyphs,E),v<0&&(k.coverage.glyphs.splice(v=-1-v,0,E),k.substitute.splice(v,0,0)),k.substitute[v]=C.by},wi.prototype.addAlternate=function(v,C,k,E){k=Za(this.getLookupTables(k,E,v,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),B.assert(k.coverage.format===1,"Ligature: unable to modify coverage table format "+k.coverage.format),E=C.sub,v=this.binSearch(k.coverage.glyphs,E),v<0&&(k.coverage.glyphs.splice(v=-1-v,0,E),k.alternateSets.splice(v,0,0)),k.alternateSets[v]=C.by},wi.prototype.addLigature=function(G,pe,se,L){var se=this.getLookupTables(se,L,G,4,!0)[0],L=se.subtables[0],G=(L||(se.subtables[0]=L={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),B.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),pe.sub[0]),H=pe.sub.slice(1),se={ligGlyph:pe.by,components:H},pe=this.binSearch(L.coverage.glyphs,G);if(0<=pe){for(var de=L.ligatureSets[pe],Oe=0;Oe<de.length;Oe++)if(function(He,Ne){var we=He.length;if(we===Ne.length){for(var at=0;at<we;at++)if(He[at]!==Ne[at])return;return 1}}(de[Oe].components,H))return;de.push(se)}else L.coverage.glyphs.splice(pe=-1-pe,0,G),L.ligatureSets.splice(pe,0,[se])},wi.prototype.getFeature=function(v,C,k){if(/ss\d\d/.test(v))return this.getSingle(v,C,k);switch(v){case"aalt":case"salt":return this.getSingle(v,C,k).concat(this.getAlternates(v,C,k));case"dlig":case"liga":case"rlig":return this.getLigatures(v,C,k)}},wi.prototype.add=function(v,C,k,E){if(/ss\d\d/.test(v))return this.addSingle(v,C,k,E);switch(v){case"aalt":case"salt":return typeof C.by=="number"?this.addSingle(v,C,k,E):this.addAlternate(v,C,k,E);case"dlig":case"liga":case"rlig":return this.addLigature(v,C,k,E)}};var ea={getPath:wu,parse:function(v,C,k,E){for(var L=new kt.GlyphSet(E),G=0;G<k.length-1;G+=1){var H=k[G];H!==k[G+1]?L.push(G,kt.ttfGlyphLoader(E,G,Wh,v,C+H,qh)):L.push(G,kt.glyphLoader(E,G))}return L}};function xu(v){this.font=v,this.getCommands=function(C){return ea.getPath(C).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function $h(v){return v}function Su(v){return Math.sign(v)*Math.round(Math.abs(v))}function Xh(v){return Math.sign(v)*Math.round(Math.abs(2*v))/2}function Yh(v){return Math.sign(v)*(Math.round(Math.abs(v)+.5)-.5)}function Kh(v){return Math.sign(v)*Math.ceil(Math.abs(v))}function Jh(v){return Math.sign(v)*Math.floor(Math.abs(v))}function el(v){var C=this.srPeriod,k=this.srPhase,E=1;return v<0&&(v=-v,E=-1),v+=this.srThreshold-k,v=Math.trunc(v/C)*C,(v+=k)<0?k*E:v*E}var di={x:1,y:0,axis:"x",distance:function(v,C,k,E){return(k?v.xo:v.x)-(E?C.xo:C.x)},interpolate:function(v,C,k,E){var L,G,H,se,pe,de,Oe;if(!E||E===this)return L=v.xo-C.xo,G=v.xo-k.xo,pe=C.x-C.xo,de=k.x-k.xo,(Oe=(H=Math.abs(L))+(se=Math.abs(G)))===0?void(v.x=v.xo+(pe+de)/2):void(v.x=v.xo+(pe*se+de*H)/Oe);L=E.distance(v,C,!0,!0),G=E.distance(v,k,!0,!0),pe=E.distance(C,C,!1,!0),de=E.distance(k,k,!1,!0),(Oe=(H=Math.abs(L))+(se=Math.abs(G)))===0?di.setRelative(v,v,(pe+de)/2,E,!0):di.setRelative(v,v,(pe*se+de*H)/Oe,E,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(v,C,k,E,L){var G,H;E&&E!==this?(G=L?C.xo:C.x,H=L?C.yo:C.y,G+=k*E.x,H+=k*E.y,v.x=G+(v.y-H)/E.normalSlope):v.x=(L?C.xo:C.x)+k},slope:0,touch:function(v){v.xTouched=!0},touched:function(v){return v.xTouched},untouch:function(v){v.xTouched=!1}},Oi={x:0,y:1,axis:"y",distance:function(v,C,k,E){return(k?v.yo:v.y)-(E?C.yo:C.y)},interpolate:function(v,C,k,E){var L,G,H,se,pe,de,Oe;if(!E||E===this)return L=v.yo-C.yo,G=v.yo-k.yo,pe=C.y-C.yo,de=k.y-k.yo,(Oe=(H=Math.abs(L))+(se=Math.abs(G)))===0?void(v.y=v.yo+(pe+de)/2):void(v.y=v.yo+(pe*se+de*H)/Oe);L=E.distance(v,C,!0,!0),G=E.distance(v,k,!0,!0),pe=E.distance(C,C,!1,!0),de=E.distance(k,k,!1,!0),(Oe=(H=Math.abs(L))+(se=Math.abs(G)))===0?Oi.setRelative(v,v,(pe+de)/2,E,!0):Oi.setRelative(v,v,(pe*se+de*H)/Oe,E,!0)},normalSlope:0,setRelative:function(v,C,k,E,L){var G,H;E&&E!==this?(G=L?C.xo:C.x,H=L?C.yo:C.y,G+=k*E.x,H+=k*E.y,v.y=H+E.normalSlope*(v.x-G)):v.y=(L?C.yo:C.y)+k},slope:Number.POSITIVE_INFINITY,touch:function(v){v.yTouched=!0},touched:function(v){return v.yTouched},untouch:function(v){v.yTouched=!1}};function ys(v,C){this.x=v,this.y=C,this.axis=void 0,this.slope=C/v,this.normalSlope=-v/C,Object.freeze(this)}function Fs(v,C){var k=Math.sqrt(v*v+C*C);return C/=k,(v/=k)===1&&C===0?di:v===0&&C===1?Oi:new ys(v,C)}function Ii(v,C,k,E){this.x=this.xo=Math.round(64*v)/64,this.y=this.yo=Math.round(64*C)/64,this.lastPointOfContour=k,this.onCurve=E,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(di),Object.freeze(Oi),ys.prototype.distance=function(v,C,k,E){return this.x*di.distance(v,C,k,E)+this.y*Oi.distance(v,C,k,E)},ys.prototype.interpolate=function(v,L,G,E){var H=E.distance(v,L,!0,!0),se=E.distance(v,G,!0,!0),L=E.distance(L,L,!1,!0),G=E.distance(G,G,!1,!0),H=Math.abs(H),se=Math.abs(se),pe=H+se;pe===0?this.setRelative(v,v,(L+G)/2,E,!0):this.setRelative(v,v,(L*se+G*H)/pe,E,!0)},ys.prototype.setRelative=function(v,G,pe,de,se){var H=se?G.xo:G.x,se=se?G.yo:G.y,G=H+pe*(de=de||this).x,H=se+pe*de.y,se=de.normalSlope,pe=this.slope,de=v.x,Oe=v.y;v.x=(pe*de-se*G+H-Oe)/(pe-se),v.y=pe*(v.x-de)+Oe},ys.prototype.touch=function(v){v.xTouched=!0,v.yTouched=!0},Ii.prototype.nextTouched=function(v){for(var C=this.nextPointOnContour;!v.touched(C)&&C!==this;)C=C.nextPointOnContour;return C},Ii.prototype.prevTouched=function(v){for(var C=this.prevPointOnContour;!v.touched(C)&&C!==this;)C=C.prevPointOnContour;return C};var vs=Object.freeze(new Ii(0,0)),Qh={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Yi(v,C){switch(this.env=v,this.stack=[],this.prog=C,v){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=di,this.round=Su}}function ta(v){for(var C=v.tZone=new Array(v.gZone.length),k=0;k<C.length;k++)C[k]=new Ii(0,0)}function Us(v,C){var k,E=v.prog,L=v.ip,G=1;do if((k=E[++L])===88)G++;else if(k===89)G--;else if(k===64)L+=E[L+1]+1;else if(k===65)L+=2*E[L+1]+1;else if(176<=k&&k<=183)L+=k-176+1;else if(184<=k&&k<=191)L+=2*(k-184+1);else if(C&&G===1&&k===27)break;while(0<G);v.ip=L}function tl(v,C){c.DEBUG&&console.log(C.step,"SVTCA["+v.axis+"]"),C.fv=C.pv=C.dpv=v}function ra(v,C){c.DEBUG&&console.log(C.step,"SPVTCA["+v.axis+"]"),C.pv=C.dpv=v}function ju(v,C){c.DEBUG&&console.log(C.step,"SFVTCA["+v.axis+"]"),C.fv=v}function Cu(v,C){var k,L=C.stack,E=L.pop(),L=L.pop(),G=C.z2[E],H=C.z1[L];c.DEBUG&&console.log("SPVTL["+v+"]",E,L),E=v?(k=G.y-H.y,H.x-G.x):(k=H.x-G.x,H.y-G.y),C.pv=C.dpv=Fs(k,E)}function Tu(v,C){var k,L=C.stack,E=L.pop(),L=L.pop(),G=C.z2[E],H=C.z1[L];c.DEBUG&&console.log("SFVTL["+v+"]",E,L),E=v?(k=G.y-H.y,H.x-G.x):(k=H.x-G.x,H.y-G.y),C.fv=Fs(k,E)}function T(v){c.DEBUG&&console.log(v.step,"POP[]"),v.stack.pop()}function A(v,C){var k=C.stack.pop(),E=C.z0[k],L=C.fv,G=C.pv,H=(c.DEBUG&&console.log(C.step,"MDAP["+v+"]",k),G.distance(E,vs));v&&(H=C.round(H)),L.setRelative(E,vs,H,G),L.touch(E),C.rp0=C.rp1=k}function N(v,C){var k,E,L,G=C.z2,H=G.length-2;c.DEBUG&&console.log(C.step,"IUP["+v.axis+"]");for(var se=0;se<H;se++)k=G[se],v.touched(k)||(E=k.prevTouched(v))!==k&&(E===(L=k.nextTouched(v))&&v.setRelative(k,k,v.distance(E,E,!1,!0),v,!0),v.interpolate(k,E,L,v))}function V(v,C){for(var k=C.stack,E=v?C.rp1:C.rp2,L=(v?C.z0:C.z1)[E],G=C.fv,H=C.pv,se=C.loop,pe=C.z2;se--;){var de=k.pop(),Oe=pe[de],He=H.distance(L,L,!1,!0);G.setRelative(Oe,Oe,He,H),G.touch(Oe),c.DEBUG&&console.log(C.step,(1<C.loop?"loop "+(C.loop-se)+": ":"")+"SHP["+(v?"rp1":"rp2")+"]",de)}C.loop=1}function ee(v,C){for(var k=C.stack,H=v?C.rp1:C.rp2,E=(v?C.z0:C.z1)[H],L=C.fv,G=C.pv,H=k.pop(),se=C.z2[C.contours[H]],pe=se,de=(c.DEBUG&&console.log(C.step,"SHC["+v+"]",H),G.distance(E,E,!1,!0));pe!==E&&L.setRelative(pe,pe,de,G),(pe=pe.nextPointOnContour)!==se;);}function ne(v,C){var k,E,se=C.stack,L=v?C.rp1:C.rp2,L=(v?C.z0:C.z1)[L],G=C.fv,H=C.pv,se=se.pop();switch(c.DEBUG&&console.log(C.step,"SHZ["+v+"]",se),se){case 0:k=C.tZone;break;case 1:k=C.gZone;break;default:throw new Error("Invalid zone")}for(var pe=H.distance(L,L,!1,!0),de=k.length-2,Oe=0;Oe<de;Oe++)E=k[Oe],G.setRelative(E,E,pe,H)}function ue(v,C){var E=C.stack,k=E.pop()/64,E=E.pop(),L=C.z1[E],G=C.z0[C.rp0],H=C.fv,se=C.pv;H.setRelative(L,G,k,se),H.touch(L),c.DEBUG&&console.log(C.step,"MSIRP["+v+"]",k,E),C.rp1=C.rp0,C.rp2=E,v&&(C.rp0=E)}function Ae(v,C){var k=C.stack,se=k.pop(),k=k.pop(),E=C.z0[k],L=C.fv,G=C.pv,H=C.cvt[se],se=(c.DEBUG&&console.log(C.step,"MIAP["+v+"]",se,"(",H,")",k),G.distance(E,vs));v&&(Math.abs(se-H)<C.cvCutIn&&(se=H),se=C.round(se)),L.setRelative(E,vs,se,G),C.zp0===0&&(E.xo=E.x,E.yo=E.y),L.touch(E),C.rp0=C.rp1=k}function Ce(v,C){var k=C.stack,E=k.pop(),L=C.z2[E];c.DEBUG&&console.log(C.step,"GC["+v+"]",E),k.push(64*C.dpv.distance(L,vs,v,!1))}function ze(v,C){var E=C.stack,k=E.pop(),E=E.pop(),L=C.z1[k],G=C.z0[E],G=C.dpv.distance(G,L,v,v);c.DEBUG&&console.log(C.step,"MD["+v+"]",k,E,"->",G),C.stack.push(Math.round(64*G))}function Qe(v,C){var k=C.stack,E=k.pop(),L=C.fv,G=C.pv,H=C.ppem,se=C.deltaBase+16*(v-1),pe=C.deltaShift,de=C.z0;c.DEBUG&&console.log(C.step,"DELTAP["+v+"]",E,k);for(var Oe=0;Oe<E;Oe++){var He=k.pop(),Ne=k.pop();se+((240&Ne)>>4)===H&&(0<=(Ne=(15&Ne)-8)&&Ne++,c.DEBUG&&console.log(C.step,"DELTAPFIX",He,"by",Ne*pe),He=de[He],L.setRelative(He,He,Ne*pe,G))}}function mt(v,C){var k=C.stack,E=k.pop();c.DEBUG&&console.log(C.step,"ROUND[]"),k.push(64*C.round(E/64))}function Ke(v,C){var k=C.stack,E=k.pop(),L=C.ppem,G=C.deltaBase+16*(v-1),H=C.deltaShift;c.DEBUG&&console.log(C.step,"DELTAC["+v+"]",E,k);for(var se=0;se<E;se++){var pe=k.pop(),de=k.pop();G+((240&de)>>4)===L&&(0<=(de=(15&de)-8)&&de++,de=de*H,c.DEBUG&&console.log(C.step,"DELTACFIX",pe,"by",de),C.cvt[pe]+=de)}}function it(v,C){var k,L=C.stack,E=L.pop(),L=L.pop(),G=C.z2[E],H=C.z1[L];c.DEBUG&&console.log(C.step,"SDPVTL["+v+"]",E,L),E=v?(k=G.y-H.y,H.x-G.x):(k=H.x-G.x,H.y-G.y),C.dpv=Fs(k,E)}function Lt(v,C){var k=C.stack,E=C.prog,L=C.ip;c.DEBUG&&console.log(C.step,"PUSHB["+v+"]");for(var G=0;G<v;G++)k.push(E[++L]);C.ip=L}function Yt(v,C){var k=C.ip,E=C.prog,L=C.stack;c.DEBUG&&console.log(C.ip,"PUSHW["+v+"]");for(var G=0;G<v;G++){var H=E[++k]<<8|E[++k];32768&H&&(H=-(1+(65535^H))),L.push(H)}C.ip=k}function ot(v,C,k,E,L,G){var H,se,de=G.stack,pe=v&&de.pop(),de=de.pop(),Oe=G.rp0,Oe=G.z0[Oe],He=G.z1[de],Ne=G.minDis,we=G.fv,at=G.dpv,Ye=H=at.distance(He,Oe,!0,!0),rt=0<=Ye?1:-1;Ye=Math.abs(Ye),v&&(se=G.cvt[pe],E&&Math.abs(Ye-se)<G.cvCutIn&&(Ye=se)),k&&Ye<Ne&&(Ye=Ne),E&&(Ye=G.round(Ye)),we.setRelative(He,Oe,rt*Ye,at),we.touch(He),c.DEBUG&&console.log(G.step,(v?"MIRP[":"MDRP[")+(C?"M":"m")+(k?">":"_")+(E?"R":"_")+(L===0?"Gr":L===1?"Bl":L===2?"Wh":"")+"]",v?pe+"("+G.cvt[pe]+","+se+")":"",de,"(d =",H,"->",rt*Ye,")"),G.rp1=G.rp0,G.rp2=de,C&&(G.rp0=de)}xu.prototype.exec=function(v,C){if(typeof C!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var k=this.font,E=this._prepState;if(!E||E.ppem!==C){var L=this._fpgmState;if(!L){Yi.prototype=Qh,(L=this._fpgmState=new Yi("fpgm",k.tables.fpgm)).funcs=[],L.font=k,c.DEBUG&&(console.log("---EXEC FPGM---"),L.step=-1);try{Sn(L)}catch(de){return console.log("Hinting error in FPGM:"+de),void(this._errorState=3)}}Yi.prototype=L,(E=this._prepState=new Yi("prep",k.tables.prep)).ppem=C;var G=k.tables.cvt;if(G)for(var H=E.cvt=new Array(G.length),se=C/k.unitsPerEm,pe=0;pe<G.length;pe++)H[pe]=G[pe]*se;else E.cvt=[];c.DEBUG&&(console.log("---EXEC PREP---"),E.step=-1);try{Sn(E)}catch(de){this._errorState<2&&console.log("Hinting error in PREP:"+de),this._errorState=2}}if(!(1<this._errorState))try{return bn(v,E)}catch(de){this._errorState<1&&(console.log("Hinting error:"+de),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var bn=function(v,C){var k=C.ppem/C.font.unitsPerEm,E=k,L=v.components;if(Yi.prototype=C,L){for(var G=C.font,H=[],se=[],pe=0;pe<L.length;pe++){var de=L[pe],Oe=G.glyphs.get(de.glyphIndex),He=new Yi("glyf",Oe.instructions);c.DEBUG&&(console.log("---EXEC COMP "+pe+"---"),He.step=-1),fn(Oe,He,k,E);for(var Ne=Math.round(de.dx*k),we=Math.round(de.dy*E),at=He.gZone,Ye=He.contours,rt=0;rt<at.length;rt++){var We=at[rt];We.xTouched=We.yTouched=!1,We.xo=We.x=We.x+Ne,We.yo=We.y=We.y+we}var Xe=H.length;H.push.apply(H,at);for(var Nt=0;Nt<Ye.length;Nt++)se.push(Ye[Nt]+Xe)}v.instructions&&!He.inhibitGridFit&&((He=new Yi("glyf",v.instructions)).gZone=He.z0=He.z1=He.z2=H,He.contours=se,H.push(new Ii(0,0),new Ii(Math.round(v.advanceWidth*k),0)),c.DEBUG&&(console.log("---EXEC COMPOSITE---"),He.step=-1),Sn(He),H.length-=2)}else He=new Yi("glyf",v.instructions),c.DEBUG&&(console.log("---EXEC GLYPH---"),He.step=-1),fn(v,He,k,E),H=He.gZone;return H},fn=function(v,C,k,E){for(var L,G,H,se=v.points||[],pe=se.length,de=C.gZone=C.z0=C.z1=C.z2=[],Oe=C.contours=[],He=0;He<pe;He++)L=se[He],de[He]=new Ii(L.x*k,L.y*E,L.lastPointOfContour,L.onCurve);for(var Ne=0;Ne<pe;Ne++)L=de[Ne],G||(G=L,Oe.push(Ne)),L.lastPointOfContour?((L.nextPointOnContour=G).prevPointOnContour=L,G=void 0):(H=de[Ne+1],(L.nextPointOnContour=H).prevPointOnContour=L);if(!C.inhibitGridFit){if(c.DEBUG){console.log("PROCESSING GLYPH",C.stack);for(var we=0;we<pe;we++)console.log(we,de[we].x,de[we].y)}if(de.push(new Ii(0,0),new Ii(Math.round(v.advanceWidth*k),0)),Sn(C),de.length-=2,c.DEBUG){console.log("FINISHED GLYPH",C.stack);for(var at=0;at<pe;at++)console.log(at,de[at].x,de[at].y)}}},Sn=function(v){var C=v.prog;if(C){var k,E=C.length;for(v.ip=0;v.ip<E;v.ip++){if(c.DEBUG&&v.step++,!(k=Pr[C[v.ip]]))throw new Error("unknown instruction: 0x"+Number(C[v.ip]).toString(16));k(v)}}},Pr=[tl.bind(void 0,Oi),tl.bind(void 0,di),ra.bind(void 0,Oi),ra.bind(void 0,di),ju.bind(void 0,Oi),ju.bind(void 0,di),Cu.bind(void 0,0),Cu.bind(void 0,1),Tu.bind(void 0,0),Tu.bind(void 0,1),function(v){var C=(k=v.stack).pop(),k=k.pop();c.DEBUG&&console.log(v.step,"SPVFS[]",C,k),v.pv=v.dpv=Fs(k,C)},function(v){var C=(k=v.stack).pop(),k=k.pop();c.DEBUG&&console.log(v.step,"SPVFS[]",C,k),v.fv=Fs(k,C)},function(v){var C=v.stack,k=v.pv;c.DEBUG&&console.log(v.step,"GPV[]"),C.push(16384*k.x),C.push(16384*k.y)},function(v){var C=v.stack,k=v.fv;c.DEBUG&&console.log(v.step,"GFV[]"),C.push(16384*k.x),C.push(16384*k.y)},function(v){v.fv=v.pv,c.DEBUG&&console.log(v.step,"SFVTPV[]")},function(C){var k=(H=C.stack).pop(),E=H.pop(),L=H.pop(),G=H.pop(),H=H.pop(),pe=C.z0,Oe=C.z1,se=pe[k],pe=pe[E],de=Oe[L],Oe=Oe[G],C=C.z2[H],k=(c.DEBUG&&console.log("ISECT[], ",k,E,L,G,H),se.x),E=se.y,L=pe.x,G=pe.y,H=de.x,se=de.y,pe=Oe.x,de=Oe.y,Oe=(k-L)*(se-de)-(E-G)*(H-pe),He=k*G-E*L,Ne=H*de-se*pe;C.x=(He*(H-pe)-Ne*(k-L))/Oe,C.y=(He*(se-de)-Ne*(E-G))/Oe},function(v){v.rp0=v.stack.pop(),c.DEBUG&&console.log(v.step,"SRP0[]",v.rp0)},function(v){v.rp1=v.stack.pop(),c.DEBUG&&console.log(v.step,"SRP1[]",v.rp1)},function(v){v.rp2=v.stack.pop(),c.DEBUG&&console.log(v.step,"SRP2[]",v.rp2)},function(v){var C=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"SZP0[]",C),v.zp0=C){case 0:v.tZone||ta(v),v.z0=v.tZone;break;case 1:v.z0=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var C=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"SZP1[]",C),v.zp1=C){case 0:v.tZone||ta(v),v.z1=v.tZone;break;case 1:v.z1=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var C=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"SZP2[]",C),v.zp2=C){case 0:v.tZone||ta(v),v.z2=v.tZone;break;case 1:v.z2=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var C=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"SZPS[]",C),v.zp0=v.zp1=v.zp2=C){case 0:v.tZone||ta(v),v.z0=v.z1=v.z2=v.tZone;break;case 1:v.z0=v.z1=v.z2=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){v.loop=v.stack.pop(),c.DEBUG&&console.log(v.step,"SLOOP[]",v.loop)},function(v){c.DEBUG&&console.log(v.step,"RTG[]"),v.round=Su},function(v){c.DEBUG&&console.log(v.step,"RTHG[]"),v.round=Yh},function(v){var C=v.stack.pop();c.DEBUG&&console.log(v.step,"SMD[]",C),v.minDis=C/64},function(v){c.DEBUG&&console.log(v.step,"ELSE[]"),Us(v,!1)},function(v){var C=v.stack.pop();c.DEBUG&&console.log(v.step,"JMPR[]",C),v.ip+=C-1},function(v){var C=v.stack.pop();c.DEBUG&&console.log(v.step,"SCVTCI[]",C),v.cvCutIn=C/64},void 0,void 0,function(v){var C=v.stack;c.DEBUG&&console.log(v.step,"DUP[]"),C.push(C[C.length-1])},T,function(v){c.DEBUG&&console.log(v.step,"CLEAR[]"),v.stack.length=0},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"SWAP[]"),C.push(k),C.push(E)},function(v){var C=v.stack;c.DEBUG&&console.log(v.step,"DEPTH[]"),C.push(C.length)},function(v){var C=v.stack,k=C.pop();c.DEBUG&&console.log(v.step,"CINDEX[]",k),C.push(C[C.length-k])},function(v){var C=v.stack,k=C.pop();c.DEBUG&&console.log(v.step,"MINDEX[]",k),C.push(C.splice(C.length-k,1)[0])},void 0,void 0,void 0,function(v){var C=(E=v.stack).pop(),k=E.pop(),E=(c.DEBUG&&console.log(v.step,"LOOPCALL[]",C,k),v.ip),L=v.prog;v.prog=v.funcs[C];for(var G=0;G<k;G++)Sn(v),c.DEBUG&&console.log(++v.step,G+1<k?"next loopcall":"done loopcall",G);v.ip=E,v.prog=L},function(v){var C=v.stack.pop(),k=(c.DEBUG&&console.log(v.step,"CALL[]",C),v.ip),E=v.prog;v.prog=v.funcs[C],Sn(v),v.ip=k,v.prog=E,c.DEBUG&&console.log(++v.step,"returning from",C)},function(v){if(v.env!=="fpgm")throw new Error("FDEF not allowed here");var E=v.stack,C=v.prog,k=v.ip,E=E.pop(),L=k;for(c.DEBUG&&console.log(v.step,"FDEF[]",E);C[++k]!==45;);v.ip=k,v.funcs[E]=C.slice(L+1,k)},void 0,A.bind(void 0,0),A.bind(void 0,1),N.bind(void 0,Oi),N.bind(void 0,di),V.bind(void 0,0),V.bind(void 0,1),ee.bind(void 0,0),ee.bind(void 0,1),ne.bind(void 0,0),ne.bind(void 0,1),function(v){for(var C=v.stack,k=v.loop,E=v.fv,L=C.pop()/64,G=v.z2;k--;){var H=C.pop(),se=G[H];c.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-k)+": ":"")+"SHPIX[]",H,L),E.setRelative(se,se,L),E.touch(se)}v.loop=1},function(v){for(var C=v.stack,k=v.rp1,E=v.rp2,L=v.loop,G=v.z0[k],H=v.z1[E],se=v.fv,pe=v.dpv,de=v.z2;L--;){var Oe=C.pop(),He=de[Oe];c.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-L)+": ":"")+"IP[]",Oe,k,"<->",E),se.interpolate(He,G,H,pe),se.touch(He)}v.loop=1},ue.bind(void 0,0),ue.bind(void 0,1),function(v){for(var C=v.stack,k=v.rp0,E=v.z0[k],L=v.loop,G=v.fv,H=v.pv,se=v.z1;L--;){var pe=C.pop(),de=se[pe];c.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-L)+": ":"")+"ALIGNRP[]",pe),G.setRelative(de,E,0,H),G.touch(de)}v.loop=1},function(v){c.DEBUG&&console.log(v.step,"RTDG[]"),v.round=Xh},Ae.bind(void 0,0),Ae.bind(void 0,1),function(v){var C=v.prog,k=v.ip,E=v.stack,L=C[++k];c.DEBUG&&console.log(v.step,"NPUSHB[]",L);for(var G=0;G<L;G++)E.push(C[++k]);v.ip=k},function(v){var C=v.ip,k=v.prog,E=v.stack,L=k[++C];c.DEBUG&&console.log(v.step,"NPUSHW[]",L);for(var G=0;G<L;G++){var H=k[++C]<<8|k[++C];32768&H&&(H=-(1+(65535^H))),E.push(H)}v.ip=C},function(v){var E=v.stack,C=(C=v.store)||(v.store=[]),k=E.pop(),E=E.pop();c.DEBUG&&console.log(v.step,"WS",k,E),C[E]=k},function(L){var C=L.stack,k=L.store,E=C.pop(),L=(c.DEBUG&&console.log(L.step,"RS",E),k&&k[E]||0);C.push(L)},function(v){var C=(k=v.stack).pop(),k=k.pop();c.DEBUG&&console.log(v.step,"WCVTP",C,k),v.cvt[k]=C/64},function(v){var C=v.stack,k=C.pop();c.DEBUG&&console.log(v.step,"RCVT",k),C.push(64*v.cvt[k])},Ce.bind(void 0,0),Ce.bind(void 0,1),void 0,ze.bind(void 0,0),ze.bind(void 0,1),function(v){c.DEBUG&&console.log(v.step,"MPPEM[]"),v.stack.push(v.ppem)},void 0,function(v){c.DEBUG&&console.log(v.step,"FLIPON[]"),v.autoFlip=!0},void 0,void 0,function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"LT[]",k,E),C.push(E<k?1:0)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"LTEQ[]",k,E),C.push(E<=k?1:0)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"GT[]",k,E),C.push(k<E?1:0)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"GTEQ[]",k,E),C.push(k<=E?1:0)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"EQ[]",k,E),C.push(k===E?1:0)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"NEQ[]",k,E),C.push(k!==E?1:0)},function(v){var C=v.stack,k=C.pop();c.DEBUG&&console.log(v.step,"ODD[]",k),C.push(Math.trunc(k)%2?1:0)},function(v){var C=v.stack,k=C.pop();c.DEBUG&&console.log(v.step,"EVEN[]",k),C.push(Math.trunc(k)%2?0:1)},function(v){var C=v.stack.pop();c.DEBUG&&console.log(v.step,"IF[]",C),C||(Us(v,!0),c.DEBUG&&console.log(v.step,"EIF[]"))},function(v){c.DEBUG&&console.log(v.step,"EIF[]")},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"AND[]",k,E),C.push(k&&E?1:0)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"OR[]",k,E),C.push(k||E?1:0)},function(v){var C=v.stack,k=C.pop();c.DEBUG&&console.log(v.step,"NOT[]",k),C.push(k?0:1)},Qe.bind(void 0,1),function(v){var C=v.stack.pop();c.DEBUG&&console.log(v.step,"SDB[]",C),v.deltaBase=C},function(v){var C=v.stack.pop();c.DEBUG&&console.log(v.step,"SDS[]",C),v.deltaShift=Math.pow(.5,C)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"ADD[]",k,E),C.push(E+k)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"SUB[]",k,E),C.push(E-k)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"DIV[]",k,E),C.push(64*E/k)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"MUL[]",k,E),C.push(E*k/64)},function(v){var C=v.stack,k=C.pop();c.DEBUG&&console.log(v.step,"ABS[]",k),C.push(Math.abs(k))},function(v){var C=v.stack,k=C.pop();c.DEBUG&&console.log(v.step,"NEG[]",k),C.push(-k)},function(v){var C=v.stack,k=C.pop();c.DEBUG&&console.log(v.step,"FLOOR[]",k),C.push(64*Math.floor(k/64))},function(v){var C=v.stack,k=C.pop();c.DEBUG&&console.log(v.step,"CEILING[]",k),C.push(64*Math.ceil(k/64))},mt.bind(void 0,0),mt.bind(void 0,1),mt.bind(void 0,2),mt.bind(void 0,3),void 0,void 0,void 0,void 0,function(v){var C=(k=v.stack).pop(),k=k.pop();c.DEBUG&&console.log(v.step,"WCVTF[]",C,k),v.cvt[k]=C*v.ppem/v.font.unitsPerEm},Qe.bind(void 0,2),Qe.bind(void 0,3),Ke.bind(void 0,1),Ke.bind(void 0,2),Ke.bind(void 0,3),function(v){var C,k=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"SROUND[]",k),v.round=el,192&k){case 0:C=.5;break;case 64:C=1;break;case 128:C=2;break;default:throw new Error("invalid SROUND value")}switch(v.srPeriod=C,48&k){case 0:v.srPhase=0;break;case 16:v.srPhase=.25*C;break;case 32:v.srPhase=.5*C;break;case 48:v.srPhase=.75*C;break;default:throw new Error("invalid SROUND value")}v.srThreshold=(k&=15)===0?0:(k/8-.5)*C},function(v){var C,k=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"S45ROUND[]",k),v.round=el,192&k){case 0:C=Math.sqrt(2)/2;break;case 64:C=Math.sqrt(2);break;case 128:C=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(v.srPeriod=C,48&k){case 0:v.srPhase=0;break;case 16:v.srPhase=.25*C;break;case 32:v.srPhase=.5*C;break;case 48:v.srPhase=.75*C;break;default:throw new Error("invalid S45ROUND value")}v.srThreshold=(k&=15)===0?0:(k/8-.5)*C},void 0,void 0,function(v){c.DEBUG&&console.log(v.step,"ROFF[]"),v.round=$h},void 0,function(v){c.DEBUG&&console.log(v.step,"RUTG[]"),v.round=Kh},function(v){c.DEBUG&&console.log(v.step,"RDTG[]"),v.round=Jh},T,T,void 0,void 0,void 0,void 0,void 0,function(v){var C=v.stack.pop();c.DEBUG&&console.log(v.step,"SCANCTRL[]",C)},it.bind(void 0,0),it.bind(void 0,1),function(v){var C=v.stack,k=C.pop(),E=0;c.DEBUG&&console.log(v.step,"GETINFO[]",k),1&k&&(E=35),32&k&&(E|=4096),C.push(E)},void 0,function(v){var C=v.stack,k=C.pop(),E=C.pop(),L=C.pop();c.DEBUG&&console.log(v.step,"ROLL[]"),C.push(E),C.push(k),C.push(L)},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"MAX[]",k,E),C.push(Math.max(E,k))},function(v){var C=v.stack,k=C.pop(),E=C.pop();c.DEBUG&&console.log(v.step,"MIN[]",k,E),C.push(Math.min(E,k))},function(v){var C=v.stack.pop();c.DEBUG&&console.log(v.step,"SCANTYPE[]",C)},function(v){var C=v.stack.pop(),k=v.stack.pop();switch(c.DEBUG&&console.log(v.step,"INSTCTRL[]",C,k),C){case 1:return void(v.inhibitGridFit=!!k);case 2:return void(v.ignoreCvt=!!k);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Lt.bind(void 0,1),Lt.bind(void 0,2),Lt.bind(void 0,3),Lt.bind(void 0,4),Lt.bind(void 0,5),Lt.bind(void 0,6),Lt.bind(void 0,7),Lt.bind(void 0,8),Yt.bind(void 0,1),Yt.bind(void 0,2),Yt.bind(void 0,3),Yt.bind(void 0,4),Yt.bind(void 0,5),Yt.bind(void 0,6),Yt.bind(void 0,7),Yt.bind(void 0,8),ot.bind(void 0,0,0,0,0,0),ot.bind(void 0,0,0,0,0,1),ot.bind(void 0,0,0,0,0,2),ot.bind(void 0,0,0,0,0,3),ot.bind(void 0,0,0,0,1,0),ot.bind(void 0,0,0,0,1,1),ot.bind(void 0,0,0,0,1,2),ot.bind(void 0,0,0,0,1,3),ot.bind(void 0,0,0,1,0,0),ot.bind(void 0,0,0,1,0,1),ot.bind(void 0,0,0,1,0,2),ot.bind(void 0,0,0,1,0,3),ot.bind(void 0,0,0,1,1,0),ot.bind(void 0,0,0,1,1,1),ot.bind(void 0,0,0,1,1,2),ot.bind(void 0,0,0,1,1,3),ot.bind(void 0,0,1,0,0,0),ot.bind(void 0,0,1,0,0,1),ot.bind(void 0,0,1,0,0,2),ot.bind(void 0,0,1,0,0,3),ot.bind(void 0,0,1,0,1,0),ot.bind(void 0,0,1,0,1,1),ot.bind(void 0,0,1,0,1,2),ot.bind(void 0,0,1,0,1,3),ot.bind(void 0,0,1,1,0,0),ot.bind(void 0,0,1,1,0,1),ot.bind(void 0,0,1,1,0,2),ot.bind(void 0,0,1,1,0,3),ot.bind(void 0,0,1,1,1,0),ot.bind(void 0,0,1,1,1,1),ot.bind(void 0,0,1,1,1,2),ot.bind(void 0,0,1,1,1,3),ot.bind(void 0,1,0,0,0,0),ot.bind(void 0,1,0,0,0,1),ot.bind(void 0,1,0,0,0,2),ot.bind(void 0,1,0,0,0,3),ot.bind(void 0,1,0,0,1,0),ot.bind(void 0,1,0,0,1,1),ot.bind(void 0,1,0,0,1,2),ot.bind(void 0,1,0,0,1,3),ot.bind(void 0,1,0,1,0,0),ot.bind(void 0,1,0,1,0,1),ot.bind(void 0,1,0,1,0,2),ot.bind(void 0,1,0,1,0,3),ot.bind(void 0,1,0,1,1,0),ot.bind(void 0,1,0,1,1,1),ot.bind(void 0,1,0,1,1,2),ot.bind(void 0,1,0,1,1,3),ot.bind(void 0,1,1,0,0,0),ot.bind(void 0,1,1,0,0,1),ot.bind(void 0,1,1,0,0,2),ot.bind(void 0,1,1,0,0,3),ot.bind(void 0,1,1,0,1,0),ot.bind(void 0,1,1,0,1,1),ot.bind(void 0,1,1,0,1,2),ot.bind(void 0,1,1,0,1,3),ot.bind(void 0,1,1,1,0,0),ot.bind(void 0,1,1,1,0,1),ot.bind(void 0,1,1,1,0,2),ot.bind(void 0,1,1,1,0,3),ot.bind(void 0,1,1,1,1,0),ot.bind(void 0,1,1,1,1,1),ot.bind(void 0,1,1,1,1,2),ot.bind(void 0,1,1,1,1,3)],sr=Array.from||function(v){return v.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function mr(v){(v=v||{}).empty||(gs(v.familyName,"When creating a new Font object, familyName is required."),gs(v.styleName,"When creating a new Font object, styleName is required."),gs(v.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),gs(v.ascender,"When creating a new Font object, ascender is required."),gs(v.descender,"When creating a new Font object, descender is required."),gs(v.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:v.familyName||" "},fontSubfamily:{en:v.styleName||" "},fullName:{en:v.fullName||v.familyName+" "+v.styleName},postScriptName:{en:v.postScriptName||(v.familyName+v.styleName).replace(/\s/g,"")},designer:{en:v.designer||" "},designerURL:{en:v.designerURL||" "},manufacturer:{en:v.manufacturer||" "},manufacturerURL:{en:v.manufacturerURL||" "},license:{en:v.license||" "},licenseURL:{en:v.licenseURL||" "},version:{en:v.version||"Version 0.1"},description:{en:v.description||" "},copyright:{en:v.copyright||" "},trademark:{en:v.trademark||" "}},this.unitsPerEm=v.unitsPerEm||1e3,this.ascender=v.ascender,this.descender=v.descender,this.createdTimestamp=v.createdTimestamp,this.tables={os2:{usWeightClass:v.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:v.widthClass||this.usWidthClasses.MEDIUM,fsSelection:v.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new kt.GlyphSet(this,v.glyphs||[]),this.encoding=new Re(this),this.position=new Jo(this),this.substitution=new wi(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new xu(this):void 0)}})}function xr(v,C){var k,E=JSON.stringify(v),L=256;for(k in C){var G=parseInt(k);if(G&&!(G<256)){if(JSON.stringify(C[k])===E)return G;L<=G&&(L=G+1)}}return C[L]=v,L}mr.prototype.hasChar=function(v){return this.encoding.charToGlyphIndex(v)!==null},mr.prototype.charToGlyphIndex=function(v){return this.encoding.charToGlyphIndex(v)},mr.prototype.charToGlyph=function(v){return v=this.charToGlyphIndex(v),this.glyphs.get(v)||this.glyphs.get(0)},mr.prototype.stringToGlyphs=function(v,C){C=C||this.defaultRenderOptions;for(var k=sr(v),E=[],L=0;L<k.length;L+=1){var G=k[L];E.push(this.charToGlyphIndex(G))}var H=E.length;if(C.features){var v=C.script||this.substitution.getDefaultScriptName(),se=[];C.features.liga&&(se=se.concat(this.substitution.getFeature("liga",v,C.language))),C.features.rlig&&(se=se.concat(this.substitution.getFeature("rlig",v,C.language)));for(var pe=0;pe<H;pe+=1)for(var de=0;de<se.length;de++){for(var Oe=se[de],He=Oe.sub,Ne=He.length,we=0;we<Ne&&He[we]===E[pe+we];)we++;we===Ne&&(E.splice(pe,Ne,Oe.by),H=H-Ne+1)}}for(var at=new Array(H),Ye=this.glyphs.get(0),rt=0;rt<H;rt+=1)at[rt]=this.glyphs.get(E[rt])||Ye;return at},mr.prototype.nameToGlyphIndex=function(v){return this.glyphNames.nameToGlyphIndex(v)},mr.prototype.nameToGlyph=function(v){return v=this.nameToGlyphIndex(v),this.glyphs.get(v)||this.glyphs.get(0)},mr.prototype.glyphIndexToName=function(v){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(v):""},mr.prototype.getKerningValue=function(v,C){v=v.index||v,C=C.index||C;var k=this.position.defaultKerningTables;return k?this.position.getKerningValue(k,v,C):this.kerningPairs[v+","+C]||0},mr.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},mr.prototype.forEachGlyph=function(v,C,k,E,L,G){C=C!==void 0?C:0,k=k!==void 0?k:0,L=L||this.defaultRenderOptions;var H,se=1/this.unitsPerEm*(E=E!==void 0?E:72),pe=this.stringToGlyphs(v,L);L.kerning&&(v=L.script||this.position.getDefaultScriptName(),H=this.position.getKerningTables(v,L.language));for(var de=0;de<pe.length;de+=1){var Oe=pe[de];G.call(this,Oe,C,k,E,L),Oe.advanceWidth&&(C+=Oe.advanceWidth*se),L.kerning&&de<pe.length-1&&(C+=(H?this.position.getKerningValue(H,Oe.index,pe[de+1].index):this.getKerningValue(Oe,pe[de+1]))*se),L.letterSpacing?C+=L.letterSpacing*E:L.tracking&&(C+=L.tracking/1e3*E)}return C},mr.prototype.getPath=function(v,C,k,E,L){var G=new X;return this.forEachGlyph(v,C,k,E,L,function(H,se,pe,de){H=H.getPath(se,pe,de,L,this),G.extend(H)}),G},mr.prototype.getPaths=function(v,C,k,E,L){var G=[];return this.forEachGlyph(v,C,k,E,L,function(H,se,pe,de){H=H.getPath(se,pe,de,L,this),G.push(H)}),G},mr.prototype.getAdvanceWidth=function(v,C,k){return this.forEachGlyph(v,0,0,C,k,function(){})},mr.prototype.draw=function(v,C,k,E,L,G){this.getPath(C,k,E,L,G).draw(v)},mr.prototype.drawPoints=function(v,C,k,E,L,G){this.forEachGlyph(C,k,E,L,G,function(H,se,pe,de){H.drawPoints(v,se,pe,de)})},mr.prototype.drawMetrics=function(v,C,k,E,L,G){this.forEachGlyph(C,k,E,L,G,function(H,se,pe,de){H.drawMetrics(v,se,pe,de)})},mr.prototype.getEnglishName=function(v){if(v=this.names[v],v)return v.en},mr.prototype.validate=function(){var v=this;function C(k){k=v.getEnglishName(k),k&&k.trim().length}C("fontFamily"),C("weightName"),C("manufacturer"),C("copyright"),C("version"),this.unitsPerEm},mr.prototype.toTables=function(){return zh.fontToTable(this)},mr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},mr.prototype.toArrayBuffer=function(){for(var v=this.toTables().encode(),C=new ArrayBuffer(v.length),k=new Uint8Array(C),E=0;E<v.length;E++)k[E]=v[E];return C},mr.prototype.download=function(v){var C=this.getEnglishName("fontFamily"),k=this.getEnglishName("fontSubfamily"),E=(v=v||C.replace(/\s/g,"")+"-"+k+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,E.byteLength,function(L){L.root.getFile(v,{create:!0},function(G){G.createWriter(function(H){var se=new DataView(E),se=new Blob([se],{type:"font/opentype"});H.write(se),H.addEventListener("writeend",function(){location.href=G.toURL()},!1)})})},function(L){throw new Error(L.name+": "+L.message)})):(C=r("fs"),k=function(L){for(var G=new o(L.byteLength),H=new Uint8Array(L),se=0;se<G.length;++se)G[se]=H[se];return G}(E),C.writeFileSync(v,k))},mr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},mr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},mr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var rn={make:function(v,C){var k=new Ue.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:v.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:v.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*v.axes.length}]);k.offsetToData=k.sizeOf();for(var E,L,G,H=0;H<v.axes.length;H++)k.fields=k.fields.concat((E=H,L=v.axes[H],G=C,G=xr(L.name,C),[{name:"tag_"+E,type:"TAG",value:L.tag},{name:"minValue_"+E,type:"FIXED",value:L.minValue<<16},{name:"defaultValue_"+E,type:"FIXED",value:L.defaultValue<<16},{name:"maxValue_"+E,type:"FIXED",value:L.maxValue<<16},{name:"flags_"+E,type:"USHORT",value:0},{name:"nameID_"+E,type:"USHORT",value:G}]));for(var se=0;se<v.instances.length;se++)k.fields=k.fields.concat(function(pe,de,Oe,He){for(var Ne=[{name:"nameID_"+pe,type:"USHORT",value:xr(de.name,He)},{name:"flags_"+pe,type:"USHORT",value:0}],we=0;we<Oe.length;++we){var at=Oe[we].tag;Ne.push({name:"axis_"+pe+" "+at,type:"FIXED",value:de.coordinates[at]<<16})}return Ne}(se,v.instances[se],v.axes,C));return k},parse:function(v,C,k){for(var E,L,G,H,se=new Pe.Parser(v,C),pe=se.parseULong(),de=(B.argument(pe===65536,"Unsupported fvar table version."),se.parseOffset16()),Oe=(se.skip("uShort",1),se.parseUShort()),He=se.parseUShort(),Ne=se.parseUShort(),we=se.parseUShort(),at=[],Ye=0;Ye<Oe;Ye++)at.push((E=v,L=C+de+Ye*He,G=k,H={},E=new Pe.Parser(E,L),H.tag=E.parseTag(),H.minValue=E.parseFixed(),H.defaultValue=E.parseFixed(),H.maxValue=E.parseFixed(),E.skip("uShort",1),H.name=G[E.parseUShort()]||{},H));for(var rt=[],We=C+de+Oe*He,Xe=0;Xe<Ne;Xe++)rt.push(function(Nt,$t,Pt,Ft){var pr={},Br=new Pe.Parser(Nt,$t);pr.name=Ft[Br.parseUShort()]||{},Br.skip("uShort",1),pr.coordinates={};for(var ln=0;ln<Pt.length;++ln)pr.coordinates[Pt[ln].tag]=Br.parseFixed();return pr}(v,We+Xe*we,at,k));return{axes:at,instances:rt}}},Fn=new Array(10);Fn[1]=function(){var v=this.offset+this.relativeOffset,C=this.parseUShort();return C===1?{posFormat:1,coverage:this.parsePointer(je.coverage),value:this.parseValueRecord()}:C===2?{posFormat:2,coverage:this.parsePointer(je.coverage),values:this.parseValueRecordList()}:void B.assert(!1,"0x"+v.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Fn[2]=function(){var v,C,k,E,G=this.offset+this.relativeOffset,L=this.parseUShort(),G=(B.assert(L===1||L===2,"0x"+G.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(je.coverage)),H=this.parseUShort(),se=this.parseUShort();return L===1?{posFormat:L,coverage:G,valueFormat1:H,valueFormat2:se,pairSets:this.parseList(je.pointer(je.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(H),value2:this.parseValueRecord(se)}})))}:L===2?(v=this.parsePointer(je.classDef),C=this.parsePointer(je.classDef),k=this.parseUShort(),E=this.parseUShort(),{posFormat:L,coverage:G,valueFormat1:H,valueFormat2:se,classDef1:v,classDef2:C,class1Count:k,class2Count:E,classRecords:this.parseList(k,je.list(E,function(){return{value1:this.parseValueRecord(H),value2:this.parseValueRecord(se)}}))}):void 0},Fn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Fn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Fn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Fn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Fn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Fn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Fn[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var na=new Array(10),ri={parse:function(v,C){return C=(v=new je(v,C=C||0)).parseVersion(1),B.argument(C===1||C===1.1,"Unsupported GPOS table version "+C),C===1?{version:C,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList(Fn)}:{version:C,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList(Fn),variations:v.parseFeatureVariationsList()}},make:function(v){return new Ue.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ue.ScriptList(v.scripts)},{name:"features",type:"TABLE",value:new Ue.FeatureList(v.features)},{name:"lookups",type:"TABLE",value:new Ue.LookupList(v.lookups,na)}])}},bs={parse:function(v,C){if(v=new Pe.Parser(v,C),(C=v.parseUShort())===0){var k=v,E={},He=(k.skip("uShort"),k.parseUShort()),L=(B.argument(He===0,"Unsupported kern sub-table version."),k.skip("uShort",2),k.parseUShort());k.skip("uShort",3);for(var G=0;G<L;G+=1){var H=k.parseUShort(),se=k.parseUShort(),pe=k.parseShort();E[H+","+se]=pe}return E}if(C!==1)throw new Error("Unsupported kern table version ("+C+").");var de=v,Oe={},He=(de.skip("uShort"),1<de.parseULong()&&console.warn("Only the first kern subtable is supported."),de.skip("uLong"),255&de.parseUShort());if(de.skip("uShort"),He==0){var Ne=de.parseUShort();de.skip("uShort",3);for(var we=0;we<Ne;we+=1){var at=de.parseUShort(),Ye=de.parseUShort(),rt=de.parseShort();Oe[at+","+Ye]=rt}}return Oe}},_s={parse:function(v,C,k,E){for(var L=new Pe.Parser(v,C),G=E?L.parseUShort:L.parseULong,H=[],se=0;se<k+1;se+=1){var pe=G.call(L);E&&(pe*=2),H.push(pe)}return H}};function qn(v,C){r("fs").readFile(v,function(k,E){if(k)return C(k.message);C(null,Bs(E))})}function Ki(v,C){var k=new XMLHttpRequest;k.open("get",v,!0),k.responseType="arraybuffer",k.onload=function(){return k.response?C(null,k.response):C("Font could not be loaded: "+k.statusText)},k.onerror=function(){C("Font could not be loaded")},k.send()}function ni(v,C){for(var k=[],E=12,L=0;L<C;L+=1){var G=Pe.getTag(v,E),H=Pe.getULong(v,E+4),se=Pe.getULong(v,E+8),pe=Pe.getULong(v,E+12);k.push({tag:G,checksum:H,offset:se,length:pe,compression:!1}),E+=16}return k}function Nr(k,C){if(C.compression!=="WOFF")return{data:k,offset:C.offset};var k=new Uint8Array(k.buffer,C.offset+2,C.compressedLength-2),E=new Uint8Array(C.length);if(Z(k,E),E.byteLength!==C.length)throw new Error("Decompression error: "+C.tag+" decompressed length doesn't match recorded length");return{data:new DataView(E.buffer,0),offset:0}}function ia(Xe){var C,k,E,L,G,H,se,pe,de,Oe,He,Ne,we,at,Ye=new mr({empty:!0}),rt=new DataView(Xe,0),We=[],Xe=Pe.getTag(rt,0);if(Xe===String.fromCharCode(0,1,0,0)||Xe==="true"||Xe==="typ1")Ye.outlinesFormat="truetype",We=ni(rt,E=Pe.getUShort(rt,4));else if(Xe==="OTTO")Ye.outlinesFormat="cff",We=ni(rt,E=Pe.getUShort(rt,4));else{if(Xe!=="wOFF")throw new Error("Unsupported OpenType signature "+Xe);var Nt=Pe.getTag(rt,4);if(Nt===String.fromCharCode(0,1,0,0))Ye.outlinesFormat="truetype";else{if(Nt!=="OTTO")throw new Error("Unsupported OpenType flavor "+Xe);Ye.outlinesFormat="cff"}We=function(Hr,Ar){for(var Pn=[],Jr=44,nn=0;nn<Ar;nn+=1){var Fr=Pe.getTag(Hr,Jr),wn=Pe.getULong(Hr,Jr+4),Ji=Pe.getULong(Hr,Jr+8),Fi=Pe.getULong(Hr,Jr+12),sa=void 0,sa=Ji<Fi&&"WOFF";Pn.push({tag:Fr,offset:wn,compression:sa,compressedLength:Ji,length:Fi}),Jr+=20}return Pn}(rt,E=Pe.getUShort(rt,12))}for(var $t=0;$t<E;$t+=1){var Pt=We[$t],Ft=void 0;switch(Pt.tag){case"cmap":Ft=Nr(rt,Pt),Ye.tables.cmap=J.parse(Ft.data,Ft.offset),Ye.encoding=new Ge(Ye.tables.cmap);break;case"cvt ":Ft=Nr(rt,Pt),at=new Pe.Parser(Ft.data,Ft.offset),Ye.tables.cvt=at.parseShortList(Pt.length/2);break;case"fvar":G=Pt;break;case"fpgm":Ft=Nr(rt,Pt),at=new Pe.Parser(Ft.data,Ft.offset),Ye.tables.fpgm=at.parseByteList(Pt.length);break;case"head":Ft=Nr(rt,Pt),Ye.tables.head=ti.parse(Ft.data,Ft.offset),Ye.unitsPerEm=Ye.tables.head.unitsPerEm,C=Ye.tables.head.indexToLocFormat;break;case"hhea":Ft=Nr(rt,Pt),Ye.tables.hhea=_e.parse(Ft.data,Ft.offset),Ye.ascender=Ye.tables.hhea.ascender,Ye.descender=Ye.tables.hhea.descender,Ye.numberOfHMetrics=Ye.tables.hhea.numberOfHMetrics;break;case"hmtx":de=Pt;break;case"ltag":Ft=Nr(rt,Pt),k=bt.parse(Ft.data,Ft.offset);break;case"maxp":Ft=Nr(rt,Pt),Ye.tables.maxp=ut.parse(Ft.data,Ft.offset),Ye.numGlyphs=Ye.tables.maxp.numGlyphs;break;case"name":Ne=Pt;break;case"OS/2":Ft=Nr(rt,Pt),Ye.tables.os2=dn.parse(Ft.data,Ft.offset);break;case"post":Ft=Nr(rt,Pt),Ye.tables.post=bu.parse(Ft.data,Ft.offset),Ye.glyphNames=new ht(Ye.tables.post);break;case"prep":Ft=Nr(rt,Pt),at=new Pe.Parser(Ft.data,Ft.offset),Ye.tables.prep=at.parseByteList(Pt.length);break;case"glyf":H=Pt;break;case"loca":He=Pt;break;case"CFF ":L=Pt;break;case"kern":Oe=Pt;break;case"GPOS":se=Pt;break;case"GSUB":pe=Pt;break;case"meta":we=Pt}}if(Nt=Nr(rt,Ne),Ye.tables.name=Vr.parse(Nt.data,Nt.offset,k),Ye.names=Ye.tables.name,H&&He)Xe=C===0,Nt=Nr(rt,He),Nt=_s.parse(Nt.data,Nt.offset,Ye.numGlyphs,Xe),Xe=Nr(rt,H),Ye.glyphs=ea.parse(Xe.data,Xe.offset,Nt,Ye);else{if(!L)throw new Error("Font doesn't contain TrueType or CFF outlines.");Xe=Nr(rt,L),ei.parse(Xe.data,Xe.offset,Ye)}for(var Nt=Nr(rt,de),pr=(dt.parse(Nt.data,Nt.offset,Ye.numberOfHMetrics,Ye.numGlyphs,Ye.glyphs),Ye),Br=pr.tables.cmap.glyphIndexMap,ln=Object.keys(Br),rr=0;rr<ln.length;rr+=1){var _n,Gr=ln[rr],un=Br[Gr];(_n=pr.glyphs.get(un)).addUnicode(parseInt(Gr))}for(var Mr=0;Mr<pr.glyphs.length;Mr+=1)_n=pr.glyphs.get(Mr),pr.cffEncoding?pr.isCIDFont?_n.name="gid"+Mr:_n.name=pr.cffEncoding.charset[Mr]:pr.glyphNames.names&&(_n.name=pr.glyphNames.glyphIndexToName(Mr));return Oe?(Xe=Nr(rt,Oe),Ye.kerningPairs=bs.parse(Xe.data,Xe.offset)):Ye.kerningPairs={},se&&(Nt=Nr(rt,se),Ye.tables.gpos=ri.parse(Nt.data,Nt.offset),Ye.position.init()),pe&&(Xe=Nr(rt,pe),Ye.tables.gsub=xo.parse(Xe.data,Xe.offset)),G&&(Nt=Nr(rt,G),Ye.tables.fvar=rn.parse(Nt.data,Nt.offset,Ye.names)),we&&(Xe=Nr(rt,we),Ye.tables.meta=Ya.parse(Xe.data,Xe.offset),Ye.metas=Ye.tables.meta),Ye}c.Font=mr,c.Glyph=yt,c.Path=X,c.BoundingBox=Y,c._parse=Pe,c.parse=ia,c.load=function(v,C){(typeof window>"u"?qn:Ki)(v,function(k,E){if(k)return C(k);var L;try{L=ia(E)}catch(G){return C(G,null)}return C(null,L)})},c.loadSync=function(v){return ia(Bs(r("fs").readFileSync(v)))},Object.defineProperty(c,"__esModule",{value:!0})},l(typeof a=="object"&&s!==void 0?a:u.opentype={})}).call(this,r("buffer").Buffer)},{buffer:4,fs:2}],242:[function(r,s,a){(function(o){function u(p,m){for(var h=0,f=p.length-1;0<=f;f--){var d=p[f];d==="."?p.splice(f,1):d===".."?(p.splice(f,1),h++):h&&(p.splice(f,1),h--)}if(m)for(;h--;)p.unshift("..");return p}function l(p,m){if(p.filter)return p.filter(m);for(var h=[],f=0;f<p.length;f++)m(p[f],f,p)&&h.push(p[f]);return h}a.resolve=function(){for(var p="",m=!1,h=arguments.length-1;-1<=h&&!m;h--){var f=0<=h?arguments[h]:o.cwd();if(typeof f!="string")throw new TypeError("Arguments to path.resolve must be strings");f&&(p=f+"/"+p,m=f.charAt(0)==="/")}return(m?"/":"")+(p=u(l(p.split("/"),function(d){return!!d}),!m).join("/"))||"."},a.normalize=function(p){var m=a.isAbsolute(p),h=c(p,-1)==="/";return(p=(p=u(l(p.split("/"),function(f){return!!f}),!m).join("/"))||m?p:".")&&h&&(p+="/"),(m?"/":"")+p},a.isAbsolute=function(p){return p.charAt(0)==="/"},a.join=function(){var p=Array.prototype.slice.call(arguments,0);return a.normalize(l(p,function(m,h){if(typeof m!="string")throw new TypeError("Arguments to path.join must be strings");return m}).join("/"))},a.relative=function(p,m){function h(j){for(var S=0;S<j.length&&j[S]==="";S++);for(var w=j.length-1;0<=w&&j[w]==="";w--);return w<S?[]:j.slice(S,w-S+1)}p=a.resolve(p).substr(1),m=a.resolve(m).substr(1);for(var f=h(p.split("/")),d=h(m.split("/")),g=Math.min(f.length,d.length),y=g,b=0;b<g;b++)if(f[b]!==d[b]){y=b;break}for(var x=[],b=y;b<f.length;b++)x.push("..");return(x=x.concat(d.slice(y))).join("/")},a.sep="/",a.delimiter=":",a.dirname=function(p){if(typeof p!="string"&&(p+=""),p.length===0)return".";for(var m=p.charCodeAt(0)===47,h=-1,f=!0,d=p.length-1;1<=d;--d)if(p.charCodeAt(d)===47){if(!f){h=d;break}}else f=!1;return h===-1?m?"/":".":m&&h===1?"/":p.slice(0,h)},a.basename=function(p,m){return p=function(h){typeof h!="string"&&(h+="");for(var f=0,d=-1,g=!0,y=h.length-1;0<=y;--y)if(h.charCodeAt(y)===47){if(!g){f=y+1;break}}else d===-1&&(g=!1,d=y+1);return d===-1?"":h.slice(f,d)}(p),p=m&&p.substr(-1*m.length)===m?p.substr(0,p.length-m.length):p},a.extname=function(p){typeof p!="string"&&(p+="");for(var m=-1,h=0,f=-1,d=!0,g=0,y=p.length-1;0<=y;--y){var b=p.charCodeAt(y);if(b===47){if(d)continue;h=y+1;break}f===-1&&(d=!1,f=y+1),b===46?m===-1?m=y:g!==1&&(g=1):m!==-1&&(g=-1)}return m===-1||f===-1||g===0||g===1&&m===f-1&&m===h+1?"":p.slice(m,f)};var c="ab".substr(-1)==="b"?function(p,m,h){return p.substr(m,h)}:function(p,m,h){return m<0&&(m=p.length+m),p.substr(m,h)}}).call(this,r("_process"))},{_process:243}],243:[function(r,l,a){var o,u,l=l.exports={};function c(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}try{o=typeof setTimeout=="function"?setTimeout:c}catch{o=c}try{u=typeof clearTimeout=="function"?clearTimeout:p}catch{u=p}function m(S){if(o===setTimeout)return setTimeout(S,0);if((o===c||!o)&&setTimeout)return(o=setTimeout)(S,0);try{return o(S,0)}catch{try{return o.call(null,S,0)}catch{return o.call(this,S,0)}}}var h,f=[],d=!1,g=-1;function y(){d&&h&&(d=!1,h.length?f=h.concat(f):g=-1,f.length&&b())}function b(){if(!d){for(var S=m(y),w=(d=!0,f.length);w;){for(h=f,f=[];++g<w;)h&&h[g].run();g=-1,w=f.length}h=null,d=!1,function(_){if(u===clearTimeout)return clearTimeout(_);if((u===p||!u)&&clearTimeout)return(u=clearTimeout)(_);try{u(_)}catch{try{return u.call(null,_)}catch{return u.call(this,_)}}}(S)}}function x(S,w){this.fun=S,this.array=w}function j(){}l.nextTick=function(S){var w=new Array(arguments.length-1);if(1<arguments.length)for(var _=1;_<arguments.length;_++)w[_-1]=arguments[_];f.push(new x(S,w)),f.length!==1||d||m(b)},x.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=j,l.addListener=j,l.once=j,l.off=j,l.removeListener=j,l.removeAllListeners=j,l.emit=j,l.prependListener=j,l.prependOnceListener=j,l.listeners=function(S){return[]},l.binding=function(S){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(S){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],244:[function(r,s,a){s=function(o){var u,l=Object.prototype,c=l.hasOwnProperty,M=typeof Symbol=="function"?Symbol:{},p=M.iterator||"@@iterator",m=M.asyncIterator||"@@asyncIterator",h=M.toStringTag||"@@toStringTag";function f(te,W,q,re){var X,ce,O,B,W=W&&W.prototype instanceof S?W:S,W=Object.create(W.prototype),re=new z(re||[]);return W._invoke=(X=te,ce=q,O=re,B=g,function(ae,me){if(B===b)throw new Error("Generator is already running");if(B===x){if(ae==="throw")throw me;return Q()}for(O.method=ae,O.arg=me;;){var ge=O.delegate;if(ge&&(ge=function xe(fe,ye){var Te=fe.iterator[ye.method];if(Te===u){if(ye.delegate=null,ye.method==="throw"){if(fe.iterator.return&&(ye.method="return",ye.arg=u,xe(fe,ye),ye.method==="throw"))return j;ye.method="throw",ye.arg=new TypeError("The iterator does not provide a 'throw' method")}return j}if(Te=d(Te,fe.iterator,ye.arg),Te.type==="throw")return ye.method="throw",ye.arg=Te.arg,ye.delegate=null,j;if(Te=Te.arg,!Te)return ye.method="throw",ye.arg=new TypeError("iterator result is not an object"),ye.delegate=null,j;{if(!Te.done)return Te;ye[fe.resultName]=Te.value,ye.next=fe.nextLoc,ye.method!=="return"&&(ye.method="next",ye.arg=u)}return ye.delegate=null,j}(ge,O),ge)){if(ge===j)continue;return ge}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(B===g)throw B=x,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);if(B=b,ge=d(X,ce,O),ge.type==="normal"){if(B=O.done?x:y,ge.arg!==j)return{value:ge.arg,done:O.done}}else ge.type==="throw"&&(B=x,O.method="throw",O.arg=ge.arg)}}),W}function d(te,Z,q){try{return{type:"normal",arg:te.call(Z,q)}}catch(Y){return{type:"throw",arg:Y}}}o.wrap=f;var g="suspendedStart",y="suspendedYield",b="executing",x="completed",j={};function S(){}function w(){}function _(){}var M={},I=(M[p]=function(){return this},Object.getPrototypeOf),I=I&&I(I(K([]))),P=(I&&I!==l&&c.call(I,p)&&(M=I),_.prototype=S.prototype=Object.create(M));function R(te){["next","throw","return"].forEach(function(Z){te[Z]=function(q){return this._invoke(Z,q)}})}function D(te){var Z;this._invoke=function(q,Y){function X(){return new Promise(function(ce,O){(function B(xe,re,ae,me){var ge,xe=d(te[xe],te,re);if(xe.type!=="throw")return(re=(ge=xe.arg).value)&&typeof re=="object"&&c.call(re,"__await")?Promise.resolve(re.__await).then(function(fe){B("next",fe,ae,me)},function(fe){B("throw",fe,ae,me)}):Promise.resolve(re).then(function(fe){ge.value=fe,ae(ge)},function(fe){return B("throw",fe,ae,me)});me(xe.arg)})(q,Y,ce,O)})}return Z=Z?Z.then(X,X):X()}}function U(te){var Z={tryLoc:te[0]};1 in te&&(Z.catchLoc=te[1]),2 in te&&(Z.finallyLoc=te[2],Z.afterLoc=te[3]),this.tryEntries.push(Z)}function F(te){var Z=te.completion||{};Z.type="normal",delete Z.arg,te.completion=Z}function z(te){this.tryEntries=[{tryLoc:"root"}],te.forEach(U,this),this.reset(!0)}function K(te){if(te){var Z,q=te[p];if(q)return q.call(te);if(typeof te.next=="function")return te;if(!isNaN(te.length))return Z=-1,(q=function Y(){for(;++Z<te.length;)if(c.call(te,Z))return Y.value=te[Z],Y.done=!1,Y;return Y.value=u,Y.done=!0,Y}).next=q}return{next:Q}}function Q(){return{value:u,done:!0}}return(w.prototype=P.constructor=_).constructor=w,_[h]=w.displayName="GeneratorFunction",o.isGeneratorFunction=function(te){return te=typeof te=="function"&&te.constructor,!!te&&(te===w||(te.displayName||te.name)==="GeneratorFunction")},o.mark=function(te){return Object.setPrototypeOf?Object.setPrototypeOf(te,_):(te.__proto__=_,h in te||(te[h]="GeneratorFunction")),te.prototype=Object.create(P),te},o.awrap=function(te){return{__await:te}},R(D.prototype),D.prototype[m]=function(){return this},o.AsyncIterator=D,o.async=function(te,Z,q,Y){var X=new D(f(te,Z,q,Y));return o.isGeneratorFunction(Z)?X:X.next().then(function(ce){return ce.done?ce.value:X.next()})},R(P),P[h]="Generator",P[p]=function(){return this},P.toString=function(){return"[object Generator]"},o.keys=function(te){var Z,q=[];for(Z in te)q.push(Z);return q.reverse(),function Y(){for(;q.length;){var X=q.pop();if(X in te)return Y.value=X,Y.done=!1,Y}return Y.done=!0,Y}},o.values=K,z.prototype={constructor:z,reset:function(te){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(F),!te)for(var Z in this)Z.charAt(0)==="t"&&c.call(this,Z)&&!isNaN(+Z.slice(1))&&(this[Z]=u)},stop:function(){this.done=!0;var te=this.tryEntries[0].completion;if(te.type==="throw")throw te.arg;return this.rval},dispatchException:function(te){if(this.done)throw te;var Z=this;function q(W,re){return ce.type="throw",ce.arg=te,Z.next=W,re&&(Z.method="next",Z.arg=u),!!re}for(var Y=this.tryEntries.length-1;0<=Y;--Y){var X=this.tryEntries[Y],ce=X.completion;if(X.tryLoc==="root")return q("end");if(X.tryLoc<=this.prev){var O=c.call(X,"catchLoc"),B=c.call(X,"finallyLoc");if(O&&B){if(this.prev<X.catchLoc)return q(X.catchLoc,!0);if(this.prev<X.finallyLoc)return q(X.finallyLoc)}else if(O){if(this.prev<X.catchLoc)return q(X.catchLoc,!0)}else{if(!B)throw new Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return q(X.finallyLoc)}}}},abrupt:function(te,Z){for(var q=this.tryEntries.length-1;0<=q;--q){var Y=this.tryEntries[q];if(Y.tryLoc<=this.prev&&c.call(Y,"finallyLoc")&&this.prev<Y.finallyLoc){var X=Y;break}}var ce=(X=X&&(te==="break"||te==="continue")&&X.tryLoc<=Z&&Z<=X.finallyLoc?null:X)?X.completion:{};return ce.type=te,ce.arg=Z,X?(this.method="next",this.next=X.finallyLoc,j):this.complete(ce)},complete:function(te,Z){if(te.type==="throw")throw te.arg;return te.type==="break"||te.type==="continue"?this.next=te.arg:te.type==="return"?(this.rval=this.arg=te.arg,this.method="return",this.next="end"):te.type==="normal"&&Z&&(this.next=Z),j},finish:function(te){for(var Z=this.tryEntries.length-1;0<=Z;--Z){var q=this.tryEntries[Z];if(q.finallyLoc===te)return this.complete(q.completion,q.afterLoc),F(q),j}},catch:function(te){for(var Z=this.tryEntries.length-1;0<=Z;--Z){var q,Y,X=this.tryEntries[Z];if(X.tryLoc===te)return(q=X.completion).type==="throw"&&(Y=q.arg,F(X)),Y}throw new Error("illegal catch attempt")},delegateYield:function(te,Z,q){return this.delegate={iterator:K(te),resultName:Z,nextLoc:q},this.method==="next"&&(this.arg=u),j}},o}(typeof s=="object"?s.exports:{});try{regeneratorRuntime=s}catch{Function("r","regeneratorRuntime = r")(s)}},{}],245:[function(r,s,a){(function(o){var u,l,c,p,m,h,f,d,g,y;function b(F){if(typeof F!="string"&&(F=String(F)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(F))throw new TypeError("Invalid character in header field name");return F.toLowerCase()}function x(F){return F=typeof F!="string"?String(F):F}function j(F){var z={next:function(){var K=F.shift();return{done:K===void 0,value:K}}};return l&&(z[Symbol.iterator]=function(){return z}),z}function S(F){this.map={},F instanceof S?F.forEach(function(z,K){this.append(K,z)},this):Array.isArray(F)?F.forEach(function(z){this.append(z[0],z[1])},this):F&&Object.getOwnPropertyNames(F).forEach(function(z){this.append(z,F[z])},this)}function w(F){if(F.bodyUsed)return Promise.reject(new TypeError("Already read"));F.bodyUsed=!0}function _(F){return new Promise(function(z,K){F.onload=function(){z(F.result)},F.onerror=function(){K(F.error)}})}function M(F){var z=new FileReader,K=_(z);return z.readAsArrayBuffer(F),K}function I(F){var z;return F.slice?F.slice(0):((z=new Uint8Array(F.byteLength)).set(new Uint8Array(F)),z.buffer)}function P(){return this.bodyUsed=!1,this._initBody=function(F){if(this._bodyInit=F)if(typeof F=="string")this._bodyText=F;else if(c&&Blob.prototype.isPrototypeOf(F))this._bodyBlob=F;else if(p&&FormData.prototype.isPrototypeOf(F))this._bodyFormData=F;else if(u&&URLSearchParams.prototype.isPrototypeOf(F))this._bodyText=F.toString();else if(m&&c&&f(F))this._bodyArrayBuffer=I(F.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m||!ArrayBuffer.prototype.isPrototypeOf(F)&&!d(F))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=I(F)}else this._bodyText="";this.headers.get("content-type")||(typeof F=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(F)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var F=w(this);if(F)return F;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(M)}),this.text=function(){var F,z,K=w(this);if(K)return K;if(this._bodyBlob)return K=this._bodyBlob,F=new FileReader,z=_(F),F.readAsText(K),z;if(this._bodyArrayBuffer)return Promise.resolve(function(Q){for(var te=new Uint8Array(Q),Z=new Array(te.length),q=0;q<te.length;q++)Z[q]=String.fromCharCode(te[q]);return Z.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}function R(F,z){var K,Q=(z=z||{}).body;if(F instanceof R){if(F.bodyUsed)throw new TypeError("Already read");this.url=F.url,this.credentials=F.credentials,z.headers||(this.headers=new S(F.headers)),this.method=F.method,this.mode=F.mode,Q||F._bodyInit==null||(Q=F._bodyInit,F.bodyUsed=!0)}else this.url=String(F);if(this.credentials=z.credentials||this.credentials||"omit",!z.headers&&this.headers||(this.headers=new S(z.headers)),this.method=(F=z.method||this.method||"GET",K=F.toUpperCase(),-1<g.indexOf(K)?K:F),this.mode=z.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Q)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Q)}function D(F){var z=new FormData;return F.trim().split("&").forEach(function(K){var Q;K&&(Q=(K=K.split("=")).shift().replace(/\+/g," "),K=K.join("=").replace(/\+/g," "),z.append(decodeURIComponent(Q),decodeURIComponent(K)))}),z}function U(F,z){z=z||{},this.type="default",this.status=z.status===void 0?200:z.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in z?z.statusText:"OK",this.headers=new S(z.headers),this.url=z.url||"",this._initBody(F)}o.fetch||(u="URLSearchParams"in o,l="Symbol"in o&&"iterator"in Symbol,c="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),p="FormData"in o,(m="ArrayBuffer"in o)&&(h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=function(F){return F&&DataView.prototype.isPrototypeOf(F)},d=ArrayBuffer.isView||function(F){return F&&-1<h.indexOf(Object.prototype.toString.call(F))}),S.prototype.append=function(F,z){F=b(F),z=x(z);var K=this.map[F];this.map[F]=K?K+","+z:z},S.prototype.delete=function(F){delete this.map[b(F)]},S.prototype.get=function(F){return F=b(F),this.has(F)?this.map[F]:null},S.prototype.has=function(F){return this.map.hasOwnProperty(b(F))},S.prototype.set=function(F,z){this.map[b(F)]=x(z)},S.prototype.forEach=function(F,z){for(var K in this.map)this.map.hasOwnProperty(K)&&F.call(z,this.map[K],K,this)},S.prototype.keys=function(){var F=[];return this.forEach(function(z,K){F.push(K)}),j(F)},S.prototype.values=function(){var F=[];return this.forEach(function(z){F.push(z)}),j(F)},S.prototype.entries=function(){var F=[];return this.forEach(function(z,K){F.push([K,z])}),j(F)},l&&(S.prototype[Symbol.iterator]=S.prototype.entries),g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},P.call(R.prototype),P.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},U.error=function(){var F=new U(null,{status:0,statusText:""});return F.type="error",F},y=[301,302,303,307,308],U.redirect=function(F,z){if(y.indexOf(z)===-1)throw new RangeError("Invalid status code");return new U(null,{status:z,headers:{location:F}})},o.Headers=S,o.Request=R,o.Response=U,o.fetch=function(F,z){return new Promise(function(K,Q){var te=new R(F,z),Z=new XMLHttpRequest;Z.onload=function(){var q,Y={status:Z.status,statusText:Z.statusText,headers:(Y=Z.getAllResponseHeaders()||"",q=new S,Y.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(O){var O=O.split(":"),B=O.shift().trim();B&&(O=O.join(":").trim(),q.append(B,O))}),q)},X=(Y.url="responseURL"in Z?Z.responseURL:Y.headers.get("X-Request-URL"),"response"in Z?Z.response:Z.responseText);K(new U(X,Y))},Z.onerror=function(){Q(new TypeError("Network request failed"))},Z.ontimeout=function(){Q(new TypeError("Network request failed"))},Z.open(te.method,te.url,!0),te.credentials==="include"?Z.withCredentials=!0:te.credentials==="omit"&&(Z.withCredentials=!1),"responseType"in Z&&c&&(Z.responseType="blob"),te.headers.forEach(function(q,Y){Z.setRequestHeader(Y,q)}),Z.send(te._bodyInit===void 0?null:te._bodyInit)})},o.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],246:[function(r,s,a){r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u=c(r("../core/main")),l=c(r("../color/color_conversion"));function c(h){return h&&h.__esModule?h:{default:h}}var p=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],m=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];u.default.prototype._rgbColorName=function(g){var f,d,g=l.default._rgbaToHSBA(g),y=[(o=g)[0],g[1],g[2]];y[0]!==0&&(y[0]=Math.round(100*y[0]),(g=y[0].toString().split(""))[d=g.length-1]=parseInt(g[d]),g[d]<2.5?g[d]=0:2.5<=g[d]&&g[d]<7.5&&(g[d]=5),g.length===2?(g[0]=parseInt(g[0]),7.5<=g[d]&&(g[d]=0,g[0]=g[0]+1),y[0]=10*g[0]+g[1]):7.5<=g[d]?y[0]=10:y[0]=g[d]),y[2]=y[2]/255;for(var b=y.length-1;1<=b;b--)y[b]<=.25?y[b]=0:.25<y[b]&&y[b]<.75?y[b]=.5:y[b]=1;if(y[0]===0&&y[1]===0&&y[2]===1){for(var x=2;0<=x;x--)o[x]=Math.round(1e4*o[x])/1e4;for(var j=0;j<p.length;j++){if(p[j].h===o[0]&&p[j].s===o[1]&&p[j].b===o[2]){f=p[j].name;break}f="white"}}else for(var S=0;S<m.length;S++)if(m[S].h===y[0]&&m[S].s===y[1]&&m[S].b===y[2]){f=m[S].name;break}return f},r=u.default,a.default=r},{"../color/color_conversion":252,"../core/main":267,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],247:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r},u="_Description",l="_fallbackDesc",c="_fallbackTable",p="_Label",m="_labelDesc",h="_labelTable";function f(d){if(d==="label"||d==="fallback")throw new Error("description should not be LABEL or FALLBACK");return d.endsWith(".")||d.endsWith(";")||d.endsWith(",")||d.endsWith("?")||d.endsWith("!")||(d+="."),d}o.default.prototype.describe=function(d,g){var y;o.default._validateParameters("describe",arguments),typeof d=="string"&&(y=this.canvas.id,d=f(d),this.dummyDOM||(this.dummyDOM=document.getElementById(y).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==d&&(this.descriptions.fallback.innerHTML=d):this._describeHTML("fallback",d),g===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==d&&(this.descriptions.label.innerHTML=d):this._describeHTML("label",d)))},o.default.prototype.describeElement=function(d,g,y){var b,x;o.default._validateParameters("describeElement",arguments),typeof g=="string"&&typeof d=="string"&&(b=this.canvas.id,g=f(g),x=function(j){if(j==="label"||j==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return j.endsWith(".")||j.endsWith(";")||j.endsWith(",")?j=j.replace(/.$/,":"):j.endsWith(":")||(j+=":"),j}(d),d=d.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(g,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[d]?this.descriptions.fallbackElements[d].innerHTML!==x&&(this.descriptions.fallbackElements[d].innerHTML=x):this._describeElementHTML("fallback",d,x),y===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[d]?this.descriptions.labelElements[d].innerHTML!==x&&(this.descriptions.labelElements[d].innerHTML=x):this._describeElementHTML("label",d,x)))},o.default.prototype._describeHTML=function(d,g){var y,b=this.canvas.id;d==="fallback"?(this.dummyDOM.querySelector("#".concat(b+u))?this.dummyDOM.querySelector("#"+b+c).insertAdjacentHTML("beforebegin",'<p id="'.concat(b+l,'"></p>')):(y='<div id="'.concat(b).concat(u,'" role="region" aria-label="Canvas Description"><p id="').concat(b).concat(l,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#".concat(b)).innerHTML=y),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(b).concat(l)),this.descriptions.fallback.innerHTML=g):d==="label"&&(this.dummyDOM.querySelector("#".concat(b+p))?this.dummyDOM.querySelector("#".concat(b+h))&&this.dummyDOM.querySelector("#".concat(b+h)).insertAdjacentHTML("beforebegin",'<p id="'.concat(b).concat(m,'"></p>')):(y='<div id="'.concat(b).concat(p,'" class="p5Label"><p id="').concat(b).concat(m,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",y)),this.descriptions.label=this.dummyDOM.querySelector("#"+b+m),this.descriptions.label.innerHTML=g)},o.default.prototype._describeElementHTML=function(d,g,y){var b,x=this.canvas.id;d==="fallback"?(this.dummyDOM.querySelector("#".concat(x+u))?this.dummyDOM.querySelector("#"+x+c)||this.dummyDOM.querySelector("#"+x+l).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table>')):(b='<div id="'.concat(x).concat(u,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).innerHTML=b),(b=document.createElement("tr")).id=x+"_fte_"+g,this.dummyDOM.querySelector("#"+x+c).appendChild(b),this.descriptions.fallbackElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(g)),this.descriptions.fallbackElements[g].innerHTML=y):d==="label"&&(this.dummyDOM.querySelector("#".concat(x+p))?this.dummyDOM.querySelector("#".concat(x+h))||this.dummyDOM.querySelector("#"+x+m).insertAdjacentHTML("afterend",'<table id="'.concat(x+h,'"></table>')):(b='<div id="'.concat(x).concat(p,'" class="p5Label"><table id="').concat(x).concat(h,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",b)),(d=document.createElement("tr")).id=x+"_lte_"+g,this.dummyDOM.querySelector("#"+x+h).appendChild(d),this.descriptions.labelElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(g)),this.descriptions.labelElements[g].innerHTML=y)},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],248:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.map"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateGridOutput=function(o){var u,l,c,p;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(u=this._accessibleOutputs[o],c=function(m,h,f,d){return h="".concat(h," canvas, ").concat(f," by ").concat(d," pixels, contains ").concat(m[0]),h=(m[0]===1?"".concat(h," shape: "):"".concat(h," shapes: ")).concat(m[1]),h}((l=function(m,h){var f,d="",g="",y=0;for(f in h){var b,x=0;for(b in h[f]){var j='<li id="'.concat(m,"shape").concat(y,'">').concat(h[f][b].color," ").concat(f,",");f==="line"?j+=" location = ".concat(h[f][b].pos,", length = ").concat(h[f][b].length," pixels"):(j+=" location = ".concat(h[f][b].pos),f!=="point"&&(j+=", area = ".concat(h[f][b].area," %")),j+="</li>"),d+=j,x++,y++}g=1<x?"".concat(g," ").concat(x," ").concat(f,"s"):"".concat(g," ").concat(x," ").concat(f)}return{numShapes:[y,g],details:d}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),p=function(m,h){var f,d,g,y=0,b="",x=Array.apply(null,Array(10)).map(function(){});for(f in x)x[f]=Array.apply(null,Array(10)).map(function(){});for(d in h)for(var j in h[d]){var S=void 0;S=d!=="line"?'<a href="#'.concat(m,"shape").concat(y,'">').concat(h[d][j].color," ").concat(d,"</a>"):'<a href="#'.concat(m,"shape").concat(y,'">').concat(h[d][j].color," ").concat(d," midpoint</a>"),x[h[d][j].loc.locY][h[d][j].loc.locX]?x[h[d][j].loc.locY][h[d][j].loc.locX]=x[h[d][j].loc.locY][h[d][j].loc.locX]+"  "+S:x[h[d][j].loc.locY][h[d][j].loc.locX]=S,y++}for(g in x){var w,_="<tr>";for(w in x[g])_+="<td>",x[g][w]!==void 0&&(_+=x[g][w]),_+="</td>";b=b+_+"</tr>"}return b}(o,this.ingredients.shapes),c!==u.summary.innerHTML&&(u.summary.innerHTML=c),p!==u.map.innerHTML&&(u.map.innerHTML=p),l.details!==u.shapeDetails.innerHTML&&(u.shapeDetails.innerHTML=l.details),this._accessibleOutputs[o]=u)},r=r.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],249:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(c,p,m){return c[0]<.4*p?c[1]<.4*m?"top left":c[1]>.6*m?"bottom left":"mid left":c[0]>.6*p?c[1]<.4*m?"top right":c[1]>.6*m?"bottom right":"mid right":c[1]<.4*m?"top middle":c[1]>.6*m?"bottom middle":"middle"}function l(c,p,m){return p=Math.floor(c[0]/p*10),c=Math.floor(c[1]/m*10),p===10&&(p-=1),c===10&&(c-=1),{locX:p,locY:c}}o.default.prototype.textOutput=function(c){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},o.default.prototype.gridOutput=function(c){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(c,p){var m,h,f,d=this.canvas.id,g=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(d).parentNode),"");p==="Fallback"?(m=d+c,this.dummyDOM.querySelector("#".concat(h=d+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(d,"_Description"))?this.dummyDOM.querySelector("#".concat(d,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(d)).innerHTML='<div id="'.concat(h,'" role="region" aria-label="Canvas Outputs"></div>'))):p==="Label"&&(m=d+c+(g=p),this.dummyDOM.querySelector("#".concat(h=d+"accessibleOutput"+p))||(this.dummyDOM.querySelector("#".concat(d,"_Label"))?this.dummyDOM.querySelector("#".concat(d,"_Label")):this.dummyDOM.querySelector("#".concat(d))).insertAdjacentHTML("afterend",'<div id="'.concat(h,'"></div>'))),this._accessibleOutputs[m]={},c==="textOutput"?(g="#".concat(d,"gridOutput").concat(g),f='<div id="'.concat(m,'">Text Output<div id="').concat(m,'Summary" aria-label="text output summary"><p id="').concat(m,'_summary"></p><ul id="').concat(m,'_list"></ul></div><table id="').concat(m,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#".concat(h)).innerHTML=f,this._accessibleOutputs[m].list=this.dummyDOM.querySelector("#".concat(m,"_list"))):c==="gridOutput"&&(g="#".concat(d,"textOutput").concat(g),f='<div id="'.concat(m,'">Grid Output<p id="').concat(m,'_summary" aria-label="grid output summary"><table id="').concat(m,'_map" summary="grid output content"></table><ul id="').concat(m,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("afterend",f):this.dummyDOM.querySelector("#".concat(h)).innerHTML=f,this._accessibleOutputs[m].map=this.dummyDOM.querySelector("#".concat(m,"_map"))),this._accessibleOutputs[m].shapeDetails=this.dummyDOM.querySelector("#".concat(m,"_shapeDetails")),this._accessibleOutputs[m].summary=this.dummyDOM.querySelector("#".concat(m,"_summary"))},o.default.prototype._updateAccsOutput=function(){var c=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(c+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(c+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(c+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(c+"gridOutputLabel"))},o.default.prototype._accsBackground=function(c){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==c&&(this.ingredients.colors.backgroundRGBA=c,this.ingredients.colors.background=this._rgbColorName(c))},o.default.prototype._accsCanvasColors=function(c,p){c==="fill"?this.ingredients.colors.fillRGBA!==p&&(this.ingredients.colors.fillRGBA=p,this.ingredients.colors.fill=this._rgbColorName(p)):c==="stroke"&&this.ingredients.colors.strokeRGBA!==p&&(this.ingredients.colors.strokeRGBA=p,this.ingredients.colors.stroke=this._rgbColorName(p))},o.default.prototype._accsOutput=function(c,p){c==="ellipse"&&p[2]===p[3]?c="circle":c==="rectangle"&&p[2]===p[3]&&(c="square");var m,h,f={},d=!0,g=function(b,x){var j;return b=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(j=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):b==="triangle"?(j=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):b==="quadrilateral"?(j=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):b==="line"?(j=(x[0]+x[2])/2,(x[1]+x[3])/2):(j=x[0],x[1]),[j,b]}(c,p);if(c==="line"?(f.color=this.ingredients.colors.stroke,f.length=Math.round(this.dist(p[0],p[1],p[2],p[3])),m=u([p[0],[1]],this.width,this.height),h=u([p[2],[3]],this.width,this.height),f.loc=l(g,this.width,this.height),f.pos=m===h?"at ".concat(m):"from ".concat(m," to ").concat(h)):(c==="point"?f.color=this.ingredients.colors.stroke:(f.color=this.ingredients.colors.fill,f.area=function(b,x,j,S){var w=0;{var _,M,I,P,R,D,U;b==="arc"?(_=((x[5]-x[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI),w=_*x[2]*x[3]/8,x[6]!=="open"&&x[6]!=="chord"||(U=x[0],M=x[1],I=x[0]+x[2]/2*Math.cos(x[4]).toFixed(2),P=x[1]+x[3]/2*Math.sin(x[4]).toFixed(2),R=x[0]+x[2]/2*Math.cos(x[5]).toFixed(2),D=x[1]+x[3]/2*Math.sin(x[5]).toFixed(2),U=Math.abs(U*(P-D)+I*(D-M)+R*(M-P))/2,_>Math.PI?w+=U:w-=U)):b==="ellipse"||b==="circle"?w=3.14*x[2]/2*x[3]/2:b==="line"||b==="point"?w=0:b==="quadrilateral"?w=Math.abs((x[6]+x[0])*(x[7]-x[1])+(x[0]+x[2])*(x[1]-x[3])+(x[2]+x[4])*(x[3]-x[5])+(x[4]+x[6])*(x[5]-x[7]))/2:b==="rectangle"||b==="square"?w=x[2]*x[3]:b==="triangle"&&(w=Math.abs(x[0]*(x[3]-x[5])+x[2]*(x[5]-x[1])+x[4]*(x[1]-x[3]))/2)}return Math.round(100*w/(j*S))}(c,p,this.width,this.height)),f.pos=u(g,this.width,this.height),f.loc=l(g,this.width,this.height)),this.ingredients.shapes[c]){if(this.ingredients.shapes[c]!==[f]){for(var y in this.ingredients.shapes[c])JSON.stringify(this.ingredients.shapes[c][y])===JSON.stringify(f)&&(d=!1);d===!0&&this.ingredients.shapes[c].push(f)}}else this.ingredients.shapes[c]=[f]},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":171}],250:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.concat"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateTextOutput=function(o){var u,l,c,p;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(u=this._accessibleOutputs[o],c=function(m,h,f,d){return f="Your output is a, ".concat(f," by ").concat(d," pixels, ").concat(h," canvas containing the following"),f=m===1?"".concat(f," shape:"):"".concat(f," ").concat(m," shapes:"),f}((l=function(m,h){var f,d="",g=0;for(f in h)for(var y in h[f]){var b='<li><a href="#'.concat(m,"shape").concat(g,'">').concat(h[f][y].color," ").concat(f,"</a>");f==="line"?b+=", ".concat(h[f][y].pos,", ").concat(h[f][y].length," pixels long.</li>"):(b+=", at ".concat(h[f][y].pos),f!=="point"&&(b+=", covering ".concat(h[f][y].area,"% of the canvas")),b+=".</li>"),d+=b,g++}return{numShapes:g,listShapes:d}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),p=function(m,h){var f,d="",g=0;for(f in h)for(var y in h[f]){var b='<tr id="'.concat(m,"shape").concat(g,'"><th>').concat(h[f][y].color," ").concat(f,"</th>");f==="line"?b+="<td>location = ".concat(h[f][y].pos,"</td><td>length = ").concat(h[f][y].length," pixels</td></tr>"):(b+="<td>location = ".concat(h[f][y].pos,"</td>"),f!=="point"&&(b+="<td> area = ".concat(h[f][y].area,"%</td>")),b+="</tr>"),d+=b,g++}return d}(o,this.ingredients.shapes),c!==u.summary.innerHTML&&(u.summary.innerHTML=c),l.listShapes!==u.list.innerHTML&&(u.list.innerHTML=l.listShapes),p!==u.shapeDetails.innerHTML&&(u.shapeDetails.innerHTML=p),this._accessibleOutputs[o]=u)},r=r.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149}],251:[function(r,s,a){var o=(o=r("./core/main"))&&o.__esModule?o:{default:o};r("./core/constants"),r("./core/environment"),r("./core/friendly_errors/stacktrace"),r("./core/friendly_errors/validate_params"),r("./core/friendly_errors/file_errors"),r("./core/friendly_errors/fes_core"),r("./core/friendly_errors/sketch_reader"),r("./core/helpers"),r("./core/legacy"),r("./core/preload"),r("./core/p5.Element"),r("./core/p5.Graphics"),r("./core/p5.Renderer"),r("./core/p5.Renderer2D"),r("./core/rendering"),r("./core/shim"),r("./core/structure"),r("./core/transform"),r("./core/shape/2d_primitives"),r("./core/shape/attributes"),r("./core/shape/curves"),r("./core/shape/vertex"),r("./accessibility/outputs"),r("./accessibility/textOutput"),r("./accessibility/gridOutput"),r("./accessibility/color_namer"),r("./color/color_conversion"),r("./color/creating_reading"),r("./color/p5.Color"),r("./color/setting"),r("./data/p5.TypedDict"),r("./data/local_storage.js"),r("./dom/dom"),r("./accessibility/describe"),r("./events/acceleration"),r("./events/keyboard"),r("./events/mouse"),r("./events/touch"),r("./image/filters"),r("./image/image"),r("./image/loading_displaying"),r("./image/p5.Image"),r("./image/pixels"),r("./io/files"),r("./io/p5.Table"),r("./io/p5.TableRow"),r("./io/p5.XML"),r("./math/calculation"),r("./math/math"),r("./math/noise"),r("./math/p5.Vector"),r("./math/random"),r("./math/trigonometry"),r("./typography/attributes"),r("./typography/loading_displaying"),r("./typography/p5.Font"),r("./utilities/array_functions"),r("./utilities/conversion"),r("./utilities/string_functions"),r("./utilities/time_date"),r("./webgl/3d_primitives"),r("./webgl/interaction"),r("./webgl/light"),r("./webgl/loading"),r("./webgl/material"),r("./webgl/p5.Camera"),r("./webgl/p5.Geometry"),r("./webgl/p5.Matrix"),r("./webgl/p5.RendererGL.Immediate"),r("./webgl/p5.RendererGL"),r("./webgl/p5.RendererGL.Retained"),r("./webgl/p5.Shader"),r("./webgl/p5.RenderBuffer"),r("./webgl/p5.Texture"),r("./webgl/text"),r("./core/init"),s.exports=o.default},{"./accessibility/color_namer":246,"./accessibility/describe":247,"./accessibility/gridOutput":248,"./accessibility/outputs":249,"./accessibility/textOutput":250,"./color/color_conversion":252,"./color/creating_reading":253,"./color/p5.Color":254,"./color/setting":255,"./core/constants":256,"./core/environment":257,"./core/friendly_errors/fes_core":258,"./core/friendly_errors/file_errors":259,"./core/friendly_errors/sketch_reader":260,"./core/friendly_errors/stacktrace":261,"./core/friendly_errors/validate_params":262,"./core/helpers":263,"./core/init":264,"./core/legacy":266,"./core/main":267,"./core/p5.Element":268,"./core/p5.Graphics":269,"./core/p5.Renderer":270,"./core/p5.Renderer2D":271,"./core/preload":272,"./core/rendering":273,"./core/shape/2d_primitives":274,"./core/shape/attributes":275,"./core/shape/curves":276,"./core/shape/vertex":277,"./core/shim":278,"./core/structure":279,"./core/transform":280,"./data/local_storage.js":281,"./data/p5.TypedDict":282,"./dom/dom":283,"./events/acceleration":284,"./events/keyboard":285,"./events/mouse":286,"./events/touch":287,"./image/filters":288,"./image/image":289,"./image/loading_displaying":290,"./image/p5.Image":291,"./image/pixels":292,"./io/files":293,"./io/p5.Table":294,"./io/p5.TableRow":295,"./io/p5.XML":296,"./math/calculation":297,"./math/math":298,"./math/noise":299,"./math/p5.Vector":300,"./math/random":301,"./math/trigonometry":302,"./typography/attributes":303,"./typography/loading_displaying":304,"./typography/p5.Font":305,"./utilities/array_functions":306,"./utilities/conversion":307,"./utilities/string_functions":308,"./utilities/time_date":309,"./webgl/3d_primitives":310,"./webgl/interaction":311,"./webgl/light":312,"./webgl/loading":313,"./webgl/material":314,"./webgl/p5.Camera":315,"./webgl/p5.Geometry":316,"./webgl/p5.Matrix":317,"./webgl/p5.RenderBuffer":318,"./webgl/p5.RendererGL":321,"./webgl/p5.RendererGL.Immediate":319,"./webgl/p5.RendererGL.Retained":320,"./webgl/p5.Shader":322,"./webgl/p5.Texture":323,"./webgl/text":324}],252:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.ColorConversion={},r.default.ColorConversion._hsbaToHSLA=function(o){var u=o[0],l=o[1],c=o[2],p=(2-l)*c/2;return p!=0&&(p==1?l=0:p<.5?l/=2-l:l=l*c/(2-2*p)),[u,l,p,o[3]]},r.default.ColorConversion._hsbaToRGBA=function(o){var u,l,c,p,m,h=6*o[0],f=o[1],d=o[2];return f===0?[d,d,d,o[3]]:(l=d*(1-f),c=d*(1-f*(h-(u=Math.floor(h)))),f=d*(1-f*(1+u-h)),h=u===1?(p=c,m=d,l):u===2?(p=l,m=d,f):u===3?(p=l,m=c,d):u===4?(p=f,m=l,d):u===5?(p=d,m=l,c):(p=d,m=f,l),[p,m,h,o[3]])},r.default.ColorConversion._hslaToHSBA=function(o){var u=o[0],l=o[1],c=o[2],p=c<.5?(1+l)*c:c+l-c*l;return[u,l=2*(p-c)/p,p,o[3]]},r.default.ColorConversion._hslaToRGBA=function(o){var u,l=6*o[0],c=o[1],p=o[2];return c===0?[p,p,p,o[3]]:[(u=function(m,h,f){return m<0?m+=6:6<=m&&(m-=6),m<1?h+(f-h)*m:m<3?f:m<4?h+(f-h)*(4-m):h})(2+l,c=2*p-(p=p<.5?(1+c)*p:p+c-p*c),p),u(l,c,p),u(l-2,c,p),o[3]]},r.default.ColorConversion._rgbaToHSBA=function(o){var u,l,c=o[0],p=o[1],m=o[2],h=Math.max(c,p,m),f=h-Math.min(c,p,m);return f==0?l=u=0:(l=f/h,c===h?u=(p-m)/f:p===h?u=2+(m-c)/f:m===h&&(u=4+(c-p)/f),u<0?u+=6:6<=u&&(u-=6)),[u/6,l,h,o[3]]},r.default.ColorConversion._rgbaToHSLA=function(o){var u,l,c=o[0],p=o[1],m=o[2],h=Math.max(c,p,m),d=Math.min(c,p,m),f=h+d,d=h-d;return d==0?l=u=0:(l=f<1?d/f:d/(2-f),c===h?u=(p-m)/d:p===h?u=2+(m-c)/d:m===h&&(u=4+(c-p)/d),u<0?u+=6:6<=u&&(u-=6)),[u/6,l,f/2,o[3]]},r=r.default.ColorConversion,a.default=r},{"../core/main":267}],253:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.map"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}r("./p5.Color"),r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.alpha=function(h){return l.default._validateParameters("alpha",arguments),this.color(h)._getAlpha()},l.default.prototype.blue=function(h){return l.default._validateParameters("blue",arguments),this.color(h)._getBlue()},l.default.prototype.brightness=function(h){return l.default._validateParameters("brightness",arguments),this.color(h)._getBrightness()},l.default.prototype.color=function(){var h;return l.default._validateParameters("color",arguments),arguments[0]instanceof l.default.Color?arguments[0]:(h=arguments[0]instanceof Array?arguments[0]:arguments,new l.default.Color(this,h))},l.default.prototype.green=function(h){return l.default._validateParameters("green",arguments),this.color(h)._getGreen()},l.default.prototype.hue=function(h){return l.default._validateParameters("hue",arguments),this.color(h)._getHue()},l.default.prototype.lerpColor=function(h,f,d){l.default._validateParameters("lerpColor",arguments);var g,y,b,x=this._colorMode,j=this._colorMaxes;if(x===c.RGB)y=h.levels.map(function(S){return S/255}),b=f.levels.map(function(S){return S/255});else if(x===c.HSB)h._getBrightness(),f._getBrightness(),y=h.hsba,b=f.hsba;else{if(x!==c.HSL)throw new Error("".concat(x,"cannot be used for interpolation."));h._getLightness(),f._getLightness(),y=h.hsla,b=f.hsla}return d=Math.max(Math.min(d,1),0),this.lerp===void 0&&(this.lerp=function(S,w,_){return _*(w-S)+S}),h=this.lerp(y[0],b[0],d),f=this.lerp(y[1],b[1],d),g=this.lerp(y[2],b[2],d),y=this.lerp(y[3],b[3],d),h*=j[x][0],f*=j[x][1],g*=j[x][2],y*=j[x][3],this.color(h,f,g,y)},l.default.prototype.lightness=function(h){return l.default._validateParameters("lightness",arguments),this.color(h)._getLightness()},l.default.prototype.red=function(h){return l.default._validateParameters("red",arguments),this.color(h)._getRed()},l.default.prototype.saturation=function(h){return l.default._validateParameters("saturation",arguments),this.color(h)._getSaturation()};var m=l.default;a.default=m},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],254:[function(d,s,a){function o(j){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(j)}function u(j){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(S){return o(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":o(S)})(j)}d("core-js/modules/es.symbol"),d("core-js/modules/es.symbol.description"),d("core-js/modules/es.symbol.iterator"),d("core-js/modules/es.array.iterator"),d("core-js/modules/es.array.join"),d("core-js/modules/es.array.map"),d("core-js/modules/es.array.slice"),d("core-js/modules/es.object.get-own-property-descriptor"),d("core-js/modules/es.object.to-string"),d("core-js/modules/es.regexp.constructor"),d("core-js/modules/es.regexp.exec"),d("core-js/modules/es.regexp.to-string"),d("core-js/modules/es.string.iterator"),d("core-js/modules/es.string.trim"),d("core-js/modules/es.weak-map"),d("core-js/modules/web.dom-collections.iterator"),d("core-js/modules/es.array.join"),d("core-js/modules/es.array.map"),d("core-js/modules/es.array.slice"),d("core-js/modules/es.object.to-string"),d("core-js/modules/es.regexp.constructor"),d("core-js/modules/es.regexp.exec"),d("core-js/modules/es.regexp.to-string"),d("core-js/modules/es.string.trim"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=h(d("../core/main")),c=function(j){if(j&&j.__esModule)return j;if(j===null||u(j)!=="object"&&typeof j!="function")return{default:j};var S=m();if(S&&S.has(j))return S.get(j);var w,_={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in j){var I;Object.prototype.hasOwnProperty.call(j,w)&&((I=M?Object.getOwnPropertyDescriptor(j,w):null)&&(I.get||I.set)?Object.defineProperty(_,w,I):_[w]=j[w])}return _.default=j,S&&S.set(j,_),_}(d("../core/constants")),p=h(d("./color_conversion"));function m(){var j;return typeof WeakMap!="function"?null:(j=new WeakMap,m=function(){return j},j)}function h(j){return j&&j.__esModule?j:{default:j}}l.default.Color=function(j,S){if(this._storeModeAndMaxes(j._colorMode,j._colorMaxes),this.mode!==c.RGB&&this.mode!==c.HSL&&this.mode!==c.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=l.default.Color._parseInputs.apply(this,S),this._calculateLevels(),this},l.default.Color.prototype.toString=function(j){var S=this.levels,w=this._array,_=w[3];switch(j){case"#rrggbb":return"#".concat(S[0]<16?"0".concat(S[0].toString(16)):S[0].toString(16),S[1]<16?"0".concat(S[1].toString(16)):S[1].toString(16),S[2]<16?"0".concat(S[2].toString(16)):S[2].toString(16));case"#rrggbbaa":return"#".concat(S[0]<16?"0".concat(S[0].toString(16)):S[0].toString(16),S[1]<16?"0".concat(S[1].toString(16)):S[1].toString(16),S[2]<16?"0".concat(S[2].toString(16)):S[2].toString(16),S[3]<16?"0".concat(S[3].toString(16)):S[3].toString(16));case"#rgb":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16),Math.round(15*w[3]).toString(16));case"rgb":return"rgb(".concat(S[0],", ",S[1],", ",S[2],")");case"rgb%":return"rgb(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%, ",(100*w[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],", ",_,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*_).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],", ",_,")");case"hsla%":return this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*_).toPrecision(3),"%)");default:return"rgba(".concat(S[0],",",S[1],",",S[2],",",_,")")}},l.default.Color.prototype.setRed=function(j){this._array[0]=j/this.maxes[c.RGB][0],this._calculateLevels()},l.default.Color.prototype.setGreen=function(j){this._array[1]=j/this.maxes[c.RGB][1],this._calculateLevels()},l.default.Color.prototype.setBlue=function(j){this._array[2]=j/this.maxes[c.RGB][2],this._calculateLevels()},l.default.Color.prototype.setAlpha=function(j){this._array[3]=j/this.maxes[this.mode][3],this._calculateLevels()},l.default.Color.prototype._calculateLevels=function(){for(var j=this._array,S=this.levels=new Array(j.length),w=j.length-1;0<=w;--w)S[w]=Math.round(255*j[w]);this.hsla=null,this.hsba=null},l.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},l.default.Color.prototype._storeModeAndMaxes=function(j,S){this.mode=j,this.maxes=S},l.default.Color.prototype._getMode=function(){return this.mode},l.default.Color.prototype._getMaxes=function(){return this.maxes},l.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[c.RGB][2]},l.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[c.HSB][2]},l.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[c.RGB][1]},l.default.Color.prototype._getHue=function(){return this.mode===c.HSB?(this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[c.HSB][0]):(this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[c.HSL][0])},l.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[c.HSL][2]},l.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[c.RGB][0]},l.default.Color.prototype._getSaturation=function(){return this.mode===c.HSB?(this.hsba||(this.hsba=p.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[c.HSB][1]):(this.hsla||(this.hsla=p.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[c.HSL][1])};var f={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},d=/\s*/,x=/(\d{1,3})/,g=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,y=new RegExp("".concat(g.source,"%")),b={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",x.source,",",x.source,",",x.source,"\\)$"].join(d.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",y.source,",",y.source,",",y.source,"\\)$"].join(d.source),"i"),RGBA:new RegExp(["^rgba\\(",x.source,",",x.source,",",x.source,",",g.source,"\\)$"].join(d.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",y.source,",",y.source,",",y.source,",",g.source,"\\)$"].join(d.source),"i"),HSL:new RegExp(["^hsl\\(",x.source,",",y.source,",",y.source,"\\)$"].join(d.source),"i"),HSLA:new RegExp(["^hsla\\(",x.source,",",y.source,",",y.source,",",g.source,"\\)$"].join(d.source),"i"),HSB:new RegExp(["^hsb\\(",x.source,",",y.source,",",y.source,"\\)$"].join(d.source),"i"),HSBA:new RegExp(["^hsba\\(",x.source,",",y.source,",",y.source,",",g.source,"\\)$"].join(d.source),"i")},x=(l.default.Color._parseInputs=function(j,S,w,_){var M,I=arguments.length,P=this.mode,R=this.maxes[P],D=[];if(3<=I){for(D[0]=j/R[0],D[1]=S/R[1],D[2]=w/R[2],D[3]=typeof _=="number"?_/R[3]:1,M=D.length-1;0<=M;--M){var U=D[M];U<0?D[M]=0:1<U&&(D[M]=1)}return P===c.HSL?p.default._hslaToRGBA(D):P===c.HSB?p.default._hsbaToRGBA(D):D}if(I===1&&typeof j=="string"){if(w=j.trim().toLowerCase(),f[w])return l.default.Color._parseInputs.call(this,f[w]);if(b.HEX3.test(w))return(D=b.HEX3.exec(w).slice(1).map(function(F){return parseInt(F+F,16)/255}))[3]=1,D;if(b.HEX6.test(w))return(D=b.HEX6.exec(w).slice(1).map(function(F){return parseInt(F,16)/255}))[3]=1,D;if(b.HEX4.test(w))return D=b.HEX4.exec(w).slice(1).map(function(F){return parseInt(F+F,16)/255});if(b.HEX8.test(w))return D=b.HEX8.exec(w).slice(1).map(function(F){return parseInt(F,16)/255});if(b.RGB.test(w))return(D=b.RGB.exec(w).slice(1).map(function(F){return F/255}))[3]=1,D;if(b.RGB_PERCENT.test(w))return(D=b.RGB_PERCENT.exec(w).slice(1).map(function(F){return parseFloat(F)/100}))[3]=1,D;if(b.RGBA.test(w))return D=b.RGBA.exec(w).slice(1).map(function(F,z){return z===3?parseFloat(F):F/255});if(b.RGBA_PERCENT.test(w))return D=b.RGBA_PERCENT.exec(w).slice(1).map(function(F,z){return z===3?parseFloat(F):parseFloat(F)/100});if(b.HSL.test(w)?(D=b.HSL.exec(w).slice(1).map(function(F,z){return z===0?parseInt(F,10)/360:parseInt(F,10)/100}))[3]=1:b.HSLA.test(w)&&(D=b.HSLA.exec(w).slice(1).map(function(F,z){return z===0?parseInt(F,10)/360:z===3?parseFloat(F):parseInt(F,10)/100})),(D=D.map(function(F){return Math.max(Math.min(F,1),0)})).length)return p.default._hslaToRGBA(D);if(b.HSB.test(w)?(D=b.HSB.exec(w).slice(1).map(function(F,z){return z===0?parseInt(F,10)/360:parseInt(F,10)/100}))[3]=1:b.HSBA.test(w)&&(D=b.HSBA.exec(w).slice(1).map(function(F,z){return z===0?parseInt(F,10)/360:z===3?parseFloat(F):parseInt(F,10)/100})),D.length){for(M=D.length-1;0<=M;--M)D[M]=Math.max(Math.min(D[M],1),0);return p.default._hsbaToRGBA(D)}D=[1,1,1,1]}else{if(I!==1&&I!==2||typeof j!="number")throw new Error("".concat(arguments,"is not a valid color representation."));D[0]=j/R[2],D[1]=j/R[2],D[2]=j/R[2],D[3]=typeof S=="number"?S/R[3]:1,D=D.map(function(F){return Math.max(Math.min(F,1),0)})}return D},l.default.Color);a.default=x},{"../core/constants":256,"../core/main":267,"./color_conversion":252,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],255:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.fill"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}r("./p5.Color"),l.default.prototype.background=function(){var h;return(h=this._renderer).background.apply(h,arguments),this},l.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},l.default.prototype.colorMode=function(h,f,d,g,y){return l.default._validateParameters("colorMode",arguments),h!==c.RGB&&h!==c.HSB&&h!==c.HSL||(this._colorMode=h,h=this._colorMaxes[h],arguments.length===2?(h[0]=f,h[1]=f,h[2]=f,h[3]=f):arguments.length===4?(h[0]=f,h[1]=d,h[2]=g):arguments.length===5&&(h[0]=f,h[1]=d,h[2]=g,h[3]=y)),this},l.default.prototype.fill=function(){var h;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(h=this._renderer).fill.apply(h,arguments),this},l.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},l.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},l.default.prototype.stroke=function(){var h;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(h=this._renderer).stroke.apply(h,arguments),this},l.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},l.default.prototype.noErase=function(){return this._renderer.noErase(),this};var m=l.default;a.default=m},{"../core/constants":256,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],256:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.BEZIER=a.QUADRATIC=a.LINEAR=a._CTX_MIDDLE=a._DEFAULT_LEADMULT=a._DEFAULT_TEXT_FILL=a.WORD=a.CHAR=a.BOLDITALIC=a.BOLD=a.ITALIC=a.NORMAL=a.BLUR=a.ERODE=a.DILATE=a.POSTERIZE=a.INVERT=a.OPAQUE=a.GRAY=a.THRESHOLD=a.BURN=a.DODGE=a.SOFT_LIGHT=a.HARD_LIGHT=a.OVERLAY=a.REPLACE=a.SCREEN=a.MULTIPLY=a.EXCLUSION=a.SUBTRACT=a.DIFFERENCE=a.LIGHTEST=a.DARKEST=a.ADD=a.REMOVE=a.BLEND=a.UP_ARROW=a.TAB=a.SHIFT=a.RIGHT_ARROW=a.RETURN=a.OPTION=a.LEFT_ARROW=a.ESCAPE=a.ENTER=a.DOWN_ARROW=a.DELETE=a.CONTROL=a.BACKSPACE=a.ALT=a.AUTO=a.HSL=a.HSB=a.RGB=a.MITER=a.BEVEL=a.ROUND=a.SQUARE=a.PROJECT=a.PIE=a.CHORD=a.OPEN=a.CLOSE=a.TESS=a.QUAD_STRIP=a.QUADS=a.TRIANGLE_STRIP=a.TRIANGLE_FAN=a.TRIANGLES=a.LINE_LOOP=a.LINE_STRIP=a.LINES=a.POINTS=a.BASELINE=a.BOTTOM=a.TOP=a.CENTER=a.LEFT=a.RIGHT=a.RADIUS=a.CORNERS=a.CORNER=a.RAD_TO_DEG=a.DEG_TO_RAD=a.RADIANS=a.DEGREES=a.TWO_PI=a.TAU=a.QUARTER_PI=a.PI=a.HALF_PI=a.WAIT=a.TEXT=a.MOVE=a.HAND=a.CROSS=a.ARROW=a.WEBGL=a.P2D=a.VERSION=void 0,a.COVER=a.CONTAIN=a.FALLBACK=a.LABEL=a.AXES=a.GRID=a._DEFAULT_FILL=a._DEFAULT_STROKE=a.PORTRAIT=a.LANDSCAPE=a.MIRROR=a.CLAMP=a.REPEAT=a.NEAREST=a.IMAGE=a.IMMEDIATE=a.TEXTURE=a.FILL=a.STROKE=a.CURVE=void 0;var o=Math.PI,u=(a.VERSION="1.6.0",a.P2D="p2d",a.WEBGL="webgl",a.ARROW="default",a.CROSS="crosshair",a.HAND="pointer",a.MOVE="move",a.TEXT="text",a.WAIT="wait",o/2),u=(a.HALF_PI=u,o),u=(a.PI=u,o/4),u=(a.QUARTER_PI=u,2*o),u=(a.TAU=u,2*o),u=(a.TWO_PI=u,a.DEGREES="degrees",a.RADIANS="radians",o/180),u=(a.DEG_TO_RAD=u,180/o);a.RAD_TO_DEG=u,a.CORNER="corner",a.CORNERS="corners",a.RADIUS="radius",a.RIGHT="right",a.LEFT="left",a.CENTER="center",a.TOP="top",a.BOTTOM="bottom",a.BASELINE="alphabetic",a.POINTS=0,a.LINES=1,a.LINE_STRIP=3,a.LINE_LOOP=2,a.TRIANGLES=4,a.TRIANGLE_FAN=6,a.TRIANGLE_STRIP=5,a.QUADS="quads",a.QUAD_STRIP="quad_strip",a.TESS="tess",a.CLOSE="close",a.OPEN="open",a.CHORD="chord",a.PIE="pie",a.PROJECT="square",a.SQUARE="butt",a.ROUND="round",a.BEVEL="bevel",a.MITER="miter",a.RGB="rgb",a.HSB="hsb",a.HSL="hsl",a.AUTO="auto",a.ALT=18,a.BACKSPACE=8,a.CONTROL=17,a.DELETE=46,a.DOWN_ARROW=40,a.ENTER=13,a.ESCAPE=27,a.LEFT_ARROW=37,a.OPTION=18,a.RETURN=13,a.RIGHT_ARROW=39,a.SHIFT=16,a.TAB=9,a.UP_ARROW=38,a.BLEND="source-over",a.REMOVE="destination-out",a.ADD="lighter",a.DARKEST="darken",a.LIGHTEST="lighten",a.DIFFERENCE="difference",a.SUBTRACT="subtract",a.EXCLUSION="exclusion",a.MULTIPLY="multiply",a.SCREEN="screen",a.REPLACE="copy",a.OVERLAY="overlay",a.HARD_LIGHT="hard-light",a.SOFT_LIGHT="soft-light",a.DODGE="color-dodge",a.BURN="color-burn",a.THRESHOLD="threshold",a.GRAY="gray",a.OPAQUE="opaque",a.INVERT="invert",a.POSTERIZE="posterize",a.DILATE="dilate",a.ERODE="erode",a.BLUR="blur",a.NORMAL="normal",a.ITALIC="italic",a.BOLD="bold",a.BOLDITALIC="bold italic",a.CHAR="CHAR",a.WORD="WORD",a._DEFAULT_TEXT_FILL="#000000",a._DEFAULT_LEADMULT=1.25,a._CTX_MIDDLE="middle",a.LINEAR="linear",a.QUADRATIC="quadratic",a.BEZIER="bezier",a.CURVE="curve",a.STROKE="stroke",a.FILL="fill",a.TEXTURE="texture",a.IMMEDIATE="immediate",a.IMAGE="image",a.NEAREST="nearest",a.REPEAT="repeat",a.CLAMP="clamp",a.MIRROR="mirror",a.LANDSCAPE="landscape",a.PORTRAIT="portrait",a._DEFAULT_STROKE="#000000",a._DEFAULT_FILL="#FFFFFF",a.GRID="grid",a.AXES="axes",a.LABEL="label",a.FALLBACK="fallback",a.CONTAIN="contain",a.COVER="cover"},{}],257:[function(r,s,a){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(g)}function u(g){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(c=r("./main"))&&c.__esModule?c:{default:c},c=function(g){if(g&&g.__esModule)return g;if(g===null||u(g)!=="object"&&typeof g!="function")return{default:g};var y=p();if(y&&y.has(g))return y.get(g);var b,x={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in g){var S;Object.prototype.hasOwnProperty.call(g,b)&&((S=j?Object.getOwnPropertyDescriptor(g,b):null)&&(S.get||S.set)?Object.defineProperty(x,b,S):x[b]=g[b])}return x.default=g,y&&y.set(g,x),x}(r("./constants"));function p(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,p=function(){return g},g)}var m=[c.ARROW,c.CROSS,c.HAND,c.MOVE,c.TEXT,c.WAIT],h=(l.default.prototype._frameRate=0,l.default.prototype._lastFrameTime=window.performance.now(),l.default.prototype._targetFrameRate=60,window.print);function f(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function d(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}l.default.prototype.print=function(){var g;arguments.length?(g=console).log.apply(g,arguments):h()},l.default.prototype.frameCount=0,l.default.prototype.deltaTime=0,l.default.prototype.focused=document.hasFocus(),l.default.prototype.cursor=function(g,y,b){var x,j="auto",S=this._curElement.elt;m.includes(g)?j=g:typeof g=="string"&&(x="",y&&b&&typeof y=="number"&&typeof b=="number"&&(x="".concat(y," ").concat(b)),j=g.substring(0,7)==="http://"||g.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(g)?"url(".concat(g,") ").concat(x,", auto"):g),S.style.cursor=j},l.default.prototype.frameRate=function(g){return l.default._validateParameters("frameRate",arguments),typeof g!="number"||g<0?this._frameRate:(this._setProperty("_targetFrameRate",g),g===0&&this._setProperty("_frameRate",g),this)},l.default.prototype.getFrameRate=function(){return this.frameRate()},l.default.prototype.setFrameRate=function(g){return this.frameRate(g)},l.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},l.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},l.default.prototype.displayWidth=screen.width,l.default.prototype.displayHeight=screen.height,l.default.prototype.windowWidth=f(),l.default.prototype.windowHeight=d(),l.default.prototype._onresize=function(g){this._setProperty("windowWidth",f()),this._setProperty("windowHeight",d());var y=this._isGlobal?window:this;typeof y.windowResized!="function"||(y=y.windowResized(g))===void 0||y||g.preventDefault()},l.default.prototype.width=0,l.default.prototype.height=0,l.default.prototype.fullscreen=function(g){if(l.default._validateParameters("fullscreen",arguments),g===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(g){if(g=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},l.default.prototype.pixelDensity=function(g){var y;return l.default._validateParameters("pixelDensity",arguments),typeof g=="number"?(g!==this._pixelDensity&&(this._pixelDensity=g),(y=this).resizeCanvas(this.width,this.height,!0)):y=this._pixelDensity,y},l.default.prototype.displayDensity=function(){return window.devicePixelRatio},l.default.prototype.getURL=function(){return location.href},l.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(g){return g!==""})},l.default.prototype.getURLParams=function(){for(var g,y=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,b={};(g=y.exec(location.search))!=null;)g.index===y.lastIndex&&y.lastIndex++,b[g[1]]=g[2];return b},r=l.default,a.default=r},{"./constants":256,"./main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],258:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(m=r("../main"))&&m.__esModule?m:{default:m};r("../internationalization");function u(h,f){f=f||console.log.bind(console),l||p(),l.some(function(d){var g;if(h.message&&h.message.match("\\W?".concat(d.name,"\\W"))!==null)return g=d.type==="function"?"".concat(d.name,"()"):d.name,f("Did you just try to use p5.js's ".concat(g," ").concat(d.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(c)),!0})}var l=null,p=null,c=(o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},l=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),p=function(){function h(d){return Object.getOwnPropertyNames(d).filter(function(g){return g[0]!=="_"&&!(g in f)&&(f[g]=!0)}).map(function(g){var y=typeof d[g]=="function"?"function":g===g.toUpperCase()?"constant":"variable";return{name:g,type:y}})}var f={};(l=[].concat(h(o.default.prototype),h(r("../constants")))).sort(function(d,g){return g.name.length-d.name.length})},m=(o.default.prototype._helpForMisusedAtTopLevelCode=u,document.readyState!=="complete"&&(window.addEventListener("error",u,!1),window.addEventListener("load",function(){window.removeEventListener("error",u,!1)})),o.default);a.default=m},{"../constants":256,"../internationalization":265,"../main":267,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":165,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],259:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(o=r("../main"))&&o.__esModule?o:{default:o};r("../internationalization"),o.default._friendlyFileLoadError=function(){},r=o.default,a.default=r},{"../internationalization":265,"../main":267}],260:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function u(f){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=m(r("../main"));r("../internationalization"),p(r("../constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}function p(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var g,y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&((y=x?Object.getOwnPropertyDescriptor(f,g):null)&&(y.get||y.set)?Object.defineProperty(b,g,y):b[g]=f[g]);return b.default=f,d&&d.set(f,b),b}function m(f){return f&&f.__esModule?f:{default:f}}l.default._fesCodeReader=function(){};var h=l.default;a.default=h},{"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],261:[function(r,s,a){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../main"))&&r.__esModule?r:{default:r};function o(){var u=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,c=/^(eval@)?(\[native code])?$/;return{parse:function(p){return p.stacktrace!==void 0||p["opera#sourceloc"]!==void 0?this.parseOpera(p):p.stack&&p.stack.match(l)?this.parseV8OrIE(p):p.stack?this.parseFFOrSafari(p):void 0},extractLocation:function(p){return p.indexOf(":")===-1?[p]:[(p=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(p.replace(/[()]/g,"")))[1],p[2]||void 0,p[3]||void 0]},parseV8OrIE:function(p){return p.stack.split(`
`).filter(function(m){return!!m.match(l)},this).map(function(m){var h=(m=-1<m.indexOf("(eval ")?m.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):m).replace(/^\s+/,"").replace(/\(eval code/g,"("),f=h.match(/ (\((.+):(\d+):(\d+)\)$)/),h=(h=f?h.replace(f[0],""):h).split(/\s+/).slice(1),f=this.extractLocation(f?f[1]:h.pop());return{functionName:h.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(f[0])?void 0:f[0],lineNumber:f[1],columnNumber:f[2],source:m}},this)},parseFFOrSafari:function(p){return p.stack.split(`
`).filter(function(m){return!m.match(c)},this).map(function(m){var h,f;return(m=-1<m.indexOf(" > eval")?m.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):m).indexOf("@")===-1&&m.indexOf(":")===-1?{functionName:m}:{functionName:(f=m.match(h=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&f[1]?f[1]:void 0,fileName:(f=this.extractLocation(m.replace(h,"")))[0],lineNumber:f[1],columnNumber:f[2],source:m}},this)},parseOpera:function(p){return!p.stacktrace||-1<p.message.indexOf(`
`)&&p.message.split(`
`).length>p.stacktrace.split(`
`).length?this.parseOpera9(p):p.stack?this.parseOpera11(p):this.parseOpera10(p)},parseOpera9:function(p){for(var m=/Line (\d+).*script (?:in )?(\S+)/i,h=p.message.split(`
`),f=[],d=2,g=h.length;d<g;d+=2){var y=m.exec(h[d]);y&&f.push({fileName:y[2],lineNumber:y[1],source:h[d]})}return f},parseOpera10:function(p){for(var m=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,h=p.stacktrace.split(`
`),f=[],d=0,g=h.length;d<g;d+=2){var y=m.exec(h[d]);y&&f.push({functionName:y[3]||void 0,fileName:y[2],lineNumber:y[1],source:h[d]})}return f},parseOpera11:function(p){return p.stack.split(`
`).filter(function(m){return!!m.match(u)&&!m.match(/^Error created at/)},this).map(function(m){var h,d=m.split("@"),f=this.extractLocation(d.pop()),d=d.shift()||"";return{functionName:d.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(h=d.match(/\(([^)]*)\)/)?d.replace(/^[^(]+\(([^)]*)\)$/,"$1"):h)===void 0||h==="[arguments not available]"?void 0:h.split(","),fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:m}},this)}}}r.default._getErrorStackParser=function(){return new o},r=r.default,a.default=r},{"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],262:[function(r,s,a){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(u=r("../main"))&&u.__esModule?u:{default:u};(function(p){if(!(p&&p.__esModule)&&!(p===null||c(p)!=="object"&&typeof p!="function")){var m=l();if(m&&m.has(p))return m.get(p);var h,f={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var g;Object.prototype.hasOwnProperty.call(p,h)&&((g=d?Object.getOwnPropertyDescriptor(p,h):null)&&(g.get||g.set)?Object.defineProperty(f,h,g):f[h]=p[h])}f.default=p,m&&m.set(p,f)}})(r("../constants")),r("../internationalization");function l(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,l=function(){return p},p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}u.default._validateParameters=u.default._clearValidateParamsCache=function(){},r=u.default,a.default=r},{"../../../docs/parameterData.json":void 0,"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.map":166,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],263:[function(r,s,a){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function u(p){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=function(p){if(p&&p.__esModule)return p;if(p===null||u(p)!=="object"&&typeof p!="function")return{default:p};var m=c();if(m&&m.has(p))return m.get(p);var h,f={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in p){var g;Object.prototype.hasOwnProperty.call(p,h)&&((g=d?Object.getOwnPropertyDescriptor(p,h):null)&&(g.get||g.set)?Object.defineProperty(f,h,g):f[h]=p[h])}return f.default=p,m&&m.set(p,f),f}(r("./constants"));function c(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,c=function(){return p},p)}a.default={modeAdjust:function(p,m,h,f,d){return d===l.CORNER?{x:p,y:m,w:h,h:f}:d===l.CORNERS?{x:p,y:m,w:h-p,h:f-m}:d===l.RADIUS?{x:p-h,y:m-f,w:2*h,h:2*f}:d===l.CENTER?{x:p-.5*h,y:m-.5*f,w:h,h:f}:void 0}}},{"./constants":256,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],264:[function(r,s,a){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var o=(u=r("../core/main"))&&u.__esModule?u:{default:u};r("./internationalization");var u=Promise.resolve();Promise.all([new Promise(function(l,c){document.readyState==="complete"?l():window.addEventListener("load",l,!1)}),u]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!o.default.instance&&new o.default})},{"../core/main":267,"./internationalization":265,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":230}],265:[function(r,s,a){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.setTranslatorLanguage=a.currentTranslatorLanguage=a.availableTranslatorLanguages=a.initialize=a.translator=void 0;var o,u,l=p(r("i18next")),c=p(r("i18next-browser-languagedetector"));function p(f){return f&&f.__esModule?f:{default:f}}function m(f,d){for(var g=0;g<d.length;g++){var y=d[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}var h=function(){function f(y,b){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.init(y,b)}var d,g;return d=f,(g=[{key:"fetchWithTimeout",value:function(y,b){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(y,b),new Promise(function(j,S){return setTimeout(function(){return S(new Error("timeout"))},x)})])}},{key:"init",value:function(y){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=y,this.options=b}},{key:"read",value:function(y,b,x){var j=this.options.loadPath;y===this.options.fallback?x(null,o[y][b]):u.includes(y)?(j=this.services.interpolator.interpolate(j,{lng:y,ns:b}),this.loadUrl(j,x)):x("Not found",!1)}},{key:"loadUrl",value:function(y,b){this.fetchWithTimeout(y).then(function(x){if(x.ok)return x.json();throw new Error("failed loading ".concat(y))},function(){throw new Error("failed loading ".concat(y))}).then(function(x){return b(null,x)}).catch(b)}}])&&m(d.prototype,g),f}();h.type="backend",a.translator=function(f,d){console.debug("p5.js translator called before translations were loaded"),l.default.t(f,d)},a.initialize=function(){return l.default.use(c.default).use(h).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:o}).then(function(f){a.translator=f},function(f){return console.debug("Translations failed to load (".concat(f,")"))})},a.availableTranslatorLanguages=function(){return l.default.languages},a.currentTranslatorLanguage=function(f){return l.default.language},a.setTranslatorLanguage=function(f){return l.default.changeLanguage(f||void 0,function(d){return console.debug("Translations failed to load (".concat(d,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":230,i18next:3,"i18next-browser-languagedetector":3}],266:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r=r.default,a.default=r},{"./main":267}],267:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function u(f){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r("./shim");var l=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("./constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}function p(f,d){for(var g=0;g<d.length;g++){var y=d[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}var m,h=function(){function f(y,S,x){var j=this;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=S,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var S=Object.getOwnPropertyNames(f.prototype._registeredMethods),w=!0,_=!1,M=void 0;try{for(var I,P=S[Symbol.iterator]();!(w=(I=P.next()).done);w=!0){var R=I.value;this._registeredMethods[R]=f.prototype._registeredMethods[R].slice()}}catch(q){_=!0,M=q}finally{try{w||P.return==null||P.return()}finally{if(_)throw M}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){j._userNode&&typeof j._userNode=="string"&&(j._userNode=document.getElementById(j._userNode));var q=j._isGlobal?window:j;if(q.preload){var Y,X=document.getElementById(j._loadingScreenId),ce=(X||((X=document.createElement("div")).innerHTML="Loading...",X.style.position="absolute",X.id=j._loadingScreenId,(j._userNode||document.body).appendChild(X)),j._preloadMethods);for(Y in ce){ce[Y]=ce[Y]||f;var O=ce[Y];O!==f.prototype&&O!==f||(j._isGlobal&&(window[Y]=j._wrapPreload(j,Y)),O=j),j._registeredPreloadMethods[Y]=O[Y],O[Y]=j._wrapPreload(O,Y)}q.preload(),j._runIfPreloadsAreDone()}else j._setup(),j._recording||j._draw()},this._runIfPreloadsAreDone=function(){var q,Y=this._isGlobal?window:this;Y._preloadCount===0&&((q=document.getElementById(Y._loadingScreenId))&&q.parentNode.removeChild(q),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),Y._setup(),this._recording||Y._draw()))},this._decrementPreload=function(){var q=this._isGlobal?window:this;q._preloadDone||typeof q.preload!="function"||(q._setProperty("_preloadCount",q._preloadCount-1),q._runIfPreloadsAreDone())},this._wrapPreload=function(q,Y){var X=this;return function(){X._incrementPreload();for(var ce=arguments.length,O=new Array(ce),B=0;B<ce;B++)O[B]=arguments[B];return X._registeredPreloadMethods[Y].apply(q,O)}},this._incrementPreload=function(){var q=this._isGlobal?window:this;q._preloadDone||q._setProperty("_preloadCount",q._preloadCount+1)},this._setup=function(){j.createCanvas(j._defaultCanvasSize.width,j._defaultCanvasSize.height,"p2d");var q=j._isGlobal?window:j;if(typeof q.preload=="function")for(var Y in j._preloadMethods)q[Y]=j._preloadMethods[Y][Y],q[Y]&&j&&(q[Y]=q[Y].bind(j));j._millisStart=window.performance.now(),q._preloadDone=!0,typeof q.setup=="function"&&q.setup();var X=document.getElementsByTagName("canvas"),ce=!0,O=!1,B=void 0;try{for(var W,re=X[Symbol.iterator]();!(ce=(W=re.next()).done);ce=!0){var ae=W.value;ae.dataset.hidden==="true"&&(ae.style.visibility="",delete ae.dataset.hidden)}}catch(me){O=!0,B=me}finally{try{ce||re.return==null||re.return()}finally{if(O)throw B}}j._lastTargetFrameTime=window.performance.now(),j._lastRealFrameTime=window.performance.now(),j._setupDone=!0,(j._accessibleOutputs.grid||j._accessibleOutputs.text)&&j._updateAccsOutput()},this._draw=function(){var q=window.performance.now(),Y=q-j._lastTargetFrameTime,X=1e3/j._targetFrameRate;(!j._loop||X-5<=Y)&&(j.redraw(),j._frameRate=1e3/(q-j._lastRealFrameTime),j.deltaTime=q-j._lastRealFrameTime,j._setProperty("deltaTime",j.deltaTime),j._lastTargetFrameTime=Math.max(j._lastTargetFrameTime+X,q),j._lastRealFrameTime=q,j._updateMouseCoords!==void 0&&(j._updateMouseCoords(),j._setProperty("movedX",0),j._setProperty("movedY",0))),j._loop&&(j._requestAnimId=window.requestAnimationFrame(j._draw))},this._setProperty=function(q,Y){j[q]=Y,j._isGlobal&&(window[q]=Y)},this.remove=function(){var q=document.getElementById(j._loadingScreenId);if(q&&(q.parentNode.removeChild(q),j._incrementPreload()),j._curElement){for(var Y in j._loop=!1,j._requestAnimId&&window.cancelAnimationFrame(j._requestAnimId),j._events)window.removeEventListener(Y,j._events[Y]);var X=!0,q=!1,ce=void 0;try{for(var O,B=j._elements[Symbol.iterator]();!(X=(O=B.next()).done);X=!0){var W,re=O.value;for(W in re.elt&&re.elt.parentNode&&re.elt.parentNode.removeChild(re.elt),re._events)re.elt.removeEventListener(W,re._events[W])}}catch(fe){q=!0,ce=fe}finally{try{X||B.return==null||B.return()}finally{if(q)throw ce}}var ae=j;j._registeredMethods.remove.forEach(function(fe){fe!==void 0&&fe.call(ae)})}if(j._isGlobal){for(var me in f.prototype)try{delete window[me]}catch{window[me]=void 0}for(var ge in j)if(j.hasOwnProperty(ge))try{delete window[ge]}catch{window[ge]=void 0}f.instance=null}},this._registeredMethods.init.forEach(function(q){q!==void 0&&q.call(this)},this),this._setupPromisePreloads();var D,U,F=this._createFriendlyGlobalFunctionBinder();if(y)y(this),f._checkForUserDefinedFunctions(this);else{for(var z in this._isGlobal=!0,f.instance=this,f.prototype)typeof f.prototype[z]=="function"?(D=z.substring(2),this._events.hasOwnProperty(D)||(Math.hasOwnProperty(z)&&Math[z]===f.prototype[z]?F(z,f.prototype[z]):F(z,f.prototype[z].bind(this)))):F(z,f.prototype[z]);for(var K in this)this.hasOwnProperty(K)&&F(K,this[K])}for(U in this._events){var Q=this["_on".concat(U)];Q&&(Q=Q.bind(this),window.addEventListener(U,Q,{passive:!1}),this._events[U]=Q)}function te(){j._setProperty("focused",!0)}function Z(){j._setProperty("focused",!1)}window.addEventListener("focus",te),window.addEventListener("blur",Z),this.registerMethod("remove",function(){window.removeEventListener("focus",te),window.removeEventListener("blur",Z)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var d,g;return d=f,(g=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=l.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(y,b){f.prototype._preloadMethods.hasOwnProperty(y)||(f.prototype._preloadMethods[y]=b)}},{key:"registerMethod",value:function(y,b){var x=this||f.prototype;x._registeredMethods.hasOwnProperty(y)||(x._registeredMethods[y]=[]),x._registeredMethods[y].push(b)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=y.globalObject||window;return y.log||console.log.bind(console),function(x,j){f.disableFriendlyErrors,b[x]=j}}}])&&p(d.prototype,g),f}();for(m in h.instance=null,h.disableFriendlyErrors=!1,l)h.prototype[m]=l[m];h.VERSION=l.VERSION,h.prototype._preloadMethods={loadJSON:h.prototype,loadImage:h.prototype,loadStrings:h.prototype,loadXML:h.prototype,loadBytes:h.prototype,loadTable:h.prototype,loadFont:h.prototype,loadModel:h.prototype,loadShader:h.prototype},h.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},h.prototype._registeredPreloadMethods={},a.default=h},{"./constants":256,"./shim":278,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],268:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("./main"))&&r.__esModule?r:{default:r};o.default.Element=function(u,l){this.elt=u,this._pInst=this._pixelsState=l,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},o.default.Element.prototype.parent=function(u){return u===void 0?this.elt.parentNode:(typeof u=="string"?(u[0]==="#"&&(u=u.substring(1)),u=document.getElementById(u)):u instanceof o.default.Element&&(u=u.elt),u.appendChild(this.elt),this)},o.default.Element.prototype.id=function(u){return u===void 0?this.elt.id:(this.elt.id=u,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},o.default.Element.prototype.class=function(u){return u===void 0?this.elt.className:(this.elt.className=u,this)},o.default.Element.prototype.mousePressed=function(u){return o.default.Element._adjustListener("mousedown",function(l){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(l),u.call(this,l)},this),this},o.default.Element.prototype.doubleClicked=function(u){return o.default.Element._adjustListener("dblclick",u,this),this},o.default.Element.prototype.mouseWheel=function(u){return o.default.Element._adjustListener("wheel",u,this),this},o.default.Element.prototype.mouseReleased=function(u){return o.default.Element._adjustListener("mouseup",u,this),this},o.default.Element.prototype.mouseClicked=function(u){return o.default.Element._adjustListener("click",u,this),this},o.default.Element.prototype.mouseMoved=function(u){return o.default.Element._adjustListener("mousemove",u,this),this},o.default.Element.prototype.mouseOver=function(u){return o.default.Element._adjustListener("mouseover",u,this),this},o.default.Element.prototype.mouseOut=function(u){return o.default.Element._adjustListener("mouseout",u,this),this},o.default.Element.prototype.touchStarted=function(u){return o.default.Element._adjustListener("touchstart",u,this),this},o.default.Element.prototype.touchMoved=function(u){return o.default.Element._adjustListener("touchmove",u,this),this},o.default.Element.prototype.touchEnded=function(u){return o.default.Element._adjustListener("touchend",u,this),this},o.default.Element.prototype.dragOver=function(u){return o.default.Element._adjustListener("dragover",u,this),this},o.default.Element.prototype.dragLeave=function(u){return o.default.Element._adjustListener("dragleave",u,this),this},o.default.Element._adjustListener=function(u,l,c){return l===!1?o.default.Element._detachListener(u,c):o.default.Element._attachListener(u,l,c),this},o.default.Element._attachListener=function(u,l,c){c._events[u]&&o.default.Element._detachListener(u,c),l=l.bind(c),c.elt.addEventListener(u,l,!1),c._events[u]=l},o.default.Element._detachListener=function(u,l){var c=l._events[u];l.elt.removeEventListener(u,c,!1),l._events[u]=null},o.default.Element.prototype._setProperty=function(u,l){this[u]=l},r=o.default.Element,a.default=r},{"./main":267}],269:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.splice"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("./main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("./constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.Graphics=function(h,f,b,g){var y,b=b||c.P2D;for(y in this.canvas=document.createElement("canvas"),(g._userNode||document.body).appendChild(this.canvas),l.default.Element.call(this,this.canvas,g),l.default.prototype)this[y]||(typeof l.default.prototype[y]=="function"?this[y]=l.default.prototype[y].bind(this):this[y]=l.default.prototype[y]);return l.default.prototype._initializeInstanceVariables.apply(this),this.width=h,this.height=f,this._pixelDensity=g._pixelDensity,b===c.WEBGL?this._renderer=new l.default.RendererGL(this.canvas,this,!1):this._renderer=new l.default.Renderer2D(this.canvas,this,!1),g._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(h,f),this._renderer._applyDefaults(),this},l.default.Graphics.prototype=Object.create(l.default.Element.prototype),l.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},l.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var h,f=this._pInst._elements.indexOf(this);for(h in f!==-1&&this._pInst._elements.splice(f,1),this._events)this.elt.removeEventListener(h,this._events[h])};var m=l.default.Graphics;a.default=m},{"./constants":256,"./main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],270:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(h=r("./main"))&&h.__esModule?h:{default:h},l=function(f){if(f&&f.__esModule)return f;if(f===null||p(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("../core/constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}function p(f){return(p=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}function m(f){var d=0,g=0;if(f.offsetParent)for(;d+=f.offsetLeft,g+=f.offsetTop,f=f.offsetParent;);else d+=f.offsetLeft,g+=f.offsetTop;return[d,g]}u.default.Renderer=function(f,d,g){u.default.Element.call(this,f,d),this.canvas=f,this._pixelsState=d,g?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=l.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=l.LEFT,this._textBaseline=l.BASELINE,this._textWrap=l.WORD,this._rectMode=l.CORNER,this._ellipseMode=l.CENTER,this._curveTightness=0,this._imageMode=l.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},u.default.Renderer.prototype=Object.create(u.default.Element.prototype),u.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},u.default.Renderer.prototype.pop=function(f){f.properties&&Object.assign(this,f.properties)},u.default.Renderer.prototype.resize=function(f,d){this.width=f,this.height=d,this.elt.width=f*this._pInst._pixelDensity,this.elt.height=d*this._pInst._pixelDensity,this.elt.style.width="".concat(f,"px"),this.elt.style.height="".concat(d,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},u.default.Renderer.prototype.get=function(f,d,g,y){var b=this._pixelsState,x=b._pixelDensity,j=this.canvas;if(f===void 0&&d===void 0)f=d=0,g=b.width,y=b.height;else if(f*=x,d*=x,g===void 0&&y===void 0)return f<0||d<0||f>=j.width||d>=j.height?[0,0,0,0]:this._getPixel(f,d);return b=new u.default.Image(g,y),b.canvas.getContext("2d").drawImage(j,f,d,g*x,y*x,0,0,g,y),b},u.default.Renderer.prototype.textLeading=function(f){return typeof f=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",f),this._pInst):this._textLeading},u.default.Renderer.prototype.textSize=function(f){return typeof f=="number"?(this._setProperty("_textSize",f),this._leadingSet||this._setProperty("_textLeading",f*l._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},u.default.Renderer.prototype.textStyle=function(f){return f?(f!==l.NORMAL&&f!==l.ITALIC&&f!==l.BOLD&&f!==l.BOLDITALIC||this._setProperty("_textStyle",f),this._applyTextProperties()):this._textStyle},u.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},u.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},u.default.Renderer.prototype.textAlign=function(f,d){return f!==void 0?(this._setProperty("_textAlign",f),d!==void 0&&this._setProperty("_textBaseline",d),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},u.default.Renderer.prototype.textWrap=function(f){return this._setProperty("_textWrap",f),this._textWrap},u.default.Renderer.prototype.text=function(f,d,g,y,b){var x,j,S,w,_=this._pInst,M=this._textWrap,I=Number.MAX_VALUE,P=g;if((this._doFill||this._doStroke)&&f!==void 0){if(x=(f=(f=typeof f!="string"?f.toString():f).replace(/(\t)/g,"  ")).split(`
`),y!==void 0){switch(this._rectMode===l.CENTER&&(d-=y/2),this._textAlign){case l.CENTER:d+=y/2;break;case l.RIGHT:d+=y}if(b!==void 0){this._rectMode===l.CENTER&&(g-=b/2,P-=b/2);var f=g,R=_.textAscent();switch(this._textBaseline){case l.BOTTOM:w=g+b,g=Math.max(w,g),P+=R;break;case l.CENTER:w=g+b/2,g=Math.max(w,g),P+=R/2}I=g+b-R,this._textBaseline===l.CENTER&&(I=f+b-R/2)}else{if(this._textBaseline===l.BOTTOM)return console.warn("textAlign(*, BOTTOM) requires x, y, width and height");if(this._textBaseline===l.CENTER)return console.warn("textAlign(*, CENTER) requires x, y, width and height")}if(M===l.WORD){for(var D=[],U=0;U<x.length;U++){for(var F="",z=x[U].split(" "),K=0;K<z.length;K++)j="".concat(F+z[K])+" ",F=y<(S=this.textWidth(j))&&0<F.length?(D.push(F),"".concat(z[K])+" "):j;D.push(F)}var Q=0;this._textBaseline===l.CENTER?Q=(D.length-1)*_.textLeading()/2:this._textBaseline===l.BOTTOM&&(Q=(D.length-1)*_.textLeading());for(var te=0;te<x.length;te++){F="",z=x[te].split(" ");for(var Z=0;Z<z.length;Z++)j="".concat(F+z[Z])+" ",y<(S=this.textWidth(j))&&0<F.length?(this._renderText(_,F.trim(),d,g-Q,I,P),F="".concat(z[Z])+" ",g+=_.textLeading()):F=j;this._renderText(_,F.trim(),d,g-Q,I,P),g+=_.textLeading()}}else{for(var q=[],Y=0;Y<x.length;Y++)for(var X=x[Y].split(F=""),ce=0;ce<X.length;ce++)j="".concat(F+X[ce]),(S=this.textWidth(j))<=y?F+=X[ce]:y<S&&0<F.length&&(q.push(F),F="".concat(X[ce]));q.push(F);var O=0;this._textBaseline===l.CENTER?O=(q.length-1)*_.textLeading()/2:this._textBaseline===l.BOTTOM&&(O=(q.length-1)*_.textLeading());for(var B=0;B<x.length;B++){X=x[B].split(F="");for(var W=0;W<X.length;W++)j="".concat(F+X[W]),(S=this.textWidth(j))<=y?F+=X[W]:y<S&&0<F.length&&(this._renderText(_,F.trim(),d,g-O,I,P),g+=_.textLeading(),F="".concat(X[W]))}this._renderText(_,F.trim(),d,g-O,I,P),g+=_.textLeading()}}else{var re=0;this._textBaseline===l.CENTER?re=(x.length-1)*_.textLeading()/2:this._textBaseline===l.BOTTOM&&(re=(x.length-1)*_.textLeading());for(var ae=0;ae<x.length;ae++)this._renderText(_,x[ae],d,g-re,I,P-re),g+=_.textLeading()}return _}},u.default.Renderer.prototype._applyDefaults=function(){return this},u.default.Renderer.prototype._isOpenType=function(){var f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return p(f)==="object"&&f.font&&f.font.supported},u.default.Renderer.prototype._updateTextMetrics=function(){var f,d,g,y,b,x;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((f=document.createElement("span")).style.fontFamily=this._textFont,f.style.fontSize="".concat(this._textSize,"px"),f.innerHTML="ABCjgq|",(x=document.createElement("div")).style.display="inline-block",x.style.width="1px",x.style.height="0px",y=((d=document.createElement("div")).appendChild(f),d.appendChild(x),d.style.height="0px",d.style.overflow="hidden",document.body.appendChild(d),x.style.verticalAlign="baseline",m(x)),b=m(f),g=y[1]-b[1],y=(x.style.verticalAlign="bottom",m(x)),b=m(f),x=y[1]-b[1]-g,document.body.removeChild(d),this._setProperty("_textAscent",g),this._setProperty("_textDescent",x)),this};var h=u.default.Renderer;a.default=h},{"../core/constants":256,"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],271:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function u(f){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(h=r("./main"))&&h.__esModule?h:{default:h},c=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var d=p();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("./constants"));function p(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,p=function(){return f},f)}r("./p5.Renderer");var m="rgba(0,0,0,0)",h=(l.default.Renderer2D=function(f,d,g){return l.default.Renderer.call(this,f,d,g),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},l.default.Renderer2D.prototype=Object.create(l.default.Renderer.prototype),l.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=c.BLEND,this._setFill(c._DEFAULT_FILL),this._setStroke(c._DEFAULT_STROKE),this.drawingContext.lineCap=c.ROUND,this.drawingContext.font="normal 12px sans-serif"},l.default.Renderer2D.prototype.resize=function(f,d){l.default.Renderer.prototype.resize.call(this,f,d),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},l.default.Renderer2D.prototype.background=function(){var f,d;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof l.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(f=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(f,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(f=this._getFill(),d=(d=this._pInst).color.apply(d,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(d.levels),d=d.toString(),this._setFill(d),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(f),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()},l.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},l.default.Renderer2D.prototype.fill=function(){var f=(f=this._pInst).color.apply(f,arguments);this._setFill(f.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",f.levels)},l.default.Renderer2D.prototype.stroke=function(){var f=(f=this._pInst).color.apply(f,arguments);this._setStroke(f.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",f.levels)},l.default.Renderer2D.prototype.erase=function(f,d){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,f=this._pInst.color(255,f).toString(),this.drawingContext.fillStyle=f,this._cachedStrokeStyle=this.drawingContext.strokeStyle,f=this._pInst.color(255,d).toString(),this.drawingContext.strokeStyle=f,d=this._cachedBlendMode,this.blendMode(c.REMOVE),this._cachedBlendMode=d,this._isErasing=!0)},l.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},l.default.Renderer2D.prototype.image=function(f,d,g,y,b,x,j,S,w){f.gifProperties&&f._animateGif(this._pInst);try{l.default.MediaElement&&f instanceof l.default.MediaElement&&f._ensureCanvas();var _=(_=this._tint&&f.canvas?this._getTintedImageCanvas(f):_)||f.canvas||f.elt,M=1;f.width&&0<f.width&&(M=_.width/f.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(_,M*d,M*g,M*y,M*b,x,j,S,w),this._isErasing&&this._pInst.erase()}catch(I){if(I.name!=="NS_ERROR_NOT_AVAILABLE")throw I}},l.default.Renderer2D.prototype._getTintedImageCanvas=function(f){if(!f.canvas)return f;f.tintCanvas||(f.tintCanvas=document.createElement("canvas")),f.tintCanvas.width!==f.canvas.width&&(f.tintCanvas.width=f.canvas.width),f.tintCanvas.height!==f.canvas.height&&(f.tintCanvas.height=f.canvas.height);var d=f.tintCanvas.getContext("2d");return d.save(),d.clearRect(0,0,f.canvas.width,f.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(d.drawImage(f.canvas,0,0),d.globalCompositeOperation="luminosity",d.drawImage(f.canvas,0,0),d.globalCompositeOperation="color",d.drawImage(f.canvas,0,0),d.globalCompositeOperation="multiply",d.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),d.fillRect(0,0,f.canvas.width,f.canvas.height),d.globalCompositeOperation="destination-in"),d.globalAlpha=this._tint[3]/255,d.drawImage(f.canvas,0,0),d.restore(),f.tintCanvas},l.default.Renderer2D.prototype.blendMode=function(f){if(f===c.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(f!==c.BLEND&&f!==c.REMOVE&&f!==c.DARKEST&&f!==c.LIGHTEST&&f!==c.DIFFERENCE&&f!==c.MULTIPLY&&f!==c.EXCLUSION&&f!==c.SCREEN&&f!==c.REPLACE&&f!==c.OVERLAY&&f!==c.HARD_LIGHT&&f!==c.SOFT_LIGHT&&f!==c.DODGE&&f!==c.BURN&&f!==c.ADD)throw new Error("Mode ".concat(f," not recognized."));this._cachedBlendMode=f,this.drawingContext.globalCompositeOperation=f}},l.default.Renderer2D.prototype.blend=function(){for(var f=this.drawingContext.globalCompositeOperation,d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];var b=g[g.length-1],x=Array.prototype.slice.call(g,0,g.length-1);this.drawingContext.globalCompositeOperation=b,l.default.prototype.copy.apply(this,x),this.drawingContext.globalCompositeOperation=f},l.default.Renderer2D.prototype._getPixel=function(f,d){return f=this.drawingContext.getImageData(f,d,1,1).data,[f[0],f[1],f[2],f[3]]},l.default.Renderer2D.prototype.loadPixels=function(){var f=this._pixelsState,d=f._pixelDensity,g=this.width*d,d=this.height*d,g=this.drawingContext.getImageData(0,0,g,d);f._setProperty("imageData",g),f._setProperty("pixels",g.data)},l.default.Renderer2D.prototype.set=function(f,d,g){f=Math.floor(f),d=Math.floor(d);var y=this._pixelsState;if(g instanceof l.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(y._pixelDensity,y._pixelDensity),this.drawingContext.clearRect(f,d,g.width,g.height),this.drawingContext.drawImage(g.canvas,f,d),this.drawingContext.restore();else{var b=0,x=0,j=0,S=0,w=4*(d*y._pixelDensity*(this.width*y._pixelDensity)+f*y._pixelDensity);if(y.imageData||y.loadPixels.call(y),typeof g=="number")w<y.pixels.length&&(j=x=b=g,S=255);else if(g instanceof Array){if(g.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");w<y.pixels.length&&(b=g[0],x=g[1],j=g[2],S=g[3])}else g instanceof l.default.Color&&w<y.pixels.length&&(b=g.levels[0],x=g.levels[1],j=g.levels[2],S=g.levels[3]);for(var _=0;_<y._pixelDensity;_++)for(var M=0;M<y._pixelDensity;M++)w=4*((d*y._pixelDensity+M)*this.width*y._pixelDensity+(f*y._pixelDensity+_)),y.pixels[w]=b,y.pixels[w+1]=x,y.pixels[w+2]=j,y.pixels[w+3]=S}},l.default.Renderer2D.prototype.updatePixels=function(f,d,g,y){var b=this._pixelsState,x=b._pixelDensity;f===void 0&&d===void 0&&g===void 0&&y===void 0&&(d=f=0,g=this.width,y=this.height),f*=x,d*=x,g*=x,y*=x,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=b.imageData),this.drawingContext.putImageData(b.imageData,f,d,0,0,g,y)},l.default.Renderer2D.prototype._acuteArcToBezier=function(f,d){var x=d/2,g=Math.cos(x),S=Math.sin(x),y=1/Math.tan(x),x=f+x,b=Math.cos(x),x=Math.sin(x),j=(4-g)/3,S=S+(g-j)*y;return{ax:Math.cos(f).toFixed(7),ay:Math.sin(f).toFixed(7),bx:(j*b+S*x).toFixed(7),by:(j*x-S*b).toFixed(7),cx:(j*b-S*x).toFixed(7),cy:(j*x+S*b).toFixed(7),dx:Math.cos(f+d).toFixed(7),dy:Math.sin(f+d).toFixed(7)}},l.default.Renderer2D.prototype.arc=function(f,d,g,y,b,x,j){var S,w=this.drawingContext,_=g/2,M=y/2,I=[];for(f+=_,d+=M;1e-5<=x-b;)S=Math.min(x-b,c.HALF_PI),I.push(this._acuteArcToBezier(b,S)),b+=S;return this._doFill&&(w.beginPath(),I.forEach(function(P,R){R===0&&w.moveTo(f+P.ax*_,d+P.ay*M),w.bezierCurveTo(f+P.bx*_,d+P.by*M,f+P.cx*_,d+P.cy*M,f+P.dx*_,d+P.dy*M)}),j!==c.PIE&&j!=null||w.lineTo(f,d),w.closePath(),w.fill()),this._doStroke&&(w.beginPath(),I.forEach(function(P,R){R===0&&w.moveTo(f+P.ax*_,d+P.ay*M),w.bezierCurveTo(f+P.bx*_,d+P.by*M,f+P.cx*_,d+P.cy*M,f+P.dx*_,d+P.dy*M)}),j===c.PIE?(w.lineTo(f,d),w.closePath()):j===c.CHORD&&w.closePath(),w.stroke()),this},l.default.Renderer2D.prototype.ellipse=function(I){var d=this.drawingContext,g=this._doFill,y=this._doStroke,b=parseFloat(I[0]),x=parseFloat(I[1]),M=parseFloat(I[2]),I=parseFloat(I[3]);if(g&&!y){if(this._getFill()===m)return this}else if(!g&&y&&this._getStroke()===m)return this;var j=M/2*.5522847498,S=I/2*.5522847498,w=b+M,_=x+I,M=b+M/2,I=x+I/2;d.beginPath(),d.moveTo(b,I),d.bezierCurveTo(b,I-S,M-j,x,M,x),d.bezierCurveTo(M+j,x,w,I-S,w,I),d.bezierCurveTo(w,I+S,M+j,_,M,_),d.bezierCurveTo(M-j,_,b,I+S,b,I),g&&d.fill(),y&&d.stroke()},l.default.Renderer2D.prototype.line=function(f,d,g,y){var b=this.drawingContext;return this._doStroke&&this._getStroke()!==m&&(b.beginPath(),b.moveTo(f,d),b.lineTo(g,y),b.stroke()),this},l.default.Renderer2D.prototype.point=function(f,d){var g,y,b=this.drawingContext;return!this._doStroke||this._getStroke()===m?this:(g=this._getStroke(),y=this._getFill(),this._setFill(g),b.beginPath(),b.arc(f,d,b.lineWidth/2,0,c.TWO_PI,!1),b.fill(),void this._setFill(y))},l.default.Renderer2D.prototype.quad=function(f,d,g,y,b,x,j,S){var w=this.drawingContext,_=this._doFill,M=this._doStroke;if(_&&!M){if(this._getFill()===m)return this}else if(!_&&M&&this._getStroke()===m)return this;return w.beginPath(),w.moveTo(f,d),w.lineTo(g,y),w.lineTo(b,x),w.lineTo(j,S),w.closePath(),_&&w.fill(),M&&w.stroke(),this},l.default.Renderer2D.prototype.rect=function(M){var d,g,y=M[0],b=M[1],x=M[2],j=M[3],S=M[4],w=M[5],_=M[6],M=M[7],I=this.drawingContext,P=this._doFill,R=this._doStroke;if(P&&!R){if(this._getFill()===m)return this}else if(!P&&R&&this._getStroke()===m)return this;return I.beginPath(),S===void 0?I.rect(y,b,x,j):(w===void 0&&(w=S),_===void 0&&(_=w),M===void 0&&(M=_),R=(P=Math.abs(x))/2,g=(d=Math.abs(j))/2,d<2*(S=P<2*S?R:S)&&(S=g),d<2*(w=P<2*w?R:w)&&(w=g),d<2*(_=P<2*_?R:_)&&(_=g),d<2*(M=P<2*M?R:M)&&(M=g),I.beginPath(),I.moveTo(y+S,b),I.arcTo(y+x,b,y+x,b+j,w),I.arcTo(y+x,b+j,y,b+j,_),I.arcTo(y,b+j,y,b,M),I.arcTo(y,b,y+x,b,S),I.closePath()),this._doFill&&I.fill(),this._doStroke&&I.stroke(),this},l.default.Renderer2D.prototype.triangle=function(_){var d=this.drawingContext,g=this._doFill,y=this._doStroke,b=_[0],x=_[1],j=_[2],S=_[3],w=_[4],_=_[5];if(g&&!y){if(this._getFill()===m)return this}else if(!g&&y&&this._getStroke()===m)return this;d.beginPath(),d.moveTo(b,x),d.lineTo(j,S),d.lineTo(w,_),d.closePath(),g&&d.fill(),y&&d.stroke()},l.default.Renderer2D.prototype.endShape=function(f,d,g,y,b,x,j){if(d.length!==0&&(this._doStroke||this._doFill)){var S,w,_,M=f===c.CLOSE,I=(M&&!x&&d.push(d[0]),d.length);if(!g||j!==c.POLYGON&&j!==null)if(!y||j!==c.POLYGON&&j!==null)if(!b||j!==c.POLYGON&&j!==null)if(j===c.POINTS)for(w=0;w<I;w++)S=d[w],this._doStroke&&this._pInst.stroke(S[6]),this._pInst.point(S[0],S[1]);else if(j===c.LINES)for(w=0;w+1<I;w+=2)S=d[w],this._doStroke&&this._pInst.stroke(d[w+1][6]),this._pInst.line(S[0],S[1],d[w+1][0],d[w+1][1]);else if(j===c.TRIANGLES)for(w=0;w+2<I;w+=3)S=d[w],this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0],S[1]),this.drawingContext.lineTo(d[w+1][0],d[w+1][1]),this.drawingContext.lineTo(d[w+2][0],d[w+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(d[w+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(d[w+2][6]),this.drawingContext.stroke());else if(j===c.TRIANGLE_STRIP)for(w=0;w+1<I;w++)S=d[w],this.drawingContext.beginPath(),this.drawingContext.moveTo(d[w+1][0],d[w+1][1]),this.drawingContext.lineTo(S[0],S[1]),this._doStroke&&this._pInst.stroke(d[w+1][6]),this._doFill&&this._pInst.fill(d[w+1][5]),w+2<I&&(this.drawingContext.lineTo(d[w+2][0],d[w+2][1]),this._doStroke&&this._pInst.stroke(d[w+2][6]),this._doFill&&this._pInst.fill(d[w+2][5])),this._doFillStrokeClose(M);else if(j===c.TRIANGLE_FAN){if(2<I){for(this.drawingContext.beginPath(),w=2;w<I;w++)S=d[w],this.drawingContext.moveTo(d[0][0],d[0][1]),this.drawingContext.lineTo(d[w-1][0],d[w-1][1]),this.drawingContext.lineTo(S[0],S[1]),this.drawingContext.lineTo(d[0][0],d[0][1]),w<I-1&&(this._doFill&&S[5]!==d[w+1][5]||this._doStroke&&S[6]!==d[w+1][6])&&(this._doFill&&(this._pInst.fill(S[5]),this.drawingContext.fill(),this._pInst.fill(d[w+1][5])),this._doStroke&&(this._pInst.stroke(S[6]),this.drawingContext.stroke(),this._pInst.stroke(d[w+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(M)}}else if(j===c.QUADS)for(w=0;w+3<I;w+=4){for(S=d[w],this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0],S[1]),_=1;_<4;_++)this.drawingContext.lineTo(d[w+_][0],d[w+_][1]);this.drawingContext.lineTo(S[0],S[1]),this._doFill&&this._pInst.fill(d[w+3][5]),this._doStroke&&this._pInst.stroke(d[w+3][6]),this._doFillStrokeClose(M)}else if(j===c.QUAD_STRIP){if(3<I)for(w=0;w+1<I;w+=2)S=d[w],this.drawingContext.beginPath(),w+3<I?(this.drawingContext.moveTo(d[w+2][0],d[w+2][1]),this.drawingContext.lineTo(S[0],S[1]),this.drawingContext.lineTo(d[w+1][0],d[w+1][1]),this.drawingContext.lineTo(d[w+3][0],d[w+3][1]),this._doFill&&this._pInst.fill(d[w+3][5]),this._doStroke&&this._pInst.stroke(d[w+3][6])):(this.drawingContext.moveTo(S[0],S[1]),this.drawingContext.lineTo(d[w+1][0],d[w+1][1])),this._doFillStrokeClose(M)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(d[0][0],d[0][1]),w=1;w<I;w++)(S=d[w]).isVert&&(S.moveTo?this.drawingContext.moveTo(S[0],S[1]):this.drawingContext.lineTo(S[0],S[1]));this._doFillStrokeClose(M)}else{for(this.drawingContext.beginPath(),w=0;w<I;w++)d[w].isVert?d[w].moveTo?this.drawingContext.moveTo(d[w][0],d[w][1]):this.drawingContext.lineTo(d[w][0],d[w][1]):this.drawingContext.quadraticCurveTo(d[w][0],d[w][1],d[w][2],d[w][3]);this._doFillStrokeClose(M)}else{for(this.drawingContext.beginPath(),w=0;w<I;w++)d[w].isVert?d[w].moveTo?this.drawingContext.moveTo(d[w][0],d[w][1]):this.drawingContext.lineTo(d[w][0],d[w][1]):this.drawingContext.bezierCurveTo(d[w][0],d[w][1],d[w][2],d[w][3],d[w][4],d[w][5]);this._doFillStrokeClose(M)}else if(3<I){var P=[],R=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(d[1][0],d[1][1]),w=1;w+2<I;w++)S=d[w],P[0]=[S[0],S[1]],P[1]=[S[0]+(R*d[w+1][0]-R*d[w-1][0])/6,S[1]+(R*d[w+1][1]-R*d[w-1][1])/6],P[2]=[d[w+1][0]+(R*d[w][0]-R*d[w+2][0])/6,d[w+1][1]+(R*d[w][1]-R*d[w+2][1])/6],P[3]=[d[w+1][0],d[w+1][1]],this.drawingContext.bezierCurveTo(P[1][0],P[1][1],P[2][0],P[2][1],P[3][0],P[3][1]);M&&this.drawingContext.lineTo(d[w+1][0],d[w+1][1]),this._doFillStrokeClose(M)}x=b=y=g=!1,M&&d.pop()}return this},l.default.Renderer2D.prototype.strokeCap=function(f){return f!==c.ROUND&&f!==c.SQUARE&&f!==c.PROJECT||(this.drawingContext.lineCap=f),this},l.default.Renderer2D.prototype.strokeJoin=function(f){return f!==c.ROUND&&f!==c.BEVEL&&f!==c.MITER||(this.drawingContext.lineJoin=f),this},l.default.Renderer2D.prototype.strokeWeight=function(f){return this.drawingContext.lineWidth=f===void 0||f===0?1e-4:f,this},l.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},l.default.Renderer2D.prototype._setFill=function(f){f!==this._cachedFillStyle&&(this.drawingContext.fillStyle=f,this._cachedFillStyle=f)},l.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},l.default.Renderer2D.prototype._setStroke=function(f){f!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=f,this._cachedStrokeStyle=f)},l.default.Renderer2D.prototype.bezier=function(f,d,g,y,b,x,j,S){return this._pInst.beginShape(),this._pInst.vertex(f,d),this._pInst.bezierVertex(g,y,b,x,j,S),this._pInst.endShape(),this},l.default.Renderer2D.prototype.curve=function(f,d,g,y,b,x,j,S){return this._pInst.beginShape(),this._pInst.curveVertex(f,d),this._pInst.curveVertex(g,y),this._pInst.curveVertex(b,x),this._pInst.curveVertex(j,S),this._pInst.endShape(),this},l.default.Renderer2D.prototype._doFillStrokeClose=function(f){f&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},l.default.Renderer2D.prototype.applyMatrix=function(f,d,g,y,b,x){this.drawingContext.transform(f,d,g,y,b,x)},l.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},l.default.Renderer2D.prototype.rotate=function(f){this.drawingContext.rotate(f)},l.default.Renderer2D.prototype.scale=function(f,d){return this.drawingContext.scale(f,d),this},l.default.Renderer2D.prototype.translate=function(f,d){return f instanceof l.default.Vector&&(d=f.y,f=f.x),this.drawingContext.translate(f,d),this},l.default.Renderer2D.prototype.text=function(f,d,g,j,b){j!==void 0&&this.drawingContext.textBaseline===c.BASELINE&&(x=!0,this.drawingContext.textBaseline=c.TOP);var x,j=l.default.Renderer.prototype.text.apply(this,arguments);return x&&(this.drawingContext.textBaseline=c.BASELINE),j},l.default.Renderer2D.prototype._renderText=function(f,d,g,y,b,x){if(!(y<x||b<=y))return f.push(),this._isOpenType()?this._textFont._renderPath(d,g,y,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(d,g,y),this._doFill&&(this._fillSet||this._setFill(c._DEFAULT_TEXT_FILL),this.drawingContext.fillText(d,g,y))),f.pop(),f},l.default.Renderer2D.prototype.textWidth=function(f){return this._isOpenType()?this._textFont._textWidth(f,this._textSize):this.drawingContext.measureText(f).width},l.default.Renderer2D.prototype._applyTextProperties=function(){var f,d=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),f=this._textFont,this._isOpenType()&&(f=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(f||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===c.CENTER?this.drawingContext.textBaseline=c._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,d},l.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),l.default.Renderer.prototype.push.apply(this)},l.default.Renderer2D.prototype.pop=function(f){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,l.default.Renderer.prototype.pop.call(this,f)},l.default.Renderer2D);a.default=h},{"./constants":256,"./main":267,"./p5.Renderer":270,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],272:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var o=(r=r("./main"))&&r.__esModule?r:{default:r};o.default.prototype._promisePreloads=[];function u(){return{}}var l=!(o.default.prototype.registerPromisePreload=function(c){o.default.prototype._promisePreloads.push(c)});o.default.prototype._setupPromisePreloads=function(){var c=!0,p=!1,m=void 0;try{for(var h,f=this._promisePreloads[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value,g=this,y=d.method,b=d.addCallbacks,x=d.legacyPreloadSetup,j=d.target||this,S=j[y].bind(j);if(j===o.default.prototype){if(l)continue;g=null,S=j[y]}j[y]=this._wrapPromisePreload(g,S,b),x&&(j[x.method]=this._legacyPreloadGenerator(g,x,j[y]))}}catch(w){p=!0,m=w}finally{try{c||f.return==null||f.return()}finally{if(p)throw m}}l=!0},o.default.prototype._wrapPromisePreload=function(c,p,m){var h=function(){for(var f=this,d=(this._incrementPreload(),null),g=null,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];if(m)for(var j=b.length-1;0<=j&&!g&&typeof b[j]=="function";j--)g=d,d=b.pop();var S=Promise.resolve(p.apply(this,b));return d&&S.then(d),g&&S.catch(g),S.then(function(){return f._decrementPreload()}),S};return h=c?h.bind(c):h},o.default.prototype._legacyPreloadGenerator=function(c,f,m){var h=f.createBaseObject||u,f=function(){var d=this,g=(this._incrementPreload(),h.apply(this,arguments));return m.apply(this,arguments).then(function(y){Object.assign(g,y),d._decrementPreload()}),g};return f=c?f.bind(c):f}},{"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],273:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(h=r("./main"))&&h.__esModule?h:{default:h},l=function(f){if(f&&f.__esModule)return f;if(f===null||p(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("./constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}function p(f){return(p=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("./p5.Graphics"),r("./p5.Renderer2D"),r("../webgl/p5.RendererGL");var m="defaultCanvas0",h=(u.default.prototype.createCanvas=function(f,d,j){u.default._validateParameters("createCanvas",arguments);var y,b,x,j=j||l.P2D;if(j===l.WEBGL)(b=document.getElementById(m))&&(b.parentNode.removeChild(b),y=this._renderer,this._elements=this._elements.filter(function(w){return w!==y})),(b=document.createElement("canvas")).id=m,b.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)b=this.canvas;else{b=document.createElement("canvas");for(var S=0;document.getElementById("defaultCanvas".concat(S));)S++;m="defaultCanvas".concat(S),b.id=m,b.classList.add("p5Canvas")}return this._setupDone||(b.dataset.hidden=!0,b.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(x=document.createElement("main"),document.body.appendChild(x)),document.getElementsByTagName("main")[0])).appendChild(b),j===l.WEBGL?(this._setProperty("_renderer",new u.default.RendererGL(b,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new u.default.Renderer2D(b,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(f,d),this._renderer._applyDefaults(),this._renderer},u.default.prototype.resizeCanvas=function(f,d,g){if(u.default._validateParameters("resizeCanvas",arguments),this._renderer){var y,b,x={};for(y in this.drawingContext){var j=this.drawingContext[y];p(j)!=="object"&&typeof j!="function"&&(x[y]=j)}for(b in this._renderer.resize(f,d),this.width=f,this.height=d,x)try{this.drawingContext[b]=x[b]}catch{}g||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},u.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},u.default.prototype.createGraphics=function(f,d,g){return u.default._validateParameters("createGraphics",arguments),new u.default.Graphics(f,d,g,this)},u.default.prototype.blendMode=function(f){u.default._validateParameters("blendMode",arguments),f===l.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),f=l.BLEND),this._renderer.blendMode(f)},u.default);a.default=h},{"../webgl/p5.RendererGL":321,"./constants":256,"./main":267,"./p5.Graphics":269,"./p5.Renderer2D":271,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],274:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function u(f){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=h(r("../main")),c=function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var d=m();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("../constants")),p=h(r("../helpers"));function m(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,m=function(){return f},f)}function h(f){return f&&f.__esModule?f:{default:f}}r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),l.default.prototype._normalizeArcAngles=function(f,d,g,y,b){var x;return f-=c.TWO_PI*Math.floor(f/c.TWO_PI),d-=c.TWO_PI*Math.floor(d/c.TWO_PI),x=Math.min(Math.abs(f-d),c.TWO_PI-Math.abs(f-d)),b&&(f=f<=c.HALF_PI?Math.atan(g/y*Math.tan(f)):f>c.HALF_PI&&f<=3*c.HALF_PI?Math.atan(g/y*Math.tan(f))+c.PI:Math.atan(g/y*Math.tan(f))+c.TWO_PI,d=d<=c.HALF_PI?Math.atan(g/y*Math.tan(d)):d>c.HALF_PI&&d<=3*c.HALF_PI?Math.atan(g/y*Math.tan(d))+c.PI:Math.atan(g/y*Math.tan(d))+c.TWO_PI),d<f&&(d+=c.TWO_PI),{start:f,stop:d,correspondToSamePoint:x<1e-5}},l.default.prototype.arc=function(f,d,g,y,b,x,j,S){return l.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&b!==x&&(b=this._toRadians(b),x=this._toRadians(x),g=Math.abs(g),y=Math.abs(y),f=p.default.modeAdjust(f,d,g,y,this._renderer._ellipseMode),(d=this._normalizeArcAngles(b,x,f.w,f.h,!0)).correspondToSamePoint?this._renderer.ellipse([f.x,f.y,f.w,f.h,S]):(this._renderer.arc(f.x,f.y,f.w,f.h,d.start,d.stop,j,S),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[f.x,f.y,f.w,f.h,d.start,d.stop,j]))),this},l.default.prototype.ellipse=function(f,d,g,y,b){return l.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},l.default.prototype.circle=function(){l.default._validateParameters("circle",arguments);var f=Array.prototype.slice.call(arguments,0,2);return f.push(arguments[2]),f.push(arguments[2]),this._renderEllipse.apply(this,f)},l.default.prototype._renderEllipse=function(f,d,g,y,b){return(this._renderer._doStroke||this._renderer._doFill)&&(g<0&&(g=Math.abs(g)),y===void 0?y=g:y<0&&(y=Math.abs(y)),f=p.default.modeAdjust(f,d,g,y,this._renderer._ellipseMode),this._renderer.ellipse([f.x,f.y,f.w,f.h,b]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[f.x,f.y,f.w,f.h])),this},l.default.prototype.line=function(){for(var f,d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];return l.default._validateParameters("line",g),this._renderer._doStroke&&(f=this._renderer).line.apply(f,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",g),this},l.default.prototype.point=function(){for(var f,d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];return l.default._validateParameters("point",g),this._renderer._doStroke&&(g.length===1&&g[0]instanceof l.default.Vector?this._renderer.point.call(this._renderer,g[0].x,g[0].y,g[0].z):((f=this._renderer).point.apply(f,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",g))),this},l.default.prototype.quad=function(){for(var f,d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];return l.default._validateParameters("quad",g),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&g.length<12?this._renderer.quad.call(this._renderer,g[0],g[1],0,g[2],g[3],0,g[4],g[5],0,g[6],g[7],0,g[8],g[9]):((f=this._renderer).quad.apply(f,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",g))),this},l.default.prototype.rect=function(){return l.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},l.default.prototype.square=function(f,d,g,y,b,x,j){return l.default._validateParameters("square",arguments),this._renderRect.call(this,f,d,g,g,y,b,x,j)},l.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var f=p.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),d=[f.x,f.y,f.w,f.h],g=4;g<arguments.length;g++)d[g]=arguments[g];this._renderer.rect(d),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[f.x,f.y,f.w,f.h])}return this},l.default.prototype.triangle=function(){for(var f=arguments.length,d=new Array(f),g=0;g<f;g++)d[g]=arguments[g];return l.default._validateParameters("triangle",d),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(d),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",d),this},r=l.default,a.default=r},{"../constants":256,"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../helpers":263,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],275:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.prototype.ellipseMode=function(h){return l.default._validateParameters("ellipseMode",arguments),h!==c.CORNER&&h!==c.CORNERS&&h!==c.RADIUS&&h!==c.CENTER||(this._renderer._ellipseMode=h),this},l.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},l.default.prototype.rectMode=function(h){return l.default._validateParameters("rectMode",arguments),h!==c.CORNER&&h!==c.CORNERS&&h!==c.RADIUS&&h!==c.CENTER||(this._renderer._rectMode=h),this},l.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},l.default.prototype.strokeCap=function(h){return l.default._validateParameters("strokeCap",arguments),h!==c.ROUND&&h!==c.SQUARE&&h!==c.PROJECT||this._renderer.strokeCap(h),this},l.default.prototype.strokeJoin=function(h){return l.default._validateParameters("strokeJoin",arguments),h!==c.ROUND&&h!==c.BEVEL&&h!==c.MITER||this._renderer.strokeJoin(h),this},l.default.prototype.strokeWeight=function(h){return l.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(h),this};var m=l.default;a.default=m},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],276:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(u=r("../main"))&&u.__esModule?u:{default:u};r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),o.default.prototype.bezier=function(){for(var l,c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];return o.default._validateParameters("bezier",p),(this._renderer._doStroke||this._renderer._doFill)&&(l=this._renderer).bezier.apply(l,p),this},o.default.prototype.bezierDetail=function(l){return o.default._validateParameters("bezierDetail",arguments),this._bezierDetail=l,this},o.default.prototype.bezierPoint=function(l,c,p,m,h){o.default._validateParameters("bezierPoint",arguments);var f=1-h;return Math.pow(f,3)*l+3*Math.pow(f,2)*h*c+3*f*Math.pow(h,2)*p+Math.pow(h,3)*m},o.default.prototype.bezierTangent=function(l,c,p,m,h){o.default._validateParameters("bezierTangent",arguments);var f=1-h;return 3*m*Math.pow(h,2)-3*p*Math.pow(h,2)+6*p*f*h-6*c*f*h+3*c*Math.pow(f,2)-3*l*Math.pow(f,2)},o.default.prototype.curve=function(){for(var l,c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];return o.default._validateParameters("curve",p),this._renderer._doStroke&&(l=this._renderer).curve.apply(l,p),this},o.default.prototype.curveDetail=function(l){return o.default._validateParameters("curveDetail",arguments),this._curveDetail=l<3?3:l,this},o.default.prototype.curveTightness=function(l){return o.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=l,this},o.default.prototype.curvePoint=function(l,c,p,m,h){o.default._validateParameters("curvePoint",arguments);var f=this._renderer._curveTightness,d=h*h*h,g=h*h;return l*((f-1)/2*d+(1-f)*g+(f-1)/2*h)+c*((f+3)/2*d+(-5-f)/2*g+1)+p*((-3-f)/2*d+(f+2)*g+(1-f)/2*h)+m*((1-f)/2*d+(f-1)/2*g)},o.default.prototype.curveTangent=function(l,c,p,m,g){o.default._validateParameters("curveTangent",arguments);var f=this._renderer._curveTightness,d=g*g*3,g=2*g;return l*((f-1)/2*d+(1-f)*g+(f-1)/2)+c*((f+3)/2*d+(-5-f)/2*g)+p*((-3-f)/2*d+(f+2)*g+(1-f)/2)+m*((1-f)/2*d+(f-1)/2*g)};var u=o.default;a.default=u},{"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../main":267}],277:[function(r,s,a){function o(S){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(S)}function u(S){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(w){return o(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":o(w)})(S)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(j=r("../main"))&&j.__esModule?j:{default:j},c=function(S){if(S&&S.__esModule)return S;if(S===null||u(S)!=="object"&&typeof S!="function")return{default:S};var w=p();if(w&&w.has(S))return w.get(S);var _,M={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in S){var P;Object.prototype.hasOwnProperty.call(S,_)&&((P=I?Object.getOwnPropertyDescriptor(S,_):null)&&(P.get||P.set)?Object.defineProperty(M,_,P):M[_]=S[_])}return M.default=S,w&&w.set(S,M),M}(r("../constants"));function p(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,p=function(){return S},S)}var m=null,h=[],f=[],d=!1,g=!1,y=!1,b=!1,x=!0,j=(l.default.prototype.beginContour=function(){return f=[],b=!0,this},l.default.prototype.beginShape=function(S){var w;return l.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(w=this._renderer).beginShape.apply(w,arguments):(m=S===c.POINTS||S===c.LINES||S===c.TRIANGLES||S===c.TRIANGLE_FAN||S===c.TRIANGLE_STRIP||S===c.QUADS||S===c.QUAD_STRIP?S:null,h=[],f=[]),this},l.default.prototype.bezierVertex=function(){for(var S,w=arguments.length,_=new Array(w),M=0;M<w;M++)_[M]=arguments[M];if(l.default._validateParameters("bezierVertex",_),this._renderer.isP3D)(S=this._renderer).bezierVertex.apply(S,_);else if(h.length===0)l.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{d=!0;for(var I=[],P=0;P<_.length;P++)I[P]=_[P];I.isVert=!1,(b?f:h).push(I)}return this},l.default.prototype.curveVertex=function(){for(var S,w=arguments.length,_=new Array(w),M=0;M<w;M++)_[M]=arguments[M];return l.default._validateParameters("curveVertex",_),this._renderer.isP3D?(S=this._renderer).curveVertex.apply(S,_):(g=!0,this.vertex(_[0],_[1])),this},l.default.prototype.endContour=function(){var S=f[0].slice();S.isVert=f[0].isVert,S.moveTo=!1,f.push(S),x&&(h.push(h[0]),x=!1);for(var w=0;w<f.length;w++)h.push(f[w]);return this},l.default.prototype.endShape=function(S){if(l.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(S,g,d,y,b,m);else{if(h.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var w=S===c.CLOSE;w&&!b&&h.push(h[0]),this._renderer.endShape(S,h,g,d,y,b,m),x=!(b=y=d=g=!1),w&&h.pop()}return this},l.default.prototype.quadraticVertex=function(){for(var S,w=arguments.length,_=new Array(w),M=0;M<w;M++)_[M]=arguments[M];if(l.default._validateParameters("quadraticVertex",_),this._renderer.isP3D)(S=this._renderer).quadraticVertex.apply(S,_);else{if(this._contourInited)return(S={}).x=_[0],S.y=_[1],S.x3=_[2],S.y3=_[3],S.type=c.QUADRATIC,this._contourVertices.push(S),this;if(0<h.length){y=!0;for(var I=[],P=0;P<_.length;P++)I[P]=_[P];I.isVert=!1,(b?f:h).push(I)}else l.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},l.default.prototype.vertex=function(S,w,_,M,I){var P;return this._renderer.isP3D?(P=this._renderer).vertex.apply(P,arguments):((P=[]).isVert=!0,P[0]=S,P[1]=w,P[2]=0,P[3]=0,P[4]=0,P[5]=this._renderer._getFill(),P[6]=this._renderer._getStroke(),_&&(P.moveTo=_),(b?(f.length===0&&(P.moveTo=!0),f):h).push(P)),this},l.default.prototype.normal=function(S,w,_){var M;return this._assert3d("normal"),l.default._validateParameters("normal",arguments),(M=this._renderer).normal.apply(M,arguments),this},l.default);a.default=j},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],278:[function(r,s,a){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}function u(m){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(m)}var l,c,p;r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m,h){window.setTimeout(m,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(l=Object.keys,r=Object.defineProperty,c=typeof Symbol=="function"&&u(Symbol())==="symbol",p=Object.prototype.propertyIsEnumerable,r(Object,"assign",{value:function(m,h){if(m==null)throw new TypeError("target must be an object");for(var f,d,g,y=Object(m),b=1;b<arguments.length;++b)for(f=Object(arguments[b]),g=l(f),c&&Object.getOwnPropertySymbols&&g.push.apply(g,Object.getOwnPropertySymbols(f).filter(function(x){return function(j){return p.call(x,j)}}(f))),d=0;d<g.length;++d)y[g[d]]=f[g[d]];return y},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":230}],279:[function(r,s,a){r("core-js/modules/es.array.for-each"),r("core-js/modules/es.object.assign"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.object.assign"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var o=this._styles.pop();o?(this._renderer.pop(o.renderer),Object.assign(this,o.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(o){if(!this._inUserDraw&&this._setupDone){var u=parseInt(o),l=((isNaN(u)||u<1)&&(u=1),this._isGlobal?window:this);if(typeof l.draw=="function"){l.setup===void 0&&l.scale(l._pixelDensity,l._pixelDensity);for(var c=function(m){m.call(l)},p=0;p<u;p++){l.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),l._renderer.isP3D&&l._renderer._update(),l._setProperty("frameCount",l.frameCount+1),l._registeredMethods.pre.forEach(c),this._inUserDraw=!0;try{l.draw()}finally{this._inUserDraw=!1}l._registeredMethods.post.forEach(c)}}}},r=r.default,a.default=r},{"./main":267,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":172,"core-js/modules/web.dom-collections.for-each":229}],280:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("./main"))&&r.__esModule?r:{default:r};function u(l){return function(c){if(Array.isArray(c)){for(var p=0,m=new Array(c.length);p<c.length;p++)m[p]=c[p];return m}}(l)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.applyMatrix=function(){var l=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||l?(l=this._renderer).applyMatrix.apply(l,u(arguments[0])):(l=this._renderer).applyMatrix.apply(l,arguments),this},o.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},o.default.prototype.rotate=function(l,c){return o.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(l),c),this},o.default.prototype.rotateX=function(l){return this._assert3d("rotateX"),o.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(l)),this},o.default.prototype.rotateY=function(l){return this._assert3d("rotateY"),o.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(l)),this},o.default.prototype.rotateZ=function(l){return this._assert3d("rotateZ"),o.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(l)),this},o.default.prototype.scale=function(l,c,p){var m;return o.default._validateParameters("scale",arguments),l instanceof o.default.Vector?(l=(m=l).x,c=m.y,p=m.z):l instanceof Array&&(l=(m=l)[0],c=m[1],p=m[2]||1),isNaN(c)?c=p=l:isNaN(p)&&(p=1),this._renderer.scale.call(this._renderer,l,c,p),this},o.default.prototype.shearX=function(l){return o.default._validateParameters("shearX",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,0,Math.tan(l),1,0,0),this},o.default.prototype.shearY=function(l){return o.default._validateParameters("shearY",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,Math.tan(l),0,1,0,0),this},o.default.prototype.translate=function(l,c,p){return o.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(l,c,p):this._renderer.translate(l,c),this},r=o.default,a.default=r},{"./main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230}],281:[function(r,s,a){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(p){return function(m){if(Array.isArray(m)){for(var h=0,f=new Array(m.length);h<m.length;h++)f[h]=m[h];return f}}(p)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(p)}u.default.prototype.storeItem=function(p,m){typeof p!="string"&&console.log("The argument that you passed to storeItem() - ".concat(p," is not a string.")),p.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(p," must not end with 'p5TypeID'.")),m===void 0&&console.log("You cannot store undefined variables using storeItem().");var h=c(m);switch(h){case"number":case"boolean":m=m.toString();break;case"object":m instanceof u.default.Color?h="p5.Color":m instanceof u.default.Vector&&(h="p5.Vector",m=[m.x,m.y,m.z]),m=JSON.stringify(m)}localStorage.setItem(p,m),p="".concat(p,"p5TypeID"),localStorage.setItem(p,h)},u.default.prototype.getItem=function(p){var m=localStorage.getItem(p),h=localStorage.getItem("".concat(p,"p5TypeID"));if(h===void 0)console.log("Unable to determine type of item stored under ".concat(p,"in local storage. Did you save the item with something other than setItem()?"));else if(m!==null)switch(h){case"number":m=parseFloat(m);break;case"boolean":m=m==="true";break;case"object":m=JSON.parse(m);break;case"p5.Color":m=JSON.parse(m),m=this.color.apply(this,l(m.levels));break;case"p5.Vector":m=JSON.parse(m),m=this.createVector.apply(this,l(m))}return m},u.default.prototype.clearStorage=function(){localStorage.clear()},u.default.prototype.removeItem=function(p){typeof p!="string"&&console.log("The argument that you passed to removeItem() - ".concat(p," is not a string.")),localStorage.removeItem(p),localStorage.removeItem("".concat(p,"p5TypeID"))}},{"../core/main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],282:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.string.sub"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.createStringDict=function(u,l){return o.default._validateParameters("createStringDict",arguments),new o.default.StringDict(u,l)},o.default.prototype.createNumberDict=function(u,l){return o.default._validateParameters("createNumberDict",arguments),new o.default.NumberDict(u,l)},o.default.TypedDict=function(u,l){return u instanceof Object?this.data=u:(this.data={},this.data[u]=l),this},o.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},o.default.TypedDict.prototype.hasKey=function(u){return this.data.hasOwnProperty(u)},o.default.TypedDict.prototype.get=function(u){if(this.data.hasOwnProperty(u))return this.data[u];console.log("".concat(u," does not exist in this Dictionary"))},o.default.TypedDict.prototype.set=function(u,l){this._validate(l)?this.data[u]=l:console.log("Those values dont work for this dictionary type.")},o.default.TypedDict.prototype._addObj=function(u){for(var l in u)this.set(l,u[l])},o.default.TypedDict.prototype.create=function(u,l){u instanceof Object&&l===void 0?this._addObj(u):u!==void 0?this.set(u,l):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},o.default.TypedDict.prototype.clear=function(){this.data={}},o.default.TypedDict.prototype.remove=function(u){if(!this.data.hasOwnProperty(u))throw new Error("".concat(u," does not exist in this Dictionary"));delete this.data[u]},o.default.TypedDict.prototype.print=function(){for(var u in this.data)console.log("key:".concat(u," value:").concat(this.data[u]))},o.default.TypedDict.prototype.saveTable=function(u){var l,c="";for(l in this.data)c+="".concat(l,",").concat(this.data[l],`
`);var p=new Blob([c],{type:"text/csv"});o.default.prototype.downloadFile(p,u||"mycsv","csv")},o.default.TypedDict.prototype.saveJSON=function(u,l){o.default.prototype.saveJSON(this.data,u,l)},o.default.TypedDict.prototype._validate=function(u){return!0},o.default.StringDict=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];o.default.TypedDict.apply(this,l)},o.default.StringDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.StringDict.prototype._validate=function(u){return typeof u=="string"},o.default.NumberDict=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];o.default.TypedDict.apply(this,l)},o.default.NumberDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.NumberDict.prototype._validate=function(u){return typeof u=="number"},o.default.NumberDict.prototype.add=function(u,l){this.data.hasOwnProperty(u)?this.data[u]+=l:console.log("The key - ".concat(u," does not exist in this dictionary."))},o.default.NumberDict.prototype.sub=function(u,l){this.add(u,-l)},o.default.NumberDict.prototype.mult=function(u,l){this.data.hasOwnProperty(u)?this.data[u]*=l:console.log("The key - ".concat(u," does not exist in this dictionary."))},o.default.NumberDict.prototype.div=function(u,l){this.data.hasOwnProperty(u)?this.data[u]/=l:console.log("The key - ".concat(u," does not exist in this dictionary."))},o.default.NumberDict.prototype._valueTest=function(u){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var l,c=this.data[Object.keys(this.data)[0]];for(l in this.data)this.data[l]*u<c*u&&(c=this.data[l]);return c},o.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},o.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},o.default.NumberDict.prototype._keyTest=function(u){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var l=Object.keys(this.data)[0],c=1;c<Object.keys(this.data).length;c++)Object.keys(this.data)[c]*u<l*u&&(l=Object.keys(this.data)[c]);return l},o.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},o.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)},r=o.default.TypedDict,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],283:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(h){return(l=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}function c(h,f,d){return(f._userNode||document.body).appendChild(h),d=new(d?u.default.MediaElement:u.default.Element)(h,f),f._elements.push(d),d}function p(h,x,d,g){var y=document.createElement(x),b=(typeof(d=d||"")=="string"&&(d=[d]),!0),x=!1,j=void 0;try{for(var S,w=d[Symbol.iterator]();!(b=(S=w.next()).done);b=!0){var _=S.value,M=document.createElement("source");M.setAttribute("src",_),y.appendChild(M)}}catch(P){x=!0,j=P}finally{try{b||w.return==null||w.return()}finally{if(x)throw j}}typeof g=="function"&&y.addEventListener("canplaythrough",function P(){g(),y.removeEventListener("canplaythrough",P)});var I=c(y,h,!0);return I.loadedmetadata=!1,y.addEventListener("loadedmetadata",function(){I.width=y.videoWidth,I.height=y.videoHeight,I.elt.width===0&&(I.elt.width=y.videoWidth),I.elt.height===0&&(I.elt.height=y.videoHeight),I.presetPlaybackRate&&(I.elt.playbackRate=I.presetPlaybackRate,delete I.presetPlaybackRate),I.loadedmetadata=!0}),I}u.default.prototype.select=function(h,f){return u.default._validateParameters("select",arguments),f=this._getContainer(f).querySelector(h),f?this._wrapElement(f):null},u.default.prototype.selectAll=function(h,f){u.default._validateParameters("selectAll",arguments);var d=[],g=this._getContainer(f).querySelectorAll(h);if(g)for(var y=0;y<g.length;y++){var b=this._wrapElement(g[y]);d.push(b)}return d},u.default.prototype._getContainer=function(h){var f=document;return typeof h=="string"?f=document.querySelector(h)||document:h instanceof u.default.Element?f=h.elt:h instanceof HTMLElement&&(f=h),f},u.default.prototype._wrapElement=function(h){var f,d=Array.prototype.slice.call(h.children);return h.tagName==="INPUT"&&h.type==="checkbox"?((f=new u.default.Element(h,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},f):h.tagName==="VIDEO"||h.tagName==="AUDIO"?new u.default.MediaElement(h,this):h.tagName==="SELECT"?this.createSelect(new u.default.Element(h,this)):0<d.length&&d.every(function(g){return g.tagName==="INPUT"||g.tagName==="LABEL"})?this.createRadio(new u.default.Element(h,this)):new u.default.Element(h,this)},u.default.prototype.removeElements=function(h){u.default._validateParameters("removeElements",arguments),this._elements.filter(function(f){return!(f.elt instanceof HTMLCanvasElement)}).map(function(f){return f.remove()})},u.default.Element.prototype.changed=function(h){return u.default.Element._adjustListener("change",h,this),this},u.default.Element.prototype.input=function(h){return u.default.Element._adjustListener("input",h,this),this},u.default.prototype.createDiv=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",f=document.createElement("div");return f.innerHTML=h,c(f,this)},u.default.prototype.createP=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",f=document.createElement("p");return f.innerHTML=h,c(f,this)},u.default.prototype.createSpan=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",f=document.createElement("span");return f.innerHTML=h,c(f,this)},u.default.prototype.createImg=function(){u.default._validateParameters("createImg",arguments);var h,f=document.createElement("img"),d=arguments;return 1<d.length&&typeof d[1]=="string"&&(f.alt=d[1]),2<d.length&&typeof d[2]=="string"&&(f.crossOrigin=d[2]),f.src=d[0],h=c(f,this),f.addEventListener("load",function(){h.width=f.offsetWidth||f.width,h.height=f.offsetHeight||f.height;var g=d[d.length-1];typeof g=="function"&&g(h)}),h},u.default.prototype.createA=function(h,f,d){u.default._validateParameters("createA",arguments);var g=document.createElement("a");return g.href=h,g.innerHTML=f,d&&(g.target=d),c(g,this)},u.default.prototype.createSlider=function(h,f,d,g){u.default._validateParameters("createSlider",arguments);var y=document.createElement("input");return y.type="range",y.min=h,y.max=f,g===0?y.step=1e-18:g&&(y.step=g),typeof d=="number"&&(y.value=d),c(y,this)},u.default.prototype.createButton=function(h,f){u.default._validateParameters("createButton",arguments);var d=document.createElement("button");return d.innerHTML=h,f&&(d.value=f),c(d,this)},u.default.prototype.createCheckbox=function(){u.default._validateParameters("createCheckbox",arguments);var h=document.createElement("div"),f=document.createElement("input"),d=(f.type="checkbox",document.createElement("label")),g=(d.appendChild(f),h.appendChild(d),c(h,this));return g.checked=function(){var y=g.elt.firstElementChild.getElementsByTagName("input")[0];if(y){if(arguments.length===0)return y.checked;y.checked=!!arguments[0]}return g},this.value=function(y){return g.value=y,this},arguments[0]&&(g.value(arguments[0]),(h=document.createElement("span")).innerHTML=arguments[0],d.appendChild(h)),arguments[1]&&(f.checked=!0),g},u.default.prototype.createSelect=function(){u.default._validateParameters("createSelect",arguments);var h,f,d=arguments[0];return d instanceof u.default.Element&&d.elt instanceof HTMLSelectElement?this.elt=(h=d).elt:d instanceof HTMLSelectElement?(h=c(d,this),this.elt=d):(f=document.createElement("select"),d&&typeof d=="boolean"&&f.setAttribute("multiple","true"),h=c(f,this),this.elt=f),h.option=function(g,y){var b;if(g!==void 0){for(var x,j=0;j<this.elt.length;j+=1)if(this.elt[j].textContent===g){b=j;break}b!==void 0?y===!1?this.elt.remove(b):this.elt[b].value=y:((x=document.createElement("option")).textContent=g,x.value=y===void 0?g:y,this.elt.appendChild(x),this._pInst._elements.push(x))}},h.selected=function(g){if(g!==void 0){for(var y=0;y<this.elt.length;y+=1)this.elt[y].value.toString()===g.toString()&&(this.elt.selectedIndex=y);return this}if(this.elt.getAttribute("multiple")){var b=[],x=!0,j=!1,S=void 0;try{for(var w,_=this.elt.selectedOptions[Symbol.iterator]();!(x=(w=_.next()).done);x=!0){var M=w.value;b.push(M.value)}}catch(I){j=!0,S=I}finally{try{x||_.return==null||_.return()}finally{if(j)throw S}}return b}return this.elt.value},h.disable=function(g){if(typeof g=="string")for(var y=0;y<this.elt.length;y++)this.elt[y].value.toString()===g&&(this.elt[y].disabled=!0,this.elt[y].selected=!1);else this.elt.disabled=!0;return this},h},u.default.prototype.createRadio=function(){function h(x){return x instanceof HTMLInputElement&&x.type==="radio"}function f(x){return x instanceof HTMLLabelElement}var d,g,y,b=arguments[0];return b instanceof u.default.Element&&(b.elt instanceof HTMLDivElement||b.elt instanceof HTMLSpanElement)?(d=b,this.elt=b.elt):b instanceof HTMLDivElement||b instanceof HTMLSpanElement?(d=c(b,this),g=this.elt=b,typeof arguments[1]=="string"&&(y=arguments[1])):(typeof b=="string"&&(y=b),g=document.createElement("div"),d=c(g,this),this.elt=g),d._name=y||"radioOption",d._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(x){return h(x)||f(x)&&h(x.firstElementChild)}).map(function(x){return h(x)?x:x.firstElementChild})},d.option=function(x,j){var S,w,_,M=!0,I=!1,P=void 0;try{for(var R,D=d._getOptionsArray()[Symbol.iterator]();!(M=(R=D.next()).done);M=!0){var U=R.value;if(U.value===x){S=U;break}}}catch(F){I=!0,P=F}finally{try{M||D.return==null||D.return()}finally{if(I)throw P}}return S===void 0&&((S=document.createElement("input")).setAttribute("type","radio"),S.setAttribute("value",x)),S.setAttribute("name",d._name),f(S.parentElement)?w=S.parentElement:(w=document.createElement("label")).insertAdjacentElement("afterbegin",S),w.lastElementChild instanceof HTMLSpanElement?_=w.lastElementChild:(_=document.createElement("span"),S.insertAdjacentElement("afterend",_)),_.innerHTML=j===void 0?x:j,this.elt.appendChild(w),S},d.remove=function(x){var j=!0,S=!1,w=void 0;try{for(var _,M=d._getOptionsArray()[Symbol.iterator]();!(j=(_=M.next()).done);j=!0){var I=_.value;if(I.value===x)return void(f(I.parentElement)?I.parentElement:I).remove()}}catch(P){S=!0,w=P}finally{try{j||M.return==null||M.return()}finally{if(S)throw w}}},d.value=function(){var x="",j=!0,S=!1,w=void 0;try{for(var _,M=d._getOptionsArray()[Symbol.iterator]();!(j=(_=M.next()).done);j=!0){var I=_.value;if(I.checked){x=I.value;break}}}catch(P){S=!0,w=P}finally{try{j||M.return==null||M.return()}finally{if(S)throw w}}return x},d.selected=function(x){var j=null;if(x===void 0){var S=!0,w=!1,_=void 0;try{for(var M,I=d._getOptionsArray()[Symbol.iterator]();!(S=(M=I.next()).done);S=!0){var P=M.value;if(P.checked){j=P;break}}}catch(z){w=!0,_=z}finally{try{S||I.return==null||I.return()}finally{if(w)throw _}}}else{d._getOptionsArray().forEach(function(Q){Q.checked=!1,Q.removeAttribute("checked")});var R=!0,w=!1,_=void 0;try{for(var D,U=d._getOptionsArray()[Symbol.iterator]();!(R=(D=U.next()).done);R=!0){var F=D.value;F.value===x&&(F.setAttribute("checked",!0),F.checked=!0,j=F)}}catch(Q){w=!0,_=Q}finally{try{R||U.return==null||U.return()}finally{if(w)throw _}}}return j},d.disable=function(){var x=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],j=!0,S=!1,w=void 0;try{for(var _,M=d._getOptionsArray()[Symbol.iterator]();!(j=(_=M.next()).done);j=!0)_.value.setAttribute("disabled",x)}catch(I){S=!0,w=I}finally{try{j||M.return==null||M.return()}finally{if(S)throw w}}},d},u.default.prototype.createColorPicker=function(h){u.default._validateParameters("createColorPicker",arguments);var f=document.createElement("input");return f.type="color",h?h instanceof u.default.Color?f.value=h.toString("#rrggbb"):(u.default.prototype._colorMode="rgb",u.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},f.value=u.default.prototype.color(h).toString("#rrggbb")):f.value="#000000",(f=c(f,this)).color=function(){return h&&(h.mode&&(u.default.prototype._colorMode=h.mode),h.maxes&&(u.default.prototype._colorMaxes=h.maxes)),u.default.prototype.color(this.elt.value)},f},u.default.prototype.createInput=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",d=(u.default._validateParameters("createInput",arguments),document.createElement("input"));return d.setAttribute("value",h),d.setAttribute("type",f),c(d,this)},u.default.prototype.createFileInput=function(h){var f,d=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(u.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(f=document.createElement("input")).setAttribute("type","file"),d&&f.setAttribute("multiple",!0),f.addEventListener("change",function(g){var y=!0,b=!1,x=void 0;try{for(var j,S=g.target.files[Symbol.iterator]();!(y=(j=S.next()).done);y=!0){var w=j.value;u.default.File._load(w,h)}}catch(_){b=!0,x=_}finally{try{y||S.return==null||S.return()}finally{if(b)throw x}}},!1),c(f,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},u.default.prototype.createVideo=function(h,f){return u.default._validateParameters("createVideo",arguments),p(this,"video",h,f)},u.default.prototype.createAudio=function(h,f){return u.default._validateParameters("createAudio",arguments),p(this,"audio",h,f)},u.default.prototype.VIDEO="video",u.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(h){var f=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return f?new Promise(function(d,g){f.call(navigator,h,d,g)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),u.default.prototype.createCapture=function(){if(u.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var h,f=!0,d=!0,g=!0,y=!1,b=void 0;try{for(var x,j=arguments[Symbol.iterator]();!(g=(x=j.next()).done);g=!0){var S=x.value;S===u.default.prototype.VIDEO?d=!1:S===u.default.prototype.AUDIO?f=!1:l(S)==="object"?w=S:typeof S=="function"&&(h=S)}}catch(I){y=!0,b=I}finally{try{g||j.return==null||j.return()}finally{if(y)throw b}}var w=w||{video:f,audio:d},_=document.createElement("video"),M=(_.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(w).then(function(I){try{"srcObject"in _?_.srcObject=I:_.src=window.URL.createObjectURL(I)}catch{_.src=I}},console.log),c(_,this,!0));return M.loadedmetadata=!1,_.addEventListener("loadedmetadata",function(){_.play(),_.width?(M.width=_.width,M.height=_.height):(M.width=M.elt.width=_.videoWidth,M.height=M.elt.height=_.videoHeight),M.loadedmetadata=!0,h&&h(_.srcObject)}),M},u.default.prototype.createElement=function(h,f){return u.default._validateParameters("createElement",arguments),h=document.createElement(h),f!==void 0&&(h.innerHTML=f),c(h,this)},u.default.Element.prototype.addClass=function(h){return this.elt.className?this.hasClass(h)||(this.elt.className=this.elt.className+" "+h):this.elt.className=h,this},u.default.Element.prototype.removeClass=function(h){return this.elt.classList.remove(h),this},u.default.Element.prototype.hasClass=function(h){return this.elt.classList.contains(h)},u.default.Element.prototype.toggleClass=function(h){return this.elt.classList.contains(h)?this.elt.classList.remove(h):this.elt.classList.add(h),this},u.default.Element.prototype.child=function(h){return h===void 0?this.elt.childNodes:(typeof h=="string"?(h[0]==="#"&&(h=h.substring(1)),h=document.getElementById(h)):h instanceof u.default.Element&&(h=h.elt),h instanceof HTMLElement&&this.elt.appendChild(h),this)},u.default.Element.prototype.center=function(h){var f=this.elt.style.display,d=this.elt.style.display==="none",g=this.parent().style.display==="none",y={x:this.elt.offsetLeft,y:this.elt.offsetTop},b=(d&&this.show(),g&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),x=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return h==="both"||h===void 0?this.position(b/2+this.parent().offsetLeft,x/2+this.parent().offsetTop):h==="horizontal"?this.position(b/2+this.parent().offsetLeft,y.y):h==="vertical"&&this.position(y.x,x/2+this.parent().offsetTop),this.style("display",f),d&&this.hide(),g&&this.parent().hide(),this},u.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},u.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"?"absolute":arguments[2],this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)},u.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var h="";return this.elt.style.transform&&(h=(h=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=h,this},u.default.Element.prototype._rotate=function(){var h="";return this.elt.style.transform&&(h=(h=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=h,this},u.default.Element.prototype.style=function(h,f){if((f=f instanceof u.default.Color?"rgba("+f.levels[0]+","+f.levels[1]+","+f.levels[2]+","+f.levels[3]/255+")":f)===void 0){if(h.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(h);for(var d=h.split(";"),g=0;g<d.length;g++){var y=d[g].split(":");y[0]&&y[1]&&(this.elt.style[y[0].trim()]=y[1].trim())}}else this.elt.style[h]=f,h!=="width"&&h!=="height"&&h!=="left"&&h!=="top"||(f=window.getComputedStyle(this.elt).getPropertyValue(h).replace(/[^\d.]/g,""),this[h]=Math.round(parseFloat(f,10)));return this},u.default.Element.prototype.attribute=function(h,f){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return f===void 0?this.elt.getAttribute(h):(this.elt.setAttribute(h,f),this);if(f===void 0)return this.elt.firstChild.getAttribute(h);for(var d=0;d<this.elt.childNodes.length;d++)this.elt.childNodes[d].setAttribute(h,f)},u.default.Element.prototype.removeAttribute=function(h){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var f=0;f<this.elt.childNodes.length;f++)this.elt.childNodes[f].removeAttribute(h);return this.elt.removeAttribute(h),this},u.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},u.default.Element.prototype.show=function(){return this.elt.style.display="block",this},u.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},u.default.Element.prototype.size=function(h,f){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var d=h,g=f,y=u.default.prototype.AUTO;if(d!==y||g!==y){if(d===y?d=f*this.width/this.height:g===y&&(g=h*this.height/this.width),this.elt instanceof HTMLCanvasElement){var b,x={},j=this.elt.getContext("2d");for(b in j)x[b]=j[b];for(b in this.elt.setAttribute("width",d*this._pInst._pixelDensity),this.elt.setAttribute("height",g*this._pInst._pixelDensity),this.elt.style.width=d+"px",this.elt.style.height=g+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),x)this.elt.getContext("2d")[b]=x[b]}else this.elt.style.width=d+"px",this.elt.style.height=g+"px",this.elt.width=d,this.elt.height=g;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},u.default.Element.prototype.remove=function(){this instanceof u.default.MediaElement&&(this.stop(),(f=this.elt.srcObject)!==null&&f.getTracks().forEach(function(d){d.stop()}));var h,f=this._pInst._elements.indexOf(this);for(h in f!==-1&&this._pInst._elements.splice(f,1),this._events)this.elt.removeEventListener(h,this._events[h]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},u.default.Element.prototype.drop=function(h,f){var d;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",d=function(g){g.preventDefault()}),this.elt.addEventListener("dragleave",d)),u.default.Element._attachListener("drop",function(g){g.preventDefault(),typeof f=="function"&&f.call(this,g);for(var y=g.dataTransfer.files,b=0;b<y.length;b++){var x=y[b];u.default.File._load(x,h)}},this)):console.log("The File APIs are not fully supported in this browser."),this},u.default.MediaElement=function(h,f){u.default.Element.call(this,h,f);var d=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(d,"src",{get:function(){var g=d.elt.children[0].src,y=d.elt.src===window.location.href?"":d.elt.src;return g===window.location.href?y:g},set:function(g){for(var y=0;y<d.elt.children.length;y++)d.elt.removeChild(d.elt.children[y]);var b=document.createElement("source");b.src=g,h.appendChild(b),d.elt.src=g,d.modified=!0}}),d._onended=function(){},d.elt.onended=function(){d._onended(d)}},u.default.MediaElement.prototype=Object.create(u.default.Element.prototype),u.default.MediaElement.prototype.play=function(){var h;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(h=this.elt.play())&&h.catch&&h.catch(function(f){f.name==="NotAllowedError"?console.error(f):console.error("Media play method encountered an unexpected error",f)}),this},u.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},u.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},u.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},u.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},u.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var h=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(h)},{passive:!0,once:!0})},u.default.MediaElement.prototype.autoplay=function(h){var f=this,d=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",h),h&&!d&&(h=function(){return f._setupAutoplayFailDetection()},this.elt.readyState===4?h():this.elt.addEventListener("canplay",h,{passive:!0,once:!0})),this},u.default.MediaElement.prototype.volume=function(h){if(h===void 0)return this.elt.volume;this.elt.volume=h},u.default.MediaElement.prototype.speed=function(h){if(h===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=h:this.presetPlaybackRate=h},u.default.MediaElement.prototype.time=function(h){return h===void 0?this.elt.currentTime:(this.elt.currentTime=h,this)},u.default.MediaElement.prototype.duration=function(){return this.elt.duration},u.default.MediaElement.prototype.pixels=[],u.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},u.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),u.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},u.default.MediaElement.prototype.updatePixels=function(h,f,d,g){return this.loadedmetadata&&(this._ensureCanvas(),u.default.Renderer2D.prototype.updatePixels.call(this,h,f,d,g)),this.setModified(!0),this},u.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),u.default.Renderer2D.prototype.get.apply(this,arguments)},u.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),u.default.Renderer2D.prototype._getPixel.apply(this,arguments)},u.default.MediaElement.prototype.set=function(h,f,d){this.loadedmetadata&&(this._ensureCanvas(),u.default.Renderer2D.prototype.set.call(this,h,f,d),this.setModified(!0))},u.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),u.default.prototype.copy.apply(this,arguments)},u.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),u.default.Image.prototype.mask.apply(this,arguments)},u.default.MediaElement.prototype.isModified=function(){return this._modified},u.default.MediaElement.prototype.setModified=function(h){this._modified=h},u.default.MediaElement.prototype.onended=function(h){return this._onended=h,this},u.default.MediaElement.prototype.connect=function(h){var f,d;if(typeof u.default.prototype.getAudioContext=="function")f=u.default.prototype.getAudioContext(),d=u.default.soundOut.input;else try{d=(f=h.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=f.createMediaElementSource(this.elt),this.audioSourceNode.connect(d)),h?h.input?this.audioSourceNode.connect(h.input):this.audioSourceNode.connect(h):this.audioSourceNode.connect(d)},u.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},u.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},u.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function m(h,f,d,g){this.callback=h,this.time=f,this.id=d,this.val=g}u.default.MediaElement.prototype.addCue=function(h,y,d){var g=this._cueIDCounter++,y=new m(y,h,g,d);return this._cues.push(y),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),g},u.default.MediaElement.prototype.removeCue=function(h){for(var f=0;f<this._cues.length;f++)this._cues[f].id===h&&(console.log(h),this._cues.splice(f,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},u.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},u.default.MediaElement.prototype._onTimeUpdate=function(){for(var h=this.time(),f=0;f<this._cues.length;f++){var d=this._cues[f].time,g=this._cues[f].val;this._prevTime<d&&d<=h&&this._cues[f].callback(g)}this._prevTime=h},u.default.File=function(h,f){this.file=h,this._pInst=f,f=h.type.split("/"),this.type=f[0],this.subtype=f[1],this.name=h.name,this.size=h.size,this.data=void 0},u.default.File._createLoader=function(h,f){var d=new FileReader;return d.onload=function(g){var y,b=new u.default.File(h);b.file.type==="application/json"?b.data=JSON.parse(g.target.result):b.file.type==="text/xml"?(y=new DOMParser().parseFromString(g.target.result,"text/xml"),b.data=new u.default.XML(y.documentElement)):b.data=g.target.result,f(b)},d},u.default.File._load=function(h,f){var d;/^text\//.test(h.type)||h.type==="application/json"?u.default.File._createLoader(h,f).readAsText(h):/^(video|audio)\//.test(h.type)?((d=new u.default.File(h)).data=URL.createObjectURL(h),f(d)):u.default.File._createLoader(h,f).readAsDataURL(h)},r=u.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.every":151,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232}],284:[function(r,s,a){function o(S){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(S)}function u(S){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(w){return o(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":o(w)})(S)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(j=r("../core/main"))&&j.__esModule?j:{default:j},c=function(S){if(S&&S.__esModule)return S;if(S===null||u(S)!=="object"&&typeof S!="function")return{default:S};var w=p();if(w&&w.has(S))return w.get(S);var _,M={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in S){var P;Object.prototype.hasOwnProperty.call(S,_)&&((P=I?Object.getOwnPropertyDescriptor(S,_):null)&&(P.get||P.set)?Object.defineProperty(M,_,P):M[_]=S[_])}return M.default=S,w&&w.set(S,M),M}(r("../core/constants"));function p(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,p=function(){return S},S)}l.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",l.default.prototype.accelerationX=0,l.default.prototype.accelerationY=0,l.default.prototype.accelerationZ=0,l.default.prototype.pAccelerationX=0,l.default.prototype.pAccelerationY=0,l.default.prototype.pAccelerationZ=0,l.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},l.default.prototype.rotationX=0,l.default.prototype.rotationY=0,l.default.prototype.rotationZ=0,l.default.prototype.pRotationX=0,l.default.prototype.pRotationY=0;var m=l.default.prototype.pRotationZ=0,h=0,f=0,d="clockwise",g="clockwise",y="clockwise",b=(l.default.prototype.pRotateDirectionX=void 0,l.default.prototype.pRotateDirectionY=void 0,l.default.prototype.pRotateDirectionZ=void 0,l.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},l.default.prototype.turnAxis=void 0,.5),x=30,j=(l.default.prototype.setMoveThreshold=function(S){l.default._validateParameters("setMoveThreshold",arguments),b=S},l.default.prototype.setShakeThreshold=function(S){l.default._validateParameters("setShakeThreshold",arguments),x=S},l.default.prototype._ondeviceorientation=function(S){this._updatePRotations(),this._angleMode===c.radians&&(S.beta=S.beta*(_PI/180),S.gamma=S.gamma*(_PI/180),S.alpha=S.alpha*(_PI/180)),this._setProperty("rotationX",S.beta),this._setProperty("rotationY",S.gamma),this._setProperty("rotationZ",S.alpha),this._handleMotion()},l.default.prototype._ondevicemotion=function(S){this._updatePAccelerations(),this._setProperty("accelerationX",2*S.acceleration.x),this._setProperty("accelerationY",2*S.acceleration.y),this._setProperty("accelerationZ",2*S.acceleration.z),this._handleMotion()},l.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var S,w,_,M,I,P=this._isGlobal?window:this;typeof P.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>b||Math.abs(this.accelerationY-this.pAccelerationY)>b||Math.abs(this.accelerationZ-this.pAccelerationZ)>b)&&P.deviceMoved(),typeof P.deviceTurned=="function"&&(w=this.rotationX+180,S=this.pRotationX+180,_=m+180,0<w-S&&w-S<270||w-S<-270?d="clockwise":(w-S<0||270<w-S)&&(d="counter-clockwise"),d!==this.pRotateDirectionX&&(_=w),90<Math.abs(w-_)&&Math.abs(w-_)<270&&(_=w,this._setProperty("turnAxis","X"),P.deviceTurned()),this.pRotateDirectionX=d,m=_-180,S=this.rotationY+180,w=this.pRotationY+180,_=h+180,0<S-w&&S-w<270||S-w<-270?g="clockwise":(S-w<0||270<S-this.pRotationY)&&(g="counter-clockwise"),g!==this.pRotateDirectionY&&(_=S),90<Math.abs(S-_)&&Math.abs(S-_)<270&&(_=S,this._setProperty("turnAxis","Y"),P.deviceTurned()),this.pRotateDirectionY=g,h=_-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?y="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(y="counter-clockwise"),y!==this.pRotateDirectionZ&&(f=this.rotationZ),90<Math.abs(this.rotationZ-f)&&Math.abs(this.rotationZ-f)<270&&(f=this.rotationZ,this._setProperty("turnAxis","Z"),P.deviceTurned()),this.pRotateDirectionZ=y,this._setProperty("turnAxis",void 0)),typeof P.deviceShaken=="function"&&(this.pAccelerationX!==null&&(M=Math.abs(this.accelerationX-this.pAccelerationX),I=Math.abs(this.accelerationY-this.pAccelerationY)),x<M+I&&P.deviceShaken())},l.default);a.default=j},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],285:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(u){var l;this._downKeys[u.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",u.which),this._downKeys[u.which]=!0,this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which),typeof(l=this._isGlobal?window:this).keyPressed!="function"||u.charCode||l.keyPressed(u)===!1&&u.preventDefault())},o.default.prototype._onkeyup=function(u){this._downKeys[u.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which),this._setProperty("keyCode",u.which);var l=this._isGlobal?window:this;typeof l.keyReleased=="function"&&l.keyReleased(u)===!1&&u.preventDefault()},o.default.prototype._onkeypress=function(u){var l;u.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",u.which),this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which),typeof(l=this._isGlobal?window:this).keyTyped=="function"&&l.keyTyped(u)===!1&&u.preventDefault())},o.default.prototype._onblur=function(u){this._downKeys={}},o.default.prototype.keyIsDown=function(u){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[u]||!1},o.default.prototype._areDownKeys=function(){for(var u in this._downKeys)if(this._downKeys.hasOwnProperty(u)&&this._downKeys[u]===!0)return!0;return!1},r=o.default,a.default=r},{"../core/main":267}],286:[function(r,s,a){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(m)}function u(m){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(l=r("../core/main"))&&l.__esModule?l:{default:l},c=function(m){if(m&&m.__esModule)return m;if(m===null||u(m)!=="object"&&typeof m!="function")return{default:m};var h=p();if(h&&h.has(m))return h.get(m);var f,d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in m){var y;Object.prototype.hasOwnProperty.call(m,f)&&((y=g?Object.getOwnPropertyDescriptor(m,f):null)&&(y.get||y.set)?Object.defineProperty(d,f,y):d[f]=m[f])}return d.default=m,h&&h.set(m,d),d}(r("../core/constants"));function p(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,p=function(){return m},m)}l.default.prototype.movedX=0,l.default.prototype.movedY=0,l.default.prototype._hasMouseInteracted=!1,l.default.prototype.mouseX=0,l.default.prototype.mouseY=0,l.default.prototype.pmouseX=0,l.default.prototype.pmouseY=0,l.default.prototype.winMouseX=0,l.default.prototype.winMouseY=0,l.default.prototype.pwinMouseX=0,l.default.prototype.pwinMouseY=0,l.default.prototype.mouseButton=0,l.default.prototype.mouseIsPressed=!1,l.default.prototype._updateNextMouseCoords=function(m){var h,f,d,g,y;this._curElement!==null&&(!m.touches||0<m.touches.length)&&(h=this._curElement.elt,f=this.width,d=this.height,(g=m)&&!g.clientX&&(g.touches?g=g.touches[0]:g.changedTouches&&(g=g.changedTouches[0])),y=h.getBoundingClientRect(),f=h.scrollWidth/f||1,h=h.scrollHeight/d||1,d={x:(g.clientX-y.left)/f,y:(g.clientY-y.top)/h,winX:g.clientX,winY:g.clientY,id:g.identifier},this._setProperty("movedX",m.movementX),this._setProperty("movedY",m.movementY),this._setProperty("mouseX",d.x),this._setProperty("mouseY",d.y),this._setProperty("winMouseX",d.winX),this._setProperty("winMouseY",d.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},l.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},l.default.prototype._setMouseButton=function(m){m.button===1?this._setProperty("mouseButton",c.CENTER):m.button===2?this._setProperty("mouseButton",c.RIGHT):this._setProperty("mouseButton",c.LEFT)},l.default.prototype._onmousemove=function(m){var h=this._isGlobal?window:this;this._updateNextMouseCoords(m),this.mouseIsPressed?typeof h.mouseDragged=="function"?h.mouseDragged(m)===!1&&m.preventDefault():typeof h.touchMoved=="function"&&h.touchMoved(m)===!1&&m.preventDefault():typeof h.mouseMoved=="function"&&h.mouseMoved(m)===!1&&m.preventDefault()},l.default.prototype._onmousedown=function(m){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(m),this._updateNextMouseCoords(m),typeof h.mousePressed=="function"?h.mousePressed(m)===!1&&m.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof h.touchStarted=="function"&&h.touchStarted(m)===!1&&m.preventDefault()},l.default.prototype._onmouseup=function(m){var h=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof h.mouseReleased=="function"?h.mouseReleased(m)===!1&&m.preventDefault():typeof h.touchEnded=="function"&&h.touchEnded(m)===!1&&m.preventDefault()},l.default.prototype._ondragend=l.default.prototype._onmouseup,l.default.prototype._ondragover=l.default.prototype._onmousemove,l.default.prototype._onclick=function(m){var h=this._isGlobal?window:this;typeof h.mouseClicked=="function"&&h.mouseClicked(m)===!1&&m.preventDefault()},l.default.prototype._ondblclick=function(m){var h=this._isGlobal?window:this;typeof h.doubleClicked=="function"&&h.doubleClicked(m)===!1&&m.preventDefault()},l.default.prototype._mouseWheelDeltaY=0,l.default.prototype._pmouseWheelDeltaY=0,l.default.prototype._onwheel=function(m){var h=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",m.deltaY),typeof h.mouseWheel=="function"&&(m.delta=m.deltaY,h.mouseWheel(m)===!1&&m.preventDefault())},l.default.prototype.requestPointerLock=function(){var m=this._curElement.elt;return m.requestPointerLock=m.requestPointerLock||m.mozRequestPointerLock,m.requestPointerLock?(m.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},l.default.prototype.exitPointerLock=function(){document.exitPointerLock()},r=l.default,a.default=r},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],287:[function(r,s,a){r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(o){if(this._curElement!==null){for(var u=[],l=0;l<o.touches.length;l++)u[l]=function(y,g,b,h){var f=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,d=y.getBoundingClientRect(),g=y.scrollWidth/g||1,y=y.scrollHeight/b||1,b=h.touches[f]||h.changedTouches[f];return{x:(b.clientX-d.left)/g,y:(b.clientY-d.top)/y,winX:b.clientX,winY:b.clientY,id:b.identifier}}(this._curElement.elt,this.width,this.height,o,l);this._setProperty("touches",u)}},r.default.prototype._ontouchstart=function(o){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(o),this._updateNextMouseCoords(o),this._updateMouseCoords(),typeof u.touchStarted=="function"?u.touchStarted(o)===!1&&o.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof u.mousePressed=="function"&&u.mousePressed(o)===!1&&o.preventDefault()},r.default.prototype._ontouchmove=function(o){var u=this._isGlobal?window:this;this._updateTouchCoords(o),this._updateNextMouseCoords(o),typeof u.touchMoved=="function"?u.touchMoved(o)===!1&&o.preventDefault():typeof u.mouseDragged=="function"&&u.mouseDragged(o)===!1&&o.preventDefault()},r.default.prototype._ontouchend=function(o){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(o),this._updateNextMouseCoords(o);var u=this._isGlobal?window:this;typeof u.touchEnded=="function"?u.touchEnded(o)===!1&&o.preventDefault():typeof u.mouseReleased=="function"&&u.mouseReleased(o)===!1&&o.preventDefault()},r=r.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],288:[function(r,s,a){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,l,c,p={};function m(h,f){for(var d,g,y,b,x,j,S,w,_,M,I=p._toPixels(h),P=h.width,R=h.height,D=P*R,U=new Int32Array(D),F=0;F<D;F++)U[F]=p._getARGB(I,F);var z,K,Q,te=new Int32Array(D),Z=new Int32Array(D),q=new Int32Array(D),Y=new Int32Array(D),X=0,ce=3.5*f|0;if(o!==(ce=ce<1?1:ce<248?ce:248)){u=1+(o=ce)<<1,l=new Int32Array(u),c=new Array(u);for(var O,B,W=0;W<u;W++)c[W]=new Int32Array(256);for(var re=1,ae=ce-1;re<ce;re++){l[ce+re]=l[ae]=B=ae*ae;for(var me=c[ce+re],ge=c[ae--],xe=0;xe<256;xe++)me[xe]=ge[xe]=B*xe}O=l[ce]=ce*ce,me=c[ce];for(var fe=0;fe<256;fe++)me[fe]=O*fe}for(K=0;K<R;K++){for(z=0;z<P;z++){if(b=y=g=x=d=0,(j=z-o)<0)M=-j,j=0;else{if(P<=j)break;M=0}for(Q=M;Q<u&&!(P<=j);Q++){var ye,Te=U[j+X];x+=(ye=c[Q])[(-16777216&Te)>>>24],g+=ye[(16711680&Te)>>16],y+=ye[(65280&Te)>>8],b+=ye[255&Te],d+=l[Q],j++}te[S=X+z]=x/d,Z[S]=g/d,q[S]=y/d,Y[S]=b/d}X+=P}for(_=(w=-o)*P,K=X=0;K<R;K++){for(z=0;z<P;z++){if(w<(b=y=g=x=d=0))M=S=-w,j=z;else{if(R<=w)break;M=0,S=w,j=z+_}for(Q=M;Q<u&&!(R<=S);Q++)x+=(ye=c[Q])[te[j]],g+=ye[Z[j]],y+=ye[q[j]],b+=ye[Y[j]],d+=l[Q],S++,j+=P;U[z+X]=x/d<<24|g/d<<16|y/d<<8|b/d}X+=P,_+=P,w++}p._setPixels(I,U)}p._toPixels=function(h){var f,d;return h instanceof ImageData?h.data:h.getContext("2d")?h.getContext("2d").getImageData(0,0,h.width,h.height).data:h.getContext("webgl")?(d=(f=h.getContext("webgl")).drawingBufferWidth*f.drawingBufferHeight*4,d=new Uint8Array(d),f.readPixels(0,0,h.width,h.height,f.RGBA,f.UNSIGNED_BYTE,d),d):void 0},p._getARGB=function(h,f){return f*=4,h[3+f]<<24&4278190080|h[f]<<16&16711680|h[1+f]<<8&65280|255&h[2+f]},p._setPixels=function(h,f){for(var d,g=0,y=h.length;g<y;g++)h[0+(d=4*g)]=(16711680&f[g])>>>16,h[1+d]=(65280&f[g])>>>8,h[2+d]=255&f[g],h[3+d]=(4278190080&f[g])>>>24},p._toImageData=function(h){return h instanceof ImageData?h:h.getContext("2d").getImageData(0,0,h.width,h.height)},p._createImageData=function(h,f){return p._tmpCanvas=document.createElement("canvas"),p._tmpCtx=p._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(h,f)},p.apply=function(h,b,d){var g=h.getContext("2d"),y=g.getImageData(0,0,h.width,h.height),b=b(y,d);b instanceof ImageData?g.putImageData(b,0,0,0,0,h.width,h.height):g.putImageData(y,0,0,0,0,h.width,h.height)},p.threshold=function(h,f){for(var d=p._toPixels(h),g=(f===void 0&&(f=.5),Math.floor(255*f)),y=0;y<d.length;y+=4){var b=void 0,b=g<=.2126*d[y]+.7152*d[y+1]+.0722*d[y+2]?255:0;d[y]=d[y+1]=d[y+2]=b}},p.gray=function(h){for(var f=p._toPixels(h),d=0;d<f.length;d+=4){var g=f[d],y=f[d+1],b=f[d+2];f[d]=f[d+1]=f[d+2]=.2126*g+.7152*y+.0722*b}},p.opaque=function(h){for(var f=p._toPixels(h),d=0;d<f.length;d+=4)f[d+3]=255;return f},p.invert=function(h){for(var f=p._toPixels(h),d=0;d<f.length;d+=4)f[d]=255-f[d],f[d+1]=255-f[d+1],f[d+2]=255-f[d+2]},p.posterize=function(h,f){var d=p._toPixels(h);if(f<2||255<f)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var g=f-1,y=0;y<d.length;y+=4){var b=d[y],x=d[y+1],j=d[y+2];d[y]=255*(b*f>>8)/g,d[y+1]=255*(x*f>>8)/g,d[y+2]=255*(j*f>>8)/g}},p.dilate=function(h){for(var f,d,g,y,b,x,j,S,w,_=p._toPixels(h),M=0,I=_.length?_.length/4:0,P=new Int32Array(I);M<I;)for(d=(f=M)+h.width;M<d;)y=g=p._getARGB(_,M),(w=M-1)<f&&(w=M),d<=(S=M+1)&&(S=M),(b=M-h.width)<0&&(b=0),I<=(x=M+h.width)&&(x=M),b=p._getARGB(_,b),w=p._getARGB(_,w),x=p._getARGB(_,x),(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<(j=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))&&(g=w,y=j),y<(j=77*((w=p._getARGB(_,S))>>16&255)+151*(w>>8&255)+28*(255&w))&&(g=w,y=j),y<(S=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(g=b,y=S),y<(w=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))&&(g=x,y=w),P[M++]=g;p._setPixels(_,P)},p.erode=function(h){for(var f,d,g,y,b,x,j,S,w,_=p._toPixels(h),M=0,I=_.length?_.length/4:0,P=new Int32Array(I);M<I;)for(d=(f=M)+h.width;M<d;)y=g=p._getARGB(_,M),(w=M-1)<f&&(w=M),d<=(S=M+1)&&(S=M),(b=M-h.width)<0&&(b=0),I<=(x=M+h.width)&&(x=M),b=p._getARGB(_,b),w=p._getARGB(_,w),x=p._getARGB(_,x),(j=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))<(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(g=w,y=j),(j=77*((w=p._getARGB(_,S))>>16&255)+151*(w>>8&255)+28*(255&w))<y&&(g=w,y=j),(S=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<y&&(g=b,y=S),(w=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))<y&&(g=x,y=w),P[M++]=g;p._setPixels(_,P)},p.blur=function(h,f){m(h,f)},a.default=p},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],289:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r("../core/main")),u=l(r("omggif"));function l(p){return p&&p.__esModule?p:{default:p}}function c(p){return function(m){if(Array.isArray(m)){for(var h=0,f=new Array(m.length);h<m.length;h++)f[h]=m[h];return f}}(p)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.createImage=function(p,m){return o.default._validateParameters("createImage",arguments),new o.default.Image(p,m)},o.default.prototype.saveCanvas=function(){o.default._validateParameters("saveCanvas",arguments);var p,m,h,f,d=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(p=arguments[0],d.shift()):arguments[0]instanceof o.default.Element?(p=arguments[0].elt,d.shift()):p=this._curElement&&this._curElement.elt,1<=d.length&&(m=d[0]),h=(h=2<=d.length?d[1]:h)||o.default.prototype._checkFileExtension(m,h)[1]||"png"){default:f="image/png";break;case"jpeg":case"jpg":f="image/jpeg"}p.toBlob(function(g){o.default.prototype.downloadFile(g,m,h)},f)},o.default.prototype.encodeAndDownloadGif=function(p,m){for(var h=p.gifProperties,f=h.loopLimit,d=(f===1?f=null:f===null&&(f=0),new Uint8Array(p.width*p.height*h.numFrames)),g=[],y={},b=0;b<h.numFrames;b++){for(var x=new Set,j=h.frames[b].image.data,S=j.length,w=new Uint32Array(p.width*p.height),_=0,M=0;_<S;_+=4,M++){var I=j[_+0]<<16|j[_+1]<<8|j[_+2]<<0;x.add(I),w[M]=I}var P=c(x).sort().toString();y[P]===void 0?y[P]={freq:1,frames:[b]}:(y[P].freq+=1,y[P].frames.push(b)),g.push(w)}for(var U=[],R=Object.keys(y).sort(function(O,B){return y[B].freq-y[O].freq}),D=R[0].split(",").map(function(O){return parseInt(O)}),U=U.concat(y[D].frames),F=new Set(D),z=1;z<R.length;z++){var K=R[z].split(",").map(function(O){return parseInt(O)}).filter(function(O){return!F.has(O)});if(D.length+K.length<=256){for(var Q=0;Q<K.length;Q++)D.push(K[Q]),F.add(K[Q]);U=U.concat(y[R[z]].frames)}}U=new Set(U);for(var te={},Z=0;Z<D.length;Z++)te[D[Z]]||(te[D[Z]]=Z);for(var q=1;q<D.length;)q<<=1;D.length=q;for(var f={loop:f,palette:new Uint32Array(D)},Y=new u.default.GifWriter(d,p.width,p.height,f),X={},ce=0;ce<h.numFrames;ce++)(function(B){for(var W=!U.has(B),re=W?[]:D,ae=new Uint8Array(p.width*p.height),me={},ge=new Set,xe=0;xe<g[B].length;xe++){var fe=g[B][xe];W?(me[fe]===void 0&&(me[fe]=re.length,re.push(fe)),ae[xe]=me[fe]):ae[xe]=te[fe],0<B&&g[B-1][xe]!==fe&&ge.add(fe)}var ye={},Te=re.filter(function(Ie){return!ge.has(Ie)});if(0<Te.length){var Te=Te[0],oe=(W?me:te)[Te];if(0<B){for(var Se=0;Se<g[B].length;Se++)g[B-1][Se]===g[B][Se]&&(ae[Se]=oe);ye.transparent=oe,X.frameOpts.disposal=1}}if(ye.delay=h.frames[B].delay/10,W){for(var be=1;be<re.length;)be<<=1;re.length=be,ye.palette=new Uint32Array(re)}0<B&&Y.addFrame(0,0,p.width,p.height,X.pixelPaletteIndex,X.frameOpts),X={pixelPaletteIndex:ae,frameOpts:ye}})(ce);X.frameOpts.disposal=1,Y.addFrame(0,0,p.width,p.height,X.pixelPaletteIndex,X.frameOpts),f=new Blob([d.slice(0,Y.end())],{type:"image/gif"}),o.default.prototype.downloadFile(f,m,"gif")},o.default.prototype.saveFrames=function(p,m,h,g,d){o.default._validateParameters("saveFrames",arguments),h=o.default.prototype.constrain(h=h||3,0,15),h*=1e3;var g=o.default.prototype.constrain(g||15,0,22),y=0,b=o.default.prototype._makeFrame,x=this._curElement.elt,j=[],S=setInterval(function(){j.push(b(p+y,m,x)),y++},1e3/g);setTimeout(function(){if(clearInterval(S),d)d(j);else{var w=!0,_=!1,M=void 0;try{for(var I,P=j[Symbol.iterator]();!(w=(I=P.next()).done);w=!0){var R=I.value;o.default.prototype.downloadFile(R.imageData,R.filename,R.ext)}}catch(D){_=!0,M=D}finally{try{w||P.return==null||P.return()}finally{if(_)throw M}}}j=[]},.01+h)},o.default.prototype._makeFrame=function(p,m,d){var f,d=this?this._curElement.elt:d;if(m)switch(m.toLowerCase()){case"png":f="image/png";break;case"jpeg":case"jpg":f="image/jpeg";break;default:f="image/png"}else m="png",f="image/png";var d=(d=d.toDataURL(f)).replace(f,"image/octet-stream"),g={};return g.imageData=d,g.filename=p,g.ext=m,g},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,omggif:240}],290:[function(r,s,a){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(x)}function u(x){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(j){return o(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":o(j)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r("regenerator-runtime/runtime");var l=d(r("../core/main")),c=d(r("../core/helpers")),p=function(x){if(x&&x.__esModule)return x;if(x===null||u(x)!=="object"&&typeof x!="function")return{default:x};var j=f();if(j&&j.has(x))return j.get(x);var S,w={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var M;Object.prototype.hasOwnProperty.call(x,S)&&((M=_?Object.getOwnPropertyDescriptor(x,S):null)&&(M.get||M.set)?Object.defineProperty(w,S,M):w[S]=x[S])}return w.default=x,j&&j.set(x,w),w}(r("../core/constants")),m=d(r("omggif")),h=r("gifenc");function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}function d(x){return x&&x.__esModule?x:{default:x}}function g(x,j,S,w,_,M,I){try{var P=x[M](I),R=P.value}catch(D){return void S(D)}P.done?j(R):Promise.resolve(R).then(w,_)}function y(x,j,S,w,_,M,I,P,R,D,U){var F,z,K,Q,te,Z,q,Y,X;return x===p.COVER&&(F=j,K=S,q=M,Y=I,Z=P,X=R,z=D,Q=U,te=Math.max(q/z,Y/Q),q/=te,Y/=te,te=Z,Z=X,F===p.CENTER?te+=(z-q)/2:F===p.RIGHT&&(te+=z-q),K===p.CENTER?Z+=(Q-Y)/2:K===p.BOTTOM&&(Z+=Q-Y),P=(X={x:te,y:Z,w:q,h:Y}).x,R=X.y,D=X.w,U=X.h),x===p.CONTAIN&&(F=j,z=S,K=w,Q=_,te=M,Z=I,q=D,Y=U,X=Math.max(q/te,Y/Z),q/=X,Y/=X,X=K,K=Q,F===p.CENTER?X+=(te-q)/2:F===p.RIGHT&&(X+=te-q),z===p.CENTER?K+=(Z-Y)/2:z===p.BOTTOM&&(K+=Z-Y),w=(x={x:X,y:K,w:q,h:Y}).x,_=x.y,M=x.w,I=x.h),{sx:P,sy:R,sw:D,sh:U,dx:w,dy:_,dw:M,dh:I}}function b(x,j){return 0<x&&x<j?x:j}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadImage=function(x,j,S){l.default._validateParameters("loadImage",arguments);var w=new l.default.Image(1,1,this),_=this,M=new Request(x,{method:"GET",mode:"cors"});return fetch(x,M).then(function(I){var P,R=I.headers.get("content-type");R===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),R&&R.includes("image/gif")?I.arrayBuffer().then(function(D){if(D){var D=new Uint8Array(D),U=w,F=j,z=S,K=function(W){_._decrementPreload()}.bind(_),Q=new m.default.GifReader(D),te=(U.width=U.canvas.width=Q.width,U.height=U.canvas.height=Q.height,[]),Z=Q.numFrames(),q=new Uint8ClampedArray(U.width*U.height*4);if(1<Z){for(var Y=0;Y<Z;Y++){var X=Q.frameInfo(Y),ce=U.drawingContext.getImageData(0,0,U.width,U.height),O=(q=ce.data.slice(),function(W,re){try{re.decodeAndBlitFrameRGBA(W,q)}catch(ae){l.default._friendlyFileLoadError(8,U.src),typeof z=="function"?z(ae):console.error(ae)}}(Y,Q),new ImageData(q,U.width,U.height)),O=(U.drawingContext.putImageData(O,0,0),X.delay);O===0&&(O=10),te.push({image:U.drawingContext.getImageData(0,0,U.width,U.height),delay:10*O}),X.disposal===2?U.drawingContext.clearRect(X.x,X.y,X.width,X.height):X.disposal===3&&U.drawingContext.putImageData(ce,0,0,X.x,X.y,X.width,X.height)}D=Q.loopCount(),D===null?D=1:D===0&&(D=null),U.drawingContext.putImageData(te[0].image,0,0),U.gifProperties={displayIndex:0,loopLimit:D,loopCount:0,frames:te,numFrames:Z,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof F=="function"&&F(U),K()}},function(D){typeof S=="function"?(S(D),_._decrementPreload()):console.error(D)}):((P=new Image).onload=function(){w.width=w.canvas.width=P.width,w.height=w.canvas.height=P.height,w.drawingContext.drawImage(P,0,0),w.modified=!0,typeof j=="function"&&j(w),_._decrementPreload()},P.onerror=function(D){l.default._friendlyFileLoadError(0,P.src),typeof S=="function"?(S(D),_._decrementPreload()):console.error(D)},x.indexOf("data:image/")!==0&&(P.crossOrigin="Anonymous"),P.src=x),w.modified=!0}).catch(function(I){l.default._friendlyFileLoadError(0,x),typeof S=="function"?(S(I),_._decrementPreload()):console.error(I)}),w},l.default.prototype.saveGif=function(){x=regeneratorRuntime.mark(function S(w,_){var M,I,P,R,D,U,F,z,K,Q,te,Z,q,Y,X,ce,O,B,W,re,ae,me,ge,xe=arguments;return regeneratorRuntime.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(M=2<xe.length&&xe[2]!==void 0?xe[2]:{delay:0,units:"seconds"},typeof w!="string")throw TypeError("fileName parameter must be a string");fe.next=3;break;case 3:if(typeof _!="number")throw TypeError("Duration parameter must be a number");fe.next=5;break;case 5:if(I=M&&M.delay||0,P=M&&M.units||"seconds",typeof I!="number")throw TypeError("Delay parameter must be a number");fe.next=9;break;case 9:if(P!=="seconds"&&P!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');fe.next=11;break;case 11:this._recording=!0,F=this._targetFrameRate,R=(R=1/(F=F!==1/0&&F!==void 0&&F!==0?F:60)*1e3)<20?20:R,U=(D=P==="seconds"?_*F:_)+(F=P==="seconds"?I*F:I),F=F,this.frameCount=F,z=this._pixelDensity,this.pixelDensity(1),K=[],Q="p5.gif.progressBar",document.getElementById(Q)!==null&&document.getElementById(Q).remove(),(Q=this.createP("")).id("progressBar"),Q.style("font-size","16px"),Q.style("font-family","Montserrat"),Q.style("background-color","#ffffffa0"),Q.style("padding","8px"),Q.style("border-radius","10px"),Q.position(0,0),this.drawingContext instanceof WebGLRenderingContext&&(Z=document.getElementById("defaultCanvas0").getContext("webgl"),te=new Uint8Array(Z.drawingBufferWidth*Z.drawingBufferHeight*4)),this.noLoop();case 36:if(F<U)return this.redraw(),ae=void 0,ae=this.drawingContext instanceof WebGLRenderingContext?(te=new Uint8Array(Z.drawingBufferWidth*Z.drawingBufferHeight*4),Z.readPixels(0,0,Z.drawingBufferWidth,Z.drawingBufferHeight,Z.RGBA,Z.UNSIGNED_BYTE,te),function(ye){for(var Te=parseInt(height/2),oe=4*width,Se=new Uint8Array(4*width),be=0;be<Te;++be){var Ie=be*oe,Me=(height-be-1)*oe;Se.set(ye.subarray(Ie,Ie+oe)),ye.copyWithin(Ie,Me,Me+oe),ye.set(Se,Me)}return ye}(te)):this.drawingContext.getImageData(0,0,this.width,this.height).data,K.push(ae),F++,Q.html("Saved frame <b>"+K.length.toString()+"</b> out of "+D.toString()),fe.next=45,new Promise(function(ye){return setTimeout(ye,0)});fe.next=47;break;case 45:fe.next=36;break;case 47:Q.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(z),q=(0,h.GIFEncoder)(),Y=function(ye){for(var Te=new Uint8Array(ye.length*ye[0].length),oe=0;oe<ye.length;oe++)Te.set(ye[oe],oe*ye[0].length);var Se=(0,h.quantize)(Te,256,{format:"rgba4444",oneBitAlpha:!0});return Se.length===256?Se[Se.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Se.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Se}(K),X={},ce=function(ye){for(var Te=ye.length/4,oe=new Uint8Array(Te),Se=0;Se<Te;Se++){var be=ye[4*Se]<<24|ye[4*Se+1]<<16|ye[4*Se+2]<<8|ye[4*Se+3];X[be]===void 0&&(X[be]=(0,h.nearestColorIndex)(Y,ye.slice(4*Se,4*(Se+1)))),oe[Se]=X[be]}return oe},O=Y.length-1,B=[],W=0;case 57:if(!(W<K.length)){fe.next=68;break}if(re=ce(K[W]),ae=re.slice(),W===0)q.writeFrame(re,this.width,this.height,{palette:Y,delay:R,dispose:1});else{for(me=0;me<re.length;me++)re[me]===B[me]&&(re[me]=O);q.writeFrame(re,this.width,this.height,{delay:R,transparent:!0,transparentIndex:O,dispose:1})}return B=ae,Q.html("Rendered frame <b>"+W.toString()+"</b> out of "+D.toString()),fe.next=65,new Promise(function(ye){return setTimeout(ye,0)});case 65:W++,fe.next=57;break;case 68:q.finish(),ge=q.bytesView(),ge=new Blob([ge],{type:"image/gif"}),K=[],this._recording=!1,this.loop(),Q.html("Done. Downloading your gif!ð¸"),l.default.prototype.downloadFile(ge,w,"gif");case 77:case"end":return fe.stop()}},S,this)});var x,j=function(){var S=this,w=arguments;return new Promise(function(_,M){var I=x.apply(S,w);function P(D){g(I,_,M,P,R,"next",D)}function R(D){g(I,_,M,P,R,"throw",D)}P(void 0)})};return function(S,w){return j.apply(this,arguments)}}(),l.default.prototype.image=function(x,j,S,w,Q,te,Z,q,X,D,U,F){l.default._validateParameters("image",arguments);var Y=x.width,z=x.height,K=(F=F||p.CENTER,U=U||p.CENTER,x.elt&&x.elt.videoWidth&&!x.canvas&&(Y=x.elt.videoWidth,z=x.elt.videoHeight),w||Y),Q=Q||z,te=te||0,Z=Z||0,q=b(q||Y,Y),Y=b(X||z,z),X=1;x.elt&&!x.canvas&&x.elt.style.width&&(X=x.elt.videoWidth&&!w?x.elt.videoWidth:x.elt.width,X/=parseInt(x.elt.style.width,10)),te*=X,Z*=X,Y*=X,q*=X,z=y(D,U,F,(z=c.default.modeAdjust(j,S,K,Q,this._renderer._imageMode)).x,z.y,z.w,z.h,te,Z,q,Y),this._renderer.image(x,z.sx,z.sy,z.sw,z.sh,z.dx,z.dy,z.dw,z.dh)},l.default.prototype.tint=function(){for(var x=arguments.length,j=new Array(x),S=0;S<x;S++)j[S]=arguments[S];l.default._validateParameters("tint",j);var w=this.color.apply(this,j);this._renderer._tint=w.levels},l.default.prototype.noTint=function(){this._renderer._tint=null},l.default.prototype._getTintedImageCanvas=l.default.Renderer2D.prototype._getTintedImageCanvas,l.default.prototype.imageMode=function(x){l.default._validateParameters("imageMode",arguments),x!==p.CORNER&&x!==p.CORNERS&&x!==p.CENTER||(this._renderer._imageMode=x)},r=l.default,a.default=r},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/helpers":263,"../core/main":267,"core-js/modules/es.array.copy-within":150,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,gifenc:237,omggif:240,"regenerator-runtime/runtime":244}],291:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r("../core/main")),u=l(r("./filters"));function l(c){return c&&c.__esModule?c:{default:c}}o.default.Image=function(c,p){this.width=c,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},o.default.Image.prototype._animateGif=function(h){var p,m=this.gifProperties,h=h._lastFrameTime;m.lastChangeTime===0&&(m.lastChangeTime=h),m.playing&&(m.timeDisplayed=h-m.lastChangeTime,p=m.frames[m.displayIndex].delay,m.timeDisplayed>=p&&(p=Math.floor(m.timeDisplayed/p),m.timeDisplayed=0,m.lastChangeTime=h,m.displayIndex+=p,m.loopCount=Math.floor(m.displayIndex/m.numFrames),m.loopLimit!==null&&m.loopCount>=m.loopLimit?m.playing=!1:(h=m.displayIndex%m.numFrames,this.drawingContext.putImageData(m.frames[h].image,0,0),m.displayIndex=h,this.setModified(!0))))},o.default.Image.prototype._setProperty=function(c,p){this[c]=p,this.setModified(!0)},o.default.Image.prototype.loadPixels=function(){o.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},o.default.Image.prototype.updatePixels=function(c,p,m,h){o.default.Renderer2D.prototype.updatePixels.call(this,c,p,m,h),this.setModified(!0)},o.default.Image.prototype.get=function(c,p,m,h){return o.default._validateParameters("p5.Image.get",arguments),o.default.Renderer2D.prototype.get.apply(this,arguments)},o.default.Image.prototype._getPixel=o.default.Renderer2D.prototype._getPixel,o.default.Image.prototype.set=function(c,p,m){o.default.Renderer2D.prototype.set.call(this,c,p,m),this.setModified(!0)},o.default.Image.prototype.resize=function(c,p){c===0&&p===0?(c=this.canvas.width,p=this.canvas.height):c===0?c=this.canvas.width*p/this.canvas.height:p===0&&(p=this.canvas.height*c/this.canvas.width),c=Math.floor(c),p=Math.floor(p);var m=document.createElement("canvas");if(m.width=c,m.height=p,this.gifProperties)for(var h=this.gifProperties,f=0;f<h.numFrames;f++){for(var d=this.drawingContext.createImageData(c,p),g=(S=S=j=x=b=void 0,h.frames[f].image),y=d,b=0,x=0;x<y.height;x++)for(var j=0;j<y.width;j++){var S=Math.floor(j*g.width/y.width),S=4*(Math.floor(x*g.height/y.height)*g.width+S);y.data[b++]=g.data[S++],y.data[b++]=g.data[S++],y.data[b++]=g.data[S++],y.data[b++]=g.data[+S]}h.frames[f].image=d}m.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,m.width,m.height),this.canvas.width=this.width=c,this.canvas.height=this.height=p,this.drawingContext.drawImage(m,0,0,c,p,0,0,c,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},o.default.Image.prototype.copy=function(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];o.default.prototype.copy.apply(this,p)},o.default.Image.prototype.mask=function(c){var p=this.drawingContext.globalCompositeOperation,m=1,h=[c=c===void 0?this:c,0,0,(m=c instanceof o.default.Renderer?c._pInst._pixelDensity:m)*c.width,m*c.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var f=0;f<this.gifProperties.frames.length;f++)this.drawingContext.putImageData(this.gifProperties.frames[f].image,0,0),o.default.Image.prototype.copy.apply(this,h),this.gifProperties.frames[f].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else o.default.Image.prototype.copy.apply(this,h);this.drawingContext.globalCompositeOperation=p,this.setModified(!0)},o.default.Image.prototype.filter=function(c,p){u.default.apply(this.canvas,u.default[c],p),this.setModified(!0)},o.default.Image.prototype.blend=function(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];o.default._validateParameters("p5.Image.blend",arguments),o.default.prototype.blend.apply(this,p),this.setModified(!0)},o.default.Image.prototype.setModified=function(c){this._modified=c},o.default.Image.prototype.isModified=function(){return this._modified},o.default.Image.prototype.save=function(c,p){this.gifProperties?o.default.prototype.encodeAndDownloadGif(this,c):o.default.prototype.saveCanvas(this.canvas,c,p)},o.default.Image.prototype.reset=function(){var c;this.gifProperties&&((c=this.gifProperties).playing=!0,c.timeSinceStart=0,c.timeDisplayed=0,c.lastChangeTime=0,c.loopCount=0,c.displayIndex=0,this.drawingContext.putImageData(c.frames[0].image,0,0))},o.default.Image.prototype.getCurrentFrame=function(){var c;if(this.gifProperties)return(c=this.gifProperties).displayIndex%c.numFrames},o.default.Image.prototype.setFrame=function(c){var p;this.gifProperties&&(c<(p=this.gifProperties).numFrames&&0<=c?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=c,this.drawingContext.putImageData(p.frames[c].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))},o.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},o.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},o.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},o.default.Image.prototype.delay=function(c,p){if(this.gifProperties){var m=this.gifProperties;if(p<m.numFrames&&0<=p)m.frames[p].delay=c;else{var h=!0,p=!1,f=void 0;try{for(var d,g=m.frames[Symbol.iterator]();!(h=(d=g.next()).done);h=!0)d.value.delay=c}catch(b){p=!0,f=b}finally{try{h||g.return==null||g.return()}finally{if(p)throw f}}}}},r=o.default.Image,a.default=r},{"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],292:[function(r,s,a){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r("../core/main")),u=l(r("./filters"));function l(c){return c&&c.__esModule?c:{default:c}}r("../color/p5.Color"),o.default.prototype.pixels=[],o.default.prototype.blend=function(){for(var c,p=arguments.length,m=new Array(p),h=0;h<p;h++)m[h]=arguments[h];o.default._validateParameters("blend",m),this._renderer?(c=this._renderer).blend.apply(c,m):o.default.Renderer2D.prototype.blend.apply(this,m)},o.default.prototype.copy=function(){for(var c,p,m,h,f,d,g,y,b,x=arguments.length,j=new Array(x),S=0;S<x;S++)j[S]=arguments[S];if(o.default._validateParameters("copy",j),j.length===9)c=j[0],p=j[1],m=j[2],h=j[3],f=j[4],d=j[5],g=j[6],y=j[7],b=j[8];else{if(j.length!==8)throw new Error("Signature not supported");c=this,p=j[0],m=j[1],h=j[2],f=j[3],d=j[4],g=j[5],y=j[6],b=j[7]}o.default.prototype._copyHelper(this,c,p,m,h,f,d,g,y,b)},o.default.prototype._copyHelper=function(c,p,m,h,f,d,g,y,b,x){p.loadPixels();var j=p.canvas.width/p.width,S=0,w=0;p._renderer&&p._renderer.isP3D&&(S=p.width/2,w=p.height/2),c._renderer&&c._renderer.isP3D?o.default.RendererGL.prototype.image.call(c._renderer,p,m+S,h+w,f,d,g,y,b,x):c.drawingContext.drawImage(p.canvas,j*(m+S),j*(h+w),j*f,j*d,g,y,b,x)},o.default.prototype.filter=function(c,p){o.default._validateParameters("filter",arguments),this.canvas!==void 0?u.default.apply(this.canvas,u.default[c],p):u.default.apply(this.elt,u.default[c],p)},o.default.prototype.get=function(c,p,m,h){var f;return o.default._validateParameters("get",arguments),(f=this._renderer).get.apply(f,arguments)},o.default.prototype.loadPixels=function(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];o.default._validateParameters("loadPixels",p),this._renderer.loadPixels()},o.default.prototype.set=function(c,p,m){this._renderer.set(c,p,m)},o.default.prototype.updatePixels=function(c,p,m,h){o.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(c,p,m,h)},r=o.default,a.default=r},{"../color/p5.Color":254,"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153}],293:[function(r,s,a){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=p(r("../core/main")),l=(r("whatwg-fetch"),r("es6-promise/auto"),p(r("fetch-jsonp"))),c=p(r("file-saver"));function p(d){return d&&d.__esModule?d:{default:d}}function m(d){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(d)}function h(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function f(d,g){g&&g!==!0&&g!=="true"||(g="");var y="";return(d=d||"untitled")&&d.includes(".")&&(y=d.split(".").pop()),g&&y!==g&&(y=g,d="".concat(d,".").concat(y)),[d,y]}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),u.default.prototype.loadJSON=function(){for(var d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];u.default._validateParameters("loadJSON",g);for(var b,x,j,S=g[0],w={},_="json",M=1;M<g.length;M++){var I=g[M];typeof I=="string"?I!=="jsonp"&&I!=="json"||(_=I):typeof I=="function"?b?x=I:b=I:m(I)==="object"&&(I.hasOwnProperty("jsonpCallback")||I.hasOwnProperty("jsonpCallbackFunction"))&&(_="jsonp",j=I)}var P=this;return this.httpDo(S,"GET",j,_,function(R){for(var D in R)w[D]=R[D];b!==void 0&&b(R),P._decrementPreload()},function(R){if(u.default._friendlyFileLoadError(5,S),!x)throw R;x(R)}),w},u.default.prototype.loadStrings=function(){for(var d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];u.default._validateParameters("loadStrings",g);for(var b,x,j=[],S=1;S<g.length;S++){var w=g[S];typeof w=="function"&&(b===void 0?b=w:x===void 0&&(x=w))}var _=this;return u.default.prototype.httpDo.call(this,g[0],"GET","text",function(M){for(var I=M.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),P=0,R=I.length;P<R;P+=32768)Array.prototype.push.apply(j,I.slice(P,Math.min(P+32768,R)));b!==void 0&&b(j),_._decrementPreload()},function(M){if(u.default._friendlyFileLoadError(3,M),!x)throw M;x(M)}),j},u.default.prototype.loadTable=function(d){var g,y,b,x=!1,j=d.substring(d.lastIndexOf(".")+1,d.length);j==="csv"?b=",":j==="ssv"?b=";":j==="tsv"&&(b="	");for(var S=1;S<arguments.length;S++)typeof arguments[S]=="function"?g===void 0?g=arguments[S]:y===void 0&&(y=arguments[S]):typeof arguments[S]=="string"&&(arguments[S]==="header"&&(x=!0),arguments[S]==="csv"?b=",":arguments[S]==="ssv"?b=";":arguments[S]==="tsv"&&(b="	"));var w=new u.default.Table,_=this;return this.httpDo(d,"GET","table",function(M){for(var I,P,R={},D=0,U=[],F=0,z=null,K=function(){R.currentState=D,R.token=""},Q=function(){z.push(R.token),K()},te=function(){R.currentState=4,U.push(z),z=null};;){if((I=M[F++])==null){if(R.escaped)throw new Error("Unclosed quote in file.");if(z){Q(),te();break}}if(z===null&&(R.escaped=!1,z=[],K()),R.currentState===D){if(I==='"'){R.escaped=!0,R.currentState=1;continue}R.currentState=1}if(R.currentState===1&&R.escaped)if(I==='"')M[F]==='"'?(R.token+='"',F++):(R.escaped=!1,R.currentState=2);else{if(I==="\r")continue;R.token+=I}else I==="\r"?(M[F]===`
`&&F++,Q(),te()):I===`
`?(Q(),te()):I===b?Q():R.currentState===1&&(R.token+=I)}if(x)w.columns=U.shift();else for(var Z=0;Z<U[0].length;Z++)w.columns[Z]="null";for(var q=0;q<U.length;q++)(U[q].length!==1||U[q][0]!=="undefined"&&U[q][0]!=="")&&((P=new u.default.TableRow).arr=U[q],P.obj=function(Y,X){var ce={};if((X=X||[])===void 0)for(var O=0;O<Y.length;O++)X[O.toString()]=O;for(var B=0;B<X.length;B++){var W=X[B],re=Y[B];ce[W]=re}return ce}(U[q],w.columns),w.addRow(P));typeof g=="function"&&g(w),_._decrementPreload()},function(M){u.default._friendlyFileLoadError(2,d),y?y(M):console.error(M)}),w},u.default.prototype.loadXML=function(){for(var d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];for(var b,x,j=new u.default.XML,S=1;S<g.length;S++){var w=g[S];typeof w=="function"&&(b===void 0?b=w:x===void 0&&(x=w))}var _=this;return this.httpDo(g[0],"GET","xml",function(M){for(var I in M)j[I]=M[I];b!==void 0&&b(j),_._decrementPreload()},function(M){if(u.default._friendlyFileLoadError(1,M),!x)throw M;x(M)}),j},u.default.prototype.loadBytes=function(d,g,y){var b={},x=this;return this.httpDo(d,"GET","arrayBuffer",function(j){b.bytes=new Uint8Array(j),typeof g=="function"&&g(b),x._decrementPreload()},function(j){if(u.default._friendlyFileLoadError(6,d),!y)throw j;y(j)}),b},u.default.prototype.httpGet=function(){u.default._validateParameters("httpGet",arguments);var d=Array.prototype.slice.call(arguments);return d.splice(1,0,"GET"),u.default.prototype.httpDo.apply(this,d)},u.default.prototype.httpPost=function(){u.default._validateParameters("httpPost",arguments);var d=Array.prototype.slice.call(arguments);return d.splice(1,0,"POST"),u.default.prototype.httpDo.apply(this,d)},u.default.prototype.httpDo=function(){for(var d,g,y,b={},x=0,j="text/plain",S=arguments.length-1;0<S&&typeof(S<0||arguments.length<=S?void 0:arguments[S])=="function";S--)x++;var w=arguments.length-x,_=arguments.length<=0?void 0:arguments[0];if(w==2&&typeof _=="string"&&m(arguments.length<=1?void 0:arguments[1])==="object")U=new Request(_,arguments.length<=1?void 0:arguments[1]),g=arguments.length<=2?void 0:arguments[2],y=arguments.length<=3?void 0:arguments[3];else{for(var M,I="GET",P=1;P<arguments.length;P++){var R=P<0||arguments.length<=P?void 0:arguments[P];if(typeof R=="string")R==="GET"||R==="POST"||R==="PUT"||R==="DELETE"?I=R:R==="json"||R==="jsonp"||R==="binary"||R==="arrayBuffer"||R==="xml"||R==="text"||R==="table"?d=R:M=R;else if(typeof R=="number")M=R.toString();else if(m(R)==="object")if(R.hasOwnProperty("jsonpCallback")||R.hasOwnProperty("jsonpCallbackFunction"))for(var D in R)b[D]=R[D];else j=R instanceof u.default.XML?(M=R.serialize(),"application/xml"):(M=JSON.stringify(R),"application/json");else typeof R=="function"&&(g?y=R:g=R)}var w=I==="GET"?new Headers:new Headers({"Content-Type":j}),U=new Request(_,{method:I,mode:"cors",body:M,headers:w})}return(w=(w=(d=d||(_.includes("json")?"json":_.includes("xml")?"xml":"text"))==="jsonp"?(0,l.default)(_,b):fetch(U)).then(function(F){if(!F.ok)throw(z=new Error(F.body)).status=F.status,z.ok=!1,z;var z=0;switch((z=d!=="jsonp"?F.headers.get("content-length"):z)&&64e6<z&&u.default._friendlyFileLoadError(7,_),d){case"json":case"jsonp":return F.json();case"binary":return F.blob();case"arrayBuffer":return F.arrayBuffer();case"xml":return F.text().then(function(K){return K=new DOMParser().parseFromString(K,"text/xml"),new u.default.XML(K.documentElement)});default:return F.text()}})).then(g||function(){}),w.catch(y||console.error),w},window.URL=window.URL||window.webkitURL,u.default.prototype._pWriters=[],u.default.prototype.createWriter=function(d,g){var y,b;for(b in u.default.prototype._pWriters)if(u.default.prototype._pWriters[b].name===d)return y=new u.default.PrintWriter(d+this.millis(),g),u.default.prototype._pWriters.push(y),y;return y=new u.default.PrintWriter(d,g),u.default.prototype._pWriters.push(y),y},u.default.PrintWriter=function(d,g){var y=this;this.name=d,this.content="",this.write=function(b){this.content+=b},this.print=function(b){this.content+="".concat(b,`
`)},this.clear=function(){this.content=""},this.close=function(){var b,x=[];for(b in x.push(this.content),u.default.prototype.writeFile(x,d,g),u.default.prototype._pWriters)u.default.prototype._pWriters[b].name===this.name&&u.default.prototype._pWriters.splice(b,1);y.clear(),y={}}},u.default.prototype.save=function(d,g,y){var b=arguments,x=(this._curElement||this).elt;if(b.length===0)u.default.prototype.saveCanvas(x);else if(b[0]instanceof u.default.Renderer||b[0]instanceof u.default.Graphics)u.default.prototype.saveCanvas(b[0].elt,b[1],b[2]);else if(b.length===1&&typeof b[0]=="string")u.default.prototype.saveCanvas(x,b[0]);else switch(f(b[1],b[2])[1]){case"json":return void u.default.prototype.saveJSON(b[0],b[1],b[2]);case"txt":return void u.default.prototype.saveStrings(b[0],b[1],b[2]);default:b[0]instanceof Array?u.default.prototype.saveStrings(b[0],b[1],b[2]):b[0]instanceof u.default.Table?u.default.prototype.saveTable(b[0],b[1],b[2]):b[0]instanceof u.default.Image?u.default.prototype.saveCanvas(b[0].canvas,b[1]):b[0]instanceof u.default.SoundFile&&u.default.prototype.saveSound(b[0],b[1],b[2],b[3])}},u.default.prototype.saveJSON=function(d,g,y){u.default._validateParameters("saveJSON",arguments),y=y?JSON.stringify(d):JSON.stringify(d,void 0,2),this.saveStrings(y.split(`
`),g,"json")},u.default.prototype.saveJSONObject=u.default.prototype.saveJSON,u.default.prototype.saveJSONArray=u.default.prototype.saveJSON,u.default.prototype.saveStrings=function(d,g,y,b){u.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(g,y||"txt"),j=0;j<d.length;j++)b?x.write(d[j]+`\r
`):x.write(d[j]+`
`);x.close(),x.clear()},u.default.prototype.saveTable=function(d,g,y){u.default._validateParameters("saveTable",arguments),b=y===void 0?g.substring(g.lastIndexOf(".")+1,g.length):y;var b,x=this.createWriter(g,b),j=d.columns,S=b==="tsv"?"	":",";if(b!=="html"){if(j[0]!=="0"){for(var w=0;w<j.length;w++)w<j.length-1?x.write(j[w]+S):x.write(j[w]);x.write(`
`)}for(var _=0;_<d.rows.length;_++){for(var M=void 0,M=0;M<d.rows[_].arr.length;M++)M<d.rows[_].arr.length-1?b==="csv"&&String(d.rows[_].arr[M]).includes(",")?x.write('"'+d.rows[_].arr[M]+'"'+S):x.write(d.rows[_].arr[M]+S):b==="csv"&&String(d.rows[_].arr[M]).includes(",")?x.write('"'+d.rows[_].arr[M]+'"'):x.write(d.rows[_].arr[M]);x.write(`
`)}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),j[0]!=="0"){x.print("    <tr>");for(var I=0;I<j.length;I++){var P=h(j[I]);x.print("      <td>".concat(P)),x.print("      </td>")}x.print("    </tr>")}for(var R=0;R<d.rows.length;R++){x.print("    <tr>");for(var D=0;D<d.columns.length;D++){var U=h(d.rows[R].getString(D));x.print("      <td>".concat(U)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},u.default.prototype.writeFile=function(x,g,y){var b="application/octet-stream",x=(u.default.prototype._isSafari()&&(b="text/plain"),new Blob(x,{type:b}));u.default.prototype.downloadFile(x,g,y)},u.default.prototype.downloadFile=function(d,x,j){var b,x=f(x,j),j=x[0];d instanceof Blob?c.default.saveAs(d,j):((b=document.createElement("a")).href=d,b.download=j,b.onclick=function(S){document.body.removeChild(S.target),S.stopPropagation()},b.style.display="none",document.body.appendChild(b),u.default.prototype._isSafari()&&(d=(d=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(d)),b.click())},u.default.prototype._checkFileExtension=f,u.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},r=u.default,a.default=r},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232,"es6-promise/auto":233,"fetch-jsonp":235,"file-saver":236,"whatwg-fetch":245}],294:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.trim"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.Table=function(u){this.columns=[],this.rows=[]},o.default.Table.prototype.addRow=function(u){if(u=u||new o.default.TableRow,u.arr===void 0||u.obj===void 0)throw new Error("invalid TableRow: ".concat(u));return(u.table=this).rows.push(u),u},o.default.Table.prototype.removeRow=function(u){this.rows[u].table=null,u=this.rows.splice(u+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(u)},o.default.Table.prototype.getRow=function(u){return this.rows[u]},o.default.Table.prototype.getRows=function(){return this.rows},o.default.Table.prototype.findRow=function(u,l){if(typeof l=="string"){for(var c=0;c<this.rows.length;c++)if(this.rows[c].obj[l]===u)return this.rows[c]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[l]===u)return this.rows[p];return null},o.default.Table.prototype.findRows=function(u,l){var c=[];if(typeof l=="string")for(var p=0;p<this.rows.length;p++)this.rows[p].obj[l]===u&&c.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].arr[l]===u&&c.push(this.rows[m]);return c},o.default.Table.prototype.matchRow=function(u,l){if(typeof l=="number"){for(var c=0;c<this.rows.length;c++)if(this.rows[c].arr[l].match(u))return this.rows[c]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[l].match(u))return this.rows[p];return null},o.default.Table.prototype.matchRows=function(u,l){var c=[];if(typeof l=="number")for(var p=0;p<this.rows.length;p++)this.rows[p].arr[l].match(u)&&c.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].obj[l].match(u)&&c.push(this.rows[m]);return c},o.default.Table.prototype.getColumn=function(u){var l=[];if(typeof u=="string")for(var c=0;c<this.rows.length;c++)l.push(this.rows[c].obj[u]);else for(var p=0;p<this.rows.length;p++)l.push(this.rows[p].arr[u]);return l},o.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},o.default.Table.prototype.addColumn=function(u){this.columns.push(u||null)},o.default.Table.prototype.getColumnCount=function(){return this.columns.length},o.default.Table.prototype.getRowCount=function(){return this.rows.length},o.default.Table.prototype.removeTokens=function(u,l){for(var c=[],p=0;p<u.length;p++)c.push(u.charAt(p).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var m=new RegExp(c.join("|"),"g");if(l===void 0)for(var h=0;h<this.columns.length;h++)for(var f=0;f<this.rows.length;f++){var d=(d=this.rows[f].arr[h]).replace(m,"");this.rows[f].arr[h]=d,this.rows[f].obj[this.columns[h]]=d}else if(typeof l=="string")for(var g=0;g<this.rows.length;g++){var y=(y=this.rows[g].obj[l]).replace(m,""),b=(this.rows[g].obj[l]=y,this.columns.indexOf(l));this.rows[g].arr[b]=y}else for(var x=0;x<this.rows.length;x++){var j=(j=this.rows[x].arr[l]).replace(m,"");this.rows[x].arr[l]=j,this.rows[x].obj[this.columns[l]]=j}},o.default.Table.prototype.trim=function(u){var l=new RegExp(" ","g");if(u===void 0)for(var c=0;c<this.columns.length;c++)for(var p=0;p<this.rows.length;p++){var m=(m=this.rows[p].arr[c]).replace(l,"");this.rows[p].arr[c]=m,this.rows[p].obj[this.columns[c]]=m}else if(typeof u=="string")for(var h=0;h<this.rows.length;h++){var f=(f=this.rows[h].obj[u]).replace(l,""),d=(this.rows[h].obj[u]=f,this.columns.indexOf(u));this.rows[h].arr[d]=f}else for(var g=0;g<this.rows.length;g++){var y=(y=this.rows[g].arr[u]).replace(l,"");this.rows[g].arr[u]=y,this.rows[g].obj[this.columns[u]]=y}},o.default.Table.prototype.removeColumn=function(p){typeof p=="string"?c=this.columns.indexOf(l=p):l=this.columns[c=p];var l,c,p=this.columns.splice(c+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(p);for(var m=0;m<this.rows.length;m++){var h=this.rows[m].arr,f=h.splice(c+1,h.length);h.pop(),this.rows[m].arr=h.concat(f),delete this.rows[m].obj[l]}},o.default.Table.prototype.set=function(u,l,c){this.rows[u].set(l,c)},o.default.Table.prototype.setNum=function(u,l,c){this.rows[u].setNum(l,c)},o.default.Table.prototype.setString=function(u,l,c){this.rows[u].setString(l,c)},o.default.Table.prototype.get=function(u,l){return this.rows[u].get(l)},o.default.Table.prototype.getNum=function(u,l){return this.rows[u].getNum(l)},o.default.Table.prototype.getString=function(u,l){return this.rows[u].getString(l)},o.default.Table.prototype.getObject=function(u){for(var l,c={},p=0;p<this.rows.length;p++)if(l=this.rows[p].obj,typeof u=="string"){if(!(0<=this.columns.indexOf(u)))throw new Error('This table has no column named "'.concat(u,'"'));c[l[u]]=l}else c[p]=this.rows[p].obj;return c},o.default.Table.prototype.getArray=function(){for(var u=[],l=0;l<this.rows.length;l++)u.push(this.rows[l].arr);return u},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],295:[function(r,s,a){r("core-js/modules/es.array.index-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.TableRow=function(o,u){var l=[],c={};o&&(l=o.split(u=u||","));for(var p=0;p<l.length;p++){var m=p,h=l[p];c[m]=h}this.arr=l,this.obj=c,this.table=null},r.default.TableRow.prototype.set=function(o,u){if(typeof o=="string"){var l=this.table.columns.indexOf(o);if(!(0<=l))throw new Error('This table has no column named "'.concat(o,'"'));this.obj[o]=u,this.arr[l]=u}else{if(!(o<this.table.columns.length))throw new Error("Column #".concat(o," is out of the range of this table"));this.arr[o]=u,l=this.table.columns[o],this.obj[l]=u}},r.default.TableRow.prototype.setNum=function(o,u){u=parseFloat(u),this.set(o,u)},r.default.TableRow.prototype.setString=function(o,u){u=u.toString(),this.set(o,u)},r.default.TableRow.prototype.get=function(o){return(typeof o=="string"?this.obj:this.arr)[o]},r.default.TableRow.prototype.getNum=function(o){var u=parseFloat(typeof o=="string"?this.obj[o]:this.arr[o]);if(u.toString()==="NaN")throw"Error: ".concat(this.obj[o]," is NaN (Not a Number)");return u},r.default.TableRow.prototype.getString=function(o){return(typeof o=="string"?this.obj:this.arr)[o].toString()},r=r.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],296:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(l){for(var c=[],p=0;p<l.length;p++)c.push(new o.default.XML(l[p]));return c}o.default.XML=function(l){l?this.DOM=l:(l=document.implementation.createDocument(null,"doc"),this.DOM=l.createElement("root"))},o.default.XML.prototype.getParent=function(){return new o.default.XML(this.DOM.parentElement)},o.default.XML.prototype.getName=function(){return this.DOM.tagName},o.default.XML.prototype.setName=function(l){var c=this.DOM.innerHTML,p=this.DOM.attributes,m=document.implementation.createDocument(null,"default").createElement(l);m.innerHTML=c;for(var h=0;h<p.length;h++)m.setAttribute(p[h].nodeName,p.nodeValue);this.DOM=m},o.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},o.default.XML.prototype.listChildren=function(){for(var l=[],c=0;c<this.DOM.childNodes.length;c++)l.push(this.DOM.childNodes[c].nodeName);return l},o.default.XML.prototype.getChildren=function(l){return u(l?this.DOM.getElementsByTagName(l):this.DOM.children)},o.default.XML.prototype.getChild=function(l){if(typeof l!="string")return new o.default.XML(this.DOM.children[l]);var c=!0,p=!1,m=void 0;try{for(var h,f=this.DOM.children[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value;if(d.tagName===l)return new o.default.XML(d)}}catch(g){p=!0,m=g}finally{try{c||f.return==null||f.return()}finally{if(p)throw m}}},o.default.XML.prototype.addChild=function(l){l instanceof o.default.XML&&this.DOM.appendChild(l.DOM)},o.default.XML.prototype.removeChild=function(l){var c=-1;if(typeof l=="string"){for(var p=0;p<this.DOM.children.length;p++)if(this.DOM.children[p].tagName===l){c=p;break}}else c=l;c!==-1&&this.DOM.removeChild(this.DOM.children[c])},o.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},o.default.XML.prototype.listAttributes=function(){var l=[],c=!0,p=!1,m=void 0;try{for(var h,f=this.DOM.attributes[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value;l.push(d.nodeName)}}catch(g){p=!0,m=g}finally{try{c||f.return==null||f.return()}finally{if(p)throw m}}return l},o.default.XML.prototype.hasAttribute=function(l){var c={},p=!0,m=!1,h=void 0;try{for(var f,d=this.DOM.attributes[Symbol.iterator]();!(p=(f=d.next()).done);p=!0){var g=f.value;c[g.nodeName]=g.nodeValue}}catch(y){m=!0,h=y}finally{try{p||d.return==null||d.return()}finally{if(m)throw h}}return!!c[l]},o.default.XML.prototype.getNum=function(l,c){var p={},m=!0,h=!1,f=void 0;try{for(var d,g=this.DOM.attributes[Symbol.iterator]();!(m=(d=g.next()).done);m=!0){var y=d.value;p[y.nodeName]=y.nodeValue}}catch(b){h=!0,f=b}finally{try{m||g.return==null||g.return()}finally{if(h)throw f}}return Number(p[l])||c||0},o.default.XML.prototype.getString=function(l,c){var p={},m=!0,h=!1,f=void 0;try{for(var d,g=this.DOM.attributes[Symbol.iterator]();!(m=(d=g.next()).done);m=!0){var y=d.value;p[y.nodeName]=y.nodeValue}}catch(b){h=!0,f=b}finally{try{m||g.return==null||g.return()}finally{if(h)throw f}}return p[l]?String(p[l]):c||null},o.default.XML.prototype.setAttribute=function(l,c){this.DOM.setAttribute(l,c)},o.default.XML.prototype.getContent=function(l){var c=this.DOM.textContent;return(c=c.replace(/\s\s+/g,","))||l||null},o.default.XML.prototype.setContent=function(l){this.DOM.children.length||(this.DOM.textContent=l)},o.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],297:[function(r,s,a){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var l=arguments.length,c=[],p=0,m=0;m<l;m++){var h=arguments[m];if((h=+h)===1/0||h===-1/0)return 1/0;p<(h=Math.abs(h))&&(p=h),c[m]=h}p===0&&(p=1);for(var b=0,y=0,f=0;f<l;f++)var d=c[f]/p,d=d*d-y,g=b+d,y=g-b-d,b=g;return Math.sqrt(b)*p}o.default.prototype.abs=Math.abs,o.default.prototype.ceil=Math.ceil,o.default.prototype.constrain=function(l,c,p){return o.default._validateParameters("constrain",arguments),Math.max(Math.min(l,p),c)},o.default.prototype.dist=function(){for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return o.default._validateParameters("dist",c),c.length===4?u(c[2]-c[0],c[3]-c[1]):c.length===6?u(c[3]-c[0],c[4]-c[1],c[5]-c[2]):void 0},o.default.prototype.exp=Math.exp,o.default.prototype.floor=Math.floor,o.default.prototype.lerp=function(l,c,p){return o.default._validateParameters("lerp",arguments),p*(c-l)+l},o.default.prototype.log=Math.log,o.default.prototype.mag=function(l,c){return o.default._validateParameters("mag",arguments),u(l,c)},o.default.prototype.map=function(l,c,p,m,h,f){return o.default._validateParameters("map",arguments),l=(l-c)/(p-c)*(h-m)+m,f?m<h?this.constrain(l,m,h):this.constrain(l,h,m):l},o.default.prototype.max=function(){for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return c[0]instanceof Array?Math.max.apply(null,c[0]):Math.max.apply(null,c)},o.default.prototype.min=function(){for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return c[0]instanceof Array?Math.min.apply(null,c[0]):Math.min.apply(null,c)},o.default.prototype.norm=function(l,c,p){return o.default._validateParameters("norm",arguments),this.map(l,c,p,0,1)},o.default.prototype.pow=Math.pow,o.default.prototype.round=function(l,c){return c?(c=Math.pow(10,c),Math.round(l*c)/c):Math.round(l)},o.default.prototype.sq=function(l){return l*l},o.default.prototype.sqrt=Math.sqrt,o.default.prototype.fract=function(m){o.default._validateParameters("fract",arguments);var c,p=0,m=Number(m);return isNaN(m)||Math.abs(m)===1/0?m:(m<0&&(m=-m,p=1),String(m).includes(".")&&!String(m).includes("e")?(c=String(m),c=Number("0"+c.slice(c.indexOf("."))),Math.abs(p-c)):m<1?Math.abs(p-m):0)},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":167,"core-js/modules/es.number.constructor":169,"core-js/modules/es.string.includes":185}],298:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(c,p,m){return(u=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(h,f,d){var g=[null];return g.push.apply(g,f),f=new(Function.bind.apply(h,g)),d&&l(f,d.prototype),f}).apply(null,arguments)}function l(c,p){return(l=Object.setPrototypeOf||function(m,h){return m.__proto__=h,m})(c,p)}o.default.prototype.createVector=function(c,p,m){return this instanceof o.default?u(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(c,p,m)},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],299:[function(m,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,m=(m=m("../core/main"))&&m.__esModule?m:{default:m};function o(h){return .5*(1-Math.cos(h*Math.PI))}var u,l=4095,c=4,p=.5,m=(m.default.prototype.noise=function(h){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(u==null){u=new Array(4096);for(var g=0;g<4096;g++)u[g]=Math.random()}h<0&&(h=-h),f<0&&(f=-f),d<0&&(d=-d);for(var y,b,x=Math.floor(h),j=Math.floor(f),S=Math.floor(d),w=h-x,_=f-j,M=d-S,I=0,P=.5,R=0;R<c;R++){var D=x+(j<<4)+(S<<8),U=o(w),F=o(_),z=u[D&l];z+=U*(u[D+1&l]-z),y=u[D+16&l],z+=F*((y+=U*(u[D+16+1&l]-y))-z),y=u[(D+=256)&l],y+=U*(u[D+1&l]-y),b=u[D+16&l],y+=F*((b+=U*(u[D+16+1&l]-b))-y),I+=(z+=o(M)*(y-z))*P,P*=p,x<<=1,j<<=1,S<<=1,1<=(w*=2)&&(x++,w--),1<=(_*=2)&&(j++,_--),1<=(M*=2)&&(S++,M--)}return I},m.default.prototype.noiseDetail=function(h,f){0<h&&(c=h),0<f&&(p=f)},m.default.prototype.noiseSeed=function(h){g=4294967296;var f,d,g,y={setSeed:function(x){d=f=(x??Math.random()*g)>>>0},getSeed:function(){return f},rand:function(){return(d=(1664525*d+1013904223)%g)/g}};y.setSeed(h),u=new Array(4096);for(var b=0;b<4096;b++)u[b]=y.rand()},m.default);a.default=m},{"../core/main":267}],300:[function(r,s,a){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(d)}function u(d){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.sub"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},c=function(d){if(d&&d.__esModule)return d;if(d===null||u(d)!=="object"&&typeof d!="function")return{default:d};var g=p();if(g&&g.has(d))return g.get(d);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d){var j;Object.prototype.hasOwnProperty.call(d,y)&&((j=x?Object.getOwnPropertyDescriptor(d,y):null)&&(j.get||j.set)?Object.defineProperty(b,y,j):b[y]=d[y])}return b.default=d,g&&g.set(d,b),b}(r("../core/constants"));function p(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,p=function(){return d},d)}l.default.Vector=function(){var d,g,y={}.toString.call(arguments[0])==="[object Function]"?(this.isPInst=!0,this._fromRadians=arguments[0],this._toRadians=arguments[1],d=arguments[2]||0,g=arguments[3]||0,arguments[4]||0):(d=arguments[0]||0,g=arguments[1]||0,arguments[2]||0);this.x=d,this.y=g,this.z=y},l.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},l.default.Vector.prototype.set=function(d,g,y){return d instanceof l.default.Vector?(this.x=d.x||0,this.y=d.y||0,this.z=d.z||0):d instanceof Array?(this.x=d[0]||0,this.y=d[1]||0,this.z=d[2]||0):(this.x=d||0,this.y=g||0,this.z=y||0),this},l.default.Vector.prototype.copy=function(){return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new l.default.Vector(this.x,this.y,this.z)},l.default.Vector.prototype.add=function(d,g,y){return d instanceof l.default.Vector?(this.x+=d.x||0,this.y+=d.y||0,this.z+=d.z||0):d instanceof Array?(this.x+=d[0]||0,this.y+=d[1]||0,this.z+=d[2]||0):(this.x+=d||0,this.y+=g||0,this.z+=y||0),this};function m(d,g){return d!==0&&(this.x=this.x%d),g!==0&&(this.y=this.y%g),this}function h(d,g,y){return d!==0&&(this.x=this.x%d),g!==0&&(this.y=this.y%g),y!==0&&(this.z=this.z%y),this}l.default.Vector.prototype.rem=function(d,g,y){var b;if(d instanceof l.default.Vector){if(Number.isFinite(d.x)&&Number.isFinite(d.y)&&Number.isFinite(d.z))return x=parseFloat(d.x),j=parseFloat(d.y),b=parseFloat(d.z),h.call(this,x,j,b)}else if(d instanceof Array){if(d.every(function(S){return Number.isFinite(S)}))return d.length===2?m.call(this,d[0],d[1]):d.length===3?h.call(this,d[0],d[1],d[2]):void 0}else if(arguments.length===1){if(Number.isFinite(d)&&d!==0)return this.x=this.x%d,this.y=this.y%d,this.z=this.z%d,this}else if(arguments.length===2){var x=Array.prototype.slice.call(arguments);if(x.every(function(S){return Number.isFinite(S)})&&x.length===2)return m.call(this,x[0],x[1])}else if(arguments.length===3){var j=Array.prototype.slice.call(arguments);if(j.every(function(S){return Number.isFinite(S)})&&j.length===3)return h.call(this,j[0],j[1],j[2])}},l.default.Vector.prototype.sub=function(d,g,y){return d instanceof l.default.Vector?(this.x-=d.x||0,this.y-=d.y||0,this.z-=d.z||0):d instanceof Array?(this.x-=d[0]||0,this.y-=d[1]||0,this.z-=d[2]||0):(this.x-=d||0,this.y-=g||0,this.z-=y||0),this},l.default.Vector.prototype.mult=function(d,g,y){var b;return d instanceof l.default.Vector?Number.isFinite(d.x)&&Number.isFinite(d.y)&&Number.isFinite(d.z)&&typeof d.x=="number"&&typeof d.y=="number"&&typeof d.z=="number"?(this.x*=d.x,this.y*=d.y,this.z*=d.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):d instanceof Array?d.every(function(x){return Number.isFinite(x)})&&d.every(function(x){return typeof x=="number"})?d.length===1?(this.x*=d[0],this.y*=d[0],this.z*=d[0]):d.length===2?(this.x*=d[0],this.y*=d[1]):d.length===3&&(this.x*=d[0],this.y*=d[1],this.z*=d[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(b=Array.prototype.slice.call(arguments)).every(function(x){return Number.isFinite(x)})&&b.every(function(x){return typeof x=="number"})?(arguments.length===1&&(this.x*=d,this.y*=d,this.z*=d),arguments.length===2&&(this.x*=d,this.y*=g),arguments.length===3&&(this.x*=d,this.y*=g,this.z*=y)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},l.default.Vector.prototype.div=function(d,g,y){if(d instanceof l.default.Vector)if(Number.isFinite(d.x)&&Number.isFinite(d.y)&&Number.isFinite(d.z)&&typeof d.x=="number"&&typeof d.y=="number"&&typeof d.z=="number"){var b=d.z===0&&this.z===0;if(d.x===0||d.y===0||!b&&d.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=d.x,this.y/=d.y,b||(this.z/=d.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(d instanceof Array)if(d.every(function(x){return Number.isFinite(x)})&&d.every(function(x){return typeof x=="number"})){if(d.some(function(x){return x===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;d.length===1?(this.x/=d[0],this.y/=d[0],this.z/=d[0]):d.length===2?(this.x/=d[0],this.y/=d[1]):d.length===3&&(this.x/=d[0],this.y/=d[1],this.z/=d[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(b=Array.prototype.slice.call(arguments),b.every(function(x){return Number.isFinite(x)})&&b.every(function(x){return typeof x=="number"})){if(b.some(function(x){return x===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=d,this.y/=d,this.z/=d),arguments.length===2&&(this.x/=d,this.y/=g),arguments.length===3&&(this.x/=d,this.y/=g,this.z/=y)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},l.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},l.default.Vector.prototype.magSq=function(){var d=this.x,g=this.y,y=this.z;return d*d+g*g+y*y},l.default.Vector.prototype.dot=function(d,g,y){return d instanceof l.default.Vector?this.dot(d.x,d.y,d.z):this.x*(d||0)+this.y*(g||0)+this.z*(y||0)},l.default.Vector.prototype.cross=function(b){var g=this.y*b.z-this.z*b.y,y=this.z*b.x-this.x*b.z,b=this.x*b.y-this.y*b.x;return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,g,y,b):new l.default.Vector(g,y,b)},l.default.Vector.prototype.dist=function(d){return d.copy().sub(this).mag()},l.default.Vector.prototype.normalize=function(){var d=this.mag();return d!==0&&this.mult(1/d),this},l.default.Vector.prototype.limit=function(d){var g=this.magSq();return d*d<g&&this.div(Math.sqrt(g)).mult(d),this},l.default.Vector.prototype.setMag=function(d){return this.normalize().mult(d)},l.default.Vector.prototype.heading=function(){var d=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(d):d},l.default.Vector.prototype.setHeading=function(d){this.isPInst&&(d=this._toRadians(d));var g=this.mag();return this.x=g*Math.cos(d),this.y=g*Math.sin(d),this},l.default.Vector.prototype.rotate=function(g){var g=this.heading()+g,y=(this.isPInst&&(g=this._toRadians(g)),this.mag());return this.x=Math.cos(g)*y,this.y=Math.sin(g)*y,this},l.default.Vector.prototype.angleBetween=function(d){var g=this.dot(d)/(this.mag()*d.mag()),g=Math.acos(Math.min(1,Math.max(-1,g)));return g*=Math.sign(this.cross(d).z||1),g=this.isPInst?this._fromRadians(g):g},l.default.Vector.prototype.lerp=function(d,g,y,b){return d instanceof l.default.Vector?this.lerp(d.x,d.y,d.z,g):(this.x+=(d-this.x)*b||0,this.y+=(g-this.y)*b||0,this.z+=(y-this.z)*b||0,this)},l.default.Vector.prototype.reflect=function(d){return d.normalize(),this.sub(d.mult(2*this.dot(d)))},l.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},l.default.Vector.prototype.equals=function(j,g,y){var b,x,j=j instanceof l.default.Vector?(b=j.x||0,x=j.y||0,j.z||0):j instanceof Array?(b=j[0]||0,x=j[1]||0,j[2]||0):(b=j||0,x=g||0,y||0);return this.x===b&&this.y===x&&this.z===j},l.default.Vector.fromAngle=function(d,g){return new l.default.Vector((g=g===void 0?1:g)*Math.cos(d),g*Math.sin(d),0)},l.default.Vector.fromAngles=function(S,x,y){y===void 0&&(y=1);var b=Math.cos(x),x=Math.sin(x),j=Math.cos(S),S=Math.sin(S);return new l.default.Vector(y*S*x,-y*j,y*S*b)},l.default.Vector.random2D=function(){return this.fromAngle(Math.random()*c.TWO_PI)},l.default.Vector.random3D=function(){var d=Math.random()*c.TWO_PI,g=2*Math.random()-1,b=Math.sqrt(1-g*g),y=b*Math.cos(d),b=b*Math.sin(d);return new l.default.Vector(y,b,g)},l.default.Vector.copy=function(d){return d.copy(d)},l.default.Vector.add=function(d,g,y){return y?y.set(d):(y=d.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),y.add(g),y},l.default.Vector.rem=function(d,g){if(d instanceof l.default.Vector&&g instanceof l.default.Vector)return(d=d.copy()).rem(g),d},l.default.Vector.sub=function(d,g,y){return y?y.set(d):(y=d.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),y.sub(g),y},l.default.Vector.mult=function(d,g,y){return y?y.set(d):(y=d.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),y.mult(g),y},l.default.Vector.rotate=function(d,g,y){return arguments.length===2?y=d.copy():(y instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),y.set(d)),y.rotate(g),y},l.default.Vector.div=function(d,g,y){return y?y.set(d):(y=d.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),y.div(g),y},l.default.Vector.dot=function(d,g){return d.dot(g)},l.default.Vector.cross=function(d,g){return d.cross(g)},l.default.Vector.dist=function(d,g){return d.dist(g)},l.default.Vector.lerp=function(d,g,y,b){return b?b.set(d):(b=d.copy(),arguments.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),b.lerp(g,y),b},l.default.Vector.mag=function(d){return d.mag()},l.default.Vector.magSq=function(d){return d.magSq()},l.default.Vector.normalize=function(d,g){return arguments.length<2?g=d.copy():(g instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),g.set(d)),g.normalize()},l.default.Vector.limit=function(d,g,y){return arguments.length<3?y=d.copy():(y instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),y.set(d)),y.limit(g)},l.default.Vector.setMag=function(d,g,y){return arguments.length<3?y=d.copy():(y instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),y.set(d)),y.setMag(g)},l.default.Vector.heading=function(d){return d.heading()},l.default.Vector.angleBetween=function(d,g){return d.angleBetween(g)},l.default.Vector.reflect=function(d,g,y){return arguments.length<3?y=d.copy():(y instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),y.set(d)),y.reflect(g)},l.default.Vector.array=function(d){return d.array()},l.default.Vector.equals=function(d,g){var y;return d instanceof l.default.Vector?y=d:d instanceof Array?y=new l.default.Vector().set(d):l.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),y.equals(g)};var f=l.default.Vector;a.default=f},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":168,"core-js/modules/es.number.constructor":169,"core-js/modules/es.number.is-finite":170,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],301:[function(p,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(p=p("../core/main"))&&p.__esModule?p:{default:p},u="_lcg_random_state",l=4294967296,c=0,p=(o.default.prototype._lcg=function(m){return this[m]=(1664525*this[m]+1013904223)%l,this[m]/l},o.default.prototype._lcgSetSeed=function(m,h){this[m]=(h??Math.random()*l)>>>0},o.default.prototype.randomSeed=function(m){this._lcgSetSeed(u,m),this._gaussian_previous=!1},o.default.prototype.random=function(m,h){var f,d;return o.default._validateParameters("random",arguments),f=this[u]!=null?this._lcg(u):Math.random(),m===void 0?f:h===void 0?m instanceof Array?m[Math.floor(f*m.length)]:f*m:(h<m&&(d=m,m=h,h=d),f*(h-m)+m)},o.default.prototype.randomGaussian=function(m){var h,f,d,g,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)h=c,this._gaussian_previous=!1;else{for(;1<=(g=(f=this.random(2)-1)*f+(d=this.random(2)-1)*d););h=f*(g=Math.sqrt(-2*Math.log(g)/g)),c=d*g,this._gaussian_previous=!0}return h*y+(m||0)},o.default);a.default=p},{"../core/main":267}],302:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.prototype._angleMode=c.RADIANS,l.default.prototype.acos=function(h){return this._fromRadians(Math.acos(h))},l.default.prototype.asin=function(h){return this._fromRadians(Math.asin(h))},l.default.prototype.atan=function(h){return this._fromRadians(Math.atan(h))},l.default.prototype.atan2=function(h,f){return this._fromRadians(Math.atan2(h,f))},l.default.prototype.cos=function(h){return Math.cos(this._toRadians(h))},l.default.prototype.sin=function(h){return Math.sin(this._toRadians(h))},l.default.prototype.tan=function(h){return Math.tan(this._toRadians(h))},l.default.prototype.degrees=function(h){return h*c.RAD_TO_DEG},l.default.prototype.radians=function(h){return h*c.DEG_TO_RAD},l.default.prototype.angleMode=function(h){if(l.default._validateParameters("angleMode",arguments),h===void 0)return this._angleMode;h!==c.DEGREES&&h!==c.RADIANS||(this._angleMode=h)},l.default.prototype._toRadians=function(h){return this._angleMode===c.DEGREES?h*c.DEG_TO_RAD:h},l.default.prototype._toDegrees=function(h){return this._angleMode===c.RADIANS?h*c.RAD_TO_DEG:h},l.default.prototype._fromRadians=function(h){return this._angleMode===c.DEGREES?h*c.RAD_TO_DEG:h};var m=l.default;a.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],303:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.textAlign=function(u,l){var c;return o.default._validateParameters("textAlign",arguments),(c=this._renderer).textAlign.apply(c,arguments)},o.default.prototype.textLeading=function(u){var l;return o.default._validateParameters("textLeading",arguments),(l=this._renderer).textLeading.apply(l,arguments)},o.default.prototype.textSize=function(u){var l;return o.default._validateParameters("textSize",arguments),(l=this._renderer).textSize.apply(l,arguments)},o.default.prototype.textStyle=function(u){var l;return o.default._validateParameters("textStyle",arguments),(l=this._renderer).textStyle.apply(l,arguments)},o.default.prototype.textWidth=function(){for(var u,l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return c[0]+="",o.default._validateParameters("textWidth",c),c[0].length===0?0:(u=this._renderer).textWidth.apply(u,c)},o.default.prototype.textAscent=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return o.default._validateParameters("textAscent",l),this._renderer.textAscent()},o.default.prototype.textDescent=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return o.default._validateParameters("textDescent",l),this._renderer.textDescent()},o.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},o.default.prototype.textWrap=function(u){if(u!=="WORD"&&u!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(u)},r=o.default,a.default=r},{"../core/main":267}],304:[function(r,s,a){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(d)}function u(d){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.split"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},c=h(r("../core/constants")),p=h(r("opentype.js"));function m(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,m=function(){return d},d)}function h(d){if(d&&d.__esModule)return d;if(d===null||u(d)!=="object"&&typeof d!="function")return{default:d};var g=m();if(g&&g.has(d))return g.get(d);var y,b,x={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d)Object.prototype.hasOwnProperty.call(d,y)&&((b=j?Object.getOwnPropertyDescriptor(d,y):null)&&(b.get||b.set)?Object.defineProperty(x,y,b):x[y]=d[y]);return x.default=d,g&&g.set(d,x),x}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadFont=function(d,g,y){l.default._validateParameters("loadFont",arguments);var b=new l.default.Font(this),x=this;return p.load(d,function(w,_){if(w)return l.default._friendlyFileLoadError(4,d),y!==void 0?y(w):void console.error(w,d);b.font=_,g!==void 0&&g(b),x._decrementPreload();var w=d.split("\\").pop().split("/").pop(),_=w.lastIndexOf("."),M=_<1?null:w.slice(_+1);["ttf","otf","woff","woff2"].includes(M)&&(M=w.slice(0,_!==-1?_:0),(w=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(M,`;
src: url(`).concat(d,`);
}
`))),document.head.appendChild(w))}),b},l.default.prototype.text=function(d,g,y,b,x){var j;return l.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(j=this._renderer).text.apply(j,arguments):this},l.default.prototype.textFont=function(d,g){if(l.default._validateParameters("textFont",arguments),arguments.length){if(d)return this._renderer._setProperty("_textFont",d),g&&(this._renderer._setProperty("_textSize",g),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",g*c._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var f=l.default;a.default=f},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,"opentype.js":241}],305:[function(r,s,a){function o(M){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(M)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(u=r("../core/main"))&&u.__esModule?u:{default:u},l=function(M){if(M&&M.__esModule)return M;if(M===null||p(M)!=="object"&&typeof M!="function")return{default:M};var I=c();if(I&&I.has(M))return I.get(M);var P,R={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in M){var U;Object.prototype.hasOwnProperty.call(M,P)&&((U=D?Object.getOwnPropertyDescriptor(M,P):null)&&(U.get||U.set)?Object.defineProperty(R,P,U):R[P]=M[P])}return R.default=M,I&&I.set(M,R),R}(r("../core/constants"));function c(){var M;return typeof WeakMap!="function"?null:(M=new WeakMap,c=function(){return M},M)}function p(M){return(p=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(I){return o(I)}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":o(I)})(M)}function m(M,I){var P=M.length;return M[I<0?I%P+P:I%P]}function h(M,I,P,R){var D,U,F;return R?(h.tmpPoint1===void 0&&(h.tmpPoint1=[],h.tmpPoint2=[]),U=h.tmpPoint1,F=h.tmpPoint2,U.x=I.x-M.x,U.y=I.y-M.y,F.x=P.x-I.x,F.y=P.y-I.y,D=U.x*F.x+U.y*F.y,U=Math.sqrt(U.x*U.x+U.y*U.y),F=Math.sqrt(F.x*F.x+F.y*F.y),Math.acos(D/(U*F))<R):(I[0]-M[0])*(P[1]-M[1])-(P[0]-M[0])*(I[1]-M[1])==0}function f(O,W,B,re,ae,U,F,z,K){var Q=1-K,Z=Math.pow(Q,3),q=Math.pow(Q,2),ce=K*K,Y=ce*K,te=Z*O+3*q*K*B+3*Q*K*K*ae+Y*F,Z=Z*W+3*q*K*re+3*Q*K*K*U+Y*z,q=O+2*K*(B-O)+ce*(ae-2*B+O),Y=W+2*K*(re-W)+ce*(U-2*re+W),X=B+2*K*(ae-B)+ce*(F-2*ae+B),ce=re+2*K*(U-re)+ce*(z-2*U+re),O=Q*O+K*B,B=Q*W+K*re,W=Q*ae+K*F,re=Q*U+K*z,ae=90-180*Math.atan2(q-X,Y-ce)/Math.PI;return(X<q||Y<ce)&&(ae+=180),{x:te,y:Z,m:{x:q,y:Y},n:{x:X,y:ce},start:{x:O,y:B},end:{x:W,y:re},alpha:ae}}function d(M,I,P,R,D,U,F,z,K){return K==null?w(M,I,P,R,D,U,F,z):f(M,I,P,R,D,U,F,z,function(Q,te,Z,q,Y,X,ce,O,B){if(!(B<0||w(Q,te,Z,q,Y,X,ce,O)<B)){var W,re=.5,ae=1-re;for(W=w(Q,te,Z,q,Y,X,ce,O,ae);.01<Math.abs(W-B);)W=w(Q,te,Z,q,Y,X,ce,O,ae+=(W<B?1:-1)*(re/=2));return ae}}(M,I,P,R,D,U,F,z,K))}function g(M,I,P){for(var R,D,U,F,z,K=0,Q=0,te=(M=function(Z,q){function Y(Ie,Me,Ve){var Be,tt;if(!Ie)return["C",Me.x,Me.y,Me.x,Me.y,Me.x,Me.y];switch(Ie[0]in{T:1,Q:1}||(Me.qx=Me.qy=null),Ie[0]){case"M":Me.X=Ie[1],Me.Y=Ie[2];break;case"A":Ie=["C"].concat(b.apply(0,[Me.x,Me.y].concat(Ie.slice(1))));break;case"S":tt=Ve==="C"||Ve==="S"?(Be=2*Me.x-Me.bx,2*Me.y-Me.by):(Be=Me.x,Me.y),Ie=["C",Be,tt].concat(Ie.slice(1));break;case"T":Ve==="Q"||Ve==="T"?(Me.qx=2*Me.x-Me.qx,Me.qy=2*Me.y-Me.qy):(Me.qx=Me.x,Me.qy=Me.y),Ie=["C"].concat(S(Me.x,Me.y,Me.qx,Me.qy,Ie[1],Ie[2]));break;case"Q":Me.qx=Ie[1],Me.qy=Ie[2],Ie=["C"].concat(S(Me.x,Me.y,Ie[1],Ie[2],Ie[3],Ie[4]));break;case"L":Ie=["C"].concat(j(Me.x,Me.y,Ie[1],Ie[2]));break;case"H":Ie=["C"].concat(j(Me.x,Me.y,Ie[1],Me.y));break;case"V":Ie=["C"].concat(j(Me.x,Me.y,Me.x,Ie[1]));break;case"Z":Ie=["C"].concat(j(Me.x,Me.y,Me.X,Me.Y))}return Ie}function X(Ie,Me){if(7<Ie[Me].length){Ie[Me].shift();for(var Ve=Ie[Me];Ve.length;)me[Me]="A",W&&(ge[Me]="A"),Ie.splice(Me++,0,["C"].concat(Ve.splice(0,6)));Ie.splice(Me,1),O=Math.max(B.length,W&&W.length||0)}}function ce(Ie,Me,Ve,Be,tt){Ie&&Me&&Ie[tt][0]==="M"&&Me[tt][0]!=="M"&&(Me.splice(tt,0,["M",Be.x,Be.y]),Ve.bx=0,Ve.by=0,Ve.x=Ie[tt][1],Ve.y=Ie[tt][2],O=Math.max(B.length,W&&W.length||0))}var O,B=y(Z),W=q&&y(q),re={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ae={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},me=[],ge=[],xe="",fe="";O=Math.max(B.length,W&&W.length||0);for(var ye=0;ye<O;ye++){(xe=B[ye]?B[ye][0]:xe)!=="C"&&(me[ye]=xe,ye&&(fe=me[ye-1])),B[ye]=Y(B[ye],re,fe),me[ye]!=="A"&&xe==="C"&&(me[ye]="C"),X(B,ye),W&&((xe=W[ye]?W[ye][0]:xe)!=="C"&&(ge[ye]=xe,ye&&(fe=ge[ye-1])),W[ye]=Y(W[ye],ae,fe),ge[ye]!=="A"&&xe==="C"&&(ge[ye]="C"),X(W,ye)),ce(B,W,re,ae,ye),ce(W,B,ae,re,ye);var Te=B[ye],oe=W&&W[ye],Se=Te.length,be=W&&oe.length;re.x=Te[Se-2],re.y=Te[Se-1],re.bx=parseFloat(Te[Se-4])||re.x,re.by=parseFloat(Te[Se-3])||re.y,ae.bx=W&&(parseFloat(oe[be-4])||ae.x),ae.by=W&&(parseFloat(oe[be-3])||ae.y),ae.x=W&&oe[be-2],ae.y=W&&oe[be-1]}return W?[B,W]:B}(M)).length;Q<te;Q++){if((U=M[Q])[0]==="M")R=+U[1],D=+U[2];else{if(I<K+(F=d(R,D,U[1],U[2],U[3],U[4],U[5],U[6]))&&!P)return{x:(z=d(R,D,U[1],U[2],U[3],U[4],U[5],U[6],I-K)).x,y:z.y,alpha:z.alpha};K+=F,R=+U[5],D=+U[6]}U.shift()}return z=(z=P?K:f(R,D,U[0],U[1],U[2],U[3],U[4],U[5],1)).alpha?{x:z.x,y:z.y,alpha:z.alpha}:z}function y(M){var I=[],P=0,R=0,D=0,U=0,F=0;if(M){M[0][0]==="M"&&(D=P=+M[0][1],U=R=+M[0][2],F++,I[0]=["M",P,R]);for(var z,K,Q=M.length===3&&M[0][0]==="M"&&M[1][0].toUpperCase()==="R"&&M[2][0].toUpperCase()==="Z",te=F,Z=M.length;te<Z;te++){if(I.push(z=[]),(K=M[te])[0]!==String.prototype.toUpperCase.call(K[0]))switch(z[0]=String.prototype.toUpperCase.call(K[0]),z[0]){case"A":z[1]=K[1],z[2]=K[2],z[3]=K[3],z[4]=K[4],z[5]=K[5],z[6]=+(K[6]+P),z[7]=+(K[7]+R);break;case"V":z[1]=+K[1]+R;break;case"H":z[1]=+K[1]+P;break;case"R":for(var q,Y=2,X=(q=[P,R].concat(K.slice(1))).length;Y<X;Y++)q[Y]=+q[Y]+P,q[++Y]=+q[Y]+R;I.pop(),I=I.concat(x(q,Q));break;case"M":D=+K[1]+P,U=+K[2]+R;break;default:for(var ce=1,O=K.length;ce<O;ce++)z[ce]=+K[ce]+(ce%2?P:R)}else if(K[0]==="R")q=[P,R].concat(K.slice(1)),I.pop(),I=I.concat(x(q,Q)),z=["R"].concat(K.slice(-2));else for(var B=0,W=K.length;B<W;B++)z[B]=K[B];switch(z[0]){case"Z":P=D,R=U;break;case"H":P=z[1];break;case"V":R=z[1];break;case"M":D=z[z.length-2],U=z[z.length-1];break;default:P=z[z.length-2],R=z[z.length-1]}}}return I}function b(M,I,P,R,W,me,re,z,K,Q){function te(be,Ie,Me){return{x:be*Math.cos(Me)-Ie*Math.sin(Me),y:be*Math.sin(Me)+Ie*Math.cos(Me)}}var Z,O=Math.PI,B=120*O/180,q=O/180*(+W||0),Y=[],X=(Q?(ye=Q[0],Z=Q[1],xe=Q[2],fe=Q[3]):(M=(ae=te(M,I,-q)).x,I=ae.y,1<(X=(ce=(M-(z=(ae=te(z,K,-q)).x))/2)*ce/(P*P)+(ae=(I-(K=ae.y))/2)*ae/(R*R))&&(P*=X=Math.sqrt(X),R*=X),X=P*P,ge=R*R,xe=(me=(me===re?-1:1)*Math.sqrt(Math.abs((X*ge-X*ae*ae-ge*ce*ce)/(X*ae*ae+ge*ce*ce))))*P*ae/R+(M+z)/2,fe=me*-R*ce/P+(I+K)/2,ye=Math.asin(((I-fe)/R).toFixed(9)),Z=Math.asin(((K-fe)/R).toFixed(9)),(ye=M<xe?O-ye:ye)<0&&(ye=2*O+ye),(Z=z<xe?O-Z:Z)<0&&(Z=2*O+Z),re&&Z<ye&&(ye-=2*O),!re&&ye<Z&&(Z-=2*O)),Z-ye),ce=(Math.abs(X)>B&&(ge=Z,ae=z,me=K,Z=ye+B*(re&&ye<Z?1:-1),Y=b(z=xe+P*Math.cos(Z),K=fe+R*Math.sin(Z),P,R,W,0,re,ae,me,[Z,ge,xe,fe])),X=Z-ye,Math.cos(ye)),O=Math.sin(ye),B=Math.cos(Z),W=Math.sin(Z),re=Math.tan(X/4),ae=4/3*P*re,me=4/3*R*re,ge=[M,I],xe=[M+ae*O,I-me*ce],fe=[z+ae*W,K-me*B],ye=[z,K];if(xe[0]=2*ge[0]-xe[0],xe[1]=2*ge[1]-xe[1],Q)return[xe,fe,ye].concat(Y);for(var Te=[],oe=0,Se=(Y=[xe,fe,ye].concat(Y).join().split(",")).length;oe<Se;oe++)Te[oe]=oe%2?te(Y[oe-1],Y[oe],q).y:te(Y[oe],Y[oe+1],q).x;return Te}function x(M,I){for(var P=[],R=0,D=M.length;R<D-2*!I;R+=2){var U=[{x:+M[R-2],y:+M[R-1]},{x:+M[R],y:+M[R+1]},{x:+M[R+2],y:+M[R+3]},{x:+M[R+4],y:+M[R+5]}];I?R?D-4===R?U[3]={x:+M[0],y:+M[1]}:D-2===R&&(U[2]={x:+M[0],y:+M[1]},U[3]={x:+M[2],y:+M[3]}):U[0]={x:+M[D-2],y:+M[D-1]}:D-4===R?U[3]=U[2]:R||(U[0]={x:+M[R],y:+M[R+1]}),P.push(["C",(-U[0].x+6*U[1].x+U[2].x)/6,(-U[0].y+6*U[1].y+U[2].y)/6,(U[1].x+6*U[2].x-U[3].x)/6,(U[1].y+6*U[2].y-U[3].y)/6,U[2].x,U[2].y])}return P}function j(M,I,P,R){return[M,I,P,R,P,R]}function S(M,I,P,R,D,U){return[1/3*M+2/3*P,1/3*I+2/3*R,1/3*D+2/3*P,1/3*U+2/3*R,D,U]}function w(M,I,P,R,D,U,F,z,K){for(var Q=(K=1<(K=K??1)?1:K<0?0:K)/2,te=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Z=0,q=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Y=0;Y<12;Y++){var ce=Q*te[Y]+Q,X=_(ce,M,P,D,F),ce=_(ce,I,R,U,z);Z+=q[Y]*Math.sqrt(X*X+ce*ce)}return Q*Z}function _(M,I,P,R,D){return M*(M*(-3*I+9*P-9*R+3*D)+6*I-12*P+6*R)-3*I+3*P}u.default.Font=function(M){this.parent=M,this.cache={},this.font=void 0},u.default.Font.prototype.textBounds=function(M){var I=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,P=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,F=3<arguments.length?arguments[3]:void 0,R=4<arguments.length?arguments[4]:void 0,D=R&&R.renderer&&R.renderer._pInst||this.parent,U=D._renderer.drawingContext,F=(U.textAlign||l.LEFT,U.textBaseline||l.BASELINE,F||D._renderer._textSize);if(!B){for(var z=[],K=[],Q=[],te=(Q[0]=[],[]),Z=this._scale(F),q=D._renderer.textLeading(),Y=0,X=(this.font.forEachGlyph(M,I,P,F,R,function(ae,me,ge,xe){var fe=ae.getMetrics();ae.index===0||ae.index===10?Q[Y+=1]=[]:(Q[Y].push(me+fe.xMin*Z),Q[Y].push(me+fe.xMax*Z),te.push(ge+Y*q+-fe.yMin*Z),te.push(ge+Y*q+-fe.yMax*Z))}),0<Q[Y].length&&(z[Y]=Math.min.apply(null,Q[Y]),K[Y]=Math.max.apply(null,Q[Y])),0),ce=0;ce<=Y;ce++){z[ce]=Math.min.apply(null,Q[ce]),K[ce]=Math.max.apply(null,Q[ce]);var O=K[ce]-z[ce];X<O&&(X=O)}var U=Math.min.apply(null,z),B={x:U,y:P=Math.min.apply(null,te),h:Math.max.apply(null,te)-P,w:X,advance:U-I},F=this._handleAlignment(D._renderer,M,B.x,B.y,B.w+B.advance);B.x=F.x,B.y=F.y}return B},u.default.Font.prototype.textToPoints=function(M,I,P,R,D){var U=0,F=[],z=this._getGlyphs(M);R=R||this.parent._renderer._textSize;for(var K,Q=0;Q<z.length;Q++){if(!(z[K=Q].name&&z[K].name==="space"||M.length===z.length&&M[K]===" "))for(var te=function(X){for(var ce,O=[],B=0;B<X.length;B++)X[B].type==="M"&&(ce&&O.push(ce),ce=[]),ce.push(function(W){var re=[W.type];return W.type==="M"||W.type==="L"?re.push(W.x,W.y):W.type==="C"?re.push(W.x1,W.y1,W.x2,W.y2,W.x,W.y):W.type==="Q"&&re.push(W.x1,W.y1,W.x,W.y),re}(X[B]));return O.push(ce),O}(z[Q].getPath(I,P,R).commands),Z=0;Z<te.length;Z++)for(var q=function(X,ce){for(var ce=function(me,ge){if(p(me)!=="object")me=ge;else for(var xe in ge)me[xe]===void 0&&(me[xe]=ge[xe]);return me}(ce,{sampleFactor:.1,simplifyThreshold:0}),O=g(X,0,1),B=O/(O*ce.sampleFactor),W=[],re=0;re<O;re+=B)W.push(g(X,re));return ce.simplifyThreshold&&function(ae){for(var me=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ge=0,xe=ae.length-1;3<ae.length&&0<=xe;--xe)h(m(ae,xe-1),m(ae,xe),m(ae,xe+1),me)&&(ae.splice(xe%ae.length,1),ge++)}(W,ce.simplifyThreshold),W}(te[Z],D),Y=0;Y<q.length;Y++)q[Y].x+=U,F.push(q[Y]);U+=z[Q].advanceWidth*this._scale(R)}return F},u.default.Font.prototype._getGlyphs=function(M){return this.font.stringToGlyphs(M)},u.default.Font.prototype._getPath=function(M,U,P,R){var D=(R&&R.renderer&&R.renderer._pInst||this.parent)._renderer,U=this._handleAlignment(D,M,U,P);return this.font.getPath(M,U.x,U.y,D._textSize,R)},u.default.Font.prototype._getPathData=function(M,I,P,R){var D=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,I,P,R):p(I)==="object"&&(R=I),R&&typeof R.decimals=="number"&&(D=R.decimals),M.toPathData(D)},u.default.Font.prototype._getSVG=function(M,I,P,R){var D=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,I,P,R):p(I)==="object"&&(R=I),R&&(typeof R.decimals=="number"&&(D=R.decimals),typeof R.strokeWidth=="number"&&(M.strokeWidth=R.strokeWidth),R.fill!==void 0&&(M.fill=R.fill),R.stroke!==void 0&&(M.stroke=R.stroke)),M.toSVG(D)},u.default.Font.prototype._renderPath=function(F,K,Q,R){var D=R&&R.renderer||this.parent._renderer,U=D.drawingContext,F=(p(F)==="object"&&F.commands?F:this._getPath(F,K,Q,R)).commands,z=(U.beginPath(),!0),K=!1,Q=void 0;try{for(var te,Z=F[Symbol.iterator]();!(z=(te=Z.next()).done);z=!0){var q=te.value;q.type==="M"?U.moveTo(q.x,q.y):q.type==="L"?U.lineTo(q.x,q.y):q.type==="C"?U.bezierCurveTo(q.x1,q.y1,q.x2,q.y2,q.x,q.y):q.type==="Q"?U.quadraticCurveTo(q.x1,q.y1,q.x,q.y):q.type==="Z"&&U.closePath()}}catch(Y){K=!0,Q=Y}finally{try{z||Z.return==null||Z.return()}finally{if(K)throw Q}}return D._doStroke&&D._strokeSet&&U.stroke(),D._doFill&&(D._fillSet||D._setFill(l._DEFAULT_TEXT_FILL),U.fill()),this},u.default.Font.prototype._textWidth=function(M,I){return this.font.getAdvanceWidth(M,I)},u.default.Font.prototype._textAscent=function(M){return this.font.ascender*this._scale(M)},u.default.Font.prototype._textDescent=function(M){return-this.font.descender*this._scale(M)},u.default.Font.prototype._scale=function(M){return 1/this.font.unitsPerEm*(M||this.parent._renderer._textSize)},u.default.Font.prototype._handleAlignment=function(M,I,P,R,D){var U=M._textSize;switch(D===void 0&&(D=this._textWidth(I,U)),M._textAlign){case l.CENTER:P-=D/2;break;case l.RIGHT:P-=D}switch(M._textBaseline){case l.TOP:R+=this._textAscent(U);break;case l.CENTER:R+=this._textAscent(U)/2;break;case l.BOTTOM:R-=this._textDescent(U)}return{x:P,y:R}},r=u.default,a.default=r},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],306:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.append=function(o,u){return o.push(u),o},r.default.prototype.arrayCopy=function(o,u,l,c,p){var m,h;o=p!==void 0?(h=Math.min(p,o.length),m=c,o.slice(u,h+u)):(h=l!==void 0?(h=l,Math.min(h,o.length)):o.length,l=u,o.slice(m=0,h)),Array.prototype.splice.apply(l,[m,h].concat(o))},r.default.prototype.concat=function(o,u){return o.concat(u)},r.default.prototype.reverse=function(o){return o.reverse()},r.default.prototype.shorten=function(o){return o.pop(),o},r.default.prototype.shuffle=function(o,u){for(var l,c,p=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o),m=(o=u||p?o:o.slice()).length;1<m;)l=this.random(0,1)*m|0,c=o[--m],o[m]=o[l],o[l]=c;return o},r.default.prototype.sort=function(o,c){var l=c?o.slice(0,Math.min(c,o.length)):o,c=c?o.slice(Math.min(c,o.length)):[];return(l=typeof l[0]=="string"?l.sort():l.sort(function(p,m){return p-m})).concat(c)},r.default.prototype.splice=function(o,u,l){return Array.prototype.splice.apply(o,[l,0].concat(u)),o},r.default.prototype.subset=function(o,u,l){return l!==void 0?o.slice(u,u+l):o.slice(u,o.length)},r=r.default,a.default=r},{"../core/main":267,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],307:[function(r,s,a){r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.float=function(u){return u instanceof Array?u.map(parseFloat):parseFloat(u)},o.default.prototype.int=function(u){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return u===1/0||u==="Infinity"?1/0:u===-1/0||u==="-Infinity"?-1/0:typeof u=="string"?parseInt(u,l):typeof u=="number"?0|u:typeof u=="boolean"?u?1:0:u instanceof Array?u.map(function(c){return o.default.prototype.int(c,l)}):void 0},o.default.prototype.str=function(u){return u instanceof Array?u.map(o.default.prototype.str):String(u)},o.default.prototype.boolean=function(u){return typeof u=="number"?u!==0:typeof u=="string"?u.toLowerCase()==="true":typeof u=="boolean"?u:u instanceof Array?u.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(u){return u=o.default.prototype.int(u,10),typeof u=="number"?(u+128)%256-128:u instanceof Array?u.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(u){return typeof u!="number"||isNaN(u)?u instanceof Array?u.map(o.default.prototype.char):typeof u=="string"?o.default.prototype.char(parseInt(u,10)):void 0:String.fromCharCode(u)},o.default.prototype.unchar=function(u){return typeof u=="string"&&u.length===1?u.charCodeAt(0):u instanceof Array?u.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(u,l){if(l=l??8,u instanceof Array)return u.map(function(p){return o.default.prototype.hex(p,l)});if(u===1/0||u===-1/0)return(u===1/0?"F":"0").repeat(l);if(typeof u=="number"){u<0&&(u=4294967295+u+1);for(var c=Number(u).toString(16).toUpperCase();c.length<l;)c="0".concat(c);return c=c.length>=l?c.substring(c.length-l,c.length):c}},o.default.prototype.unhex=function(u){return u instanceof Array?u.map(o.default.prototype.unhex):parseInt("0x".concat(u),16)},r=o.default,a.default=r},{"../core/main":267,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],308:[function(r,s,a){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(m=r("../core/main"))&&m.__esModule?m:{default:m};function u(y,f,d){var g=y<0,y=g?y.toString().substring(1):y.toString(),b=y.indexOf("."),x=b!==-1?y.substring(0,b):y,j=b!==-1?y.substring(b+1):"",S=g?"-":"";if(d!==void 0){g="",(b!==-1||0<d-j.length)&&(g="."),j.length>d&&(j=j.substring(0,d));for(var w=0;w<f-x.length;w++)S+="0";for(var S=(S+=x)+g+j,_=0;_<d-j.length;_++)S+="0";return S}for(var M=0;M<Math.max(f-x.length,0);M++)S+="0";return S+=y}function l(y,f){var d=(y=y.toString()).indexOf("."),g=d!==-1?y.substring(d):"",y=(y=d!==-1?y.substring(0,d):y).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(f===0)g="";else if(f!==void 0)if(f>g.length)for(var b=f-(g+=d===-1?".":"").length+1,x=0;x<b;x++)g+="0";else g=g.substring(0,f+1);return y+g}function c(h){return 0<parseFloat(h)?"+".concat(h.toString()):h.toString()}function p(h){return 0<=parseFloat(h)?" ".concat(h.toString()):h.toString()}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),o.default.prototype.join=function(h,f){return o.default._validateParameters("join",arguments),h.join(f)},o.default.prototype.match=function(h,f){return o.default._validateParameters("match",arguments),h.match(f)},o.default.prototype.matchAll=function(h,f){o.default._validateParameters("matchAll",arguments);for(var d=new RegExp(f,"g"),g=d.exec(h),y=[];g!==null;)y.push(g),g=d.exec(h);return y},o.default.prototype.nf=function(h,f,d){return o.default._validateParameters("nf",arguments),h instanceof Array?h.map(function(g){return u(g,f,d)}):Object.prototype.toString.call(h)==="[object Arguments]"?h.length===3?this.nf(h[0],h[1],h[2]):h.length===2?this.nf(h[0],h[1]):this.nf(h[0]):u(h,f,d)},o.default.prototype.nfc=function(h,f){return o.default._validateParameters("nfc",arguments),h instanceof Array?h.map(function(d){return l(d,f)}):l(h,f)},o.default.prototype.nfp=function(){for(var h=arguments.length,f=new Array(h),d=0;d<h;d++)f[d]=arguments[d];o.default._validateParameters("nfp",f);var g=o.default.prototype.nf.apply(this,f);return g instanceof Array?g.map(c):c(g)},o.default.prototype.nfs=function(){for(var h=arguments.length,f=new Array(h),d=0;d<h;d++)f[d]=arguments[d];o.default._validateParameters("nfs",f);var g=o.default.prototype.nf.apply(this,f);return g instanceof Array?g.map(p):p(g)},o.default.prototype.split=function(h,f){return o.default._validateParameters("split",arguments),h.split(f)},o.default.prototype.splitTokens=function(h,f){var d,g;return o.default._validateParameters("splitTokens",arguments),g=f!==void 0?(g=/\]/g.exec(f=f),(d=/\[/g.exec(f))&&g?(f=f.slice(0,g.index)+f.slice(g.index+1),d=/\[/g.exec(f),f=f.slice(0,d.index)+f.slice(d.index+1),new RegExp("[\\[".concat(f,"\\]]"),"g")):g?(f=f.slice(0,g.index)+f.slice(g.index+1),new RegExp("[".concat(f,"\\]]"),"g")):d?(f=f.slice(0,d.index)+f.slice(d.index+1),new RegExp("[".concat(f,"\\[]"),"g")):new RegExp("[".concat(f,"]"),"g")):/\s/g,h.split(g).filter(function(y){return y})},o.default.prototype.trim=function(h){return o.default._validateParameters("trim",arguments),h instanceof Array?h.map(this.trim):h.trim()};var m=o.default;a.default=m},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],309:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()},r=r.default,a.default=r},{"../core/main":267}],310:[function(r,s,a){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function u(f){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(h=r("../core/main"))&&h.__esModule?h:{default:h},c=(r("./p5.Geometry"),function(f){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var d=p();if(d&&d.has(f))return d.get(f);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var x;Object.prototype.hasOwnProperty.call(f,g)&&((x=b?Object.getOwnPropertyDescriptor(f,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=f[g])}return y.default=f,d&&d.set(f,y),y}(r("../core/constants")));function p(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,p=function(){return f},f)}l.default.prototype.plane=function(f,d,g,y){this._assert3d("plane"),l.default._validateParameters("plane",arguments),f===void 0&&(f=50),d===void 0&&(d=f),y===void 0&&(y=1);var b,x="plane|".concat(g=g===void 0?1:g,"|").concat(y);return this._renderer.geometryInHash(x)||((b=new l.default.Geometry(g,y,function(){for(var j,S,w=0;w<=this.detailY;w++)for(var _=w/this.detailY,M=0;M<=this.detailX;M++)j=M/this.detailX,S=new l.default.Vector(j-.5,_-.5,0),this.vertices.push(S),this.uvs.push(j,_)})).computeFaces().computeNormals(),g<=1&&y<=1?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,b)),this._renderer.drawBuffersScaled(x,f,d,1),this},l.default.prototype.box=function(f,d,g,y,b){this._assert3d("box"),l.default._validateParameters("box",arguments),f===void 0&&(f=50),d===void 0&&(d=f),g===void 0&&(g=d);var x,j=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,j=(b===void 0&&(b=j?1:4),"box|".concat(y=y===void 0?j?1:4:y,"|").concat(b));return this._renderer.geometryInHash(j)||((x=new l.default.Geometry(y,b,function(){var S=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var w=0;w<S.length;w++){for(var _=S[w],M=4*w,I=0;I<4;I++){var P=_[I],P=new l.default.Vector((2*(1&P)-1)/2,((2&P)-1)/2,((4&P)/2-1)/2);this.vertices.push(P),this.uvs.push(1&I,(2&I)/2)}this.faces.push([M,1+M,2+M]),this.faces.push([2+M,1+M,3+M])}})).computeNormals(),y<=4&&b<=4?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(j,x)),this._renderer.drawBuffersScaled(j,f,d,g),this},l.default.prototype.sphere=function(f,d,g){return this._assert3d("sphere"),l.default._validateParameters("sphere",arguments),this.ellipsoid(f=f===void 0?50:f,f,f,d=d===void 0?24:d,g=g===void 0?16:g),this};function m(f,d,g,y,b,x,j){f=f<=0?1:f,d=d<0?0:d,g=g<=0?f:g,y=y<3?3:y;for(var S,w,_=(x=x===void 0||x)?-2:0,M=(b=b<1?1:b)+((j=j===void 0?d!==0:j)?2:0),I=Math.atan2(f-d,g),P=Math.sin(I),R=Math.cos(I),D=_;D<=M;++D){var U=D/b,F=g*U,z=void 0,z=D<0?(U=F=0,f):b<D?(F=g,U=1,d):f+(d-f)*U;for(D!==-2&&D!==b+2||(z=0),F-=g/2,S=0;S<y;++S){var K=S/(y-1),te=2*Math.PI*K,Q=Math.sin(te),te=Math.cos(te),Z=(this.vertices.push(new l.default.Vector(Q*z,F,te*z)),void 0),Z=D<0?new l.default.Vector(0,-1,0):b<D&&d?new l.default.Vector(0,1,0):new l.default.Vector(Q*R,P,te*R);this.vertexNormals.push(Z),this.uvs.push(K,U)}}var q=0;if(x){for(w=0;w<y;++w)this.faces.push([q+w,q+y+(w+1)%y,q+y+w]);q+=2*y}for(D=0;D<b;++D){for(S=0;S<y;++S){var Y=(S+1)%y;this.faces.push([q+S,q+Y,q+y+Y]),this.faces.push([q+S,q+y+Y,q+y+S])}q+=y}if(j)for(q+=y,S=0;S<y;++S)this.faces.push([q+S,q+(S+1)%y,q+y])}l.default.prototype.cylinder=function(f,d,g,y,b,x){this._assert3d("cylinder"),l.default._validateParameters("cylinder",arguments),f===void 0&&(f=50),d===void 0&&(d=f),y===void 0&&(y=1),x===void 0&&(x=!0),b===void 0&&(b=!0);var j,S="cylinder|".concat(g=g===void 0?24:g,"|").concat(y,"|").concat(b,"|").concat(x);return this._renderer.geometryInHash(S)||(j=new l.default.Geometry(g,y),m.call(j,1,1,1,g,y,b,x),g<=24&&y<=16?j._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,j)),this._renderer.drawBuffersScaled(S,f,d,f),this},l.default.prototype.cone=function(f,d,g,y,b){this._assert3d("cone"),l.default._validateParameters("cone",arguments),f===void 0&&(f=50),d===void 0&&(d=f),y===void 0&&(y=1),b===void 0&&(b=!0);var x,j="cone|".concat(g=g===void 0?24:g,"|").concat(y,"|").concat(b);return this._renderer.geometryInHash(j)||(x=new l.default.Geometry(g,y),m.call(x,1,0,1,g,y,b,!1),g<=24&&y<=16?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(j,x)),this._renderer.drawBuffersScaled(j,f,d,f),this},l.default.prototype.ellipsoid=function(f,d,g,y,b){this._assert3d("ellipsoid"),l.default._validateParameters("ellipsoid",arguments),f===void 0&&(f=50),d===void 0&&(d=f),g===void 0&&(g=f),b===void 0&&(b=16);var x,j="ellipsoid|".concat(y=y===void 0?24:y,"|").concat(b);return this._renderer.geometryInHash(j)||((x=new l.default.Geometry(y,b,function(){for(var S=0;S<=this.detailY;S++)for(var w=S/this.detailY,_=Math.PI*w-Math.PI/2,M=Math.cos(_),I=Math.sin(_),P=0;P<=this.detailX;P++){var R=P/this.detailX,U=2*Math.PI*R,D=Math.cos(U),U=Math.sin(U),U=new l.default.Vector(M*U,I,M*D);this.vertices.push(U),this.vertexNormals.push(U),this.uvs.push(R,w)}})).computeFaces(),y<=24&&b<=24?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(j,x)),this._renderer.drawBuffersScaled(j,f,d,g),this},l.default.prototype.torus=function(f,j,g,y){if(this._assert3d("torus"),l.default._validateParameters("torus",arguments),f===void 0)f=50;else if(!f)return;if(j===void 0)j=10;else if(!j)return;g===void 0&&(g=24),y===void 0&&(y=16);var b,x=(j/f).toPrecision(4),j="torus|".concat(x,"|").concat(g,"|").concat(y);return this._renderer.geometryInHash(j)||((b=new l.default.Geometry(g,y,function(){for(var S=0;S<=this.detailY;S++)for(var w=S/this.detailY,_=2*Math.PI*w,M=Math.cos(_),I=Math.sin(_),P=1+x*M,R=0;R<=this.detailX;R++){var D=R/this.detailX,U=2*Math.PI*D,z=Math.cos(U),U=Math.sin(U),F=new l.default.Vector(P*z,P*U,x*I),z=new l.default.Vector(M*z,M*U,I);this.vertices.push(F),this.vertexNormals.push(z),this.uvs.push(D,w)}})).computeFaces(),g<=24&&y<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(j,b)),this._renderer.drawBuffersScaled(j,f,f,f),this},l.default.RendererGL.prototype.point=function(f,d,g){var y=[];return y.push(new l.default.Vector(f,d,g=g===void 0?0:g)),this._drawPoints(y,this.immediateMode.buffers.point),this},l.default.RendererGL.prototype.triangle=function(j){var d=j[0],g=j[1],y=j[2],b=j[3],x=j[4],j=j[5],S=(this.geometryInHash("tri")||((S=new l.default.Geometry(1,1,function(){var _=[];_.push(new l.default.Vector(0,0,0)),_.push(new l.default.Vector(1,0,0)),_.push(new l.default.Vector(0,1,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=_,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._makeTriangleEdges()._edgesToVertices(),S.computeNormals(),this.createBuffers("tri",S)),this.uMVMatrix.copy());try{var w=new l.default.Matrix([y-d,b-g,0,0,x-d,j-g,0,0,0,0,1,0,d,g,0,1]).mult(this.uMVMatrix);this.uMVMatrix=w,this.drawBuffers("tri")}finally{this.uMVMatrix=S}return this},l.default.RendererGL.prototype.ellipse=function(f){this.arc(f[0],f[1],f[2],f[3],0,c.TWO_PI,c.OPEN,f[4])},l.default.RendererGL.prototype.arc=function(f){var d,g=arguments[1],y=arguments[2],b=arguments[3],x=arguments[4],j=arguments[5],S=arguments[6],w=arguments[7]||25,_=(Math.abs(j-x)>=c.TWO_PI?"".concat(M="ellipse","|"):"".concat(M="arc","|").concat(x,"|").concat(j,"|").concat(S,"|")).concat(w,"|"),M=(this.geometryInHash(_)||((d=new l.default.Geometry(w,1,function(){if(this.strokeIndices=[],x.toFixed(10)!==j.toFixed(10)){S!==c.PIE&&S!==void 0||(this.vertices.push(new l.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var I=0;I<=w;I++){var R=(j-x)*(I/w)+x,P=.5+Math.cos(R)/2,R=.5+Math.sin(R)/2;this.vertices.push(new l.default.Vector(P,R,0)),this.uvs.push([P,R]),I<w-1&&(this.faces.push([0,I+1,I+2]),this.strokeIndices.push([I+1,I+2]))}switch(S){case c.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case c.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case c.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),w<=50?d._makeTriangleEdges()._edgesToVertices(d):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(M," with more than 50 detail")),this.createBuffers(_,d)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([f,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(_)}finally{this.uMVMatrix=M}return this},l.default.RendererGL.prototype.rect=function(f){var d=f[0],g=f[1],y=f[2],b=f[3];if(f[4]===void 0){var S=this._pInst._glAttributes.perPixelLighting,x=f[4]||(S?1:24),j=f[5]||(S?1:16),S="rect|".concat(x,"|").concat(j),w=(this.geometryInHash(S)||((w=new l.default.Geometry(x,j,function(){for(var Z=0;Z<=this.detailY;Z++)for(var q=Z/this.detailY,Y=0;Y<=this.detailX;Y++){var X=Y/this.detailX,ce=new l.default.Vector(X,q,0);this.vertices.push(ce),this.uvs.push(X,q)}0<x&&0<j&&(this.strokeIndices=[[0,x],[x,(x+1)*(j+1)-1],[(x+1)*(j+1)-1,(x+1)*j],[(x+1)*j,0]])})).computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(S,w)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([d,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(S)}finally{this.uMVMatrix=w}}else{var S=f[4],w=f[5]===void 0?S:f[5],_=f[6]===void 0?w:f[6],f=f[7]===void 0?_:f[7],U=y,M=b,R=((U+=d)<d&&(R=d,d=U,U=R),(M+=g)<g&&(R=g,g=M,M=R),Math.min((U-d)/2,(M-g)/2)),I=(R<S&&(S=R),R<w&&(w=R),R<_&&(_=R),R<f&&(f=R),d),P=g,R=U,d=M,D=(this.beginShape(),w!==0?(this.vertex(R-w,P),this.quadraticVertex(R,P,R,P+w)):this.vertex(R,P),_!==0?(this.vertex(R,d-_),this.quadraticVertex(R,d,R-_,d)):this.vertex(R,d),f!==0?(this.vertex(I+f,d),this.quadraticVertex(I,d,I,d-f)):this.vertex(I,d),S!==0?(this.vertex(I,P+S),this.quadraticVertex(I,P,I+S,P)):this.vertex(I,P),!(this.immediateMode.geometry.uvs.length=0)),g=!1,U=void 0;try{for(var F,z=this.immediateMode.geometry.vertices[Symbol.iterator]();!(D=(F=z.next()).done);D=!0){var K=F.value,Q=(K.x-I)/y,te=(K.y-P)/b;this.immediateMode.geometry.uvs.push(Q,te)}}catch(O){g=!0,U=O}finally{try{D||z.return==null||z.return()}finally{if(g)throw U}}this.endShape(c.CLOSE)}return this},l.default.RendererGL.prototype.quad=function(f,d,g,y,b,x,j,S,w,_,M,I,P,R){P===void 0&&(P=2),R===void 0&&(R=2);var D="quad|".concat(f,"|").concat(d,"|").concat(g,"|").concat(y,"|").concat(b,"|").concat(x,"|").concat(j,"|").concat(S,"|").concat(w,"|").concat(_,"|").concat(M,"|").concat(I,"|").concat(P,"|").concat(R);if(!this.geometryInHash(D)){var U=new l.default.Geometry(P,R,function(){for(var Z=1/(this.detailX-1),q=1/(this.detailY-1),Y=0;Y<this.detailY;Y++)for(var X=0;X<this.detailX;X++){var ce=X*Z,O=Y*q;this.vertices.push(new l.default.Vector((1-ce)*((1-O)*f+O*_)+ce*((1-O)*y+O*j),(1-ce)*((1-O)*d+O*M)+ce*((1-O)*b+O*S),(1-ce)*((1-O)*g+O*I)+ce*((1-O)*x+O*w))),this.uvs.push([ce,O])}});U.faces=[];for(var F=0;F<R-1;F++)for(var z=0;z<P-1;z++){var K=z+F*P,Q=z+1+(F+1)*P,te=z+(F+1)*P;U.faces.push([K,z+1+F*P,Q]),U.faces.push([K,Q,te])}U.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(D,U)}return this.drawBuffers(D),this},l.default.RendererGL.prototype.bezier=function(f,d,g,y,b,x,j,S,w,_,M,I){arguments.length===8&&(M=S,_=j,S=x,j=b,b=y,y=g,g=x=w=I=0);var P=this._pInst._bezierDetail||20;this.beginShape();for(var R=0;R<=P;R++){var D=Math.pow(1-R/P,3),U=R/P*3*Math.pow(1-R/P,2),F=3*Math.pow(R/P,2)*(1-R/P),z=Math.pow(R/P,3);this.vertex(f*D+y*U+j*F+_*z,d*D+b*U+S*F+M*z,g*D+x*U+w*F+I*z)}return this.endShape(),this},l.default.RendererGL.prototype.curve=function(f,d,g,y,b,x,j,S,w,_,M,I){arguments.length===8&&(_=j,M=S,j=b,S=y,b=y=g,g=x=w=I=0);var P=this._pInst._curveDetail;this.beginShape();for(var R=0;R<=P;R++){var D=.5*Math.pow(R/P,3),U=.5*Math.pow(R/P,2),F=R/P*.5;this.vertex(D*(3*y-f-3*j+_)+U*(2*f-5*y+4*j-_)+F*(-f+j)+2*y*.5,D*(3*b-d-3*S+M)+U*(2*d-5*b+4*S-M)+F*(-d+S)+2*b*.5,D*(3*x-g-3*w+I)+U*(2*g-5*x+4*w-I)+F*(-g+w)+2*x*.5)}return this.endShape(),this},l.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},l.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var f,d,g,y,b,x,j=[],S=[],w=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var _=1/this._lutBezierDetail,M=0,I=1,P=0;M<1;){if(x=parseFloat(M.toFixed(6)),this._lookUpTableBezier[P]=this._bezierCoefficients(x),I.toFixed(6)===_.toFixed(6)){x=parseFloat(I.toFixed(6))+parseFloat(M.toFixed(6)),++P,this._lookUpTableBezier[P]=this._bezierCoefficients(x);break}M+=_,I-=_,++P}}for(var R=this._lookUpTableBezier.length,D=[],U=0;U<4;U++)D.push([]);D[0]=this.immediateMode.geometry.vertexColors.slice(-4),D[3]=this.curFillColor.slice();var F=[];for(U=0;U<4;U++)F.push([]);if(F[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),F[3]=this.curStrokeColor.slice(),w===6){this.isBezier=!0;var j=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],z=Math.hypot(j[0]-j[1],S[0]-S[1]),Q=Math.hypot(j[1]-j[2],S[1]-S[2]),K=Math.hypot(j[2]-j[3],S[2]-S[3]),Q=z+Q+K;for(z/=Q,K/=Q,b=0;b<4;b++)D[1].push(D[0][b]*(1-z)+D[3][b]*z),D[2].push(D[0][b]*K+D[3][b]*(1-K)),F[1].push(F[0][b]*(1-z)+F[3][b]*z),F[2].push(F[0][b]*K+F[3][b]*(1-K));for(y=0;y<R;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],U=f=d=0;U<4;U++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][U]*D[U][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][U]*F[U][b];f+=j[U]*this._lookUpTableBezier[y][U],d+=S[U]*this._lookUpTableBezier[y][U]}this.vertex(f,d)}this.curFillColor=D[3],this.curStrokeColor=F[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(w===9){this.isBezier=!0,j=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var te=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],Z=Math.hypot(j[0]-j[1],S[0]-S[1],te[0]-te[1]),Q=Math.hypot(j[1]-j[2],S[1]-S[2],te[1]-te[2]),q=Math.hypot(j[2]-j[3],S[2]-S[3],te[2]-te[3]),w=Z+Q+q;for(Z/=w,q/=w,b=0;b<4;b++)D[1].push(D[0][b]*(1-Z)+D[3][b]*Z),D[2].push(D[0][b]*q+D[3][b]*(1-q)),F[1].push(F[0][b]*(1-Z)+F[3][b]*Z),F[2].push(F[0][b]*q+F[3][b]*(1-q));for(y=0;y<R;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],U=f=d=g=0;U<4;U++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][U]*D[U][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][U]*F[U][b];f+=j[U]*this._lookUpTableBezier[y][U],d+=S[U]*this._lookUpTableBezier[y][U],g+=te[U]*this._lookUpTableBezier[y][U]}this.vertex(f,d,g)}this.curFillColor=D[3],this.curStrokeColor=F[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},l.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var f,d,g,y,b,x,j=[],S=[],w=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var _=1/this._lutQuadraticDetail,M=0,I=1,P=0;M<1;){if(x=parseFloat(M.toFixed(6)),this._lookUpTableQuadratic[P]=this._quadraticCoefficients(x),I.toFixed(6)===_.toFixed(6)){x=parseFloat(I.toFixed(6))+parseFloat(M.toFixed(6)),++P,this._lookUpTableQuadratic[P]=this._quadraticCoefficients(x);break}M+=_,I-=_,++P}}for(var R=this._lookUpTableQuadratic.length,D=[],U=0;U<3;U++)D.push([]);D[0]=this.immediateMode.geometry.vertexColors.slice(-4),D[2]=this.curFillColor.slice();var F=[];for(U=0;U<3;U++)F.push([]);if(F[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),F[2]=this.curStrokeColor.slice(),w===4){this.isQuadratic=!0;var j=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],z=Math.hypot(j[0]-j[1],S[0]-S[1]);for(z/=z+Math.hypot(j[1]-j[2],S[1]-S[2]),b=0;b<4;b++)D[1].push(D[0][b]*(1-z)+D[2][b]*z),F[1].push(F[0][b]*(1-z)+F[2][b]*z);for(y=0;y<R;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],U=f=d=0;U<3;U++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][U]*D[U][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][U]*F[U][b];f+=j[U]*this._lookUpTableQuadratic[y][U],d+=S[U]*this._lookUpTableQuadratic[y][U]}this.vertex(f,d)}this.curFillColor=D[2],this.curStrokeColor=F[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(w===6){this.isQuadratic=!0,j=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var K=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],Q=Math.hypot(j[0]-j[1],S[0]-S[1],K[0]-K[1]);for(Q/=Q+Math.hypot(j[1]-j[2],S[1]-S[2],K[1]-K[2]),b=0;b<4;b++)D[1].push(D[0][b]*(1-Q)+D[2][b]*Q),F[1].push(F[0][b]*(1-Q)+F[2][b]*Q);for(y=0;y<R;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],U=f=d=g=0;U<3;U++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][U]*D[U][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][U]*F[U][b];f+=j[U]*this._lookUpTableQuadratic[y][U],d+=S[U]*this._lookUpTableQuadratic[y][U],g+=K[U]*this._lookUpTableQuadratic[y][U]}this.vertex(f,d,g)}this.curFillColor=D[2],this.curStrokeColor=F[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},l.default.RendererGL.prototype.curveVertex=function(){var f,d,g,y,b,x,j=[],S=[],w=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var _=1/this._lutBezierDetail,M=0,I=1,P=0;M<1;){if(x=parseFloat(M.toFixed(6)),this._lookUpTableBezier[P]=this._bezierCoefficients(x),I.toFixed(6)===_.toFixed(6)){x=parseFloat(I.toFixed(6))+parseFloat(M.toFixed(6)),++P,this._lookUpTableBezier[P]=this._bezierCoefficients(x);break}M+=_,I-=_,++P}}var R=this._lookUpTableBezier.length;if(w===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,j=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),b=0;b<R;b++)d=j[0]*this._lookUpTableBezier[b][0]+j[1]*this._lookUpTableBezier[b][1]+j[2]*this._lookUpTableBezier[b][2]+j[3]*this._lookUpTableBezier[b][3],g=S[0]*this._lookUpTableBezier[b][0]+S[1]*this._lookUpTableBezier[b][1]+S[2]*this._lookUpTableBezier[b][2]+S[3]*this._lookUpTableBezier[b][3],this.vertex(d,g);for(b=0;b<w;b++)this.immediateMode._curveVertex.shift()}}else if(w===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,j=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),f=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),b=0;b<R;b++)d=j[0]*this._lookUpTableBezier[b][0]+j[1]*this._lookUpTableBezier[b][1]+j[2]*this._lookUpTableBezier[b][2]+j[3]*this._lookUpTableBezier[b][3],g=S[0]*this._lookUpTableBezier[b][0]+S[1]*this._lookUpTableBezier[b][1]+S[2]*this._lookUpTableBezier[b][2]+S[3]*this._lookUpTableBezier[b][3],y=f[0]*this._lookUpTableBezier[b][0]+f[1]*this._lookUpTableBezier[b][1]+f[2]*this._lookUpTableBezier[b][2]+f[3]*this._lookUpTableBezier[b][3],this.vertex(d,g,y);for(b=0;b<w;b++)this.immediateMode._curveVertex.shift()}},l.default.RendererGL.prototype.image=function(f,I,g,P,b,x,j,S,w){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(f),this._pInst.textureMode(c.NORMAL);var _=0,M=(I<=f.width&&(_=I/f.width),1),I=(I+P<=f.width&&(M=(I+P)/f.width),0),P=(g<=f.height&&(I=g/f.height),1);g+b<=f.height&&(P=(g+b)/f.height),this.beginShape(),this.vertex(x,j,0,_,I),this.vertex(x+S,j,0,M,I),this.vertex(x+S,j+w,0,M,P),this.vertex(x,j+w,0,_,P),this.endShape(c.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(c.REMOVE)};var h=l.default;a.default=h},{"../core/constants":256,"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":167,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],311:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.prototype.orbitControl=function(h,f,d){var g,y;if(this._assert3d("orbitControl"),l.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY)return g=this._renderer._curCamera,h===void 0&&(h=1),f===void 0&&(f=h),d===void 0&&(d=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0)),y=this.height<this.width?this.height:this.width,this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,d*y):this._renderer._curCamera._orbit(0,0,-d*y)),this.mouseIsPressed&&(this.mouseButton===this.LEFT?(d=-h*(this.mouseX-this.pmouseX)/y,y=f*(this.mouseY-this.pmouseY)/y,this._renderer._curCamera._orbit(d,y,0)):this.mouseButton===this.RIGHT&&(d=g._getLocalAxes(),(y=Math.sqrt(d.x[0]*d.x[0]+d.x[2]*d.x[2]))!==0&&(d.x[0]/=y,d.x[2]/=y),(y=Math.sqrt(d.y[0]*d.y[0]+d.y[2]*d.y[2]))!==0&&(d.y[0]/=y,d.y[2]/=y),y=-1*h*(this.mouseX-this.pmouseX),h=-1*f*(this.mouseY-this.pmouseY),g.setPosition(g.eyeX+y*d.x[0]+h*d.z[0],g.eyeY,g.eyeZ+y*d.x[2]+h*d.z[2]))),this},l.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var h=arguments.length,f=new Array(h),d=0;d<h;d++)f[d]=arguments[d];l.default._validateParameters("debugMode",f);for(var g=this._registeredMethods.post.length-1;0<=g;g--)this._registeredMethods.post[g].toString()!==this._grid().toString()&&this._registeredMethods.post[g].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(g,1);f[0]===c.GRID?this.registerMethod("post",this._grid.call(this,f[1],f[2],f[3],f[4],f[5])):f[0]===c.AXES?this.registerMethod("post",this._axesIcon.call(this,f[1],f[2],f[3],f[4])):(this.registerMethod("post",this._grid.call(this,f[0],f[1],f[2],f[3],f[4])),this.registerMethod("post",this._axesIcon.call(this,f[5],f[6],f[7],f[8])))},l.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var h=this._registeredMethods.post.length-1;0<=h;h--)this._registeredMethods.post[h].toString()!==this._grid().toString()&&this._registeredMethods.post[h].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(h,1)},l.default.prototype._grid=function(h,f,d,g,y){h===void 0&&(h=this.width/2),f===void 0&&(f=Math.round(h/30)<4?4:Math.round(h/30)),d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=0);var b=h/f,x=h/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var j=0;j<=f;j++)this.beginShape(this.LINES),this.vertex(-x+d,g,j*b-x+y),this.vertex(x+d,g,j*b-x+y),this.endShape();for(var S=0;S<=f;S++)this.beginShape(this.LINES),this.vertex(S*b-x+d,g,-x+y),this.vertex(S*b-x+d,g,x+y),this.endShape();this.pop()}},l.default.prototype._axesIcon=function(h,f,d,g){return h===void 0&&(h=40<this.width/20?this.width/20:40),f===void 0&&(f=-this.width/4),d===void 0&&(d=f),g===void 0&&(g=f),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(f,d,g),this.vertex(f+h,d,g),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(f,d,g),this.vertex(f,d+h,g),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(f,d,g),this.vertex(f,d,g+h),this.endShape(),this.pop()}};var m=l.default;a.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],312:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.prototype.ambientLight=function(h,f,d,g){this._assert3d("ambientLight"),l.default._validateParameters("ambientLight",arguments);var y=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(y._array[0],y._array[1],y._array[2]),this._renderer._enableLighting=!0,this},l.default.prototype.specularColor=function(h,f,d){this._assert3d("specularColor"),l.default._validateParameters("specularColor",arguments);var g=this.color.apply(this,arguments);return this._renderer.specularColors=[g._array[0],g._array[1],g._array[2]],this},l.default.prototype.directionalLight=function(h,w,S,g,y,b){this._assert3d("directionalLight"),l.default._validateParameters("directionalLight",arguments),h=h instanceof l.default.Color?h:this.color(h,w,S);var x,j,w=arguments[arguments.length-1],S=typeof w=="number"?(x=arguments[arguments.length-3],j=arguments[arguments.length-2],arguments[arguments.length-1]):(x=w.x,j=w.y,w.z),w=Math.sqrt(x*x+j*j+S*S);return this._renderer.directionalLightDirections.push(x/w,j/w,S/w),this._renderer.directionalLightDiffuseColors.push(h._array[0],h._array[1],h._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.pointLight=function(h,S,w,g,y,b){this._assert3d("pointLight"),l.default._validateParameters("pointLight",arguments),h=h instanceof l.default.Color?h:this.color(h,S,w);var x,j,S=arguments[arguments.length-1],w=typeof S=="number"?(x=arguments[arguments.length-3],j=arguments[arguments.length-2],arguments[arguments.length-1]):(x=S.x,j=S.y,S.z);return this._renderer.pointLightPositions.push(x,j,w),this._renderer.pointLightDiffuseColors.push(h._array[0],h._array[1],h._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.lights=function(){var h;return this._assert3d("lights"),this._colorMode===c.RGB?(this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1)):(h=this._colorMaxes[this._colorMode][2],this.ambientLight(0,0,h),this.directionalLight(0,0,h,0,0,-1)),this},l.default.prototype.lightFalloff=function(h,f,d){return this._assert3d("lightFalloff"),l.default._validateParameters("lightFalloff",arguments),h<0&&(h=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),f<0&&(f=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),h===0&&f===0&&d===0&&(h=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=h,this._renderer.linearAttenuation=f,this._renderer.quadraticAttenuation=d,this},l.default.prototype.spotLight=function(h,f,d,g,y,b,x,j,S,w,_){this._assert3d("spotLight"),l.default._validateParameters("spotLight",arguments);var M,I,P,R=arguments.length;switch(R){case 11:case 10:M=this.color(h,f,d),I=new l.default.Vector(g,y,b),P=new l.default.Vector(x,j,S);break;case 9:h instanceof l.default.Color?(M=h,I=new l.default.Vector(f,d,g),P=new l.default.Vector(y,b,x),w=j,_=S):g instanceof l.default.Vector?(M=this.color(h,f,d),I=g,P=new l.default.Vector(y,b,x),w=j,_=S):x instanceof l.default.Vector?(M=this.color(h,f,d),I=new l.default.Vector(g,y,b),P=x,w=j,_=S):(M=this.color(h,f,d),I=new l.default.Vector(g,y,b),P=new l.default.Vector(x,j,S));break;case 8:w=(P=h instanceof l.default.Color?(M=h,I=new l.default.Vector(f,d,g),new l.default.Vector(y,b,x)):g instanceof l.default.Vector?(M=this.color(h,f,d),I=g,new l.default.Vector(y,b,x)):(M=this.color(h,f,d),I=new l.default.Vector(g,y,b),x),j);break;case 7:h instanceof l.default.Color&&f instanceof l.default.Vector?(M=h,I=f,P=new l.default.Vector(d,g,y),w=b,_=x):h instanceof l.default.Color&&y instanceof l.default.Vector?(M=h,I=new l.default.Vector(f,d,g),P=y,w=b,_=x):g instanceof l.default.Vector&&y instanceof l.default.Vector?(M=this.color(h,f,d),I=g,P=y,w=b,_=x):P=h instanceof l.default.Color?(M=h,I=new l.default.Vector(f,d,g),new l.default.Vector(y,b,x)):g instanceof l.default.Vector?(M=this.color(h,f,d),I=g,new l.default.Vector(y,b,x)):(M=this.color(h,f,d),I=new l.default.Vector(g,y,b),x);break;case 6:g instanceof l.default.Vector&&y instanceof l.default.Vector?(M=this.color(h,f,d),I=g,P=y,w=b):h instanceof l.default.Color&&y instanceof l.default.Vector?(M=h,I=new l.default.Vector(f,d,g),P=y,w=b):h instanceof l.default.Color&&f instanceof l.default.Vector&&(M=h,I=f,P=new l.default.Vector(d,g,y),w=b);break;case 5:h instanceof l.default.Color&&f instanceof l.default.Vector&&d instanceof l.default.Vector?(M=h,I=f,P=d,w=g,_=y):g instanceof l.default.Vector&&y instanceof l.default.Vector?(M=this.color(h,f,d),I=g,P=y):h instanceof l.default.Color&&y instanceof l.default.Vector?(M=h,I=new l.default.Vector(f,d,g),P=y):h instanceof l.default.Color&&f instanceof l.default.Vector&&(M=h,I=f,P=new l.default.Vector(d,g,y));break;case 4:M=h,I=f,P=d,w=g;break;case 3:M=h,I=f,P=d;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(R<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(M._array[0],M._array[1],M._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(I.x,I.y,I.z),P.normalize(),this._renderer.spotLightDirections.push(P.x,P.y,P.z),w===void 0&&(w=Math.PI/3),_!==void 0&&_<1?(_=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):_===void 0&&(_=100),w=this._renderer._pInst._toRadians(w),this._renderer.spotLightAngle.push(Math.cos(w)),this._renderer.spotLightConc.push(_),this._renderer._enableLighting=!0,this},l.default.prototype.noLights=function(){return this._assert3d("noLights"),l.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var m=l.default;a.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],313:[function(r,s,a){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(u=r("../core/main"))&&u.__esModule?u:{default:u};r("./p5.Geometry"),o.default.prototype.loadModel=function(l){o.default._validateParameters("loadModel",arguments);var c,p,m,h=l.slice(-4),f=(typeof arguments[1]=="boolean"?(c=arguments[1],p=arguments[2],m=arguments[3],arguments[4]!==void 0&&(h=arguments[4])):(c=!1,p=arguments[1],m=arguments[2],arguments[3]!==void 0&&(h=arguments[3])),new o.default.Geometry),d=(f.gid="".concat(l,"|").concat(c),this);return h.match(/\.stl$/i)?this.httpDo(l,"GET","arrayBuffer",function(g){(function(y,b){if(function(x){for(var j=new DataView(x),S=[115,111,108,105,100],w=0;w<5;w++)if(function(_,M,I){for(var P=0,R=_.length;P<R;P++)if(_[P]!==M.getUint8(I+P,!1))return;return 1}(S,j,w))return;return 1}(b))(function(x,j){for(var S,w,_,M,I,P,R,D=new DataView(j),U=D.getUint32(80,!0),F=!1,z=0;z<70;z++)D.getUint32(z,!1)===1129270351&&D.getUint8(z+4)===82&&D.getUint8(z+5)===61&&(F=!0,M=[],I=D.getUint8(z+6)/255,P=D.getUint8(z+7)/255,R=D.getUint8(z+8)/255);for(var K=0;K<U;K++){for(var Q,te=84+50*K,Z=D.getFloat32(te,!0),q=D.getFloat32(4+te,!0),Y=D.getFloat32(8+te,!0),X=(F&&(Q=D.getUint16(48+te,!0),_=32768&Q?(S=I,w=P,R):(S=(31&Q)/31,w=(Q>>5&31)/31,(Q>>10&31)/31)),new o.default.Vector(Z,q,Y)),ce=1;ce<=3;ce++){var O=te+12*ce,O=new o.default.Vector(D.getFloat32(O,!0),D.getFloat32(4+O,!0),D.getFloat32(8+O,!0));x.vertices.push(O),x.vertexNormals.push(X),F&&M.push(S,w,_)}x.faces.push([3*K,3*K+1,3*K+2]),x.uvs.push([0,0],[0,0],[0,0])}})(y,b);else{if(b=new DataView(b),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");b=new TextDecoder("utf-8").decode(b).split(`
`),function(x,j){for(var S,w,_="",M=[],I=0;I<j.length;++I){for(var P=j[I].trim(),R=P.split(" "),D=0;D<R.length;++D)R[D]===""&&R.splice(D,1);if(R.length!==0)switch(_){case"":if(R[0]!=="solid")return console.error(P),console.error('Invalid state "'.concat(R[0],'", should be "solid"'));_="solid";break;case"solid":if(R[0]!=="facet"||R[1]!=="normal")return console.error(P),console.error('Invalid state "'.concat(R[0],'", should be "facet normal"'));S=new o.default.Vector(parseFloat(R[2]),parseFloat(R[3]),parseFloat(R[4])),x.vertexNormals.push(S,S,S),_="facet normal";break;case"facet normal":if(R[0]!=="outer"||R[1]!=="loop")return console.error(P),console.error('Invalid state "'.concat(R[0],'", should be "outer loop"'));_="vertex";break;case"vertex":if(R[0]==="vertex")w=new o.default.Vector(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])),x.vertices.push(w),x.uvs.push([0,0]),M.push(x.vertices.indexOf(w));else{if(R[0]!=="endloop")return console.error(P),console.error('Invalid state "'.concat(R[0],'", should be "vertex" or "endloop"'));x.faces.push(M),M=[],_="endloop"}break;case"endloop":if(R[0]!=="endfacet")return console.error(P),console.error('Invalid state "'.concat(R[0],'", should be "endfacet"'));_="endfacet";break;case"endfacet":if(R[0]!=="endsolid"){if(R[0]!=="facet"||R[1]!=="normal")return console.error(P),console.error('Invalid state "'.concat(R[0],'", should be "endsolid" or "facet normal"'));S=new o.default.Vector(parseFloat(R[2]),parseFloat(R[3]),parseFloat(R[4])),x.vertexNormals.push(S,S,S),_="facet normal"}break;default:console.error('Invalid state "'.concat(_,'"'))}}}(y,b)}})(f,g),c&&f.normalize(),d._decrementPreload(),typeof p=="function"&&p(f)},m):h.match(/\.obj$/i)?this.loadStrings(l,function(g){for(var y=f,b=g,x={v:[],vt:[],vn:[]},j={},S=0;S<b.length;++S){var w=b[S].trim().split(/\b\s+/);if(0<w.length){if(w[0]==="v"||w[0]==="vn"){var _=new o.default.Vector(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));x[w[0]].push(_)}else if(w[0]==="vt")_=[parseFloat(w[1]),1-parseFloat(w[2])],x[w[0]].push(_);else if(w[0]==="f")for(var M=3;M<w.length;++M){for(var I=[],P=[1,M-1,M],R=0;R<P.length;++R){var D=w[P[R]],U=0;if(j[D]!==void 0)U=j[D];else{for(var F=D.split("/"),z=0;z<F.length;z++)F[z]=parseInt(F[z])-1;U=j[D]=y.vertices.length,y.vertices.push(x.v[F[0]].copy()),x.vt[F[1]]?y.uvs.push(x.vt[F[1]].slice()):y.uvs.push([0,0]),x.vn[F[2]]&&y.vertexNormals.push(x.vn[F[2]].copy())}I.push(U)}I[0]!==I[1]&&I[0]!==I[2]&&I[1]!==I[2]&&y.faces.push(I)}}}y.vertexNormals.length===0&&y.computeNormals(),c&&f.normalize(),d._decrementPreload(),typeof p=="function"&&p(f)},m):(o.default._friendlyFileLoadError(3,l),m?m():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),f},o.default.prototype.model=function(l){this._assert3d("model"),o.default._validateParameters("model",arguments),0<l.vertices.length&&(this._renderer.geometryInHash(l.gid)||(l._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(l.gid,l)),this._renderer.drawBuffers(l.gid))};var u=o.default;a.default=u},{"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],314:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.join"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}r("./p5.Texture"),l.default.prototype.loadShader=function(h,f,d,g){l.default._validateParameters("loadShader",arguments),g=g||console.error;function y(){x._decrementPreload(),d&&d(b)}var b=new l.default.Shader,x=this,j=!1,S=!1;return this.loadStrings(h,function(w){b._vertSrc=w.join(`
`),S=!0,j&&y()},g),this.loadStrings(f,function(w){b._fragSrc=w.join(`
`),j=!0,S&&y()},g),b},l.default.prototype.createShader=function(h,f){return this._assert3d("createShader"),l.default._validateParameters("createShader",arguments),new l.default.Shader(this._renderer,h,f)},l.default.prototype.shader=function(h){return this._assert3d("shader"),l.default._validateParameters("shader",arguments),h._renderer===void 0&&(h._renderer=this._renderer),h.init(),h.isStrokeShader()?this._renderer.userStrokeShader=h:(this._renderer.userFillShader=h,this._renderer._useNormalMaterial=!1),this},l.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},l.default.prototype.texture=function(h){return this._assert3d("texture"),l.default._validateParameters("texture",arguments),h.gifProperties&&h._animateGif(this),this._renderer.drawMode=c.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=h,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.textureMode=function(h){h!==c.IMAGE&&h!==c.NORMAL?console.warn("You tried to set ".concat(h," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=h},l.default.prototype.textureWrap=function(h){for(var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:h,d=(this._renderer.textureWrapX=h,this._renderer.textureWrapY=f,this._renderer.textures),g=0;g<d.length;g++)d[g].setWrapMode(h,f)},l.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var h=arguments.length,f=new Array(h),d=0;d<h;d++)f[d]=arguments[d];return l.default._validateParameters("normalMaterial",f),this._renderer.drawMode=c.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},l.default.prototype.ambientMaterial=function(h,f,d){this._assert3d("ambientMaterial"),l.default._validateParameters("ambientMaterial",arguments);var g=l.default.prototype.color.apply(this,arguments);return this._renderer.curAmbientColor=g._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.emissiveMaterial=function(h,f,d,g){this._assert3d("emissiveMaterial"),l.default._validateParameters("emissiveMaterial",arguments);var y=l.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=y._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},l.default.prototype.specularMaterial=function(h,f,d,g){this._assert3d("specularMaterial"),l.default._validateParameters("specularMaterial",arguments);var y=l.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=y._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},l.default.prototype.shininess=function(h){return this._assert3d("shininess"),l.default._validateParameters("shininess",arguments),this._renderer._useShininess=h=h<1?1:h,this},l.default.RendererGL.prototype._applyColorBlend=function(h){var f=this.GL,d=this.drawMode===c.TEXTURE,d=this.userFillShader||this.userStrokeShader||this.userPointShader||d||this.curBlendMode!==c.BLEND||h[h.length-1]<1||this._isErasing;return d!==this._isBlending&&(d||this.curBlendMode!==c.BLEND&&this.curBlendMode!==c.ADD?f.enable(f.BLEND):f.disable(f.BLEND),f.depthMask(!0),this._isBlending=d),this._applyBlendMode(),h},l.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var h=this.GL;switch(this.curBlendMode){case c.BLEND:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case c.ADD:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE);break;case c.REMOVE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ZERO,h.ONE_MINUS_SRC_ALPHA);break;case c.MULTIPLY:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.DST_COLOR,h.ONE_MINUS_SRC_ALPHA);break;case c.SCREEN:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_COLOR);break;case c.EXCLUSION:h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE_MINUS_DST_COLOR,h.ONE_MINUS_SRC_COLOR,h.ONE,h.ONE);break;case c.REPLACE:h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ONE,h.ZERO);break;case c.SUBTRACT:h.blendEquationSeparate(h.FUNC_REVERSE_SUBTRACT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE_MINUS_SRC_ALPHA);break;case c.DARKEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MIN_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case c.LIGHTEST:this.blendExt?(h.blendEquationSeparate(this.blendExt.MAX_EXT,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var m=l.default;a.default=m},{"../core/constants":256,"../core/main":267,"./p5.Texture":323,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],315:[function(r,s,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.camera=function(){var u;this._assert3d("camera");for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return o.default._validateParameters("camera",c),(u=this._renderer._curCamera).camera.apply(u,c),this},o.default.prototype.perspective=function(){var u;this._assert3d("perspective");for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return o.default._validateParameters("perspective",c),(u=this._renderer._curCamera).perspective.apply(u,c),this},o.default.prototype.ortho=function(){var u;this._assert3d("ortho");for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return o.default._validateParameters("ortho",c),(u=this._renderer._curCamera).ortho.apply(u,c),this},o.default.prototype.frustum=function(){var u;this._assert3d("frustum");for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return o.default._validateParameters("frustum",c),(u=this._renderer._curCamera).frustum.apply(u,c),this},o.default.prototype.createCamera=function(){this._assert3d("createCamera");var u=new o.default.Camera(this._renderer);return u._computeCameraDefaultSettings(),u._setDefaultCamera(),this._renderer._curCamera=u},o.default.Camera=function(u){this._renderer=u,this.cameraType="default",this.cameraMatrix=new o.default.Matrix,this.projMatrix=new o.default.Matrix},o.default.Camera.prototype.perspective=function(m,l,c,p){this.cameraType=0<arguments.length?"custom":"default",m===void 0?(m=this.defaultCameraFOV,this.cameraFOV=m):this.cameraFOV=this._renderer._pInst._toRadians(m),l===void 0&&(l=this.defaultAspectRatio),c===void 0&&(c=this.defaultCameraNear),p===void 0&&(p=this.defaultCameraFar),c<=1e-4&&(c=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),p<c&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=l,this.cameraNear=c,this.cameraFar=p,this.projMatrix=o.default.Matrix.identity();var m=1/Math.tan(this.cameraFOV/2),h=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(m/l,0,0,0,0,-m,0,0,0,0,(p+c)*h,-1,0,0,2*p*c*h,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},o.default.Camera.prototype.ortho=function(j,x,c,p,m,h){j===void 0&&(j=-this._renderer.width/2),x===void 0&&(x=+this._renderer.width/2),c===void 0&&(c=-this._renderer.height/2),m===void 0&&(m=0);var S=x-j,f=(p=p===void 0?+this._renderer.height/2:p)-c,d=(h=h===void 0?Math.max(this._renderer.width,this._renderer.height):h)-m,g=2/S,y=2/f,b=-2/d,x=-(x+j)/S,j=-(p+c)/f,S=-(h+m)/d;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,-y,0,0,0,0,b,0,x,j,S,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype.frustum=function(j,x,c,p,m,h){j===void 0&&(j=-this._renderer.width/2),x===void 0&&(x=+this._renderer.width/2),c===void 0&&(c=-this._renderer.height/2),m===void 0&&(m=0);var S=x-j,f=(p=p===void 0?+this._renderer.height/2:p)-c,d=(h=h===void 0?Math.max(this._renderer.width,this._renderer.height):h)-m,g=2*m/S,y=2*m/f,b=-2*h*m/d,x=(x+j)/S,j=(p+c)/f,S=-(h+m)/d;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,y,0,0,x,j,S,-1,0,0,b,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype._rotateView=function(g,l,c,p){var m=this.centerX,h=this.centerY,f=this.centerZ,d=(m-=this.eyeX,h-=this.eyeY,f-=this.eyeZ,o.default.Matrix.identity(this._renderer._pInst)),g=(d.rotate(this._renderer._pInst._toRadians(g),l,c,p),[m*d.mat4[0]+h*d.mat4[4]+f*d.mat4[8],m*d.mat4[1]+h*d.mat4[5]+f*d.mat4[9],m*d.mat4[2]+h*d.mat4[6]+f*d.mat4[10]]);g[0]+=this.eyeX,g[1]+=this.eyeY,g[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,g[0],g[1],g[2],this.upX,this.upY,this.upZ)},o.default.Camera.prototype.pan=function(u){var l=this._getLocalAxes();this._rotateView(u,l.y[0],l.y[1],l.y[2])},o.default.Camera.prototype.tilt=function(u){var l=this._getLocalAxes();this._rotateView(u,l.x[0],l.x[1],l.x[2])},o.default.Camera.prototype.lookAt=function(u,l,c){this.camera(this.eyeX,this.eyeY,this.eyeZ,u,l,c,this.upX,this.upY,this.upZ)},o.default.Camera.prototype.camera=function(u,l,c,p,m,h,f,d,g){return u===void 0&&(u=this.defaultEyeX,l=this.defaultEyeY,c=this.defaultEyeZ,p=u,m=l,d=1,g=f=h=0),this.eyeX=u,this.eyeY=l,this.eyeZ=c,p!==void 0&&(this.centerX=p,this.centerY=m,this.centerZ=h),f!==void 0&&(this.upX=f,this.upY=d,this.upZ=g),p=this._getLocalAxes(),this.cameraMatrix.set(p.x[0],p.y[0],p.z[0],0,p.x[1],p.y[1],p.z[1],0,p.x[2],p.y[2],p.z[2],0,0,0,0,1),m=-u,this.cameraMatrix.translate([m,-l,-c]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},o.default.Camera.prototype.move=function(p,m,c){var h=this._getLocalAxes(),p=[h.x[0]*p,h.x[1]*p,h.x[2]*p],m=[h.y[0]*m,h.y[1]*m,h.y[2]*m],h=[h.z[0]*c,h.z[1]*c,h.z[2]*c];this.camera(this.eyeX+p[0]+m[0]+h[0],this.eyeY+p[1]+m[1]+h[1],this.eyeZ+p[2]+m[2]+h[2],this.centerX+p[0]+m[0]+h[0],this.centerY+p[1]+m[1]+h[1],this.centerZ+p[2]+m[2]+h[2],this.upX,this.upY,this.upZ)},o.default.Camera.prototype.setPosition=function(u,l,c){var p=u-this.eyeX,m=l-this.eyeY,h=c-this.eyeZ;this.camera(u,l,c,this.centerX+p,this.centerY+m,this.centerZ+h,this.upX,this.upY,this.upZ)},o.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},o.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},o.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},o.default.Camera.prototype.copy=function(){var u=new o.default.Camera(this._renderer);return u.cameraFOV=this.cameraFOV,u.aspectRatio=this.aspectRatio,u.eyeX=this.eyeX,u.eyeY=this.eyeY,u.eyeZ=this.eyeZ,u.centerX=this.centerX,u.centerY=this.centerY,u.centerZ=this.centerZ,u.cameraNear=this.cameraNear,u.cameraFar=this.cameraFar,u.cameraType=this.cameraType,u.cameraMatrix=this.cameraMatrix.copy(),u.projMatrix=this.projMatrix.copy(),u},o.default.Camera.prototype._getLocalAxes=function(){var u=this.eyeX-this.centerX,l=this.eyeY-this.centerY,c=this.eyeZ-this.centerZ,f=Math.sqrt(u*u+l*l+c*c),f=(f!==0&&(u/=f,l/=f,c/=f),this.upX),p=(d=this.upY)*c-(g=this.upZ)*l,m=-f*c+g*u,h=f*l-d*u,f=l*h-c*m,d=-u*h+c*p,g=u*m-l*p,y=Math.sqrt(p*p+m*m+h*h),y=(y!==0&&(p/=y,m/=y,h/=y),Math.sqrt(f*f+d*d+g*g));return y!==0&&(f/=y,d/=y,g/=y),{x:[p,m,h],y:[f,d,g],z:[u,l,c]}},o.default.Camera.prototype._orbit=function(d,g,y){var m=this.eyeX-this.centerX,f=this.eyeY-this.centerY,h=this.eyeZ-this.centerZ,p=Math.sqrt(m*m+f*f+h*h),m=Math.atan2(m,h),h=Math.acos(Math.max(-1,Math.min(1,f/p))),f=0<this.upY?1:-1,d=(m+=f*d,((h+=f*g)<=0||h>=Math.PI)&&(f*=-1),(p+=y)<0&&(p=.1),Math.sin(h)*p*Math.sin(m)),g=Math.cos(h)*p,y=Math.sin(h)*p*Math.cos(m);this.camera(d+this.centerX,g+this.centerY,y+this.centerZ,this.centerX,this.centerY,this.centerZ,0,f,0)},o.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},o.default.prototype.setCamera=function(u){this._renderer._curCamera=u,this._renderer.uPMatrix.set(u.projMatrix.mat4[0],u.projMatrix.mat4[1],u.projMatrix.mat4[2],u.projMatrix.mat4[3],u.projMatrix.mat4[4],u.projMatrix.mat4[5],u.projMatrix.mat4[6],u.projMatrix.mat4[7],u.projMatrix.mat4[8],u.projMatrix.mat4[9],u.projMatrix.mat4[10],u.projMatrix.mat4[11],u.projMatrix.mat4[12],u.projMatrix.mat4[13],u.projMatrix.mat4[14],u.projMatrix.mat4[15])},r=o.default.Camera,a.default=r},{"../core/main":267}],316:[function(r,s,a){r("core-js/modules/es.array.slice"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.string.sub"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.Geometry=function(u,l,c){return this.vertices=[],this.lineVertices=[],this.lineTangentsIn=[],this.lineTangentsOut=[],this.lineSides=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=[],this.detailX=u!==void 0?u:1,this.detailY=l!==void 0?l:1,this.dirtyFlags={},c instanceof Function&&c.call(this),this},o.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},o.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var u,l,c,p=this.detailX+1,m=0;m<this.detailY;m++)for(var h=0;h<this.detailX;h++)l=(m+1)*p+h+1,this.faces.push([m*p+h,u=m*p+h+1,c=(m+1)*p+h]),this.faces.push([c,u,l]);return this},o.default.Geometry.prototype._getFaceNormal=function(l){var l=this.faces[l],c=this.vertices[l[0]],m=this.vertices[l[1]],l=this.vertices[l[2]],m=o.default.Vector.sub(m,c),l=o.default.Vector.sub(l,c),c=o.default.Vector.cross(m,l),p=o.default.Vector.mag(c),m=p/(o.default.Vector.mag(m)*o.default.Vector.mag(l));return m===0||isNaN(m)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),c):(1<m&&(m=1),c.mult(Math.asin(m)/p))},o.default.Geometry.prototype.computeNormals=function(){for(var u=this.vertexNormals,l=this.vertices,c=this.faces,p=u.length=0;p<l.length;++p)u.push(new o.default.Vector);for(var m=0;m<c.length;++m)for(var h=c[m],f=this._getFaceNormal(m),d=0;d<3;++d)u[h[d]].add(f);for(p=0;p<l.length;++p)u[p].normalize();return this},o.default.Geometry.prototype.averageNormals=function(){for(var u=0;u<=this.detailY;u++){var l=this.detailX+1,c=o.default.Vector.add(this.vertexNormals[u*l],this.vertexNormals[u*l+this.detailX]),c=o.default.Vector.div(c,2);this.vertexNormals[u*l]=c,this.vertexNormals[u*l+this.detailX]=c}return this},o.default.Geometry.prototype.averagePoleNormals=function(){for(var u=new o.default.Vector(0,0,0),l=0;l<this.detailX;l++)u.add(this.vertexNormals[l]);for(var u=o.default.Vector.div(u,this.detailX),c=0;c<this.detailX;c++)this.vertexNormals[c]=u;u=new o.default.Vector(0,0,0);for(var p=this.vertices.length-1;p>this.vertices.length-1-this.detailX;p--)u.add(this.vertexNormals[p]);u=o.default.Vector.div(u,this.detailX);for(var m=this.vertices.length-1;m>this.vertices.length-1-this.detailX;m--)this.vertexNormals[m]=u;return this},o.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var u=0,l=this.strokeIndices.length;u<l;u++)this.edges.push(this.strokeIndices[u]);else for(var c=0;c<this.faces.length;c++)this.edges.push([this.faces[c][0],this.faces[c][1]]),this.edges.push([this.faces[c][1],this.faces[c][2]]),this.edges.push([this.faces[c][2],this.faces[c][0]]);return this},o.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0;for(var u,l=1<this.edges.length&&this.edges[0][0]===this.edges[this.edges.length-1][1],c=!1,p=0;p<this.edges.length;p++){var m=this.edges[p-1],h=this.edges[p],f=this.vertices[h[0]],d=this.vertices[h[1]],g=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*h[0],4*(h[0]+1)):[0,0,0,0],y=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*h[1],4*(h[1]+1)):[0,0,0,0],b=d.copy().sub(f).normalize(),x=0<b.magSq();x&&this._addSegment(f,d,g,y,b),0<p&&m[1]===h[0]?(u&&x&&b.dot(u)<1-1e-8&&this._addJoin(f,u,b,g),!x||c||l||(this._addCap(f,b.copy().mult(-1),g),c=!0)):(c=!1,x&&(!l||0<p)&&(this._addCap(f,b.copy().mult(-1),g),c=!0),u&&(!l||p<this.edges.length-1)&&(this._addCap(this.vertices[m[1]],u,g),u=void 0)),p===this.edges.length-1&&(l?this._addJoin(d,b,this.vertices[this.edges[0][1]].copy().sub(d).normalize(),y):this._addCap(d,b,y)),x&&(u=b)}return this},o.default.Geometry.prototype._addSegment=function(h,f,c,p,m){var h=h.array(),f=f.array(),d=m.array();this.lineSides.push(1,-1,1,1,-1,-1);for(var g=0,y=[this.lineTangentsIn,this.lineTangentsOut];g<y.length;g++)y[g].push(d,d,d,d,d,d);return this.lineVertices.push(h,h,f,f,h,f),this.lineVertexColors.push(c,c,p,p,c,p),this},o.default.Geometry.prototype._addCap=function(u,l,c){for(var p=u.array(),m=l.array(),h=[0,0,0],f=0;f<6;f++)this.lineVertices.push(p),this.lineTangentsIn.push(m),this.lineTangentsOut.push(h),this.lineVertexColors.push(c);return this.lineSides.push(-1,-2,2,2,1,-1),this},o.default.Geometry.prototype._addJoin=function(u,l,c,p){for(var m=u.array(),h=l.array(),f=c.array(),d=0;d<12;d++)this.lineVertices.push(m),this.lineTangentsIn.push(h),this.lineTangentsOut.push(f),this.lineVertexColors.push(p);for(var g=0,y=[-1,1];g<y.length;g++){var b=y[g];this.lineSides.push(b,2*b,3*b,b,3*b,0)}return this},o.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var u=this.vertices[0].copy(),l=this.vertices[0].copy(),c=0;c<this.vertices.length;c++)u.x=Math.max(u.x,this.vertices[c].x),l.x=Math.min(l.x,this.vertices[c].x),u.y=Math.max(u.y,this.vertices[c].y),l.y=Math.min(l.y,this.vertices[c].y),u.z=Math.max(u.z,this.vertices[c].z),l.z=Math.min(l.z,this.vertices[c].z);for(var p=o.default.Vector.lerp(u,l,.5),m=o.default.Vector.sub(u,l),h=200/Math.max(Math.max(m.x,m.y),m.z),f=0;f<this.vertices.length;f++)this.vertices[f].sub(p),this.vertices[f].mult(h)}return this},r=o.default.Geometry,a.default=r},{"../core/main":267,"core-js/modules/es.array.slice":162,"core-js/modules/es.string.sub":192}],317:[function(c,s,a){c("core-js/modules/es.array.iterator"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.typed-array.float32-array"),c("core-js/modules/es.typed-array.copy-within"),c("core-js/modules/es.typed-array.every"),c("core-js/modules/es.typed-array.fill"),c("core-js/modules/es.typed-array.filter"),c("core-js/modules/es.typed-array.find"),c("core-js/modules/es.typed-array.find-index"),c("core-js/modules/es.typed-array.for-each"),c("core-js/modules/es.typed-array.includes"),c("core-js/modules/es.typed-array.index-of"),c("core-js/modules/es.typed-array.iterator"),c("core-js/modules/es.typed-array.join"),c("core-js/modules/es.typed-array.last-index-of"),c("core-js/modules/es.typed-array.map"),c("core-js/modules/es.typed-array.reduce"),c("core-js/modules/es.typed-array.reduce-right"),c("core-js/modules/es.typed-array.reverse"),c("core-js/modules/es.typed-array.set"),c("core-js/modules/es.typed-array.slice"),c("core-js/modules/es.typed-array.some"),c("core-js/modules/es.typed-array.sort"),c("core-js/modules/es.typed-array.subarray"),c("core-js/modules/es.typed-array.to-locale-string"),c("core-js/modules/es.typed-array.to-string"),c("core-js/modules/es.array.iterator"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.typed-array.float32-array"),c("core-js/modules/es.typed-array.copy-within"),c("core-js/modules/es.typed-array.every"),c("core-js/modules/es.typed-array.fill"),c("core-js/modules/es.typed-array.filter"),c("core-js/modules/es.typed-array.find"),c("core-js/modules/es.typed-array.find-index"),c("core-js/modules/es.typed-array.for-each"),c("core-js/modules/es.typed-array.includes"),c("core-js/modules/es.typed-array.index-of"),c("core-js/modules/es.typed-array.iterator"),c("core-js/modules/es.typed-array.join"),c("core-js/modules/es.typed-array.last-index-of"),c("core-js/modules/es.typed-array.map"),c("core-js/modules/es.typed-array.reduce"),c("core-js/modules/es.typed-array.reduce-right"),c("core-js/modules/es.typed-array.reverse"),c("core-js/modules/es.typed-array.set"),c("core-js/modules/es.typed-array.slice"),c("core-js/modules/es.typed-array.some"),c("core-js/modules/es.typed-array.sort"),c("core-js/modules/es.typed-array.subarray"),c("core-js/modules/es.typed-array.to-locale-string"),c("core-js/modules/es.typed-array.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(c=c("../core/main"))&&c.__esModule?c:{default:c},u=Array,l=function(p){return p instanceof Array},c=(typeof Float32Array<"u"&&(u=Float32Array,l=function(p){return p instanceof Array||p instanceof Float32Array}),o.default.Matrix=function(){for(var p=new Array(arguments.length),m=0;m<p.length;++m)p[m]=arguments[m];return p.length&&p[p.length-1]instanceof o.default&&(this.p5=p[p.length-1]),p[0]==="mat3"?this.mat3=Array.isArray(p[1])?p[1]:new u([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(p[0])?p[0]:new u([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},o.default.Matrix.prototype.set=function(p){return p instanceof o.default.Matrix?this.mat4=p.mat4:l(p)?this.mat4=p:arguments.length===16&&(this.mat4[0]=p,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},o.default.Matrix.prototype.get=function(){return new o.default.Matrix(this.mat4,this.p5)},o.default.Matrix.prototype.copy=function(){var p=new o.default.Matrix(this.p5);return p.mat4[0]=this.mat4[0],p.mat4[1]=this.mat4[1],p.mat4[2]=this.mat4[2],p.mat4[3]=this.mat4[3],p.mat4[4]=this.mat4[4],p.mat4[5]=this.mat4[5],p.mat4[6]=this.mat4[6],p.mat4[7]=this.mat4[7],p.mat4[8]=this.mat4[8],p.mat4[9]=this.mat4[9],p.mat4[10]=this.mat4[10],p.mat4[11]=this.mat4[11],p.mat4[12]=this.mat4[12],p.mat4[13]=this.mat4[13],p.mat4[14]=this.mat4[14],p.mat4[15]=this.mat4[15],p},o.default.Matrix.identity=function(p){return new o.default.Matrix(p)},o.default.Matrix.prototype.transpose=function(p){var m,h,f,d,g,y;return p instanceof o.default.Matrix?(m=p.mat4[1],h=p.mat4[2],f=p.mat4[3],d=p.mat4[6],g=p.mat4[7],y=p.mat4[11],this.mat4[0]=p.mat4[0],this.mat4[1]=p.mat4[4],this.mat4[2]=p.mat4[8],this.mat4[3]=p.mat4[12],this.mat4[4]=m,this.mat4[5]=p.mat4[5],this.mat4[6]=p.mat4[9],this.mat4[7]=p.mat4[13],this.mat4[8]=h,this.mat4[9]=d,this.mat4[10]=p.mat4[10],this.mat4[11]=p.mat4[14],this.mat4[12]=f,this.mat4[13]=g,this.mat4[14]=y,this.mat4[15]=p.mat4[15]):l(p)&&(m=p[1],h=p[2],f=p[3],d=p[6],g=p[7],y=p[11],this.mat4[0]=p[0],this.mat4[1]=p[4],this.mat4[2]=p[8],this.mat4[3]=p[12],this.mat4[4]=m,this.mat4[5]=p[5],this.mat4[6]=p[9],this.mat4[7]=p[13],this.mat4[8]=h,this.mat4[9]=d,this.mat4[10]=p[10],this.mat4[11]=p[14],this.mat4[12]=f,this.mat4[13]=g,this.mat4[14]=y,this.mat4[15]=p[15]),this},o.default.Matrix.prototype.invert=function(D){D instanceof o.default.Matrix?(m=D.mat4[0],h=D.mat4[1],f=D.mat4[2],d=D.mat4[3],g=D.mat4[4],y=D.mat4[5],b=D.mat4[6],x=D.mat4[7],j=D.mat4[8],S=D.mat4[9],w=D.mat4[10],_=D.mat4[11],M=D.mat4[12],I=D.mat4[13],P=D.mat4[14],R=D.mat4[15]):l(D)&&(m=D[0],h=D[1],f=D[2],d=D[3],g=D[4],y=D[5],b=D[6],x=D[7],j=D[8],S=D[9],w=D[10],_=D[11],M=D[12],I=D[13],P=D[14],R=D[15]);var m,h,f,d,g,y,b,x,j,S,w,_,M,I,P,R,D=m*y-h*g,U=m*b-f*g,F=m*x-d*g,z=h*b-f*y,K=h*x-d*y,Q=f*x-d*b,te=j*I-S*M,Z=j*P-w*M,q=j*R-_*M,Y=S*P-w*I,X=S*R-_*I,ce=w*R-_*P,O=D*ce-U*X+F*Y+z*q-K*Z+Q*te;return O?(this.mat4[0]=(y*ce-b*X+x*Y)*(O=1/O),this.mat4[1]=(f*X-h*ce-d*Y)*O,this.mat4[2]=(I*Q-P*K+R*z)*O,this.mat4[3]=(w*K-S*Q-_*z)*O,this.mat4[4]=(b*q-g*ce-x*Z)*O,this.mat4[5]=(m*ce-f*q+d*Z)*O,this.mat4[6]=(P*F-M*Q-R*U)*O,this.mat4[7]=(j*Q-w*F+_*U)*O,this.mat4[8]=(g*X-y*q+x*te)*O,this.mat4[9]=(h*q-m*X-d*te)*O,this.mat4[10]=(M*K-I*F+R*D)*O,this.mat4[11]=(S*F-j*K-_*D)*O,this.mat4[12]=(y*Z-g*Y-b*te)*O,this.mat4[13]=(m*Y-h*Z+f*te)*O,this.mat4[14]=(I*U-M*z-P*D)*O,this.mat4[15]=(j*z-S*U+w*D)*O,this):null},o.default.Matrix.prototype.invert3x3=function(){var p=this.mat3[0],m=this.mat3[1],h=this.mat3[2],f=this.mat3[3],d=this.mat3[4],g=this.mat3[5],y=this.mat3[6],b=this.mat3[7],x=this.mat3[8],j=x*d-g*b,S=-x*f+g*y,w=b*f-d*y,_=p*j+m*S+h*w;return _?(this.mat3[0]=j*(_=1/_),this.mat3[1]=(-x*m+h*b)*_,this.mat3[2]=(g*m-h*d)*_,this.mat3[3]=S*_,this.mat3[4]=(x*p-h*y)*_,this.mat3[5]=(-g*p+h*f)*_,this.mat3[6]=w*_,this.mat3[7]=(-b*p+m*y)*_,this.mat3[8]=(d*p-m*f)*_,this):null},o.default.Matrix.prototype.transpose3x3=function(p){var m=p[1],h=p[2],f=p[5];return this.mat3[1]=p[3],this.mat3[2]=p[6],this.mat3[3]=m,this.mat3[5]=p[7],this.mat3[6]=h,this.mat3[7]=f,this},o.default.Matrix.prototype.inverseTranspose=function(p){if(this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=p.mat4[0],this.mat3[1]=p.mat4[1],this.mat3[2]=p.mat4[2],this.mat3[3]=p.mat4[4],this.mat3[4]=p.mat4[5],this.mat3[5]=p.mat4[6],this.mat3[6]=p.mat4[8],this.mat3[7]=p.mat4[9],this.mat3[8]=p.mat4[10]),p=this.invert3x3(),p)p.transpose3x3(this.mat3);else for(var m=0;m<9;m++)this.mat3[m]=0;return this},o.default.Matrix.prototype.determinant=function(){var p=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],m=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],h=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],f=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],d=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],g=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],y=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],b=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],x=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],j=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],S=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return p*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-m*S+h*j+f*x-d*b+g*y},o.default.Matrix.prototype.mult=function(h){var m;if(h===this||h===this.mat4)m=this.copy().mat4;else if(h instanceof o.default.Matrix)m=h.mat4;else if(l(h))m=h;else{if(arguments.length!==16)return;m=arguments}var h=this.mat4[0],f=this.mat4[1],d=this.mat4[2],g=this.mat4[3];return this.mat4[0]=h*m[0]+f*m[4]+d*m[8]+g*m[12],this.mat4[1]=h*m[1]+f*m[5]+d*m[9]+g*m[13],this.mat4[2]=h*m[2]+f*m[6]+d*m[10]+g*m[14],this.mat4[3]=h*m[3]+f*m[7]+d*m[11]+g*m[15],h=this.mat4[4],f=this.mat4[5],d=this.mat4[6],g=this.mat4[7],this.mat4[4]=h*m[0]+f*m[4]+d*m[8]+g*m[12],this.mat4[5]=h*m[1]+f*m[5]+d*m[9]+g*m[13],this.mat4[6]=h*m[2]+f*m[6]+d*m[10]+g*m[14],this.mat4[7]=h*m[3]+f*m[7]+d*m[11]+g*m[15],h=this.mat4[8],f=this.mat4[9],d=this.mat4[10],g=this.mat4[11],this.mat4[8]=h*m[0]+f*m[4]+d*m[8]+g*m[12],this.mat4[9]=h*m[1]+f*m[5]+d*m[9]+g*m[13],this.mat4[10]=h*m[2]+f*m[6]+d*m[10]+g*m[14],this.mat4[11]=h*m[3]+f*m[7]+d*m[11]+g*m[15],h=this.mat4[12],f=this.mat4[13],d=this.mat4[14],g=this.mat4[15],this.mat4[12]=h*m[0]+f*m[4]+d*m[8]+g*m[12],this.mat4[13]=h*m[1]+f*m[5]+d*m[9]+g*m[13],this.mat4[14]=h*m[2]+f*m[6]+d*m[10]+g*m[14],this.mat4[15]=h*m[3]+f*m[7]+d*m[11]+g*m[15],this},o.default.Matrix.prototype.apply=function(h){var m;if(h===this||h===this.mat4)m=this.copy().mat4;else if(h instanceof o.default.Matrix)m=h.mat4;else if(l(h))m=h;else{if(arguments.length!==16)return;m=arguments}var h=this.mat4,f=h[0],d=h[4],g=h[8],y=h[12],f=(h[0]=m[0]*f+m[1]*d+m[2]*g+m[3]*y,h[4]=m[4]*f+m[5]*d+m[6]*g+m[7]*y,h[8]=m[8]*f+m[9]*d+m[10]*g+m[11]*y,h[12]=m[12]*f+m[13]*d+m[14]*g+m[15]*y,h[1]),d=h[5],g=h[9],y=h[13],f=(h[1]=m[0]*f+m[1]*d+m[2]*g+m[3]*y,h[5]=m[4]*f+m[5]*d+m[6]*g+m[7]*y,h[9]=m[8]*f+m[9]*d+m[10]*g+m[11]*y,h[13]=m[12]*f+m[13]*d+m[14]*g+m[15]*y,h[2]),d=h[6],g=h[10],y=h[14],f=(h[2]=m[0]*f+m[1]*d+m[2]*g+m[3]*y,h[6]=m[4]*f+m[5]*d+m[6]*g+m[7]*y,h[10]=m[8]*f+m[9]*d+m[10]*g+m[11]*y,h[14]=m[12]*f+m[13]*d+m[14]*g+m[15]*y,h[3]),d=h[7],g=h[11],y=h[15];return h[3]=m[0]*f+m[1]*d+m[2]*g+m[3]*y,h[7]=m[4]*f+m[5]*d+m[6]*g+m[7]*y,h[11]=m[8]*f+m[9]*d+m[10]*g+m[11]*y,h[15]=m[12]*f+m[13]*d+m[14]*g+m[15]*y,this},o.default.Matrix.prototype.scale=function(p,m,h){return p instanceof o.default.Vector?(m=p.y,h=p.z,p=p.x):p instanceof Array&&(m=p[1],h=p[2],p=p[0]),this.mat4[0]*=p,this.mat4[1]*=p,this.mat4[2]*=p,this.mat4[3]*=p,this.mat4[4]*=m,this.mat4[5]*=m,this.mat4[6]*=m,this.mat4[7]*=m,this.mat4[8]*=h,this.mat4[9]*=h,this.mat4[10]*=h,this.mat4[11]*=h,this},o.default.Matrix.prototype.rotate=function(D,X,Y,f){X instanceof o.default.Vector?(Y=X.y,f=X.z,X=X.x):X instanceof Array&&(Y=X[1],f=X[2],X=X[0]);var d=Math.sqrt(X*X+Y*Y+f*f),d=(X*=1/d,Y*=1/d,f*=1/d,this.mat4[0]),g=this.mat4[1],y=this.mat4[2],b=this.mat4[3],x=this.mat4[4],j=this.mat4[5],S=this.mat4[6],w=this.mat4[7],_=this.mat4[8],M=this.mat4[9],I=this.mat4[10],P=this.mat4[11],R=Math.sin(D),D=Math.cos(D),U=1-D,F=X*X*U+D,z=Y*X*U+f*R,K=f*X*U-Y*R,Q=X*Y*U-f*R,te=Y*Y*U+D,Z=f*Y*U+X*R,q=X*f*U+Y*R,Y=Y*f*U-X*R,X=f*f*U+D;return this.mat4[0]=d*F+x*z+_*K,this.mat4[1]=g*F+j*z+M*K,this.mat4[2]=y*F+S*z+I*K,this.mat4[3]=b*F+w*z+P*K,this.mat4[4]=d*Q+x*te+_*Z,this.mat4[5]=g*Q+j*te+M*Z,this.mat4[6]=y*Q+S*te+I*Z,this.mat4[7]=b*Q+w*te+P*Z,this.mat4[8]=d*q+x*Y+_*X,this.mat4[9]=g*q+j*Y+M*X,this.mat4[10]=y*q+S*Y+I*X,this.mat4[11]=b*q+w*Y+P*X,this},o.default.Matrix.prototype.translate=function(f){var m=f[0],h=f[1],f=f[2]||0;this.mat4[12]+=this.mat4[0]*m+this.mat4[4]*h+this.mat4[8]*f,this.mat4[13]+=this.mat4[1]*m+this.mat4[5]*h+this.mat4[9]*f,this.mat4[14]+=this.mat4[2]*m+this.mat4[6]*h+this.mat4[10]*f,this.mat4[15]+=this.mat4[3]*m+this.mat4[7]*h+this.mat4[11]*f},o.default.Matrix.prototype.rotateX=function(p){this.rotate(p,1,0,0)},o.default.Matrix.prototype.rotateY=function(p){this.rotate(p,0,1,0)},o.default.Matrix.prototype.rotateZ=function(p){this.rotate(p,0,0,1)},o.default.Matrix.prototype.perspective=function(d,m,h,f){var d=1/Math.tan(d/2),g=1/(h-f);return this.mat4[0]=d/m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=d,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(f+h)*g,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*f*h*g,this.mat4[15]=0,this},o.default.Matrix.prototype.ortho=function(p,m,h,f,d,g){var y=1/(p-m),b=1/(h-f),x=1/(d-g);return this.mat4[0]=-2*y,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*b,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*x,this.mat4[11]=0,this.mat4[12]=(p+m)*y,this.mat4[13]=(f+h)*b,this.mat4[14]=(g+d)*x,this.mat4[15]=1,this},o.default.Matrix);a.default=c},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],318:[function(r,s,a){r("core-js/modules/es.array.map"),r("core-js/modules/es.array.map"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.RenderBuffer=function(o,u,l,c,p,m){this.size=o,this.src=u,this.dst=l,this.attr=c,this._renderer=p,this.map=m},r.default.RenderBuffer.prototype._prepareBuffer=function(o,u){var l,c,p,f=u.attributes,m=this._renderer.GL,h=o.model||o,f=f[this.attr];f&&(l=o[this.dst],0<(c=h[this.src]).length?((p=!l)&&(o[this.dst]=l=m.createBuffer()),m.bindBuffer(m.ARRAY_BUFFER,l),!p&&h.dirtyFlags[this.src]===!1||(p=(o=this.map)?o(c):c,this._renderer._bindBuffer(l,m.ARRAY_BUFFER,p),h.dirtyFlags[this.src]=!1),u.enableAttrib(f,this.size)):(o=f.location)!==-1&&this._renderer.registerEnabled[o]&&(m.disableVertexAttribArray(o),this._renderer.registerEnabled[o]=!1))},r=r.default.RenderBuffer,a.default=r},{"../core/main":267,"core-js/modules/es.array.map":161}],319:[function(r,s,a){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(d)}function u(d){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},c=function(d){if(d&&d.__esModule)return d;if(d===null||u(d)!=="object"&&typeof d!="function")return{default:d};var g=p();if(g&&g.has(d))return g.get(d);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d){var j;Object.prototype.hasOwnProperty.call(d,y)&&((j=x?Object.getOwnPropertyDescriptor(d,y):null)&&(j.get||j.set)?Object.defineProperty(b,y,j):b[y]=d[y])}return b.default=d,g&&g.set(d,b),b}(r("../core/constants"));function p(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,p=function(){return d},d)}function m(d){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(d)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("./p5.RenderBuffer"),l.default.RendererGL.prototype.beginShape=function(d){return this.immediateMode.shapeMode=d!==void 0?d:c.TESS,this.immediateMode.geometry.reset(),this};var h={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},f=(l.default.RendererGL.prototype.vertex=function(d,g){if(this.immediateMode.shapeMode===c.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var y in h){var b=h[y],y=this.immediateMode.geometry[y];y.push.apply(y,m(y.slice(y.length-3*b,y.length-2*b)).concat(m(y.slice(y.length-b,y.length))))}var x,j,S=x=j=0,w=(arguments.length===3?S=arguments[2]:arguments.length===4?(x=arguments[2],j=arguments[3]):arguments.length===5&&(S=arguments[2],x=arguments[3],j=arguments[4]),new l.default.Vector(d,g,S)),w=(this.immediateMode.geometry.vertices.push(w),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),w=(this.immediateMode.geometry.vertexColors.push(w[0],w[1],w[2],w[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(w[0],w[1],w[2],w[3]),this.textureMode===c.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,j/=this._tex.height):!this.isProcessingVertices&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,j),this.immediateMode._bezierVertex[0]=d,this.immediateMode._bezierVertex[1]=g,this.immediateMode._bezierVertex[2]=S,this.immediateMode._quadraticVertex[0]=d,this.immediateMode._quadraticVertex[1]=g,this.immediateMode._quadraticVertex[2]=S,this},l.default.RendererGL.prototype.normal=function(d,g,y){return d instanceof l.default.Vector?this._currentNormal=d:this._currentNormal=new l.default.Vector(d,g,y),this},l.default.RendererGL.prototype.endShape=function(d,g,y,b,x,j){return this.immediateMode.shapeMode===c.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},l.default.RendererGL.prototype._processVertices=function(d){var g;this.immediateMode.geometry.vertices.length!==0&&(g=this._doStroke,d=d===c.CLOSE,g&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,d),this.immediateMode.geometry._edgesToVertices()),g=this.immediateMode.shapeMode===c.TESS,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||g)&&this.immediateMode.shapeMode!==c.LINES&&this._tesselateShape())},l.default.RendererGL.prototype._calculateEdges=function(d,g,y){var b=[],x=0;switch(d){case c.TRIANGLE_STRIP:for(x=0;x<g.length-2;x++)b.push([x,x+1]),b.push([x,x+2]);b.push([x,x+1]);break;case c.TRIANGLE_FAN:for(x=1;x<g.length-1;x++)b.push([0,x]),b.push([x,x+1]);b.push([0,g.length-1]);break;case c.TRIANGLES:for(x=0;x<g.length-2;x+=3)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+2,x]);break;case c.LINES:for(x=0;x<g.length-1;x+=2)b.push([x,x+1]);break;case c.QUADS:for(x=0;x<g.length-5;x+=6)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+3,x+5]),b.push([x+4,x+5]);break;case c.QUAD_STRIP:for(x=0;x<g.length-2;x+=2)b.push([x,x+1]),b.push([x,x+2]),b.push([x+1,x+3]);b.push([x,x+1]);break;default:for(x=0;x<g.length-1;x++)b.push([x,x+1])}return y&&b.push([g.length-1,0]),b},l.default.RendererGL.prototype._tesselateShape=function(){for(var d=this,g=(this.immediateMode.shapeMode=c.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map(function(S,w){return[S.x,S.y,S.z,d.immediateMode.geometry.uvs[2*w],d.immediateMode.geometry.uvs[2*w+1],d.immediateMode.geometry.vertexColors[4*w],d.immediateMode.geometry.vertexColors[4*w+1],d.immediateMode.geometry.vertexColors[4*w+2],d.immediateMode.geometry.vertexColors[4*w+3],d.immediateMode.geometry.vertexNormals[w].x,d.immediateMode.geometry.vertexNormals[w].y,d.immediateMode.geometry.vertexNormals[w].z]}))]),y=this._triangulate(g),b=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),x=0,j=y.length;x<j;x+=l.default.RendererGL.prototype.tessyVertexSize)b.push.apply(b,m(y.slice(x+5,x+9))),this.normal.apply(this,m(y.slice(x+9,x+12))),this.vertex.apply(this,m(y.slice(x,x+5)));this.immediateMode.geometry.vertexColors=b},l.default.RendererGL.prototype._drawImmediateFill=function(){var d=this.GL,g=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,this._getImmediateFillShader()),y=(this._setFillUniforms(g),!0),b=!1,x=void 0;try{for(var j,S=this.immediateMode.buffers.fill[Symbol.iterator]();!(y=(j=S.next()).done);y=!0)j.value._prepareBuffer(this.immediateMode.geometry,g)}catch(w){b=!0,x=w}finally{try{y||S.return==null||S.return()}finally{if(b)throw x}}this.immediateMode.shapeMode!==c.LINE_STRIP&&this.immediateMode.shapeMode!==c.LINES||(this.immediateMode.shapeMode=c.TRIANGLE_FAN),this.immediateMode.shapeMode===c.QUADS?this.immediateMode.shapeMode=c.TRIANGLES:this.immediateMode.shapeMode===c.QUAD_STRIP&&(this.immediateMode.shapeMode=c.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),d.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),g.unbindShader()},l.default.RendererGL.prototype._drawImmediateStroke=function(){var d=this.GL,g=d.isEnabled(d.CULL_FACE),y=(d.disable(d.CULL_FACE),this._getImmediateStrokeShader()),b=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._setStrokeUniforms(y),!0),x=!1,j=void 0;try{for(var S,w=this.immediateMode.buffers.stroke[Symbol.iterator]();!(b=(S=w.next()).done);b=!0)S.value._prepareBuffer(this.immediateMode.geometry,y)}catch(_){x=!0,j=_}finally{try{b||w.return==null||w.return()}finally{if(x)throw j}}this._applyColorBlend(this.curStrokeColor),d.drawArrays(d.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),g&&d.enable(d.CULL_FACE),y.unbindShader()},l.default.RendererGL);a.default=f},{"../core/constants":256,"../core/main":267,"./p5.RenderBuffer":318,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],320:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(l=r("../core/main"))&&l.__esModule?l:{default:l};r("./p5.RendererGL"),r("./p5.RenderBuffer");var u=0,l=(o.default.RendererGL.prototype._initBufferDefaults=function(c){var p;return this._freeBuffers(c),1e3<++u&&(p=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[p],u--),this.retainedMode.geometry[c]={}},o.default.RendererGL.prototype._freeBuffers=function(c){var p,m=this.retainedMode.geometry[c];function h(f){var d=!0,g=!1,y=void 0;try{for(var b,x=f[Symbol.iterator]();!(d=(b=x.next()).done);d=!0){var j=b.value;m[j.dst]&&(p.deleteBuffer(m[j.dst]),m[j.dst]=null)}}catch(S){g=!0,y=S}finally{try{d||x.return==null||x.return()}finally{if(g)throw y}}}m&&(delete this.retainedMode.geometry[c],u--,p=this.GL,m.indexBuffer&&p.deleteBuffer(m.indexBuffer),h(this.retainedMode.buffers.stroke),h(this.retainedMode.buffers.fill))},o.default.RendererGL.prototype.createBuffers=function(g,p){var m,h,f,d=this.GL,g=this._initBufferDefaults(g),y=(g.model=p,g.indexBuffer);return p.faces.length?(y=y||(g.indexBuffer=d.createBuffer()),f=(h=(m=o.default.RendererGL.prototype._flatten(p.faces)).some(function(b){return 65535<b}))?Uint32Array:Uint16Array,this._bindBuffer(y,d.ELEMENT_ARRAY_BUFFER,m,f),g.indexBufferType=h?d.UNSIGNED_INT:d.UNSIGNED_SHORT,g.vertexCount=3*p.faces.length):(y&&(d.deleteBuffer(y),g.indexBuffer=null),g.vertexCount=p.vertices?p.vertices.length:0),g.lineVertexCount=p.lineVertices?p.lineVertices.length:0,g},o.default.RendererGL.prototype.drawBuffers=function(c){var p=this.GL,m=this.retainedMode.geometry[c];if(this._doStroke&&0<m.lineVertexCount){var h=p.isEnabled(p.CULL_FACE),f=(p.disable(p.CULL_FACE),this._getRetainedStrokeShader()),d=(this._useLineColor=0<m.model.vertexStrokeColors.length,this._setStrokeUniforms(f),!0),g=!1,y=void 0;try{for(var b,x=this.retainedMode.buffers.stroke[Symbol.iterator]();!(d=(b=x.next()).done);d=!0)b.value._prepareBuffer(m,f)}catch(M){g=!0,y=M}finally{try{d||x.return==null||x.return()}finally{if(g)throw y}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(p.TRIANGLES,c),h&&p.enable(p.CULL_FACE),f.unbindShader()}if(this._doFill){this._useVertexColor=0<m.model.vertexColors.length;var j=this._getRetainedFillShader(),S=(this._setFillUniforms(j),!0),g=!1,y=void 0;try{for(var w,_=this.retainedMode.buffers.fill[Symbol.iterator]();!(S=(w=_.next()).done);S=!0)w.value._prepareBuffer(m,j)}catch(P){g=!0,y=P}finally{try{S||_.return==null||_.return()}finally{if(g)throw y}}m.indexBuffer&&this._bindBuffer(m.indexBuffer,p.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(p.TRIANGLES,c),j.unbindShader()}return this},o.default.RendererGL.prototype.drawBuffersScaled=function(c,p,m,h){var f=this.uMVMatrix.copy();try{this.uMVMatrix.scale(p,m,h),this.drawBuffers(c)}finally{this.uMVMatrix=f}},o.default.RendererGL.prototype._drawArrays=function(c,p){return this.GL.drawArrays(c,0,this.retainedMode.geometry[p].lineVertexCount),this},o.default.RendererGL.prototype._drawElements=function(c,m){var m=this.retainedMode.geometry[m],h=this.GL;if(m.indexBuffer){if(m.indexBufferType===h.UNSIGNED_INT&&!h.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");h.drawElements(h.TRIANGLES,m.vertexCount,m.indexBufferType,0)}else h.drawArrays(c||h.TRIANGLES,0,m.vertexCount)},o.default.RendererGL.prototype._drawPoints=function(c,p){var m=this.GL,h=this._getImmediatePointShader();this._setPointUniforms(h),this._bindBuffer(p,m.ARRAY_BUFFER,this._vToNArray(c),Float32Array,m.STATIC_DRAW),h.enableAttrib(h.attributes.aPosition,3),m.drawArrays(m.Points,0,c.length),h.unbindShader()},o.default.RendererGL);a.default=l},{"../core/main":267,"./p5.RenderBuffer":318,"./p5.RendererGL":321,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":230}],321:[function(S,s,a){function o(w){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function u(w){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(w)}S("core-js/modules/es.symbol"),S("core-js/modules/es.symbol.description"),S("core-js/modules/es.symbol.iterator"),S("core-js/modules/es.array.concat"),S("core-js/modules/es.array.fill"),S("core-js/modules/es.array.filter"),S("core-js/modules/es.array.from"),S("core-js/modules/es.array.includes"),S("core-js/modules/es.array.iterator"),S("core-js/modules/es.array.slice"),S("core-js/modules/es.object.assign"),S("core-js/modules/es.object.get-own-property-descriptor"),S("core-js/modules/es.object.to-string"),S("core-js/modules/es.regexp.to-string"),S("core-js/modules/es.string.includes"),S("core-js/modules/es.string.iterator"),S("core-js/modules/es.typed-array.float32-array"),S("core-js/modules/es.typed-array.float64-array"),S("core-js/modules/es.typed-array.int16-array"),S("core-js/modules/es.typed-array.uint8-array"),S("core-js/modules/es.typed-array.uint16-array"),S("core-js/modules/es.typed-array.uint32-array"),S("core-js/modules/es.typed-array.copy-within"),S("core-js/modules/es.typed-array.every"),S("core-js/modules/es.typed-array.fill"),S("core-js/modules/es.typed-array.filter"),S("core-js/modules/es.typed-array.find"),S("core-js/modules/es.typed-array.find-index"),S("core-js/modules/es.typed-array.for-each"),S("core-js/modules/es.typed-array.includes"),S("core-js/modules/es.typed-array.index-of"),S("core-js/modules/es.typed-array.iterator"),S("core-js/modules/es.typed-array.join"),S("core-js/modules/es.typed-array.last-index-of"),S("core-js/modules/es.typed-array.map"),S("core-js/modules/es.typed-array.reduce"),S("core-js/modules/es.typed-array.reduce-right"),S("core-js/modules/es.typed-array.reverse"),S("core-js/modules/es.typed-array.set"),S("core-js/modules/es.typed-array.slice"),S("core-js/modules/es.typed-array.some"),S("core-js/modules/es.typed-array.sort"),S("core-js/modules/es.typed-array.subarray"),S("core-js/modules/es.typed-array.to-locale-string"),S("core-js/modules/es.typed-array.to-string"),S("core-js/modules/es.weak-map"),S("core-js/modules/web.dom-collections.iterator"),S("core-js/modules/es.symbol"),S("core-js/modules/es.symbol.description"),S("core-js/modules/es.symbol.iterator"),S("core-js/modules/es.array.concat"),S("core-js/modules/es.array.fill"),S("core-js/modules/es.array.filter"),S("core-js/modules/es.array.from"),S("core-js/modules/es.array.includes"),S("core-js/modules/es.array.iterator"),S("core-js/modules/es.array.slice"),S("core-js/modules/es.object.assign"),S("core-js/modules/es.object.to-string"),S("core-js/modules/es.regexp.to-string"),S("core-js/modules/es.string.includes"),S("core-js/modules/es.string.iterator"),S("core-js/modules/es.typed-array.float32-array"),S("core-js/modules/es.typed-array.float64-array"),S("core-js/modules/es.typed-array.int16-array"),S("core-js/modules/es.typed-array.uint8-array"),S("core-js/modules/es.typed-array.uint16-array"),S("core-js/modules/es.typed-array.uint32-array"),S("core-js/modules/es.typed-array.copy-within"),S("core-js/modules/es.typed-array.every"),S("core-js/modules/es.typed-array.fill"),S("core-js/modules/es.typed-array.filter"),S("core-js/modules/es.typed-array.find"),S("core-js/modules/es.typed-array.find-index"),S("core-js/modules/es.typed-array.for-each"),S("core-js/modules/es.typed-array.includes"),S("core-js/modules/es.typed-array.index-of"),S("core-js/modules/es.typed-array.iterator"),S("core-js/modules/es.typed-array.join"),S("core-js/modules/es.typed-array.last-index-of"),S("core-js/modules/es.typed-array.map"),S("core-js/modules/es.typed-array.reduce"),S("core-js/modules/es.typed-array.reduce-right"),S("core-js/modules/es.typed-array.reverse"),S("core-js/modules/es.typed-array.set"),S("core-js/modules/es.typed-array.slice"),S("core-js/modules/es.typed-array.some"),S("core-js/modules/es.typed-array.sort"),S("core-js/modules/es.typed-array.subarray"),S("core-js/modules/es.typed-array.to-locale-string"),S("core-js/modules/es.typed-array.to-string"),S("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=h(S("../core/main")),c=function(w){if(w&&w.__esModule)return w;if(w===null||u(w)!=="object"&&typeof w!="function")return{default:w};var _=m();if(_&&_.has(w))return _.get(w);var M,I={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in w){var R;Object.prototype.hasOwnProperty.call(w,M)&&((R=P?Object.getOwnPropertyDescriptor(w,M):null)&&(R.get||R.set)?Object.defineProperty(I,M,R):I[M]=w[M])}return I.default=w,_&&_.set(w,I),I}(S("../core/constants")),p=h(S("libtess"));S("./p5.Shader"),S("./p5.Camera"),S("../core/p5.Renderer"),S("./p5.Matrix"),S("path");function m(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,m=function(){return w},w)}function h(w){return w&&w.__esModule?w:{default:w}}function f(w){return function(_){if(Array.isArray(_)){for(var M=0,I=new Array(_.length);M<_.length;M++)I[M]=_[M];return I}}(w)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(w,_){x+="#define STROKE_CAP_".concat(w," ").concat(_,`
`),y[c[w]]=_}function g(w,_){x+="#define STROKE_JOIN_".concat(w," ").concat(_,`
`),b[c[w]]=_}var y={},b={},x="",S=(d("ROUND",0),d("PROJECT",1),d("SQUARE",2),g("ROUND",0),g("MITER",1),g("BEVEL",2),`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),j={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;
varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:S+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = vColor;
  }
  else {
    vec4 baseColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : vColor;
    gl_FragColor = vec4(gl_FragColor.rgb * vDiffuseColor + vSpecularColor, 1.) * baseColor.a;
  }
}
`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:S+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : vColor;
  gl_FragColor = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * uAmbientMatColor.rgb + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, 1.) * baseColor.a;
}
`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec2 pixelScale = vec2(
    1. / uModelViewMatrix[0][0],
    1. / uModelViewMatrix[1][1]
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  gl_FragColor *= saturate(max(antialias, cover));
}
`,lineVert:x+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump float;
precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

attribute vec4 aPosition;
attribute vec3 aTangentIn;
attribute vec3 aTangentOut;
attribute float aSide;
attribute vec4 aVertexColor;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.) * curPerspScale,
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.) * curPerspScale,
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * curPerspScale * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * curPerspScale * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5 * curPerspScale;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset / curPerspScale;

  gl_Position.xy = p.xy + offset.xy;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:x+`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`},S=(l.default.RendererGL=function(w,_,M,I){return l.default.Renderer.call(this,w,_,M),this._setAttributeDefaults(_),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=c.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curAmbientColor=this._cachedFillStyle=[1,1,1,1],this.curSpecularColor=this._cachedFillStyle=[0,0,0,0],this.curEmissiveColor=this._cachedFillStyle=[0,0,0,0],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=c.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._useLineColor=!1,this._useVertexColor=!1,this.registerEnabled=[],this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new l.default.Matrix,this.uPMatrix=new l.default.Matrix,this.uNMatrix=new l.default.Matrix("mat3"),this._currentNormal=new l.default.Vector(0,0,1),this._curCamera=new l.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",this,this._flatten),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",this,this._flatten),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",this,this._flatten),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",this,this._flatten),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",this)],fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new l.default.Geometry,shapeMode:c.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",this,this._flatten),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",this,this._flatten),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",this,this._flatten),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",this,this._flatten),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",this)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.curStrokeCap=c.ROUND,this.curStrokeJoin=c.ROUND,this.textures=[],this.textureMode=c.IMAGE,this.textureWrapX=c.CLAMP,this.textureWrapY=c.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this.isProcessingVertices=!1,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},l.default.RendererGL.prototype=Object.create(l.default.Renderer.prototype),l.default.RendererGL.prototype._setAttributeDefaults=function(w){var _={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0};w._glAttributes===null?w._glAttributes=_:w._glAttributes=Object.assign(_,w._glAttributes)},l.default.RendererGL.prototype._initContext=function(){if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var w=this.drawingContext;w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.viewport(0,0,w.drawingBufferWidth,w.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)},l.default.RendererGL.prototype._resetContext=function(w,_){var M,I=this.width,P=this.height,D=this.canvas.id,R=this._pInst instanceof l.default.Graphics,D=(R?((M=this._pInst).canvas.parentNode.removeChild(M.canvas),M.canvas=document.createElement("canvas"),(M._pInst._userNode||document.body).appendChild(M.canvas),l.default.Element.call(M,M.canvas,M._pInst),M.width=I,M.height=P):((M=this.canvas)&&M.parentNode.removeChild(M),(M=document.createElement("canvas")).id=D,(this._pInst._userNode||document.body).appendChild(M),this._pInst.canvas=M,this.canvas=M),new l.default.RendererGL(this._pInst.canvas,this._pInst,!R));this._pInst._setProperty("_renderer",D),D.resize(I,P),D._applyDefaults(),R||this._pInst._elements.push(D),typeof _=="function"&&setTimeout(function(){_.apply(window._renderer,w)},0)},l.default.prototype.setAttributes=function(w,_){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var M=!0;if(_!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[w]!==_&&(this._glAttributes[w]=_,M=!1)):w instanceof Object&&this._glAttributes!==w&&(this._glAttributes=w,M=!1),this._renderer.isP3D&&!M){if(!this._setupDone){for(var I in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(I))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},l.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},l.default.RendererGL.prototype.background=function(){var I=(I=this._pInst).color.apply(I,arguments),w=I.levels[0]/255,_=I.levels[1]/255,M=I.levels[2]/255,I=I.levels[3]/255;this.clear(w,_,M,I)},l.default.RendererGL.prototype.fill=function(w,_,M,I){var P=l.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=P._array,this.drawMode=c.FILL,this._useNormalMaterial=!1,this._tex=null},l.default.RendererGL.prototype.stroke=function(w,_,M,I){var P=l.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=P._array},l.default.RendererGL.prototype.strokeCap=function(w){this.curStrokeCap=w},l.default.RendererGL.prototype.strokeJoin=function(w){this.curStrokeJoin=w},l.default.RendererGL.prototype.filter=function(w){console.error("filter() does not work in WEBGL mode")},l.default.RendererGL.prototype.blendMode=function(w){w===c.DARKEST||w===c.LIGHTEST||w===c.ADD||w===c.BLEND||w===c.SUBTRACT||w===c.SCREEN||w===c.EXCLUSION||w===c.REPLACE||w===c.MULTIPLY||w===c.REMOVE?this.curBlendMode=w:w!==c.BURN&&w!==c.OVERLAY&&w!==c.HARD_LIGHT&&w!==c.SOFT_LIGHT&&w!==c.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},l.default.RendererGL.prototype.erase=function(w,_){this._isErasing||(this._applyBlendMode(c.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,w/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,_/255])},l.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},l.default.RendererGL.prototype.strokeWeight=function(w){this.curStrokeWeight!==w&&(this.pointSize=w,this.curStrokeWeight=w)},l.default.RendererGL.prototype._getPixel=function(w,_){var M=new Uint8Array(4);return this.drawingContext.readPixels(w,_,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,M),[M[0],M[1],M[2],M[3]]},l.default.RendererGL.prototype.loadPixels=function(){var w,_=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(_=_.pixels,w=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4,_ instanceof Uint8Array&&_.length===w||(_=new Uint8Array(w),this._pixelsState._setProperty("pixels",_)),w=this._pInst._pixelDensity,this.GL.readPixels(0,0,this.width*w,this.height*w,this.GL.RGBA,this.GL.UNSIGNED_BYTE,_))},l.default.RendererGL.prototype.geometryInHash=function(w){return this.retainedMode.geometry[w]!==void 0},l.default.RendererGL.prototype.resize=function(w,_){l.default.Renderer.prototype.resize.call(this,w,_),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize(),w=this._pixelsState,w.pixels!==void 0&&w._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},l.default.RendererGL.prototype.clear=function(){var w=(arguments.length<=0?void 0:arguments[0])||0,_=(arguments.length<=1?void 0:arguments[1])||0,M=(arguments.length<=2?void 0:arguments[2])||0,I=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(w*I,_*I,M*I,I),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},l.default.RendererGL.prototype.applyMatrix=function(w,_,M,I,P,R){arguments.length===16?l.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([w,_,0,0,M,I,0,0,0,0,1,0,P,R,0,1])},l.default.RendererGL.prototype.translate=function(w,_,M){return w instanceof l.default.Vector&&(M=w.z,_=w.y,w=w.x),this.uMVMatrix.translate([w,_,M]),this},l.default.RendererGL.prototype.scale=function(w,_,M){return this.uMVMatrix.scale(w,_,M),this},l.default.RendererGL.prototype.rotate=function(w,_){return _===void 0?this.rotateZ(w):(l.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},l.default.RendererGL.prototype.rotateX=function(w){return this.rotate(w,1,0,0),this},l.default.RendererGL.prototype.rotateY=function(w){return this.rotate(w,0,1,0),this},l.default.RendererGL.prototype.rotateZ=function(w){return this.rotate(w,0,0,1),this},l.default.RendererGL.prototype.push=function(){var w=l.default.Renderer.prototype.push.apply(this),_=w.properties;return _.uMVMatrix=this.uMVMatrix.copy(),_.uPMatrix=this.uPMatrix.copy(),_._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),_.ambientLightColors=this.ambientLightColors.slice(),_.specularColors=this.specularColors.slice(),_.directionalLightDirections=this.directionalLightDirections.slice(),_.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),_.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),_.pointLightPositions=this.pointLightPositions.slice(),_.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),_.pointLightSpecularColors=this.pointLightSpecularColors.slice(),_.spotLightPositions=this.spotLightPositions.slice(),_.spotLightDirections=this.spotLightDirections.slice(),_.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),_.spotLightSpecularColors=this.spotLightSpecularColors.slice(),_.spotLightAngle=this.spotLightAngle.slice(),_.spotLightConc=this.spotLightConc.slice(),_.userFillShader=this.userFillShader,_.userStrokeShader=this.userStrokeShader,_.userPointShader=this.userPointShader,_.pointSize=this.pointSize,_.curStrokeWeight=this.curStrokeWeight,_.curStrokeColor=this.curStrokeColor,_.curFillColor=this.curFillColor,_.curAmbientColor=this.curAmbientColor,_.curSpecularColor=this.curSpecularColor,_.curEmissiveColor=this.curEmissiveColor,_._useSpecularMaterial=this._useSpecularMaterial,_._useEmissiveMaterial=this._useEmissiveMaterial,_._useShininess=this._useShininess,_.constantAttenuation=this.constantAttenuation,_.linearAttenuation=this.linearAttenuation,_.quadraticAttenuation=this.quadraticAttenuation,_._enableLighting=this._enableLighting,_._useNormalMaterial=this._useNormalMaterial,_._tex=this._tex,_.drawMode=this.drawMode,_._currentNormal=this._currentNormal,_.curBlendMode=this.curBlendMode,w},l.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this},l.default.RendererGL.prototype._getImmediateStrokeShader=function(){var w=this.userStrokeShader;return w&&w.isStrokeShader()?w:this._getLineShader()},l.default.RendererGL.prototype._getRetainedStrokeShader=l.default.RendererGL.prototype._getImmediateStrokeShader,l.default.RendererGL.prototype._getImmediateFillShader=function(){var w=this.userFillShader;if(this._useNormalMaterial&&(!w||!w.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!w||!w.isLightShader())return this._getLightShader()}else if(this._tex){if(!w||!w.isTextureShader())return this._getLightShader()}else if(!w)return this._getImmediateModeShader();return w},l.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var w=this.userFillShader;if(this._enableLighting){if(!w||!w.isLightShader())return this._getLightShader()}else if(this._tex){if(!w||!w.isTextureShader())return this._getLightShader()}else if(!w)return this._getColorShader();return w},l.default.RendererGL.prototype._getImmediatePointShader=function(){var w=this.userPointShader;return w&&w.isPointShader()?w:this._getPointShader()},l.default.RendererGL.prototype._getRetainedLineShader=l.default.RendererGL.prototype._getImmediateLineShader,l.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new l.default.Shader(this,j.phongVert,j.phongFrag):this._defaultLightShader=new l.default.Shader(this,j.lightVert,j.lightTextureFrag)),this._defaultLightShader},l.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new l.default.Shader(this,j.immediateVert,j.vertexColorFrag)),this._defaultImmediateModeShader},l.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new l.default.Shader(this,j.normalVert,j.normalFrag)),this._defaultNormalShader},l.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new l.default.Shader(this,j.normalVert,j.basicFrag)),this._defaultColorShader},l.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new l.default.Shader(this,j.pointVert,j.pointFrag)),this._defaultPointShader},l.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new l.default.Shader(this,j.lineVert,j.lineFrag)),this._defaultLineShader},l.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new l.default.Shader(this,j.fontVert,j.fontFrag)),this._defaultFontShader},l.default.RendererGL.prototype._getEmptyTexture=function(){var w;return this._emptyTexture||((w=new l.default.Image(1,1)).set(0,0,255),this._emptyTexture=new l.default.Texture(this,w)),this._emptyTexture},l.default.RendererGL.prototype.getTexture=function(w){var _=this.textures,M=!0,I=!1,P=void 0;try{for(var R,D=_[Symbol.iterator]();!(M=(R=D.next()).done);M=!0){var U=R.value;if(U.src===w)return U}}catch(F){I=!0,P=F}finally{try{M||D.return==null||D.return()}finally{if(I)throw P}}return I=new l.default.Texture(this,w),_.push(I),I},l.default.RendererGL.prototype._setStrokeUniforms=function(w){w.bindShader(),w.setUniform("uUseLineColor",this._useLineColor),w.setUniform("uMaterialColor",this.curStrokeColor),w.setUniform("uStrokeWeight",this.curStrokeWeight),w.setUniform("uStrokeCap",y[this.curStrokeCap]),w.setUniform("uStrokeJoin",b[this.curStrokeJoin])},l.default.RendererGL.prototype._setFillUniforms=function(w){w.bindShader(),w.setUniform("uUseVertexColor",this._useVertexColor),w.setUniform("uMaterialColor",this.curFillColor),w.setUniform("isTexture",!!this._tex),this._tex&&w.setUniform("uSampler",this._tex),w.setUniform("uTint",this._tint),w.setUniform("uAmbientMatColor",this.curAmbientColor),w.setUniform("uSpecularMatColor",this.curSpecularColor),w.setUniform("uEmissiveMatColor",this.curEmissiveColor),w.setUniform("uSpecular",this._useSpecularMaterial),w.setUniform("uEmissive",this._useEmissiveMaterial),w.setUniform("uShininess",this._useShininess),w.setUniform("uUseLighting",this._enableLighting);var _=this.pointLightDiffuseColors.length/3,_=(w.setUniform("uPointLightCount",_),w.setUniform("uPointLightLocation",this.pointLightPositions),w.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),w.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),_=(w.setUniform("uDirectionalLightCount",_),w.setUniform("uLightingDirection",this.directionalLightDirections),w.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),w.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),_=(w.setUniform("uAmbientLightCount",_),w.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);w.setUniform("uSpotLightCount",_),w.setUniform("uSpotLightAngle",this.spotLightAngle),w.setUniform("uSpotLightConc",this.spotLightConc),w.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),w.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),w.setUniform("uSpotLightLocation",this.spotLightPositions),w.setUniform("uSpotLightDirection",this.spotLightDirections),w.setUniform("uConstantAttenuation",this.constantAttenuation),w.setUniform("uLinearAttenuation",this.linearAttenuation),w.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),w.bindTextures()},l.default.RendererGL.prototype._setPointUniforms=function(w){w.bindShader(),w.setUniform("uMaterialColor",this.curStrokeColor),w.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},l.default.RendererGL.prototype._bindBuffer=function(w,_,M,I,P){_=_||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(_,w),M!==void 0&&(w=new(I||Float32Array)(M),this.GL.bufferData(_,w,P||this.GL.STATIC_DRAW))},l.default.RendererGL.prototype._arraysEqual=function(w,_){var M=w.length;if(M!==_.length)return!1;for(var I=0;I<M;I++)if(w[I]!==_[I])return!1;return!0},l.default.RendererGL.prototype._isTypedArray=function(w){return w instanceof Uint32Array},l.default.RendererGL.prototype._flatten=function(w){if(w.length===0)return[];var _;if(2e4<w.length){for(var M=Object.prototype.toString,I=[],P=w.slice(),R=P.pop();M.call(R)==="[object Array]"?P.push.apply(P,f(R)):I.push(R),P.length&&(R=P.pop())!==void 0;);return I.reverse(),I}return(_=[]).concat.apply(_,f(w))},l.default.RendererGL.prototype._vToNArray=function(w){var _=[],M=!0,I=!1,P=void 0;try{for(var R,D=w[Symbol.iterator]();!(M=(R=D.next()).done);M=!0){var U=R.value;_.push(U.x,U.y,U.z)}}catch(F){I=!0,P=F}finally{try{M||D.return==null||D.return()}finally{if(I)throw P}}return _},l.default.prototype._assert3d=function(w){if(!this._renderer.isP3D)throw new Error("".concat(w,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},l.default.RendererGL.prototype.tessyVertexSize=12,l.default.RendererGL.prototype._initTessy=function(){var w=new p.default.GluTesselator;return w.gluTessCallback(p.default.gluEnum.GLU_TESS_VERTEX_DATA,function(_,M){for(var I=0;I<_.length;I++)M[M.length]=_[I]}),w.gluTessCallback(p.default.gluEnum.GLU_TESS_BEGIN,function(_){_!==p.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(_))}),w.gluTessCallback(p.default.gluEnum.GLU_TESS_ERROR,function(_){console.log("error callback"),console.log("error number: ".concat(_))}),w.gluTessCallback(p.default.gluEnum.GLU_TESS_COMBINE,function(_,M,I){for(var P=new Array(l.default.RendererGL.prototype.tessyVertexSize).fill(0),R=0;R<I.length;R++)for(var D=0;D<P.length;D++)I[R]!==0&&M[R]&&(P[D]+=M[R][D]*I[R]);return P}),w.gluTessCallback(p.default.gluEnum.GLU_TESS_EDGE_FLAG,function(_){}),w},l.default.RendererGL.prototype._triangulate=function(w){var _=w[0]?w[0][2]:void 0,M=!0,I=!0,P=!1,R=void 0;try{for(var D,U=w[Symbol.iterator]();!(I=(D=U.next()).done);I=!0)for(var F=D.value,z=0;z<F.length;z+=l.default.RendererGL.prototype.tessyVertexSize)if(F[z+2]!==_){M=!1;break}}catch(q){P=!0,R=q}finally{try{I||U.return==null||U.return()}finally{if(P)throw R}}M?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0),P=[],this._tessy.gluTessBeginPolygon(P);for(var K=0;K<w.length;K++){this._tessy.gluTessBeginContour();for(var Q=w[K],te=0;te<Q.length;te+=l.default.RendererGL.prototype.tessyVertexSize){var Z=Q.slice(te,te+l.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Z,Z)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),P},l.default.RendererGL.prototype._bezierCoefficients=function(w){var _=w*w,M=1-w,I=M*M;return[I*M,3*I*w,3*M*_,_*w]},l.default.RendererGL.prototype._quadraticCoefficients=function(w){var _=1-w;return[_*_,2*_*w,w*w]},l.default.RendererGL.prototype._bezierToCatmull=function(w){return[w[1],w[1]+(w[2]-w[0])/this._curveTightness,w[2]-(w[3]-w[1])/this._curveTightness,w[2]]},l.default.RendererGL);a.default=S},{"../core/constants":256,"../core/main":267,"../core/p5.Renderer":270,"./p5.Camera":315,"./p5.Matrix":317,"./p5.Shader":322,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,libtess:239,path:242}],322:[function(r,s,a){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.Shader=function(u,l,c){this._renderer=u,this._vertSrc=l,this._fragSrc=c,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},o.default.Shader.prototype.init=function(){if(this._glProgram===0){var u=this._renderer.GL;if(this._vertShader=u.createShader(u.VERTEX_SHADER),u.shaderSource(this._vertShader,this._vertSrc),u.compileShader(this._vertShader),!u.getShaderParameter(this._vertShader,u.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(u.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=u.createShader(u.FRAGMENT_SHADER),u.shaderSource(this._fragShader,this._fragSrc),u.compileShader(this._fragShader),!u.getShaderParameter(this._fragShader,u.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(u.getShaderInfoLog(this._fragShader))),null;this._glProgram=u.createProgram(),u.attachShader(this._glProgram,this._vertShader),u.attachShader(this._glProgram,this._fragShader),u.linkProgram(this._glProgram),u.getProgramParameter(this._glProgram,u.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(u.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},o.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var u=this._renderer.GL,l=u.getProgramParameter(this._glProgram,u.ACTIVE_ATTRIBUTES),c=0;c<l;++c){var p=u.getActiveAttrib(this._glProgram,c),m=p.name,h=u.getAttribLocation(this._glProgram,m),f={};f.name=m,f.location=h,f.index=c,f.type=p.type,f.size=p.size,this.attributes[m]=f}this._loadedAttributes=!0}},o.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var u=this._renderer.GL,l=u.getProgramParameter(this._glProgram,u.ACTIVE_UNIFORMS),c=0,p=0;p<l;++p){var m=u.getActiveUniform(this._glProgram,p),h={},f=(h.location=u.getUniformLocation(this._glProgram,m.name),h.size=m.size,m.name);1<m.size&&(f=f.substring(0,f.indexOf("[0]"))),h.name=f,h.type=m.type,h._cachedData=void 0,h.type===u.SAMPLER_2D&&(h.samplerIndex=c,c++,this.samplers.push(h)),h.isArray=1<m.size||h.type===u.FLOAT_MAT3||h.type===u.FLOAT_MAT4||h.type===u.FLOAT_VEC2||h.type===u.FLOAT_VEC3||h.type===u.FLOAT_VEC4||h.type===u.INT_VEC2||h.type===u.INT_VEC4||h.type===u.INT_VEC3,this.uniforms[f]=h}this._loadedUniforms=!0}},o.default.Shader.prototype.compile=function(){},o.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},o.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},o.default.Shader.prototype.bindTextures=function(){var u=this._renderer.GL,l=!0,c=!1,p=void 0;try{for(var m,h=this.samplers[Symbol.iterator]();!(l=(m=h.next()).done);l=!0){var f=m.value,d=f.texture;d===void 0&&(d=this._renderer._getEmptyTexture()),u.activeTexture(u.TEXTURE0+f.samplerIndex),d.bindTexture(),d.update(),u.uniform1i(f.location,f.samplerIndex)}}catch(g){c=!0,p=g}finally{try{l||h.return==null||h.return()}finally{if(c)throw p}}},o.default.Shader.prototype.updateTextures=function(){var u=!0,l=!1,c=void 0;try{for(var p,m=this.samplers[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var h=p.value.texture;h&&h.update()}}catch(f){l=!0,c=f}finally{try{u||m.return==null||m.return()}finally{if(l)throw c}}},o.default.Shader.prototype.unbindTextures=function(){var u=!0,l=!1,c=void 0;try{for(var p,m=this.samplers[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var h=p.value;this.setUniform(h.name,this._renderer._getEmptyTexture())}}catch(f){l=!0,c=f}finally{try{u||m.return==null||m.return()}finally{if(l)throw c}}},o.default.Shader.prototype._setMatrixUniforms=function(){var u=this._renderer._curCamera.cameraMatrix,l=this._renderer.uPMatrix,c=this._renderer.uMVMatrix,p=c.copy();p.mult(l),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",u.mat4),this.setUniform("uProjectionMatrix",l.mat4),this.setUniform("uModelViewMatrix",c.mat4),this.setUniform("uModelViewProjectionMatrix",p.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},o.default.Shader.prototype.useProgram=function(){var u=this._renderer.GL;return this._renderer._curShader!==this&&(u.useProgram(this._glProgram),this._renderer._curShader=this),this},o.default.Shader.prototype.setUniform=function(u,l){var c=this.uniforms[u];if(c){var p=this._renderer.GL;if(c.isArray){if(c._cachedData&&this._renderer._arraysEqual(c._cachedData,l))return;c._cachedData=l.slice(0)}else{if(c._cachedData&&c._cachedData===l)return;Array.isArray(l)?c._cachedData=l.slice(0):c._cachedData=l}var m=c.location;switch(this.useProgram(),c.type){case p.BOOL:l===!0?p.uniform1i(m,1):p.uniform1i(m,0);break;case p.INT:1<c.size?l.length&&p.uniform1iv(m,l):p.uniform1i(m,l);break;case p.FLOAT:1<c.size?l.length&&p.uniform1fv(m,l):p.uniform1f(m,l);break;case p.FLOAT_MAT3:p.uniformMatrix3fv(m,!1,l);break;case p.FLOAT_MAT4:p.uniformMatrix4fv(m,!1,l);break;case p.FLOAT_VEC2:1<c.size?l.length&&p.uniform2fv(m,l):p.uniform2f(m,l[0],l[1]);break;case p.FLOAT_VEC3:1<c.size?l.length&&p.uniform3fv(m,l):p.uniform3f(m,l[0],l[1],l[2]);break;case p.FLOAT_VEC4:1<c.size?l.length&&p.uniform4fv(m,l):p.uniform4f(m,l[0],l[1],l[2],l[3]);break;case p.INT_VEC2:1<c.size?l.length&&p.uniform2iv(m,l):p.uniform2i(m,l[0],l[1]);break;case p.INT_VEC3:1<c.size?l.length&&p.uniform3iv(m,l):p.uniform3i(m,l[0],l[1],l[2]);break;case p.INT_VEC4:1<c.size?l.length&&p.uniform4iv(m,l):p.uniform4i(m,l[0],l[1],l[2],l[3]);break;case p.SAMPLER_2D:p.activeTexture(p.TEXTURE0+c.samplerIndex),c.texture=l instanceof o.default.Texture?l:this._renderer.getTexture(l),p.uniform1i(m,c.samplerIndex),c.texture.src.gifProperties&&c.texture.src._animateGif(this._renderer._pInst)}return this}},o.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},o.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},o.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},o.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},o.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},o.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},o.default.Shader.prototype.enableAttrib=function(u,l,c,p,m,h){var f;return u&&(u=u.location)!==-1&&(f=this._renderer.GL,this._renderer.registerEnabled[u]||(f.enableVertexAttribArray(u),this._renderer.registerEnabled[u]=!0),this._renderer.GL.vertexAttribPointer(u,l,c||f.FLOAT,p||!1,m||0,h||0)),this},r=o.default.Shader,a.default=r},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],323:[function(r,s,a){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function u(h){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(m=r("../core/main"))&&m.__esModule?m:{default:m},c=function(h){if(h&&h.__esModule)return h;if(h===null||u(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var d,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in h){var b;Object.prototype.hasOwnProperty.call(h,d)&&((b=y?Object.getOwnPropertyDescriptor(h,d):null)&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=h[d])}return g.default=h,f&&f.set(h,g),g}(r("../core/constants"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}l.default.Texture=function(h,f,d){return this._renderer=h,h=this._renderer.GL,(d=d||{}).dataType===h.FLOAT&&(h.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),h.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=f,this.glTex=void 0,this.glTarget=h.TEXTURE_2D,this.glFormat=d.format||h.RGBA,this.mipmaps=!1,this.glMinFilter=d.minFilter||h.LINEAR,this.glMagFilter=d.magFilter||h.LINEAR,this.glWrapS=d.wrapS||h.CLAMP_TO_EDGE,this.glWrapT=d.wrapT||h.CLAMP_TO_EDGE,this.glDataType=d.dataType||h.UNSIGNED_BYTE,this.isSrcMediaElement=l.default.MediaElement!==void 0&&f instanceof l.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=l.default.Element!==void 0&&f instanceof l.default.Element&&!(f instanceof l.default.Graphics)&&!(f instanceof l.default.Renderer),this.isSrcP5Image=f instanceof l.default.Image,this.isSrcP5Graphics=f instanceof l.default.Graphics,this.isSrcP5Renderer=f instanceof l.default.Renderer,this.isImageData=typeof ImageData<"u"&&f instanceof ImageData,d=this._getTextureDataFromSource(),this.width=d.width,this.height=d.height,this.init(d),this},l.default.Texture.prototype._getTextureDataFromSource=function(){var h;return this.isSrcP5Image?h=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?h=this.src.elt:this.isImageData&&(h=this.src),h},l.default.Texture.prototype.init=function(h){var f,d=this._renderer.GL;this.glTex=d.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,this.glMagFilter),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(f=new Uint8Array([1,1,1,1]),d.texImage2D(this.glTarget,0,d.RGBA,1,1,0,this.glFormat,this.glDataType,f)):d.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,h)},l.default.Texture.prototype.update=function(){var h,f,d,g=this.src;return g.width!==0&&g.height!==0&&(h=this._getTextureDataFromSource(),f=!1,d=this._renderer.GL,h.width!==this.width||h.height!==this.height?(f=!0,this.width=h.width,this.height=h.height,this.isSrcP5Image?g.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&g.setModified(!0)):this.isSrcP5Image?g.isModified()&&g.setModified(!(f=!0)):this.isSrcMediaElement?g.isModified()?g.setModified(!(f=!0)):g.loadedmetadata&&this._videoPrevUpdateTime!==g.time()&&(this._videoPrevUpdateTime=g.time(),f=!0):this.isImageData?g._dirty&&(f=!(g._dirty=!1)):f=!0,f&&(this.bindTexture(),d.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,h)),f)},l.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},l.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},l.default.Texture.prototype.setInterpolation=function(h,f){var d=this._renderer.GL;h===c.NEAREST?this.glMinFilter=d.NEAREST:this.glMinFilter=d.LINEAR,f===c.NEAREST?this.glMagFilter=d.NEAREST:this.glMagFilter=d.LINEAR,this.bindTexture(),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.glMinFilter),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},l.default.Texture.prototype.setWrapMode=function(h,f){function d(x){return(x&x-1)==0}var g=this._renderer.GL,b=this._getTextureDataFromSource(),b=b.naturalWidth&&b.naturalHeight?(y=b.naturalWidth,b.naturalHeight):(y=this.width,this.height),y=d(y),b=d(b);h===c.REPEAT?y&&b?this.glWrapS=g.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=g.CLAMP_TO_EDGE):h===c.MIRROR?y&&b?this.glWrapS=g.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=g.CLAMP_TO_EDGE):this.glWrapS=g.CLAMP_TO_EDGE,f===c.REPEAT?y&&b?this.glWrapT=g.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=g.CLAMP_TO_EDGE):f===c.MIRROR?y&&b?this.glWrapT=g.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=g.CLAMP_TO_EDGE):this.glWrapT=g.CLAMP_TO_EDGE,this.bindTexture(),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,this.glWrapS),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var m=l.default.Texture;a.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],324:[function(r,s,a){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function u(y){return(u=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(b){return o(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":o(b)})(y)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.iterator");var l,c=(l=r("../core/main"))&&l.__esModule?l:{default:l},p=function(y){if(y&&y.__esModule)return y;if(y===null||u(y)!=="object"&&typeof y!="function")return{default:y};var b=m();if(b&&b.has(y))return b.get(y);var x,j={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in y){var w;Object.prototype.hasOwnProperty.call(y,x)&&((w=S?Object.getOwnPropertyDescriptor(y,x):null)&&(w.get||w.set)?Object.defineProperty(j,x,w):j[x]=y[x])}return j.default=y,b&&b.set(y,j),j}(r("../core/constants"));function m(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,m=function(){return y},y)}r("./p5.Shader"),r("./p5.RendererGL.Retained"),c.default.RendererGL.prototype._applyTextProperties=function(){},c.default.RendererGL.prototype.textWidth=function(y){return this._isOpenType()?this._textFont._textWidth(y,this._textSize):0};function h(y,b){this.width=y,this.height=b,this.infos=[],this.findImage=function(x){var j,S,w=this.width*this.height;if(w<x)throw new Error("font is too complex to render in 3D");for(var _=this.infos.length-1;0<=_;--_){var M=this.infos[_];if(M.index+x<w){S=(j=M).imageData;break}}if(!j){try{S=new ImageData(this.width,this.height)}catch{var I=document.getElementsByTagName("canvas")[0],P=!I,R=(I||((I=document.createElement("canvas")).style.display="none",document.body.appendChild(I)),I.getContext("2d"));R&&(S=R.createImageData(this.width,this.height)),P&&document.body.removeChild(I)}this.infos.push(j={index:0,imageData:S})}return R=j.index,j.index+=x,S._dirty=!0,{imageData:S,index:R}}}function f(_,b,x,j,S){var w=_.imageData.data,_=4*_.index++;w[_++]=b,w[_++]=x,w[_++]=j,w[+_]=S}function d(y){this.font=y,this.strokeImageInfos=new h(64,64),this.colDimImageInfos=new h(64,64),this.rowDimImageInfos=new h(64,64),this.colCellImageInfos=new h(64,64),this.rowCellImageInfos=new h(64,64),this.glyphInfos={},this.getGlyphInfo=function(b){var x=this.glyphInfos[b.index];if(!x){var j=b.getBoundingBox(),S=j.x1,w=j.y1,_=j.x2-S,M=j.y2-w,I=b.path.commands;if(_==0||M==0||!I.length)return this.glyphInfos[b.index]={};for(var P,R,D,U,F=[],z=[],K=[],Q=8;0<=Q;--Q)K.push([]);for(Q=8;0<=Q;--Q)z.push([]);var te=!0,Z=!1,q=void 0;try{for(var Y,X=I[Symbol.iterator]();!(te=(Y=X.next()).done);te=!0){var ce=Y.value,O=(ce.x-S)/_,B=(ce.y-w)/M;if(!Ve(P,R,O,B)){switch(ce.type){case"M":D=O,U=B;break;case"L":Me(P,R,O,B);break;case"Q":var W=(ce.x1-S)/_,re=(ce.y1-w)/M;Se([P,O,W],[R,B,re],{x:P,y:R,cx:W,cy:re});break;case"Z":Ve(P,R,D,U)?F.push({x:P,y:R}):(Me(P,R,D,U),F.push({x:D,y:U}));break;case"C":for(var ae=function($e,$,le,Le,Fe,Ze,et,je){var $e=new Ie(new c.default.Vector($e,$),new c.default.Vector(le,Le),new c.default.Vector(Fe,Ze),new c.default.Vector(et,je)).splitInflections(),Pe=[],J=30/g,ie=!0,$=!1,le=void 0;try{for(var Ee,Re=$e[Symbol.iterator]();!(ie=(Ee=Re.next()).done);ie=!0){for(var Ge=Ee.value,st=[],ht=void 0;!(.125<=(ht=J/Ge.quadError()));){var ft=Math.pow(ht,.3333333333333333),yt=Ge.split(ft),Ht=Ge.split(1-ft/(1-ft));Pe.push(yt),st.push(Ge),Ge=Ht}ht<1&&Pe.push(Ge.split(.5)),Pe.push(Ge),Array.prototype.push.apply(Pe,st.reverse())}}catch(Dt){$=!0,le=Dt}finally{try{ie||Re.return==null||Re.return()}finally{if($)throw le}}return Pe}(P,R,(ce.x1-S)/_,(ce.y1-w)/M,(ce.x2-S)/_,(ce.y2-w)/M,O,B),me=0;me<ae.length;me++){var ge=ae[me].toQuadratic();Se([ge.x,ge.x1,ge.cx],[ge.y,ge.y1,ge.cy],ge)}break;default:throw new Error("unknown command type: ".concat(ce.type))}P=O,R=B}}}catch(tt){Z=!0,q=tt}finally{try{te||X.return==null||X.return()}finally{if(Z)throw q}}for(var xe=F.length,fe=this.strokeImageInfos.findImage(xe),ye=fe.index,Te=0;Te<xe;++Te){var oe=F[Te];f(fe,be(oe.x),be(oe.y),be(oe.cx),be(oe.cy))}(x=this.glyphInfos[b.index]={glyph:b,uGlyphRect:[j.x1,-j.y1,j.x2,-j.y2],strokeImageInfo:fe,strokes:F,colInfo:Be(K,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Be(z,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[x.colInfo.dimOffset,x.rowInfo.dimOffset]}return x;function Se(tt,Ue,ve){var Le=F.length;function Fe(Pe,J,ie){for(var $=Pe.length;0<$--;){var le=Pe[$];le<J&&(J=le),ie<le&&(ie=le)}return{min:J,max:ie}}F.push(ve);for(var ve=Fe(tt,1,0),tt=Math.max(Math.floor(9*ve.min-.5),0),Ze=Math.min(Math.ceil(9*ve.max+.5),9),et=tt;et<Ze;++et)K[et].push(Le);for(var ve=Fe(Ue,1,0),tt=Math.max(Math.floor(9*ve.min-.5),0),je=Math.min(Math.ceil(9*ve.max+.5),9),$e=tt;$e<je;++$e)z[$e].push(Le)}function be(tt){return(tt=(ve=255)*tt)<(Ue=0)?Ue:ve<tt?ve:tt;var Ue,ve}function Ie(tt,Ue,ve,Le){this.p0=tt,this.c0=Ue,this.c1=ve,this.p1=Le,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return c.default.Vector.sub(c.default.Vector.sub(this.p1,this.p0),c.default.Vector.mult(c.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function($e){var Ze=c.default.Vector.lerp(this.p0,this.c0,$e),je=c.default.Vector.lerp(this.c0,this.c1,$e),et=c.default.Vector.lerp(Ze,je,$e),je=(this.c1=c.default.Vector.lerp(this.c1,this.p1,$e),this.c0=c.default.Vector.lerp(je,this.c1,$e),c.default.Vector.lerp(et,this.c0,$e)),$e=new Ie(this.p0,Ze,et,je);return this.p0=je,$e},this.splitInflections=function(){var Fe=c.default.Vector.sub(this.c0,this.p0),Ze=c.default.Vector.sub(c.default.Vector.sub(this.c1,this.c0),Fe),et=c.default.Vector.sub(c.default.Vector.sub(c.default.Vector.sub(this.p1,this.c1),Fe),c.default.Vector.mult(Ze,2)),je=[],$e=Ze.x*et.y-Ze.y*et.x;return $e!==0&&0<=(Fe=(et=Fe.x*et.y-Fe.y*et.x)*et-4*$e*(Fe.x*Ze.y-Fe.y*Ze.x))&&($e<0&&($e=-$e,et=-et),Fe=(-et+(Ze=Math.sqrt(Fe)))/(2*$e),0<(et=(-et-Ze)/(2*$e))&&et<1&&(je.push(this.split(et)),Fe=1-(1-Fe)/(1-et)),0<Fe&&Fe<1&&je.push(this.split(Fe))),je.push(this),je}}function Me(tt,Ue,ve,Le){Se([tt,ve],[Ue,Le],{x:tt,y:Ue,cx:(tt+ve)/2,cy:(Ue+Le)/2})}function Ve(tt,Ue,ve,Le){return Math.abs(ve-tt)<1e-5&&Math.abs(Le-Ue)<1e-5}function Be(tt,Ue,ve){for(var Le=tt.length,Fe=Ue.findImage(Le),Ue=Fe.index,Ze=0,et=0;et<Le;++et)Ze+=tt[et].length;for(var je=ve.findImage(Ze),$e=0;$e<Le;++$e){var Pe=tt[$e],J=Pe.length,ie=je.index;f(Fe,ie>>7,127&ie,J>>7,127&J);for(var $=0;$<J;++$){var le=Pe[$]+ye;f(je,le>>7,127&le,0,0)}}return{cellImageInfo:je,dimOffset:Ue,dimImageInfo:Fe}}}}var g=Math.sqrt(3);c.default.RendererGL.prototype._renderText=function(y,b,x,j,S){if(this._textFont&&typeof this._textFont!="string"){if(!(S<=j)&&this._doFill){if(this._isOpenType()){y.push();var S=this._doStroke,w=this.drawMode,_=(this._doStroke=!1,this.drawMode=p.TEXTURE,this._textFont.font),M=(M=this._textFont._fontInfo)||(this._textFont._fontInfo=new d(_)),x=this._textFont._handleAlignment(this,b,x,j),j=this._textSize/_.unitsPerEm,I=(this.translate(x.x,x.y,0),this.scale(j,j,1),this.GL),x=!this._defaultFontShader,P=this._getFontShader(),R=(P.init(),P.bindShader(),x&&(P.setUniform("uGridImageSize",[64,64]),P.setUniform("uCellsImageSize",[64,64]),P.setUniform("uStrokeImageSize",[64,64]),P.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),D=(R||((j=this._textGeom=new c.default.Geometry(1,1,function(){for(var ge=0;ge<=1;ge++)for(var xe=0;xe<=1;xe++)this.vertices.push(new c.default.Vector(xe,ge,0)),this.uvs.push(xe,ge)})).computeFaces().computeNormals(),R=this.createBuffers("glyph",j)),!0),x=!1,j=void 0;try{for(var U,F=this.retainedMode.buffers.text[Symbol.iterator]();!(D=(U=F.next()).done);D=!0)U.value._prepareBuffer(R,P)}catch(ge){x=!0,j=ge}finally{try{D||F.return==null||F.return()}finally{if(x)throw j}}this._bindBuffer(R.indexBuffer,I.ELEMENT_ARRAY_BUFFER),P.setUniform("uMaterialColor",this.curFillColor);try{var z=0,K=null,Q=_.stringToGlyphs(b),te=!0,Z=!1,q=void 0;try{for(var Y,X=Q[Symbol.iterator]();!(te=(Y=X.next()).done);te=!0){var ce,O,B=Y.value,W=(K&&(z+=_.getKerningValue(K,B)),M.getGlyphInfo(B));W.uGlyphRect&&(ce=W.rowInfo,O=W.colInfo,P.setUniform("uSamplerStrokes",W.strokeImageInfo.imageData),P.setUniform("uSamplerRowStrokes",ce.cellImageInfo.imageData),P.setUniform("uSamplerRows",ce.dimImageInfo.imageData),P.setUniform("uSamplerColStrokes",O.cellImageInfo.imageData),P.setUniform("uSamplerCols",O.dimImageInfo.imageData),P.setUniform("uGridOffset",W.uGridOffset),P.setUniform("uGlyphRect",W.uGlyphRect),P.setUniform("uGlyphOffset",z),P.bindTextures(),I.drawElements(I.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),z+=B.advanceWidth,K=B}}catch(ge){Z=!0,q=ge}finally{try{te||X.return==null||X.return()}finally{if(Z)throw q}}}finally{P.unbindShader(),this._doStroke=S,this.drawMode=w,y.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return y}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":256,"../core/main":267,"./p5.RendererGL.Retained":320,"./p5.Shader":322,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}]},{},[251])(251)})})(vx);const bx=gx(Vd);class Or{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,n,r){let s=[];return this.decompose(0,t,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(n,this.length,s,1),ns.from(s,this.length-(n-t)+r.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,n=this.length){let r=[];return this.decompose(t,n,r,0),ns.from(r,n-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let n=this.scanIdentical(t,1),r=this.length-this.scanIdentical(t,-1),s=new vl(this),a=new vl(t);for(let o=n,u=n;;){if(s.next(o),a.next(o),o=0,s.lineBreak!=a.lineBreak||s.done!=a.done||s.value!=a.value)return!1;if(u+=s.value.length,s.done||u>=r)return!0}}iter(t=1){return new vl(this,t)}iterRange(t,n=this.length){return new N0(this,t,n)}iterLines(t,n){let r;if(t==null)r=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(t).from;r=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new B0(r)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?Or.empty:t.length<=32?new xn(t):ns.from(xn.split(t,[]))}}class xn extends Or{constructor(t,n=_x(t)){super(),this.text=t,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(t,n,r,s){for(let a=0;;a++){let o=this.text[a],u=s+o.length;if((n?r:u)>=t)return new wx(s,u,r,o);s=u+1,r++}}decompose(t,n,r,s){let a=t<=0&&n>=this.length?this:new xn(Im(this.text,t,n),Math.min(n,this.length)-Math.max(0,t));if(s&1){let o=r.pop(),u=Zu(a.text,o.text.slice(),0,a.length);if(u.length<=32)r.push(new xn(u,o.length+a.length));else{let l=u.length>>1;r.push(new xn(u.slice(0,l)),new xn(u.slice(l)))}}else r.push(a)}replace(t,n,r){if(!(r instanceof xn))return super.replace(t,n,r);let s=Zu(this.text,Zu(r.text,Im(this.text,0,t)),n),a=this.length+r.length-(n-t);return s.length<=32?new xn(s,a):ns.from(xn.split(s,[]),a)}sliceString(t,n=this.length,r=`
`){let s="";for(let a=0,o=0;a<=n&&o<this.text.length;o++){let u=this.text[o],l=a+u.length;a>t&&o&&(s+=r),t<l&&n>a&&(s+=u.slice(Math.max(0,t-a),n-a)),a=l+1}return s}flatten(t){for(let n of this.text)t.push(n)}scanIdentical(){return 0}static split(t,n){let r=[],s=-1;for(let a of t)r.push(a),s+=a.length+1,r.length==32&&(n.push(new xn(r,s)),r=[],s=-1);return s>-1&&n.push(new xn(r,s)),n}}class ns extends Or{constructor(t,n){super(),this.children=t,this.length=n,this.lines=0;for(let r of t)this.lines+=r.lines}lineInner(t,n,r,s){for(let a=0;;a++){let o=this.children[a],u=s+o.length,l=r+o.lines-1;if((n?l:u)>=t)return o.lineInner(t,n,r,s);s=u+1,r=l+1}}decompose(t,n,r,s){for(let a=0,o=0;o<=n&&a<this.children.length;a++){let u=this.children[a],l=o+u.length;if(t<=l&&n>=o){let c=s&((o<=t?1:0)|(l>=n?2:0));o>=t&&l<=n&&!c?r.push(u):u.decompose(t-o,n-o,r,c)}o=l+1}}replace(t,n,r){if(r.lines<this.lines)for(let s=0,a=0;s<this.children.length;s++){let o=this.children[s],u=a+o.length;if(t>=a&&n<=u){let l=o.replace(t-a,n-a,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let p=this.children.slice();return p[s]=l,new ns(p,this.length-(n-t)+r.length)}return super.replace(a,u,l)}a=u+1}return super.replace(t,n,r)}sliceString(t,n=this.length,r=`
`){let s="";for(let a=0,o=0;a<this.children.length&&o<=n;a++){let u=this.children[a],l=o+u.length;o>t&&a&&(s+=r),t<l&&n>o&&(s+=u.sliceString(t-o,n-o,r)),o=l+1}return s}flatten(t){for(let n of this.children)n.flatten(t)}scanIdentical(t,n){if(!(t instanceof ns))return 0;let r=0,[s,a,o,u]=n>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;s+=n,a+=n){if(s==o||a==u)return r;let l=this.children[s],c=t.children[a];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(t,n=t.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let f of t)r+=f.lines;if(r<32){let f=[];for(let d of t)d.flatten(f);return new xn(f,n)}let s=Math.max(32,r>>5),a=s<<1,o=s>>1,u=[],l=0,c=-1,p=[];function m(f){let d;if(f.lines>a&&f instanceof ns)for(let g of f.children)m(g);else f.lines>o&&(l>o||!l)?(h(),u.push(f)):f instanceof xn&&l&&(d=p[p.length-1])instanceof xn&&f.lines+d.lines<=32?(l+=f.lines,c+=f.length+1,p[p.length-1]=new xn(d.text.concat(f.text),d.length+1+f.length)):(l+f.lines>s&&h(),l+=f.lines,c+=f.length+1,p.push(f))}function h(){l!=0&&(u.push(p.length==1?p[0]:ns.from(p,c)),c=-1,l=p.length=0)}for(let f of t)m(f);return h(),u.length==1?u[0]:new ns(u,n)}}Or.empty=new xn([""],0);function _x(i){let t=-1;for(let n of i)t+=n.length+1;return t}function Zu(i,t,n=0,r=1e9){for(let s=0,a=0,o=!0;a<i.length&&s<=r;a++){let u=i[a],l=s+u.length;l>=n&&(l>r&&(u=u.slice(0,r-s)),s<n&&(u=u.slice(n-s)),o?(t[t.length-1]+=u,o=!1):t.push(u)),s=l+1}return t}function Im(i,t,n){return Zu(i,[""],t,n)}class vl{constructor(t,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[n>0?1:(t instanceof xn?t.text.length:t.children.length)<<1]}nextInner(t,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],a=this.offsets[r],o=a>>1,u=s instanceof xn?s.text.length:s.children.length;if(o==(n>0?u:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(n>0?0:1)){if(this.offsets[r]+=n,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(s instanceof xn){let l=s.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,t))return this.value=t==0?l:n>0?l.slice(t):l.slice(0,l.length-t),this;t-=l.length}else{let l=s.children[o+(n<0?-1:0)];t>l.length?(t-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof xn?l.text.length:l.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class N0{constructor(t,n,r){this.value="",this.done=!1,this.cursor=new vl(t,n>r?-1:1),this.pos=n>r?t.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(t,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;t>r&&(t=r),r-=t;let{value:s}=this.cursor.next(t);return this.pos+=(s.length+t)*n,this.value=s.length<=r?s:n<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class B0{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:n,lineBreak:r,value:s}=this.inner.next(t);return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Or.prototype[Symbol.iterator]=function(){return this.iter()},vl.prototype[Symbol.iterator]=N0.prototype[Symbol.iterator]=B0.prototype[Symbol.iterator]=function(){return this});class wx{constructor(t,n,r,s){this.from=t,this.to=n,this.number=r,this.text=s}get length(){return this.to-this.from}}let ga="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(i=>i?parseInt(i,36):1);for(let i=1;i<ga.length;i++)ga[i]+=ga[i-1];function xx(i){for(let t=1;t<ga.length;t+=2)if(ga[t]>i)return ga[t-1]<=i;return!1}function Pm(i){return i>=127462&&i<=127487}const Rm=8205;function oi(i,t,n=!0,r=!0){return(n?F0:Sx)(i,t,r)}function F0(i,t,n){if(t==i.length)return t;t&&U0(i.charCodeAt(t))&&V0(i.charCodeAt(t-1))&&t--;let r=Vn(i,t);for(t+=Ri(r);t<i.length;){let s=Vn(i,t);if(r==Rm||s==Rm||n&&xx(s))t+=Ri(s),r=s;else if(Pm(s)){let a=0,o=t-2;for(;o>=0&&Pm(Vn(i,o));)a++,o-=2;if(a%2==0)break;t+=2}else break}return t}function Sx(i,t,n){for(;t>0;){let r=F0(i,t-2,n);if(r<t)return r;t--}return 0}function U0(i){return i>=56320&&i<57344}function V0(i){return i>=55296&&i<56320}function Vn(i,t){let n=i.charCodeAt(t);if(!V0(n)||t+1==i.length)return n;let r=i.charCodeAt(t+1);return U0(r)?(n-55296<<10)+(r-56320)+65536:n}function Zf(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function Ri(i){return i<65536?1:2}const Gd=/\r\n?|\n/;var si=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(si||(si={}));class os{constructor(t){this.sections=t}get length(){let t=0;for(let n=0;n<this.sections.length;n+=2)t+=this.sections[n];return t}get newLength(){let t=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];t+=r<0?this.sections[n]:r}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let n=0,r=0,s=0;n<this.sections.length;){let a=this.sections[n++],o=this.sections[n++];o<0?(t(r,s,a),s+=a):s+=o,r+=a}}iterChangedRanges(t,n=!1){Hd(this,t,n)}get invertedDesc(){let t=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],s=this.sections[n++];s<0?t.push(r,s):t.push(s,r)}return new os(t)}composeDesc(t){return this.empty?t:t.empty?this:G0(this,t)}mapDesc(t,n=!1){return t.empty?this:zd(this,t,n)}mapPos(t,n=-1,r=si.Simple){let s=0,a=0;for(let o=0;o<this.sections.length;){let u=this.sections[o++],l=this.sections[o++],c=s+u;if(l<0){if(c>t)return a+(t-s);a+=u}else{if(r!=si.Simple&&c>=t&&(r==si.TrackDel&&s<t&&c>t||r==si.TrackBefore&&s<t||r==si.TrackAfter&&c>t))return null;if(c>t||c==t&&n<0&&!u)return t==s||n<0?a:a+l;a+=l}s=c}if(t>s)throw new RangeError(`Position ${t} is out of range for changeset of length ${s}`);return a}touchesRange(t,n=t){for(let r=0,s=0;r<this.sections.length&&s<=n;){let a=this.sections[r++],o=this.sections[r++],u=s+a;if(o>=0&&s<=n&&u>=t)return s<t&&u>n?"cover":!0;s=u}return!1}toString(){let t="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],s=this.sections[n++];t+=(t?" ":"")+r+(s>=0?":"+s:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new os(t)}static create(t){return new os(t)}}class En extends os{constructor(t,n){super(t),this.inserted=n}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Hd(this,(n,r,s,a,o)=>t=t.replace(s,s+(r-n),o),!1),t}mapDesc(t,n=!1){return zd(this,t,n,!0)}invert(t){let n=this.sections.slice(),r=[];for(let s=0,a=0;s<n.length;s+=2){let o=n[s],u=n[s+1];if(u>=0){n[s]=u,n[s+1]=o;let l=s>>1;for(;r.length<l;)r.push(Or.empty);r.push(o?t.slice(a,a+o):Or.empty)}a+=o}return new En(n,r)}compose(t){return this.empty?t:t.empty?this:G0(this,t,!0)}map(t,n=!1){return t.empty?this:zd(this,t,n,!0)}iterChanges(t,n=!1){Hd(this,t,n)}get desc(){return os.create(this.sections)}filter(t){let n=[],r=[],s=[],a=new kl(this);e:for(let o=0,u=0;;){let l=o==t.length?1e9:t[o++];for(;u<l||u==l&&a.len==0;){if(a.done)break e;let p=Math.min(a.len,l-u);Xn(s,p,-1);let m=a.ins==-1?-1:a.off==0?a.ins:0;Xn(n,p,m),m>0&&Ys(r,n,a.text),a.forward(p),u+=p}let c=t[o++];for(;u<c;){if(a.done)break e;let p=Math.min(a.len,c-u);Xn(n,p,-1),Xn(s,p,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(p),u+=p}}return{changes:new En(n,r),filtered:os.create(s)}}toJSON(){let t=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],s=this.sections[n+1];s<0?t.push(r):s==0?t.push([r]):t.push([r].concat(this.inserted[n>>1].toJSON()))}return t}static of(t,n,r){let s=[],a=[],o=0,u=null;function l(p=!1){if(!p&&!s.length)return;o<n&&Xn(s,n-o,-1);let m=new En(s,a);u=u?u.compose(m.map(u)):m,s=[],a=[],o=0}function c(p){if(Array.isArray(p))for(let m of p)c(m);else if(p instanceof En){if(p.length!=n)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${n})`);l(),u=u?u.compose(p.map(u)):p}else{let{from:m,to:h=m,insert:f}=p;if(m>h||m<0||h>n)throw new RangeError(`Invalid change range ${m} to ${h} (in doc of length ${n})`);let d=f?typeof f=="string"?Or.of(f.split(r||Gd)):f:Or.empty,g=d.length;if(m==h&&g==0)return;m<o&&l(),m>o&&Xn(s,m-o,-1),Xn(s,h-m,g),Ys(a,s,d),o=h}}return c(t),l(!u),u}static empty(t){return new En(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")n.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((o,u)=>u&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)n.push(a[0],0);else{for(;r.length<s;)r.push(Or.empty);r[s]=Or.of(a.slice(1)),n.push(a[0],r[s].length)}}}return new En(n,r)}static createSet(t,n){return new En(t,n)}}function Xn(i,t,n,r=!1){if(t==0&&n<=0)return;let s=i.length-2;s>=0&&n<=0&&n==i[s+1]?i[s]+=t:t==0&&i[s]==0?i[s+1]+=n:r?(i[s]+=t,i[s+1]+=n):i.push(t,n)}function Ys(i,t,n){if(n.length==0)return;let r=t.length-2>>1;if(r<i.length)i[i.length-1]=i[i.length-1].append(n);else{for(;i.length<r;)i.push(Or.empty);i.push(n)}}function Hd(i,t,n){let r=i.inserted;for(let s=0,a=0,o=0;o<i.sections.length;){let u=i.sections[o++],l=i.sections[o++];if(l<0)s+=u,a+=u;else{let c=s,p=a,m=Or.empty;for(;c+=u,p+=l,l&&r&&(m=m.append(r[o-2>>1])),!(n||o==i.sections.length||i.sections[o+1]<0);)u=i.sections[o++],l=i.sections[o++];t(s,c,a,p,m),s=c,a=p}}}function zd(i,t,n,r=!1){let s=[],a=r?[]:null,o=new kl(i),u=new kl(t);for(let l=-1;;)if(o.ins==-1&&u.ins==-1){let c=Math.min(o.len,u.len);Xn(s,c,-1),o.forward(c),u.forward(c)}else if(u.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(u.len<o.len||u.len==o.len&&!n))){let c=u.len;for(Xn(s,u.ins,-1);c;){let p=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=p&&(Xn(s,0,o.ins),a&&Ys(a,s,o.text),l=o.i),o.forward(p),c-=p}u.next()}else if(o.ins>=0){let c=0,p=o.len;for(;p;)if(u.ins==-1){let m=Math.min(p,u.len);c+=m,p-=m,u.forward(m)}else if(u.ins==0&&u.len<p)p-=u.len,u.next();else break;Xn(s,c,l<o.i?o.ins:0),a&&l<o.i&&Ys(a,s,o.text),l=o.i,o.forward(o.len-p)}else{if(o.done&&u.done)return a?En.createSet(s,a):os.create(s);throw new Error("Mismatched change set lengths")}}function G0(i,t,n=!1){let r=[],s=n?[]:null,a=new kl(i),o=new kl(t);for(let u=!1;;){if(a.done&&o.done)return s?En.createSet(r,s):os.create(r);if(a.ins==0)Xn(r,a.len,0,u),a.next();else if(o.len==0&&!o.done)Xn(r,0,o.ins,u),s&&Ys(s,r,o.text),o.next();else{if(a.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(a.len2,o.len),c=r.length;if(a.ins==-1){let p=o.ins==-1?-1:o.off?0:o.ins;Xn(r,l,p,u),s&&p&&Ys(s,r,o.text)}else o.ins==-1?(Xn(r,a.off?0:a.len,l,u),s&&Ys(s,r,a.textBit(l))):(Xn(r,a.off?0:a.len,o.off?0:o.ins,u),s&&!o.off&&Ys(s,r,o.text));u=(a.ins>l||o.ins>=0&&o.len>l)&&(u||r.length>c),a.forward2(l),o.forward(l)}}}}class kl{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length?Or.empty:t[n]}textBit(t){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!t?Or.empty:n[r].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class Eo{constructor(t,n,r){this.from=t,this.to=n,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let t=this.flags&3;return t==3?null:t}get goalColumn(){let t=this.flags>>5;return t==33554431?void 0:t}map(t,n=-1){let r,s;return this.empty?r=s=t.mapPos(this.from,n):(r=t.mapPos(this.from,1),s=t.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new Eo(r,s,this.flags)}extend(t,n=t){if(t<=this.anchor&&n>=this.anchor)return pt.range(t,n);let r=Math.abs(t-this.anchor)>Math.abs(n-this.anchor)?t:n;return pt.range(this.anchor,r)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return pt.range(t.anchor,t.head)}static create(t,n,r){return new Eo(t,n,r)}}class pt{constructor(t,n){this.ranges=t,this.mainIndex=n}map(t,n=-1){return t.empty?this:pt.create(this.ranges.map(r=>r.map(t,n)),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new pt([this.main],0)}addRange(t,n=!0){return pt.create([t].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(t,n=this.mainIndex){let r=this.ranges.slice();return r[n]=t,pt.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new pt(t.ranges.map(n=>Eo.fromJSON(n)),t.main)}static single(t,n=t){return new pt([pt.range(t,n)],0)}static create(t,n=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<t.length;s++){let a=t[s];if(a.empty?a.from<=r:a.from<r)return pt.normalized(t.slice(),n);r=a.to}return new pt(t,n)}static cursor(t,n=0,r,s){return Eo.create(t,t,(n==0?0:n<0?4:8)|(r==null?3:Math.min(2,r))|(s??33554431)<<5)}static range(t,n,r,s){let a=(r??33554431)<<5|(s==null?3:Math.min(2,s));return n<t?Eo.create(n,t,24|a):Eo.create(t,n,(n>t?4:0)|a)}static normalized(t,n=0){let r=t[n];t.sort((s,a)=>s.from-a.from),n=t.indexOf(r);for(let s=1;s<t.length;s++){let a=t[s],o=t[s-1];if(a.empty?a.from<=o.to:a.from<o.to){let u=o.from,l=Math.max(a.to,o.to);s<=n&&n--,t.splice(--s,2,a.anchor>a.head?pt.range(l,u):pt.range(u,l))}}return new pt(t,n)}}function H0(i,t){for(let n of i.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let ep=0;class Gt{constructor(t,n,r,s,a){this.combine=t,this.compareInput=n,this.compare=r,this.isStatic=s,this.id=ep++,this.default=t([]),this.extensions=typeof a=="function"?a(this):a}static define(t={}){return new Gt(t.combine||(n=>n),t.compareInput||((n,r)=>n===r),t.compare||(t.combine?(n,r)=>n===r:tp),!!t.static,t.enables)}of(t){return new ec([],this,0,t)}compute(t,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new ec(t,this,1,n)}computeN(t,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new ec(t,this,2,n)}from(t,n){return n||(n=r=>r),this.compute([t],r=>n(r.field(t)))}}function tp(i,t){return i==t||i.length==t.length&&i.every((n,r)=>n===t[r])}class ec{constructor(t,n,r,s){this.dependencies=t,this.facet=n,this.type=r,this.value=s,this.id=ep++}dynamicSlot(t){var n;let r=this.value,s=this.facet.compareInput,a=this.id,o=t[a]>>1,u=this.type==2,l=!1,c=!1,p=[];for(let m of this.dependencies)m=="doc"?l=!0:m=="selection"?c=!0:((n=t[m.id])!==null&&n!==void 0?n:1)&1||p.push(t[m.id]);return{create(m){return m.values[o]=r(m),1},update(m,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||Wd(m,p)){let f=r(m);if(u?!Dm(f,m.values[o],s):!s(f,m.values[o]))return m.values[o]=f,1}return 0},reconfigure:(m,h)=>{let f,d=h.config.address[a];if(d!=null){let g=fc(h,d);if(this.dependencies.every(y=>y instanceof Gt?h.facet(y)===m.facet(y):y instanceof zn?h.field(y,!1)==m.field(y,!1):!0)||(u?Dm(f=r(m),g,s):s(f=r(m),g)))return m.values[o]=g,0}else f=r(m);return m.values[o]=f,1}}}}function Dm(i,t,n){if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++)if(!n(i[r],t[r]))return!1;return!0}function Wd(i,t){let n=!1;for(let r of t)bl(i,r)&1&&(n=!0);return n}function jx(i,t,n){let r=n.map(l=>i[l.id]),s=n.map(l=>l.type),a=r.filter(l=>!(l&1)),o=i[t.id]>>1;function u(l){let c=[];for(let p=0;p<r.length;p++){let m=fc(l,r[p]);if(s[p]==2)for(let h of m)c.push(h);else c.push(m)}return t.combine(c)}return{create(l){for(let c of r)bl(l,c);return l.values[o]=u(l),1},update(l,c){if(!Wd(l,a))return 0;let p=u(l);return t.compare(p,l.values[o])?0:(l.values[o]=p,1)},reconfigure(l,c){let p=Wd(l,r),m=c.config.facets[t.id],h=c.facet(t);if(m&&!p&&tp(n,m))return l.values[o]=h,0;let f=u(l);return t.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const Lm=Gt.define({static:!0});class zn{constructor(t,n,r,s,a){this.id=t,this.createF=n,this.updateF=r,this.compareF=s,this.spec=a,this.provides=void 0}static define(t){let n=new zn(ep++,t.create,t.update,t.compare||((r,s)=>r===s),t);return t.provide&&(n.provides=t.provide(n)),n}create(t){let n=t.facet(Lm).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(t)}slot(t){let n=t[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,s)=>{let a=r.values[n],o=this.updateF(a,s);return this.compareF(a,o)?0:(r.values[n]=o,1)},reconfigure:(r,s)=>s.config.address[this.id]!=null?(r.values[n]=s.field(this),0):(r.values[n]=this.create(r),1)}}init(t){return[this,Lm.of({field:this,create:t})]}get extension(){return this}}const To={lowest:4,low:3,default:2,high:1,highest:0};function il(i){return t=>new z0(t,i)}const Ga={highest:il(To.highest),high:il(To.high),default:il(To.default),low:il(To.low),lowest:il(To.lowest)};class z0{constructor(t,n){this.inner=t,this.prec=n}}class lh{of(t){return new qd(this,t)}reconfigure(t){return lh.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class qd{constructor(t,n){this.compartment=t,this.inner=n}}class dc{constructor(t,n,r,s,a,o){for(this.base=t,this.compartments=n,this.dynamicSlots=r,this.address=s,this.staticValues=a,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(t){let n=this.address[t.id];return n==null?t.default:this.staticValues[n>>1]}static resolve(t,n,r){let s=[],a=Object.create(null),o=new Map;for(let h of Cx(t,n,o))h instanceof zn?s.push(h):(a[h.facet.id]||(a[h.facet.id]=[])).push(h);let u=Object.create(null),l=[],c=[];for(let h of s)u[h.id]=c.length<<1,c.push(f=>h.slot(f));let p=r==null?void 0:r.config.facets;for(let h in a){let f=a[h],d=f[0].facet,g=p&&p[h]||[];if(f.every(y=>y.type==0))if(u[d.id]=l.length<<1|1,tp(g,f))l.push(r.facet(d));else{let y=d.combine(f.map(b=>b.value));l.push(r&&d.compare(y,r.facet(d))?r.facet(d):y)}else{for(let y of f)y.type==0?(u[y.id]=l.length<<1|1,l.push(y.value)):(u[y.id]=c.length<<1,c.push(b=>y.dynamicSlot(b)));u[d.id]=c.length<<1,c.push(y=>jx(y,d,f))}}let m=c.map(h=>h(u));return new dc(t,o,m,u,l,a)}}function Cx(i,t,n){let r=[[],[],[],[],[]],s=new Map;function a(o,u){let l=s.get(o);if(l!=null){if(l<=u)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof qd&&n.delete(o.compartment)}if(s.set(o,u),Array.isArray(o))for(let c of o)a(c,u);else if(o instanceof qd){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=t.get(o.compartment)||o.inner;n.set(o.compartment,c),a(c,u)}else if(o instanceof z0)a(o.inner,o.prec);else if(o instanceof zn)r[u].push(o),o.provides&&a(o.provides,u);else if(o instanceof ec)r[u].push(o),o.facet.extensions&&a(o.facet.extensions,To.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(c,u)}}return a(i,To.default),r.reduce((o,u)=>o.concat(u))}function bl(i,t){if(t&1)return 2;let n=t>>1,r=i.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;i.status[n]=4;let s=i.computeSlot(i,i.config.dynamicSlots[n]);return i.status[n]=2|s}function fc(i,t){return t&1?i.config.staticValues[t>>1]:i.values[t>>1]}const W0=Gt.define(),q0=Gt.define({combine:i=>i.some(t=>t),static:!0}),$0=Gt.define({combine:i=>i.length?i[0]:void 0,static:!0}),X0=Gt.define(),Y0=Gt.define(),K0=Gt.define(),J0=Gt.define({combine:i=>i.length?i[0]:!1});class Ps{constructor(t,n){this.type=t,this.value=n}static define(){return new Tx}}class Tx{of(t){return new Ps(this,t)}}class kx{constructor(t){this.map=t}of(t){return new yr(this,t)}}class yr{constructor(t,n){this.type=t,this.value=n}map(t){let n=this.type.map(this.value,t);return n===void 0?void 0:n==this.value?this:new yr(this.type,n)}is(t){return this.type==t}static define(t={}){return new kx(t.map||(n=>n))}static mapEffects(t,n){if(!t.length)return t;let r=[];for(let s of t){let a=s.map(n);a&&r.push(a)}return r}}yr.reconfigure=yr.define();yr.appendConfig=yr.define();class On{constructor(t,n,r,s,a,o){this.startState=t,this.changes=n,this.selection=r,this.effects=s,this.annotations=a,this.scrollIntoView=o,this._doc=null,this._state=null,r&&H0(r,n.newLength),a.some(u=>u.type==On.time)||(this.annotations=a.concat(On.time.of(Date.now())))}static create(t,n,r,s,a,o){return new On(t,n,r,s,a,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let n of this.annotations)if(n.type==t)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let n=this.annotation(On.userEvent);return!!(n&&(n==t||n.length>t.length&&n.slice(0,t.length)==t&&n[t.length]=="."))}}On.time=Ps.define();On.userEvent=Ps.define();On.addToHistory=Ps.define();On.remote=Ps.define();function Ex(i,t){let n=[];for(let r=0,s=0;;){let a,o;if(r<i.length&&(s==t.length||t[s]>=i[r]))a=i[r++],o=i[r++];else if(s<t.length)a=t[s++],o=t[s++];else return n;!n.length||n[n.length-1]<a?n.push(a,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function Q0(i,t,n){var r;let s,a,o;return n?(s=t.changes,a=En.empty(t.changes.length),o=i.changes.compose(t.changes)):(s=t.changes.map(i.changes),a=i.changes.mapDesc(t.changes,!0),o=i.changes.compose(s)),{changes:o,selection:t.selection?t.selection.map(a):(r=i.selection)===null||r===void 0?void 0:r.map(s),effects:yr.mapEffects(i.effects,s).concat(yr.mapEffects(t.effects,a)),annotations:i.annotations.length?i.annotations.concat(t.annotations):t.annotations,scrollIntoView:i.scrollIntoView||t.scrollIntoView}}function $d(i,t,n){let r=t.selection,s=ya(t.annotations);return t.userEvent&&(s=s.concat(On.userEvent.of(t.userEvent))),{changes:t.changes instanceof En?t.changes:En.of(t.changes||[],n,i.facet($0)),selection:r&&(r instanceof pt?r:pt.single(r.anchor,r.head)),effects:ya(t.effects),annotations:s,scrollIntoView:!!t.scrollIntoView}}function Z0(i,t,n){let r=$d(i,t.length?t[0]:{},i.doc.length);t.length&&t[0].filter===!1&&(n=!1);for(let a=1;a<t.length;a++){t[a].filter===!1&&(n=!1);let o=!!t[a].sequential;r=Q0(r,$d(i,t[a],o?r.changes.newLength:i.doc.length),o)}let s=On.create(i,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Ax(n?Mx(s):s)}function Mx(i){let t=i.startState,n=!0;for(let s of t.facet(X0)){let a=s(i);if(a===!1){n=!1;break}Array.isArray(a)&&(n=n===!0?a:Ex(n,a))}if(n!==!0){let s,a;if(n===!1)a=i.changes.invertedDesc,s=En.empty(t.doc.length);else{let o=i.changes.filter(n);s=o.changes,a=o.filtered.mapDesc(o.changes).invertedDesc}i=On.create(t,s,i.selection&&i.selection.map(a),yr.mapEffects(i.effects,a),i.annotations,i.scrollIntoView)}let r=t.facet(Y0);for(let s=r.length-1;s>=0;s--){let a=r[s](i);a instanceof On?i=a:Array.isArray(a)&&a.length==1&&a[0]instanceof On?i=a[0]:i=Z0(t,ya(a),!1)}return i}function Ax(i){let t=i.startState,n=t.facet(K0),r=i;for(let s=n.length-1;s>=0;s--){let a=n[s](i);a&&Object.keys(a).length&&(r=Q0(r,$d(t,a,i.changes.newLength),!0))}return r==i?i:On.create(t,i.changes,i.selection,r.effects,r.annotations,r.scrollIntoView)}const Ox=[];function ya(i){return i==null?Ox:Array.isArray(i)?i:[i]}var hn=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(hn||(hn={}));const Ix=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Xd;try{Xd=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Px(i){if(Xd)return Xd.test(i);for(let t=0;t<i.length;t++){let n=i[t];if(/\w/.test(n)||n>"Â"&&(n.toUpperCase()!=n.toLowerCase()||Ix.test(n)))return!0}return!1}function Rx(i){return t=>{if(!/\S/.test(t))return hn.Space;if(Px(t))return hn.Word;for(let n=0;n<i.length;n++)if(t.indexOf(i[n])>-1)return hn.Word;return hn.Other}}class kr{constructor(t,n,r,s,a,o){this.config=t,this.doc=n,this.selection=r,this.values=s,this.status=t.statusTemplate.slice(),this.computeSlot=a,o&&(o._state=this);for(let u=0;u<this.config.dynamicSlots.length;u++)bl(this,u<<1);this.computeSlot=null}field(t,n=!0){let r=this.config.address[t.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return bl(this,r),fc(this,r)}update(...t){return Z0(this,t,!0)}applyTransaction(t){let n=this.config,{base:r,compartments:s}=n;for(let o of t.effects)o.is(lh.reconfigure)?(n&&(s=new Map,n.compartments.forEach((u,l)=>s.set(l,u)),n=null),s.set(o.value.compartment,o.value.extension)):o.is(yr.reconfigure)?(n=null,r=o.value):o.is(yr.appendConfig)&&(n=null,r=ya(r).concat(o.value));let a;n?a=t.startState.values.slice():(n=dc.resolve(r,s,this),a=new kr(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(u,l)=>l.reconfigure(u,this),null).values),new kr(n,t.newDoc,t.newSelection,a,(o,u)=>u.update(o,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:t},range:pt.cursor(n.from+t.length)}))}changeByRange(t){let n=this.selection,r=t(n.ranges[0]),s=this.changes(r.changes),a=[r.range],o=ya(r.effects);for(let u=1;u<n.ranges.length;u++){let l=t(n.ranges[u]),c=this.changes(l.changes),p=c.map(s);for(let h=0;h<u;h++)a[h]=a[h].map(p);let m=s.mapDesc(c,!0);a.push(l.range.map(m)),s=s.compose(p),o=yr.mapEffects(o,p).concat(yr.mapEffects(ya(l.effects),m))}return{changes:s,selection:pt.create(a,n.mainIndex),effects:o}}changes(t=[]){return t instanceof En?t:En.of(t,this.doc.length,this.facet(kr.lineSeparator))}toText(t){return Or.of(t.split(this.facet(kr.lineSeparator)||Gd))}sliceDoc(t=0,n=this.doc.length){return this.doc.sliceString(t,n,this.lineBreak)}facet(t){let n=this.config.address[t.id];return n==null?t.default:(bl(this,n),fc(this,n))}toJSON(t){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let r in t){let s=t[r];s instanceof zn&&this.config.address[s.id]!=null&&(n[r]=s.spec.toJSON(this.field(t[r]),this))}return n}static fromJSON(t,n={},r){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let a in r)if(Object.prototype.hasOwnProperty.call(t,a)){let o=r[a],u=t[a];s.push(o.init(l=>o.spec.fromJSON(u,l)))}}return kr.create({doc:t.doc,selection:pt.fromJSON(t.selection),extensions:n.extensions?s.concat([n.extensions]):s})}static create(t={}){let n=dc.resolve(t.extensions||[],new Map),r=t.doc instanceof Or?t.doc:Or.of((t.doc||"").split(n.staticFacet(kr.lineSeparator)||Gd)),s=t.selection?t.selection instanceof pt?t.selection:pt.single(t.selection.anchor,t.selection.head):pt.single(0);return H0(s,r.length),n.staticFacet(q0)||(s=s.asSingle()),new kr(n,r,s,n.dynamicSlots.map(()=>null),(a,o)=>o.create(a),null)}get tabSize(){return this.facet(kr.tabSize)}get lineBreak(){return this.facet(kr.lineSeparator)||`
`}get readOnly(){return this.facet(J0)}phrase(t,...n){for(let r of this.facet(kr.phrases))if(Object.prototype.hasOwnProperty.call(r,t)){t=r[t];break}return n.length&&(t=t.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let a=+(s||1);return!a||a>n.length?r:n[a-1]})),t}languageDataAt(t,n,r=-1){let s=[];for(let a of this.facet(W0))for(let o of a(this,n,r))Object.prototype.hasOwnProperty.call(o,t)&&s.push(o[t]);return s}charCategorizer(t){return Rx(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:n,from:r,length:s}=this.doc.lineAt(t),a=this.charCategorizer(t),o=t-r,u=t-r;for(;o>0;){let l=oi(n,o,!1);if(a(n.slice(l,o))!=hn.Word)break;o=l}for(;u<s;){let l=oi(n,u);if(a(n.slice(u,l))!=hn.Word)break;u=l}return o==u?null:pt.range(o+r,u+r)}}kr.allowMultipleSelections=q0;kr.tabSize=Gt.define({combine:i=>i.length?i[0]:4});kr.lineSeparator=$0;kr.readOnly=J0;kr.phrases=Gt.define({compare(i,t){let n=Object.keys(i),r=Object.keys(t);return n.length==r.length&&n.every(s=>i[s]==t[s])}});kr.languageData=W0;kr.changeFilter=X0;kr.transactionFilter=Y0;kr.transactionExtender=K0;lh.reconfigure=yr.define();function ps(i,t,n={}){let r={};for(let s of i)for(let a of Object.keys(s)){let o=s[a],u=r[a];if(u===void 0)r[a]=o;else if(!(u===o||o===void 0))if(Object.hasOwnProperty.call(n,a))r[a]=n[a](u,o);else throw new Error("Config merge conflict for field "+a)}for(let s in t)r[s]===void 0&&(r[s]=t[s]);return r}class No{eq(t){return this==t}range(t,n=t){return Yd.create(t,n,this)}}No.prototype.startSide=No.prototype.endSide=0;No.prototype.point=!1;No.prototype.mapMode=si.TrackDel;let Yd=class ev{constructor(t,n,r){this.from=t,this.to=n,this.value=r}static create(t,n,r){return new ev(t,n,r)}};function Kd(i,t){return i.from-t.from||i.value.startSide-t.value.startSide}class rp{constructor(t,n,r,s){this.from=t,this.to=n,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(t,n,r,s=0){let a=r?this.to:this.from;for(let o=s,u=a.length;;){if(o==u)return o;let l=o+u>>1,c=a[l]-t||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:u;c>=0?u=l:o=l+1}}between(t,n,r,s){for(let a=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,a);a<o;a++)if(s(this.from[a]+t,this.to[a]+t,this.value[a])===!1)return!1}map(t,n){let r=[],s=[],a=[],o=-1,u=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],p=this.from[l]+t,m=this.to[l]+t,h,f;if(p==m){let d=n.mapPos(p,c.startSide,c.mapMode);if(d==null||(h=f=d,c.startSide!=c.endSide&&(f=n.mapPos(p,c.endSide),f<h)))continue}else if(h=n.mapPos(p,c.startSide),f=n.mapPos(m,c.endSide),h>f||h==f&&c.startSide>0&&c.endSide<=0)continue;(f-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(u=Math.max(u,f-h)),r.push(c),s.push(h-o),a.push(f-o))}return{mapped:r.length?new rp(s,a,r,u):null,pos:o}}}class Ur{constructor(t,n,r,s){this.chunkPos=t,this.chunk=n,this.nextLayer=r,this.maxPoint=s}static create(t,n,r,s){return new Ur(t,n,r,s)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let n of this.chunk)t+=n.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:n=[],sort:r=!1,filterFrom:s=0,filterTo:a=this.length}=t,o=t.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(Kd)),this.isEmpty)return n.length?Ur.of(n):this;let u=new tv(this,null,-1).goto(0),l=0,c=[],p=new lo;for(;u.value||l<n.length;)if(l<n.length&&(u.from-n[l].from||u.startSide-n[l].value.startSide)>=0){let m=n[l++];p.addInner(m.from,m.to,m.value)||c.push(m)}else u.rangeIndex==1&&u.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(u.chunkIndex)<n[l].from)&&(!o||s>this.chunkEnd(u.chunkIndex)||a<this.chunkPos[u.chunkIndex])&&p.addChunk(this.chunkPos[u.chunkIndex],this.chunk[u.chunkIndex])?u.nextChunk():((!o||s>u.to||a<u.from||o(u.from,u.to,u.value))&&(p.addInner(u.from,u.to,u.value)||c.push(Yd.create(u.from,u.to,u.value))),u.next());return p.finishInner(this.nextLayer.isEmpty&&!c.length?Ur.empty:this.nextLayer.update({add:c,filter:o,filterFrom:s,filterTo:a}))}map(t){if(t.empty||this.isEmpty)return this;let n=[],r=[],s=-1;for(let o=0;o<this.chunk.length;o++){let u=this.chunkPos[o],l=this.chunk[o],c=t.touchesRange(u,u+l.length);if(c===!1)s=Math.max(s,l.maxPoint),n.push(l),r.push(t.mapPos(u));else if(c===!0){let{mapped:p,pos:m}=l.map(u,t);p&&(s=Math.max(s,p.maxPoint),n.push(p),r.push(m))}}let a=this.nextLayer.map(t);return n.length==0?a:new Ur(r,n,a||Ur.empty,s)}between(t,n,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],o=this.chunk[s];if(n>=a&&t<=a+o.length&&o.between(a,t-a,n-a,r)===!1)return}this.nextLayer.between(t,n,r)}}iter(t=0){return El.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,n=0){return El.from(t).goto(n)}static compare(t,n,r,s,a=-1){let o=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=a),u=n.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=a),l=Nm(o,u,r),c=new sl(o,l,a),p=new sl(u,l,a);r.iterGaps((m,h,f)=>Bm(c,m,p,h,f,s)),r.empty&&r.length==0&&Bm(c,0,p,0,0,s)}static eq(t,n,r=0,s){s==null&&(s=1e9-1);let a=t.filter(p=>!p.isEmpty&&n.indexOf(p)<0),o=n.filter(p=>!p.isEmpty&&t.indexOf(p)<0);if(a.length!=o.length)return!1;if(!a.length)return!0;let u=Nm(a,o),l=new sl(a,u,0).goto(r),c=new sl(o,u,0).goto(r);for(;;){if(l.to!=c.to||!Jd(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>s)return!0;l.next(),c.next()}}static spans(t,n,r,s,a=-1){let o=new sl(t,null,a).goto(n),u=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let p=o.activeForPoint(o.to),m=o.pointFrom<n?p.length+1:Math.min(p.length,l);s.point(u,c,o.point,p,m,o.pointRank),l=Math.min(o.openEnd(c),p.length)}else c>u&&(s.span(u,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);u=o.to,o.next()}}static of(t,n=!1){let r=new lo;for(let s of t instanceof Yd?[t]:n?Dx(t):t)r.add(s.from,s.to,s.value);return r.finish()}}Ur.empty=new Ur([],[],null,-1);function Dx(i){if(i.length>1)for(let t=i[0],n=1;n<i.length;n++){let r=i[n];if(Kd(t,r)>0)return i.slice().sort(Kd);t=r}return i}Ur.empty.nextLayer=Ur.empty;class lo{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new rp(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,n,r){this.addInner(t,n,r)||(this.nextLayer||(this.nextLayer=new lo)).add(t,n,r)}addInner(t,n,r){let s=t-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(t-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=t,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-t)),!0)}addChunk(t,n){if((t-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(t);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+t,this.lastTo=n.to[r]+t,!0}finish(){return this.finishInner(Ur.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let n=Ur.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,n}}function Nm(i,t,n){let r=new Map;for(let a of i)for(let o=0;o<a.chunk.length;o++)a.chunk[o].maxPoint<=0&&r.set(a.chunk[o],a.chunkPos[o]);let s=new Set;for(let a of t)for(let o=0;o<a.chunk.length;o++){let u=r.get(a.chunk[o]);u!=null&&(n?n.mapPos(u):u)==a.chunkPos[o]&&!(n!=null&&n.touchesRange(u,u+a.chunk[o].length))&&s.add(a.chunk[o])}return s}class tv{constructor(t,n,r,s=0){this.layer=t,this.skip=n,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,n,!1),this}gotoInner(t,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<t||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(t,n){(this.to-t||this.endSide-n)<0&&this.gotoInner(t,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=t+n.from[this.rangeIndex];if(this.from=r,this.to=t+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class El{constructor(t){this.heap=t}static from(t,n=null,r=-1){let s=[];for(let a=0;a<t.length;a++)for(let o=t[a];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&s.push(new tv(o,n,r,a));return s.length==1?s[0]:new El(s)}get startSide(){return this.value?this.value.startSide:0}goto(t,n=-1e9){for(let r of this.heap)r.goto(t,n);for(let r=this.heap.length>>1;r>=0;r--)td(this.heap,r);return this.next(),this}forward(t,n){for(let r of this.heap)r.forward(t,n);for(let r=this.heap.length>>1;r>=0;r--)td(this.heap,r);(this.to-t||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),td(this.heap,0)}}}function td(i,t){for(let n=i[t];;){let r=(t<<1)+1;if(r>=i.length)break;let s=i[r];if(r+1<i.length&&s.compare(i[r+1])>=0&&(s=i[r+1],r++),n.compare(s)<0)break;i[r]=n,i[t]=s,t=r}}class sl{constructor(t,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=El.from(t,n,r)}goto(t,n=-1e9){return this.cursor.goto(t,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=n,this.openStart=-1,this.next(),this}forward(t,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(t,n)}removeActive(t){Mu(this.active,t),Mu(this.activeTo,t),Mu(this.activeRank,t),this.minActive=Fm(this.active,this.activeTo)}addActive(t){let n=0,{value:r,to:s,rank:a}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=a;)n++;Au(this.active,n,r),Au(this.activeTo,n,s),Au(this.activeRank,n,a),t&&Au(t,n,this.cursor.from),this.minActive=Fm(this.active,this.activeTo)}next(){let t=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>t){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Mu(r,s)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<t;s--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>t||this.activeTo[r]==t&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(t){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>t;r--)n++;return n}}function Bm(i,t,n,r,s,a){i.goto(t),n.goto(r);let o=r+s,u=r,l=r-t;for(;;){let c=i.to+l-n.to||i.endSide-n.endSide,p=c<0?i.to+l:n.to,m=Math.min(p,o);if(i.point||n.point?i.point&&n.point&&(i.point==n.point||i.point.eq(n.point))&&Jd(i.activeForPoint(i.to+l),n.activeForPoint(n.to))||a.comparePoint(u,m,i.point,n.point):m>u&&!Jd(i.active,n.active)&&a.compareRange(u,m,i.active,n.active),p>o)break;u=p,c<=0&&i.next(),c>=0&&n.next()}}function Jd(i,t){if(i.length!=t.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!=t[n]&&!i[n].eq(t[n]))return!1;return!0}function Mu(i,t){for(let n=t,r=i.length-1;n<r;n++)i[n]=i[n+1];i.pop()}function Au(i,t,n){for(let r=i.length-1;r>=t;r--)i[r+1]=i[r];i[t]=n}function Fm(i,t){let n=-1,r=1e9;for(let s=0;s<t.length;s++)(t[s]-r||i[s].endSide-i[n].endSide)<0&&(n=s,r=t[s]);return n}function eu(i,t,n=i.length){let r=0;for(let s=0;s<n;)i.charCodeAt(s)==9?(r+=t-r%t,s++):(r++,s=oi(i,s));return r}function Qd(i,t,n,r){for(let s=0,a=0;;){if(a>=t)return s;if(s==i.length)break;a+=i.charCodeAt(s)==9?n-a%n:1,s=oi(i,s)}return r===!0?-1:i.length}const Zd="Í¼",Um=typeof Symbol>"u"?"__"+Zd:Symbol.for(Zd),ef=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Vm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class uo{constructor(t,n){this.rules=[];let{finish:r}=n||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function a(o,u,l,c){let p=[],m=/^@(\w+)\b/.exec(o[0]),h=m&&m[1]=="keyframes";if(m&&u==null)return l.push(o[0]+";");for(let f in u){let d=u[f];if(/&/.test(f))a(f.split(/,\s*/).map(g=>o.map(y=>g.replace(/&/,y))).reduce((g,y)=>g.concat(y)),d,l);else if(d&&typeof d=="object"){if(!m)throw new RangeError("The value of a property ("+f+") should be a primitive value.");a(s(f),d,p,h)}else d!=null&&p.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+d+";")}(p.length||h)&&l.push((r&&!m&&!c?o.map(r):o).join(", ")+" {"+p.join(" ")+"}")}for(let o in t)a(s(o),t[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=Vm[Um]||1;return Vm[Um]=t+1,Zd+t.toString(36)}static mount(t,n){(t[ef]||new Lx(t)).mount(Array.isArray(n)?n:[n])}}let Ou=null;class Lx{constructor(t){if(!t.head&&t.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Ou)return t.adoptedStyleSheets=[Ou.sheet].concat(t.adoptedStyleSheets),t[ef]=Ou;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),Ou=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let n=t.head||t;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],t[ef]=this}mount(t){let n=this.sheet,r=0,s=0;for(let a=0;a<t.length;a++){let o=t[a],u=this.modules.indexOf(o);if(u<s&&u>-1&&(this.modules.splice(u,1),s--,u=-1),u==-1){if(this.modules.splice(s++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],r++)}else{for(;s<u;)r+=this.modules[s++].rules.length;r+=o.rules.length,s++}}if(!n){let a="";for(let o=0;o<this.modules.length;o++)a+=this.modules[o].getRules()+`
`;this.styleTag.textContent=a}}}var co={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ml={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Gm=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),Nx=typeof navigator<"u"&&/Mac/.test(navigator.platform),Bx=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Fx=Nx||Gm&&+Gm[1]<57;for(var Gn=0;Gn<10;Gn++)co[48+Gn]=co[96+Gn]=String(Gn);for(var Gn=1;Gn<=24;Gn++)co[Gn+111]="F"+Gn;for(var Gn=65;Gn<=90;Gn++)co[Gn]=String.fromCharCode(Gn+32),Ml[Gn]=String.fromCharCode(Gn);for(var rd in co)Ml.hasOwnProperty(rd)||(Ml[rd]=co[rd]);function Ux(i){var t=Fx&&(i.ctrlKey||i.altKey||i.metaKey)||Bx&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",n=!t&&i.key||(i.shiftKey?Ml:co)[i.keyCode]||i.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function pc(i){let t;return i.nodeType==11?t=i.getSelection?i:i.ownerDocument:t=i,t.getSelection()}function Ea(i,t){return t?i==t||i.contains(t.nodeType!=1?t.parentNode:t):!1}function Vx(i){let t=i.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function tc(i,t){if(!t.anchorNode)return!1;try{return Ea(i,t.anchorNode)}catch{return!1}}function Al(i){return i.nodeType==3?Ma(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function mc(i,t,n,r){return n?Hm(i,t,n,r,-1)||Hm(i,t,n,r,1):!1}function gc(i){for(var t=0;;t++)if(i=i.previousSibling,!i)return t}function Hm(i,t,n,r,s){for(;;){if(i==n&&t==r)return!0;if(t==(s<0?0:Ol(i))){if(i.nodeName=="DIV")return!1;let a=i.parentNode;if(!a||a.nodeType!=1)return!1;t=gc(i)+(s<0?0:1),i=a}else if(i.nodeType==1){if(i=i.childNodes[t+(s<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;t=s<0?Ol(i):0}else return!1}}function Ol(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}const rv={left:0,right:0,top:0,bottom:0};function np(i,t){let n=t?i.left:i.right;return{left:n,right:n,top:i.top,bottom:i.bottom}}function Gx(i){return{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function Hx(i,t,n,r,s,a,o,u){let l=i.ownerDocument,c=l.defaultView||window;for(let p=i;p;)if(p.nodeType==1){let m,h=p==l.body;if(h)m=Gx(c);else{if(p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let g=p.getBoundingClientRect();m={left:g.left,right:g.left+p.clientWidth,top:g.top,bottom:g.top+p.clientHeight}}let f=0,d=0;if(s=="nearest")t.top<m.top?(d=-(m.top-t.top+o),n>0&&t.bottom>m.bottom+d&&(d=t.bottom-m.bottom+d+o)):t.bottom>m.bottom&&(d=t.bottom-m.bottom+o,n<0&&t.top-d<m.top&&(d=-(m.top+d-t.top+o)));else{let g=t.bottom-t.top,y=m.bottom-m.top;d=(s=="center"&&g<=y?t.top+g/2-y/2:s=="start"||s=="center"&&n<0?t.top-o:t.bottom-y+o)-m.top}if(r=="nearest"?t.left<m.left?(f=-(m.left-t.left+a),n>0&&t.right>m.right+f&&(f=t.right-m.right+f+a)):t.right>m.right&&(f=t.right-m.right+a,n<0&&t.left<m.left+f&&(f=-(m.left+f-t.left+a))):f=(r=="center"?t.left+(t.right-t.left)/2-(m.right-m.left)/2:r=="start"==u?t.left-a:t.right-(m.right-m.left)+a)-m.left,f||d)if(h)c.scrollBy(f,d);else{let g=0,y=0;if(d){let b=p.scrollTop;p.scrollTop+=d,y=p.scrollTop-b}if(f){let b=p.scrollLeft;p.scrollLeft+=f,g=p.scrollLeft-b}t={left:t.left-g,top:t.top-y,right:t.right-g,bottom:t.bottom-y},g&&Math.abs(g-f)<1&&(r="nearest"),y&&Math.abs(y-d)<1&&(s="nearest")}if(h)break;p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function zx(i){let t=i.ownerDocument;for(let n=i.parentNode;n&&n!=t.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class Wx{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,n,r,s){this.anchorNode=t,this.anchorOffset=n,this.focusNode=r,this.focusOffset=s}}let oa=null;function nv(i){if(i.setActive)return i.setActive();if(oa)return i.focus(oa);let t=[];for(let n=i;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(i.focus(oa==null?{get preventScroll(){return oa={preventScroll:!0},!0}}:void 0),!oa){oa=!1;for(let n=0;n<t.length;){let r=t[n++],s=t[n++],a=t[n++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=a&&(r.scrollLeft=a)}}}let zm;function Ma(i,t,n=t){let r=zm||(zm=document.createRange());return r.setEnd(i,n),r.setStart(i,t),r}function va(i,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},s=new KeyboardEvent("keydown",r);s.synthetic=!0,i.dispatchEvent(s);let a=new KeyboardEvent("keyup",r);return a.synthetic=!0,i.dispatchEvent(a),s.defaultPrevented||a.defaultPrevented}function qx(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function iv(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function $x(i,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(;;)if(r){if(n.nodeType!=1)return!1;let s=n.childNodes[r-1];s.contentEditable=="false"?r--:(n=s,r=Ol(n))}else{if(n==i)return!0;r=gc(n),n=n.parentNode}}class Jn{constructor(t,n,r=!0){this.node=t,this.offset=n,this.precise=r}static before(t,n){return new Jn(t.parentNode,gc(t),n)}static after(t,n){return new Jn(t.parentNode,gc(t)+1,n)}}const ip=[];class an{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let n=this.posAtStart;for(let r of this.children){if(r==t)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,n){return null}sync(t,n){if(this.dirty&2){let r=this.dom,s=null,a;for(let o of this.children){if(o.dirty){if(!o.dom&&(a=s?s.nextSibling:r.firstChild)){let u=an.get(a);(!u||!u.parent&&u.canReuseDOM(o))&&o.reuseDOM(a)}o.sync(t,n),o.dirty=0}if(a=s?s.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&a!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;a&&a!=o.dom;)a=Wm(a);else r.insertBefore(o.dom,a);s=o.dom}for(a=s?s.nextSibling:r.firstChild,a&&n&&n.node==r&&(n.written=!0);a;)a=Wm(a)}else if(this.dirty&1)for(let r of this.children)r.dirty&&(r.sync(t,n),r.dirty=0)}reuseDOM(t){}localPosFromDOM(t,n){let r;if(t==this.dom)r=this.dom.childNodes[n];else{let s=Ol(t)==0?0:n==0?-1:1;for(;;){let a=t.parentNode;if(a==this.dom)break;s==0&&a.firstChild!=a.lastChild&&(t==a.firstChild?s=-1:s=1),t=a}s<0?r=t:r=t.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!an.get(r);)r=r.nextSibling;if(!r)return this.length;for(let s=0,a=0;;s++){let o=this.children[s];if(o.dom==r)return a;a+=o.length+o.breakAfter}}domBoundsAround(t,n,r=0){let s=-1,a=-1,o=-1,u=-1;for(let l=0,c=r,p=r;l<this.children.length;l++){let m=this.children[l],h=c+m.length;if(c<t&&h>n)return m.domBoundsAround(t,n,c);if(h>=t&&s==-1&&(s=l,a=c),c>n&&m.dom.parentNode==this.dom){o=l,u=p;break}p=h,c=h+m.breakAfter}return{from:a,to:u<0?r+this.length:u,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let n=this.parent;n;n=n.parent){if(t&&(n.dirty|=2),n.dirty&1)return;n.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let n=t.parent;if(!n)return t;t=n}}replaceChildren(t,n,r=ip){this.markDirty();for(let s=t;s<n;s++){let a=this.children[s];a.parent==this&&a.destroy()}this.children.splice(t,n-t,...r);for(let s=0;s<r.length;s++)r[s].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new sv(this.children,t,this.children.length)}childPos(t,n=1){return this.childCursor().findPos(t,n)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(t,n,r,s,a,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}an.prototype.breakAfter=0;function Wm(i){let t=i.nextSibling;return i.parentNode.removeChild(i),t}class sv{constructor(t,n,r){this.children=t,this.pos=n,this.i=r,this.off=0}findPos(t,n=1){for(;;){if(t>this.pos||t==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function ov(i,t,n,r,s,a,o,u,l){let{children:c}=i,p=c.length?c[t]:null,m=a.length?a[a.length-1]:null,h=m?m.breakAfter:o;if(!(t==r&&p&&!o&&!h&&a.length<2&&p.merge(n,s,a.length?m:null,n==0,u,l))){if(r<c.length){let f=c[r];f&&s<f.length?(t==r&&(f=f.split(s),s=0),!h&&m&&f.merge(0,s,m,!0,0,l)?a[a.length-1]=f:(s&&f.merge(0,s,null,!1,0,l),a.push(f))):f!=null&&f.breakAfter&&(m?m.breakAfter=1:o=1),r++}for(p&&(p.breakAfter=o,n>0&&(!o&&a.length&&p.merge(n,p.length,a[0],!1,u,0)?p.breakAfter=a.shift().breakAfter:(n<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(n,p.length,null,!1,u,0),t++));t<r&&a.length;)if(c[r-1].become(a[a.length-1]))r--,a.pop(),l=a.length?0:u;else if(c[t].become(a[0]))t++,a.shift(),u=a.length?0:l;else break;!a.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,u,l)&&t--,(t<r||a.length)&&i.replaceChildren(t,r,a)}}function av(i,t,n,r,s,a){let o=i.childCursor(),{i:u,off:l}=o.findPos(n,1),{i:c,off:p}=o.findPos(t,-1),m=t-n;for(let h of r)m+=h.length;i.length+=m,ov(i,c,p,u,l,r,0,s,a)}let Ti=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},tf=typeof document<"u"?document:{documentElement:{style:{}}};const rf=/Edge\/(\d+)/.exec(Ti.userAgent),lv=/MSIE \d/.test(Ti.userAgent),nf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ti.userAgent),uh=!!(lv||nf||rf),qm=!uh&&/gecko\/(\d+)/i.test(Ti.userAgent),nd=!uh&&/Chrome\/(\d+)/.exec(Ti.userAgent),$m="webkitFontSmoothing"in tf.documentElement.style,uv=!uh&&/Apple Computer/.test(Ti.vendor),Xm=uv&&(/Mobile\/\w+/.test(Ti.userAgent)||Ti.maxTouchPoints>2);var Ut={mac:Xm||/Mac/.test(Ti.platform),windows:/Win/.test(Ti.platform),linux:/Linux|X11/.test(Ti.platform),ie:uh,ie_version:lv?tf.documentMode||6:nf?+nf[1]:rf?+rf[1]:0,gecko:qm,gecko_version:qm?+(/Firefox\/(\d+)/.exec(Ti.userAgent)||[0,0])[1]:0,chrome:!!nd,chrome_version:nd?+nd[1]:0,ios:Xm,android:/Android\b/.test(Ti.userAgent),webkit:$m,safari:uv,webkit_version:$m?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:tf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Xx=256;class ho extends an{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,n,r){return r&&(!(r instanceof ho)||this.length-(n-t)+r.length>Xx)?!1:(this.text=this.text.slice(0,t)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(t){let n=new ho(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),n}localPosFromDOM(t,n){return t==this.dom?n:n?this.text.length:0}domAtPos(t){return new Jn(this.dom,t)}domBoundsAround(t,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,n){return sf(this.dom,t,n)}}class cs extends an{constructor(t,n=[],r=0){super(),this.mark=t,this.children=n,this.length=r;for(let s of n)s.setParent(this)}setAttrs(t){if(iv(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)t.setAttribute(n,this.mark.attrs[n]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t,n){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,n)}merge(t,n,r,s,a,o){return r&&(!(r instanceof cs&&r.mark.eq(this.mark))||t&&a<=0||n<this.length&&o<=0)?!1:(av(this,t,n,r?r.children:[],a-1,o-1),this.markDirty(),!0)}split(t){let n=[],r=0,s=-1,a=0;for(let u of this.children){let l=r+u.length;l>t&&n.push(r<t?u.split(t-r):u),s<0&&r>=t&&(s=a),r=l,a++}let o=this.length-t;return this.length=t,s>-1&&(this.children.length=s,this.markDirty()),new cs(this.mark,n,o)}domAtPos(t){return dv(this,t)}coordsAt(t,n){return pv(this,t,n)}}function sf(i,t,n){let r=i.nodeValue.length;t>r&&(t=r);let s=t,a=t,o=0;t==0&&n<0||t==r&&n>=0?Ut.chrome||Ut.gecko||(t?(s--,o=1):a<r&&(a++,o=-1)):n<0?s--:a<r&&a++;let u=Ma(i,s,a).getClientRects();if(!u.length)return rv;let l=u[(o?o<0:n>=0)?0:u.length-1];return Ut.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(u,c=>c.width)||l),o?np(l,o<0):l||null}class Ks extends an{constructor(t,n,r){super(),this.widget=t,this.length=n,this.side=r,this.prevWidget=null}static create(t,n,r){return new(t.customView||Ks)(t,n,r)}split(t){let n=Ks.create(this.widget,this.length-t,this.side);return this.length-=t,n}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,n,r,s,a,o){return r&&(!(r instanceof Ks)||!this.widget.compare(r.widget)||t>0&&a<=0||n<this.length&&o<=0)?!1:(this.length=t+(r?r.length:0)+(this.length-n),!0)}become(t){return t.length==this.length&&t instanceof Ks&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return Or.empty;let t=this;for(;t.parent;)t=t.parent;let{view:n}=t,r=n&&n.state.doc,s=this.posAtStart;return r?r.slice(s,s+this.length):Or.empty}domAtPos(t){return t==0?Jn.before(this.dom):Jn.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,n){let r=this.dom.getClientRects(),s=null;if(!r.length)return rv;for(let a=t>0?r.length-1:0;s=r[a],!(t>0?a==0:a==r.length-1||s.top<s.bottom);a+=t>0?-1:1);return this.length?s:np(s,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class cv extends Ks{domAtPos(t){let{topView:n,text:r}=this.widget;return n?of(t,0,n,r,(s,a)=>s.domAtPos(a),s=>new Jn(r,Math.min(s,r.nodeValue.length))):new Jn(r,Math.min(t,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,n){let{topView:r,text:s}=this.widget;return r?hv(t,n,r,s):Math.min(n,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,n){let{topView:r,text:s}=this.widget;return r?of(t,n,r,s,(a,o,u)=>a.coordsAt(o,u),(a,o)=>sf(s,a,o)):sf(s,t,n)}destroy(){var t;super.destroy(),(t=this.widget.topView)===null||t===void 0||t.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function of(i,t,n,r,s,a){if(n instanceof cs){for(let o=n.dom.firstChild;o;o=o.nextSibling){let u=an.get(o);if(!u)return a(i,t);let l=Ea(o,r),c=u.length+(l?r.nodeValue.length:0);if(i<c||i==c&&u.getSide()<=0)return l?of(i,t,u,r,s,a):s(u,i,t);i-=c}return s(n,n.length,-1)}else return n.dom==r?a(i,t):s(n,i,t)}function hv(i,t,n,r){if(n instanceof cs)for(let s of n.children){let a=0,o=Ea(s.dom,r);if(Ea(s.dom,i))return a+(o?hv(i,t,s,r):s.localPosFromDOM(i,t));a+=o?r.nodeValue.length:s.length}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(i,t)}class Aa extends an{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof Aa&&t.side==this.side}split(){return new Aa(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return Jn.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let n=this.dom.getBoundingClientRect(),r=Yx(this,this.side>0?-1:1);return r&&r.top<n.bottom&&r.bottom>n.top?{left:n.left,right:n.right,top:r.top,bottom:r.bottom}:n}get overrideDOMText(){return Or.empty}}ho.prototype.children=Ks.prototype.children=Aa.prototype.children=ip;function Yx(i,t){let n=i.parent,r=n?n.children.indexOf(i):-1;for(;n&&r>=0;)if(t<0?r>0:r<n.children.length){let s=n.children[r+t];if(s instanceof ho){let a=s.coordsAt(t<0?s.length:0,t);if(a)return a}r+=t}else if(n instanceof cs&&n.parent)r=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent;else{let s=n.dom.lastChild;if(s&&s.nodeName=="BR")return s.getClientRects()[0];break}}function dv(i,t){let n=i.dom,{children:r}=i,s=0;for(let a=0;s<r.length;s++){let o=r[s],u=a+o.length;if(!(u==a&&o.getSide()<=0)){if(t>a&&t<u&&o.dom.parentNode==n)return o.domAtPos(t-a);if(t<=a)break;a=u}}for(let a=s;a>0;a--){let o=r[a-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let a=s;a<r.length;a++){let o=r[a];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Jn(n,0)}function fv(i,t,n){let r,{children:s}=i;n>0&&t instanceof cs&&s.length&&(r=s[s.length-1])instanceof cs&&r.mark.eq(t.mark)?fv(r,t.children[0],n-1):(s.push(t),t.setParent(i)),i.length+=t.length}function pv(i,t,n){let r=null,s=-1,a=null,o=-1;function u(c,p){for(let m=0,h=0;m<c.children.length&&h<=p;m++){let f=c.children[m],d=h+f.length;d>=p&&(f.children.length?u(f,p-h):!a&&(d>p||h==d&&f.getSide()>0)?(a=f,o=p-h):(h<p||h==d&&f.getSide()<0)&&(r=f,s=p-h)),h=d}}u(i,t);let l=(n<0?r:a)||r||a;return l?l.coordsAt(Math.max(0,l==r?s:o),n):Kx(i)}function Kx(i){let t=i.dom.lastChild;if(!t)return i.dom.getBoundingClientRect();let n=Al(t);return n[n.length-1]||null}function af(i,t){for(let n in i)n=="class"&&t.class?t.class+=" "+i.class:n=="style"&&t.style?t.style+=";"+i.style:t[n]=i[n];return t}function sp(i,t){if(i==t)return!0;if(!i||!t)return!1;let n=Object.keys(i),r=Object.keys(t);if(n.length!=r.length)return!1;for(let s of n)if(r.indexOf(s)==-1||i[s]!==t[s])return!1;return!0}function lf(i,t,n){let r=null;if(t)for(let s in t)n&&s in n||i.removeAttribute(r=s);if(n)for(let s in n)t&&t[s]==n[s]||i.setAttribute(r=s,n[s]);return!!r}class yo{eq(t){return!1}updateDOM(t,n){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var Xr=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(Xr||(Xr={}));class Qt extends No{constructor(t,n,r,s){super(),this.startSide=t,this.endSide=n,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(t){return new ch(t)}static widget(t){let n=t.side||0,r=!!t.block;return n+=r?n>0?3e8:-4e8:n>0?1e8:-1e8,new Bo(t,n,n,r,t.widget||null,!1)}static replace(t){let n=!!t.block,r,s;if(t.isBlockGap)r=-5e8,s=4e8;else{let{start:a,end:o}=mv(t,n);r=(a?n?-3e8:-1:5e8)-1,s=(o?n?2e8:1:-6e8)+1}return new Bo(t,r,s,n,t.widget||null,!0)}static line(t){return new tu(t)}static set(t,n=!1){return Ur.of(t,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Qt.none=Ur.empty;class ch extends Qt{constructor(t){let{start:n,end:r}=mv(t);super(n?-1:5e8,r?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof ch&&this.tagName==t.tagName&&this.class==t.class&&sp(this.attrs,t.attrs)}range(t,n=t){if(t>=n)throw new RangeError("Mark decorations may not be empty");return super.range(t,n)}}ch.prototype.point=!1;class tu extends Qt{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof tu&&this.spec.class==t.spec.class&&sp(this.spec.attributes,t.spec.attributes)}range(t,n=t){if(n!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,n)}}tu.prototype.mapMode=si.TrackBefore;tu.prototype.point=!0;class Bo extends Qt{constructor(t,n,r,s,a,o){super(n,r,a,t),this.block=s,this.isReplace=o,this.mapMode=s?n<=0?si.TrackBefore:si.TrackAfter:si.TrackDel}get type(){return this.startSide<this.endSide?Xr.WidgetRange:this.startSide<=0?Xr.WidgetBefore:Xr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof Bo&&Jx(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,n=t){if(this.isReplace&&(t>n||t==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,n)}}Bo.prototype.point=!0;function mv(i,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=i;return n==null&&(n=i.inclusive),r==null&&(r=i.inclusive),{start:n??t,end:r??t}}function Jx(i,t){return i==t||!!(i&&t&&i.compare(t))}function uf(i,t,n,r=0){let s=n.length-1;s>=0&&n[s]+r>=i?n[s]=Math.max(n[s],t):n.push(i,t)}class ai extends an{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,n,r,s,a,o){if(r){if(!(r instanceof ai))return!1;this.dom||r.transferDOM(this)}return s&&this.setDeco(r?r.attrs:null),av(this,t,n,r?r.children:[],a,o),!0}split(t){let n=new ai;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:s}=this.childPos(t);s&&(n.append(this.children[r].split(s),0),this.children[r].merge(s,this.children[r].length,null,!1,0,0),r++);for(let a=r;a<this.children.length;a++)n.append(this.children[a],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=t,n}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){sp(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,n){fv(this,t,n)}addLineDeco(t){let n=t.spec.attributes,r=t.spec.class;n&&(this.attrs=af(n,this.attrs||{})),r&&(this.attrs=af({class:r},this.attrs||{}))}domAtPos(t){return dv(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.dirty|=6)}sync(t,n){var r;this.dom?this.dirty&4&&(iv(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(lf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,n);let s=this.dom.lastChild;for(;s&&an.get(s)instanceof cs;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((r=an.get(s))===null||r===void 0?void 0:r.isEditable)==!1&&(!Ut.ios||!this.children.some(a=>a instanceof ho))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0;for(let n of this.children){if(!(n instanceof ho)||/[^ -~]/.test(n.text))return null;let r=Al(n.dom);if(r.length!=1)return null;t+=r[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,n){return pv(this,t,n)}become(t){return!1}get type(){return Xr.Text}static find(t,n){for(let r=0,s=0;r<t.children.length;r++){let a=t.children[r],o=s+a.length;if(o>=n){if(a instanceof ai)return a;if(o>n)break}s=o+a.breakAfter}return null}}class Po extends an{constructor(t,n,r){super(),this.widget=t,this.length=n,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(t,n,r,s,a,o){return r&&(!(r instanceof Po)||!this.widget.compare(r.widget)||t>0&&a<=0||n<this.length&&o<=0)?!1:(this.length=t+(r?r.length:0)+(this.length-n),!0)}domAtPos(t){return t==0?Jn.before(this.dom):Jn.after(this.dom,t==this.length)}split(t){let n=this.length-t;this.length=t;let r=new Po(this.widget,n,this.type);return r.breakAfter=this.breakAfter,r}get children(){return ip}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Or.empty}domBoundsAround(){return null}become(t){return t instanceof Po&&t.type==this.type&&t.widget.constructor==this.widget.constructor?(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class op{constructor(t,n,r,s){this.doc=t,this.pos=n,this.end=r,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof Po&&t.type==Xr.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new ai),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Iu(new Aa(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(t,n,r){for(;t>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:o,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}else this.text=a,this.textOff=0}let s=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Iu(new ho(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,t-=s,r=0}}span(t,n,r,s){this.buildText(n-t,r,s),this.pos=n,this.openStart<0&&(this.openStart=s)}point(t,n,r,s,a,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Bo){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let u=n-t;if(r instanceof Bo)if(r.block){let{type:l}=r;l==Xr.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Po(r.widget||new Ym("div"),u,l))}else{let l=Ks.create(r.widget||new Ym("span"),u,u?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&a<=s.length&&(t<n||r.startSide>0),p=!l.isEditable&&(t<n||a>s.length||r.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(s),c&&(m.append(Iu(new Aa(1),s),a),a=s.length+Math.max(0,a-s.length)),m.append(Iu(l,s),a),this.atCursorPos=p,this.pendingBuffer=p?t<n||a>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);u&&(this.textOff+u<=this.text.length?this.textOff+=u:(this.skip+=u-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=a)}static build(t,n,r,s,a){let o=new op(t,n,r,a);return o.openEnd=Ur.spans(s,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Iu(i,t){for(let n of t)i=new cs(n,[i],i.length);return i}class Ym extends yo{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const gv=Gt.define(),yv=Gt.define(),vv=Gt.define(),bv=Gt.define(),cf=Gt.define(),_v=Gt.define(),wv=Gt.define(),xv=Gt.define({combine:i=>i.some(t=>t)}),Sv=Gt.define({combine:i=>i.some(t=>t)});class yc{constructor(t,n="nearest",r="nearest",s=5,a=5){this.range=t,this.y=n,this.x=r,this.yMargin=s,this.xMargin=a}map(t){return t.empty?this:new yc(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const Km=yr.define({map:(i,t)=>i.map(t)});function Ei(i,t,n){let r=i.facet(bv);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const hh=Gt.define({combine:i=>i.length?i[0]:!0});let Qx=0;const pl=Gt.define();class Tn{constructor(t,n,r,s){this.id=t,this.create=n,this.domEventHandlers=r,this.extension=s(this)}static define(t,n){const{eventHandlers:r,provide:s,decorations:a}=n||{};return new Tn(Qx++,t,r,o=>{let u=[pl.of(o)];return a&&u.push(Il.of(l=>{let c=l.plugin(o);return c?a(c):Qt.none})),s&&u.push(s(o)),u})}static fromClass(t,n){return Tn.define(r=>new t(r),n)}}class id{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Ei(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(n){Ei(t.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Ei(t.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const jv=Gt.define(),ap=Gt.define(),Il=Gt.define(),Cv=Gt.define(),Tv=Gt.define(),ml=Gt.define();class as{constructor(t,n,r,s){this.fromA=t,this.toA=n,this.fromB=r,this.toB=s}join(t){return new as(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let n=t.length,r=this;for(;n>0;n--){let s=t[n-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),t.splice(n-1,1)}}return t.splice(n,0,r),t}static extendWithRanges(t,n){if(n.length==0)return t;let r=[];for(let s=0,a=0,o=0,u=0;;s++){let l=s==t.length?null:t[s],c=o-u,p=l?l.fromB:1e9;for(;a<n.length&&n[a]<p;){let m=n[a],h=n[a+1],f=Math.max(u,m),d=Math.min(p,h);if(f<=d&&new as(f+c,d+c,f,d).addToSet(r),h>p)break;a+=2}if(!l)return r;new as(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,u=l.toB}}}class vc{constructor(t,n,r){this.view=t,this.state=n,this.transactions=r,this.flags=0,this.startState=t.state,this.changes=En.empty(this.startState.doc.length);for(let a of r)this.changes=this.changes.compose(a.changes);let s=[];this.changes.iterChangedRanges((a,o,u,l)=>s.push(new as(a,o,u,l))),this.changedRanges=s}static create(t,n,r){return new vc(t,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var mn=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(mn||(mn={}));const hf=mn.LTR,Zx=mn.RTL;function kv(i){let t=[];for(let n=0;n<i.length;n++)t.push(1<<+i[n]);return t}const eS=kv("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),tS=kv("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),df=Object.create(null),Qi=[];for(let i of["()","[]","{}"]){let t=i.charCodeAt(0),n=i.charCodeAt(1);df[t]=n,df[n]=-t}function rS(i){return i<=247?eS[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?tS[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203?256:64336<=i&&i<=65023?4:i==8204?256:1}const nS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ba{constructor(t,n,r){this.from=t,this.to=n,this.level=r}get dir(){return this.level%2?Zx:hf}side(t,n){return this.dir==n==t?this.to:this.from}static find(t,n,r,s){let a=-1;for(let o=0;o<t.length;o++){let u=t[o];if(u.from<=n&&u.to>=n){if(u.level==r)return o;(a<0||(s!=0?s<0?u.from<n:u.to>n:t[a].level>u.level))&&(a=o)}}if(a<0)throw new RangeError("Index out of range");return a}}const pn=[];function iS(i,t){let n=i.length,r=t==hf?1:2,s=t==hf?2:1;if(!i||r==1&&!nS.test(i))return Ev(n);for(let o=0,u=r,l=r;o<n;o++){let c=rS(i.charCodeAt(o));c==512?c=u:c==8&&l==4&&(c=16),pn[o]=c==4?2:c,c&7&&(l=c),u=c}for(let o=0,u=r,l=r;o<n;o++){let c=pn[o];if(c==128)o<n-1&&u==pn[o+1]&&u&24?c=pn[o]=u:pn[o]=256;else if(c==64){let p=o+1;for(;p<n&&pn[p]==64;)p++;let m=o&&u==8||p<n&&pn[p]==8?l==1?1:8:256;for(let h=o;h<p;h++)pn[h]=m;o=p-1}else c==8&&l==1&&(pn[o]=1);u=c,c&7&&(l=c)}for(let o=0,u=0,l=0,c,p,m;o<n;o++)if(p=df[c=i.charCodeAt(o)])if(p<0){for(let h=u-3;h>=0;h-=3)if(Qi[h+1]==-p){let f=Qi[h+2],d=f&2?r:f&4?f&1?s:r:0;d&&(pn[o]=pn[Qi[h]]=d),u=h;break}}else{if(Qi.length==189)break;Qi[u++]=o,Qi[u++]=c,Qi[u++]=l}else if((m=pn[o])==2||m==1){let h=m==r;l=h?0:1;for(let f=u-3;f>=0;f-=3){let d=Qi[f+2];if(d&2)break;if(h)Qi[f+2]|=2;else{if(d&4)break;Qi[f+2]|=4}}}for(let o=0;o<n;o++)if(pn[o]==256){let u=o+1;for(;u<n&&pn[u]==256;)u++;let l=(o?pn[o-1]:r)==1,c=(u<n?pn[u]:r)==1,p=l==c?l?1:2:r;for(let m=o;m<u;m++)pn[m]=p;o=u-1}let a=[];if(r==1)for(let o=0;o<n;){let u=o,l=pn[o++]!=1;for(;o<n&&l==(pn[o]!=1);)o++;if(l)for(let c=o;c>u;){let p=c,m=pn[--c]!=2;for(;c>u&&m==(pn[c-1]!=2);)c--;a.push(new ba(c,p,m?2:1))}else a.push(new ba(u,o,0))}else for(let o=0;o<n;){let u=o,l=pn[o++]==2;for(;o<n&&l==(pn[o]==2);)o++;a.push(new ba(u,o,l?1:2))}return a}function Ev(i){return[new ba(0,i,0)]}let Mv="";function sS(i,t,n,r,s){var a;let o=r.head-i.from,u=-1;if(o==0){if(!s||!i.length)return null;t[0].level!=n&&(o=t[0].side(!1,n),u=0)}else if(o==i.length){if(s)return null;let h=t[t.length-1];h.level!=n&&(o=h.side(!0,n),u=t.length-1)}u<0&&(u=ba.find(t,o,(a=r.bidiLevel)!==null&&a!==void 0?a:-1,r.assoc));let l=t[u];o==l.side(s,n)&&(l=t[u+=s?1:-1],o=l.side(!s,n));let c=s==(l.dir==n),p=oi(i.text,o,c);if(Mv=i.text.slice(Math.min(o,p),Math.max(o,p)),p!=l.side(s,n))return pt.cursor(p+i.from,c?-1:1,l.level);let m=u==(s?t.length-1:0)?null:t[u+(s?1:-1)];return!m&&l.level!=n?pt.cursor(s?i.to:i.from,s?-1:1,n):m&&m.level<l.level?pt.cursor(m.side(!s,n)+i.from,s?1:-1,m.level):pt.cursor(p+i.from,s?-1:1,l.level)}const Js="ï¿¿";class Av{constructor(t,n){this.points=t,this.text="",this.lineSeparator=n.facet(kr.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=Js}readRange(t,n){if(!t)return this;let r=t.parentNode;for(let s=t;;){this.findPointBefore(r,s),this.readNode(s);let a=s.nextSibling;if(a==n)break;let o=an.get(s),u=an.get(a);(o&&u?o.breakAfter:(o?o.breakAfter:Jm(s))||Jm(a)&&(s.nodeName!="BR"||s.cmIgnore))&&this.lineBreak(),s=a}return this.findPointBefore(r,n),this}readTextNode(t){let n=t.nodeValue;for(let r of this.points)r.node==t&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,o=1,u;if(this.lineSeparator?(a=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(u=s.exec(n))&&(a=u.index,o=u[0].length),this.append(n.slice(r,a<0?n.length:a)),a<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==t&&l.pos>this.text.length&&(l.pos-=o-1);r=a+o}}readNode(t){if(t.cmIgnore)return;let n=an.get(t),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(t,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,n){for(let r of this.points)r.node==t&&t.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(t,n){for(let r of this.points)(t.nodeType==3?r.node==t:t.contains(r.node))&&(r.pos=this.text.length+Math.min(n,r.offset))}}function Jm(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}class Qm{constructor(t,n){this.node=t,this.offset=n,this.pos=-1}}class Zm extends an{constructor(t){super(),this.view=t,this.compositionDeco=Qt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new ai],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new as(0,0,0,t.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(t){let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:o,toA:u})=>u<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Qt.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=aS(this.view,t.changes)),(Ut.ie||Ut.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),a=hS(r,s,t.changes);return n=as.extendWithRanges(n,a),this.dirty==0&&n.length==0?!1:(this.updateInner(n,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Ut.chrome||Ut.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.dirty=0,a&&(a.written||r.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Po&&a.widget instanceof eg&&s.push(a.dom);r.updateGaps(s)}updateChildren(t,n){let r=this.childCursor(n);for(let s=t.length-1;;s--){let a=s>=0?t[s]:null;if(!a)break;let{fromA:o,toA:u,fromB:l,toB:c}=a,{content:p,breakAtStart:m,openStart:h,openEnd:f}=op.build(this.view.state.doc,l,c,this.decorations,this.dynamicDecorationMap),{i:d,off:g}=r.findPos(u,1),{i:y,off:b}=r.findPos(o,-1);ov(this,y,b,d,g,p,m,h,f)}}updateSelection(t=!1,n=!1){if((t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(n||this.mayControlSelection()))return;let r=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.domAtPos(s.anchor),o=s.empty?a:this.domAtPos(s.head);if(Ut.gecko&&s.empty&&oS(a)){let l=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(l,a.node.childNodes[a.offset]||null)),a=o=new Jn(l,0),r=!0}let u=this.view.observer.selectionRange;(r||!u.focusNode||!mc(a.node,a.offset,u.anchorNode,u.anchorOffset)||!mc(o.node,o.offset,u.focusNode,u.focusOffset))&&(this.view.observer.ignore(()=>{Ut.android&&Ut.chrome&&this.dom.contains(u.focusNode)&&dS(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=pc(this.view.root);if(l)if(s.empty){if(Ut.gecko){let c=uS(a.node,a.offset);if(c&&c!=3){let p=Iv(a.node,a.offset,c==1?1:-1);p&&(a=new Jn(p,c==1?0:p.nodeValue.length))}}l.collapse(a.node,a.offset),s.bidiLevel!=null&&u.cursorBidiLevel!=null&&(u.cursorBidiLevel=s.bidiLevel)}else if(l.extend){l.collapse(a.node,a.offset);try{l.extend(o.node,o.offset)}catch{}}else{let c=document.createRange();s.anchor>s.head&&([a,o]=[o,a]),c.setEnd(o.node,o.offset),c.setStart(a.node,a.offset),l.removeAllRanges(),l.addRange(c)}}),this.view.observer.setSelectionRange(a,o)),this.impreciseAnchor=a.precise?null:new Jn(u.anchorNode,u.anchorOffset),this.impreciseHead=o.precise?null:new Jn(u.focusNode,u.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:t}=this,n=t.state.selection.main,r=pc(t.root),{anchorNode:s,anchorOffset:a}=t.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=ai.find(this,n.head);if(!o)return;let u=o.posAtStart;if(n.head==u||n.head==u+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let p=this.domAtPos(n.head+n.assoc);r.collapse(p.node,p.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let m=t.observer.selectionRange;t.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=n.from&&r.collapse(s,a)}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||tc(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let n=t;n;){let r=an.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(t,n){let r=this.nearest(t);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(t,n)+r.posAtStart}domAtPos(t){let{i:n,off:r}=this.childCursor().findPos(t,-1);for(;n<this.children.length-1;){let s=this.children[n];if(r<s.length||s instanceof ai)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(t,n){for(let r=this.length,s=this.children.length-1;;s--){let a=this.children[s],o=r-a.breakAfter-a.length;if(t>o||t==o&&a.type!=Xr.WidgetBefore&&a.type!=Xr.WidgetAfter&&(!s||n==2||this.children[s-1].breakAfter||this.children[s-1].type==Xr.WidgetBefore&&n>-2))return a.coordsAt(t-o,n);r=o}}measureVisibleLineHeights(t){let n=[],{from:r,to:s}=t,a=this.view.contentDOM.clientWidth,o=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,l=this.view.textDirection==mn.LTR;for(let c=0,p=0;p<this.children.length;p++){let m=this.children[p],h=c+m.length;if(h>s)break;if(c>=r){let f=m.dom.getBoundingClientRect();if(n.push(f.height),o){let d=m.dom.lastChild,g=d?Al(d):[];if(g.length){let y=g[g.length-1],b=l?y.right-f.left:f.right-y.left;b>u&&(u=b,this.minWidth=a,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+m.breakAfter}return n}textDirectionAt(t){let{i:n}=this.childPos(t,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?mn.RTL:mn.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ai){let a=s.measureTextSize();if(a)return a}let t=document.createElement("div"),n,r;return t.className="cm-line",t.style.width="99999px",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let s=Al(t.firstChild)[0];n=t.getBoundingClientRect().height,r=s?s.width/27:7,t.remove()}),{lineHeight:n,charWidth:r}}childCursor(t=this.length){let n=this.children.length;return n&&(t-=this.children[--n].length),new sv(this.children,t,n)}computeBlockGapDeco(){let t=[],n=this.view.viewState;for(let r=0,s=0;;s++){let a=s==n.viewports.length?null:n.viewports[s],o=a?a.from-1:this.length;if(o>r){let u=n.lineBlockAt(o).bottom-n.lineBlockAt(r).top;t.push(Qt.replace({widget:new eg(u),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!a)break;r=a.to+1}return Qt.set(t)}updateDeco(){let t=this.view.state.facet(Il).map((n,r)=>(this.dynamicDecorationMap[r]=typeof n=="function")?n(this.view):n);for(let n=t.length;n<t.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let{range:n}=t,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!r)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let a=0,o=0,u=0,l=0;for(let p of this.view.state.facet(Tv).map(m=>m(this.view)))if(p){let{left:m,right:h,top:f,bottom:d}=p;m!=null&&(a=Math.max(a,m)),h!=null&&(o=Math.max(o,h)),f!=null&&(u=Math.max(u,f)),d!=null&&(l=Math.max(l,d))}let c={left:r.left-a,top:r.top-u,right:r.right+o,bottom:r.bottom+l};Hx(this.view.scrollDOM,c,n.head<n.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==mn.LTR)}}function oS(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}class eg extends yo{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Ov(i){let t=i.observer.selectionRange,n=t.focusNode&&Iv(t.focusNode,t.focusOffset,0);if(!n)return null;let r=i.docView.nearest(n);if(!r)return null;if(r instanceof ai){let s=n;for(;s.parentNode!=r.dom;)s=s.parentNode;let a=s.previousSibling;for(;a&&!an.get(a);)a=a.previousSibling;let o=a?an.get(a).posAtEnd:r.posAtStart;return{from:o,to:o,node:s,text:n}}else{for(;;){let{parent:a}=r;if(!a)return null;if(a instanceof ai)break;r=a}let s=r.posAtStart;return{from:s,to:s+r.length,node:r.dom,text:n}}}function aS(i,t){let n=Ov(i);if(!n)return Qt.none;let{from:r,to:s,node:a,text:o}=n,u=t.mapPos(r,1),l=Math.max(u,t.mapPos(s,-1)),{state:c}=i,p=a.nodeType==3?a.nodeValue:new Av([],c).readRange(a.firstChild,null).text;if(l-u<p.length)if(c.doc.sliceString(u,Math.min(c.doc.length,u+p.length),Js)==p)l=u+p.length;else if(c.doc.sliceString(Math.max(0,l-p.length),l,Js)==p)u=l-p.length;else return Qt.none;else if(c.doc.sliceString(u,l,Js)!=p)return Qt.none;let m=an.get(a);return m instanceof cv?m=m.widget.topView:m&&(m.parent=null),Qt.set(Qt.replace({widget:new lS(a,o,m),inclusive:!0}).range(u,l))}class lS extends yo{constructor(t,n,r){super(),this.top=t,this.text=n,this.topView=r}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return cv}}function Iv(i,t,n){for(;;){if(i.nodeType==3)return i;if(i.nodeType==1&&t>0&&n<=0)i=i.childNodes[t-1],t=Ol(i);else if(i.nodeType==1&&t<i.childNodes.length&&n>=0)i=i.childNodes[t],t=0;else return null}}function uS(i,t){return i.nodeType!=1?0:(t&&i.childNodes[t-1].contentEditable=="false"?1:0)|(t<i.childNodes.length&&i.childNodes[t].contentEditable=="false"?2:0)}class cS{constructor(){this.changes=[]}compareRange(t,n){uf(t,n,this.changes)}comparePoint(t,n){uf(t,n,this.changes)}}function hS(i,t,n){let r=new cS;return Ur.compare(i,t,n,r),r.changes}function dS(i,t){for(let n=i;n&&n!=t;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function fS(i,t,n=1){let r=i.charCategorizer(t),s=i.doc.lineAt(t),a=t-s.from;if(s.length==0)return pt.cursor(t);a==0?n=1:a==s.length&&(n=-1);let o=a,u=a;n<0?o=oi(s.text,a,!1):u=oi(s.text,a);let l=r(s.text.slice(o,u));for(;o>0;){let c=oi(s.text,o,!1);if(r(s.text.slice(c,o))!=l)break;o=c}for(;u<s.length;){let c=oi(s.text,u);if(r(s.text.slice(u,c))!=l)break;u=c}return pt.range(o+s.from,u+s.from)}function pS(i,t){return t.left>i?t.left-i:Math.max(0,i-t.right)}function mS(i,t){return t.top>i?t.top-i:Math.max(0,i-t.bottom)}function sd(i,t){return i.top<t.bottom-1&&i.bottom>t.top+1}function tg(i,t){return t<i.top?{top:t,left:i.left,right:i.right,bottom:i.bottom}:i}function rg(i,t){return t>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:t}:i}function ff(i,t,n){let r,s,a,o,u=!1,l,c,p,m;for(let d=i.firstChild;d;d=d.nextSibling){let g=Al(d);for(let y=0;y<g.length;y++){let b=g[y];s&&sd(s,b)&&(b=tg(rg(b,s.bottom),s.top));let x=pS(t,b),j=mS(n,b);if(x==0&&j==0)return d.nodeType==3?ng(d,t,n):ff(d,t,n);if(!r||o>j||o==j&&a>x){r=d,s=b,a=x,o=j;let S=j?n<b.top?-1:1:x?t<b.left?-1:1:0;u=!S||(S>0?y<g.length-1:y>0)}x==0?n>b.bottom&&(!p||p.bottom<b.bottom)?(l=d,p=b):n<b.top&&(!m||m.top>b.top)&&(c=d,m=b):p&&sd(p,b)?p=rg(p,b.bottom):m&&sd(m,b)&&(m=tg(m,b.top))}}if(p&&p.bottom>=n?(r=l,s=p):m&&m.top<=n&&(r=c,s=m),!r)return{node:i,offset:0};let h=Math.max(s.left,Math.min(s.right,t));if(r.nodeType==3)return ng(r,h,n);if(u&&r.contentEditable!="false")return ff(r,h,n);let f=Array.prototype.indexOf.call(i.childNodes,r)+(t>=(s.left+s.right)/2?1:0);return{node:i,offset:f}}function ng(i,t,n){let r=i.nodeValue.length,s=-1,a=1e9,o=0;for(let u=0;u<r;u++){let l=Ma(i,u,u+1).getClientRects();for(let c=0;c<l.length;c++){let p=l[c];if(p.top==p.bottom)continue;o||(o=t-p.left);let m=(p.top>n?p.top-n:n-p.bottom)-1;if(p.left-1<=t&&p.right+1>=t&&m<a){let h=t>=(p.left+p.right)/2,f=h;if((Ut.chrome||Ut.gecko)&&Ma(i,u).getBoundingClientRect().left==p.right&&(f=!h),m<=0)return{node:i,offset:u+(f?1:0)};s=u+(f?1:0),a=m}}}return{node:i,offset:s>-1?s:o>0?i.nodeValue.length:0}}function Pv(i,t,n,r=-1){var s;let a=i.contentDOM.getBoundingClientRect(),o=a.top+i.viewState.paddingTop,u,{docHeight:l}=i.viewState,{x:c,y:p}=t,m=p-o;if(m<0)return 0;if(m>l)return i.state.doc.length;for(let j=i.defaultLineHeight/2,S=!1;u=i.elementAtHeight(m),u.type!=Xr.Text;)for(;m=r>0?u.bottom+j:u.top-j,!(m>=0&&m<=l);){if(S)return n?null:0;S=!0,r=-r}p=o+m;let h=u.from;if(h<i.viewport.from)return i.viewport.from==0?0:n?null:ig(i,a,u,c,p);if(h>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:n?null:ig(i,a,u,c,p);let f=i.dom.ownerDocument,d=i.root.elementFromPoint?i.root:f,g=d.elementFromPoint(c,p);g&&!i.contentDOM.contains(g)&&(g=null),g||(c=Math.max(a.left+1,Math.min(a.right-1,c)),g=d.elementFromPoint(c,p),g&&!i.contentDOM.contains(g)&&(g=null));let y,b=-1;if(g&&((s=i.docView.nearest(g))===null||s===void 0?void 0:s.isEditable)!=!1){if(f.caretPositionFromPoint){let j=f.caretPositionFromPoint(c,p);j&&({offsetNode:y,offset:b}=j)}else if(f.caretRangeFromPoint){let j=f.caretRangeFromPoint(c,p);j&&({startContainer:y,startOffset:b}=j,(!i.contentDOM.contains(y)||Ut.safari&&gS(y,b,c)||Ut.chrome&&yS(y,b,c))&&(y=void 0))}}if(!y||!i.docView.dom.contains(y)){let j=ai.find(i.docView,h);if(!j)return m>u.top+u.height/2?u.to:u.from;({node:y,offset:b}=ff(j.dom,c,p))}let x=i.docView.nearest(y);if(!x)return null;if(x.isWidget){let j=x.dom.getBoundingClientRect();return t.y<j.top||t.y<=j.bottom&&t.x<=(j.left+j.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(y,b)+x.posAtStart}function ig(i,t,n,r,s){let a=Math.round((r-t.left)*i.defaultCharacterWidth);if(i.lineWrapping&&n.height>i.defaultLineHeight*1.5){let u=Math.floor((s-n.top)/i.defaultLineHeight);a+=u*i.viewState.heightOracle.lineLength}let o=i.state.sliceDoc(n.from,n.to);return n.from+Qd(o,a,i.state.tabSize)}function gS(i,t,n){let r;if(i.nodeType!=3||t!=(r=i.nodeValue.length))return!1;for(let s=i.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Ma(i,r-1,r).getBoundingClientRect().left>n}function yS(i,t,n){if(t!=0)return!1;for(let s=i;;){let a=s.parentNode;if(!a||a.nodeType!=1||a.firstChild!=s)return!1;if(a.classList.contains("cm-line"))break;s=a}let r=i.nodeType==1?i.getBoundingClientRect():Ma(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function vS(i,t,n,r){let s=i.state.doc.lineAt(t.head),a=!r||!i.lineWrapping?null:i.coordsAtPos(t.assoc<0&&t.head>s.from?t.head-1:t.head);if(a){let l=i.dom.getBoundingClientRect(),c=i.textDirectionAt(s.from),p=i.posAtCoords({x:n==(c==mn.LTR)?l.right-1:l.left+1,y:(a.top+a.bottom)/2});if(p!=null)return pt.cursor(p,n?-1:1)}let o=ai.find(i.docView,t.head),u=o?n?o.posAtEnd:o.posAtStart:n?s.to:s.from;return pt.cursor(u,n?-1:1)}function sg(i,t,n,r){let s=i.state.doc.lineAt(t.head),a=i.bidiSpans(s),o=i.textDirectionAt(s.from);for(let u=t,l=null;;){let c=sS(s,a,o,u,n),p=Mv;if(!c){if(s.number==(n?i.state.doc.lines:1))return u;p=`
`,s=i.state.doc.line(s.number+(n?1:-1)),a=i.bidiSpans(s),c=pt.cursor(n?s.from:s.to)}if(l){if(!l(p))return u}else{if(!r)return c;l=r(p)}u=c}}function bS(i,t,n){let r=i.state.charCategorizer(t),s=r(n);return a=>{let o=r(a);return s==hn.Space&&(s=o),s==o}}function _S(i,t,n,r){let s=t.head,a=n?1:-1;if(s==(n?i.state.doc.length:0))return pt.cursor(s,t.assoc);let o=t.goalColumn,u,l=i.contentDOM.getBoundingClientRect(),c=i.coordsAtPos(s),p=i.documentTop;if(c)o==null&&(o=c.left-l.left),u=a<0?c.top:c.bottom;else{let f=i.viewState.lineBlockAt(s);o==null&&(o=Math.min(l.right-l.left,i.defaultCharacterWidth*(s-f.from))),u=(a<0?f.top:f.bottom)+p}let m=l.left+o,h=r??i.defaultLineHeight>>1;for(let f=0;;f+=10){let d=u+(h+f)*a,g=Pv(i,{x:m,y:d},!1,a);if(d<l.top||d>l.bottom||(a<0?g<s:g>s))return pt.cursor(g,t.assoc,void 0,o)}}function od(i,t,n){let r=i.state.facet(Cv).map(s=>s(i));for(;;){let s=!1;for(let a of r)a.between(n.from-1,n.from+1,(o,u,l)=>{n.from>o&&n.from<u&&(n=t.head>n.from?pt.cursor(o,1):pt.cursor(u,-1),s=!0)});if(!s)return n}}class wS{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let n=(r,s)=>{this.ignoreDuringComposition(s)||s.type=="keydown"&&this.keydown(t,s)||(this.mustFlushObserver(s)&&t.observer.forceFlush(),this.runCustomHandlers(s.type,t,s)?s.preventDefault():r(t,s))};for(let r in In){let s=In[r];t.contentDOM.addEventListener(r,a=>{og(t,a)&&n(s,a)},pf[r]),this.registeredEvents.push(r)}t.scrollDOM.addEventListener("mousedown",r=>{r.target==t.scrollDOM&&r.clientY>t.contentDOM.getBoundingClientRect().bottom&&n(In.mousedown,r)}),Ut.chrome&&Ut.chrome_version==102&&t.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=t.hasFocus,Ut.safari&&t.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,n){var r;let s;this.customHandlers=[];for(let a of n)if(s=(r=a.update(t).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:a.value,handlers:s});for(let o in s)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),t.contentDOM.addEventListener(o,u=>{og(t,u)&&this.runCustomHandlers(o,t,u)&&u.preventDefault()}))}}runCustomHandlers(t,n,r){for(let s of this.customHandlers){let a=s.handlers[t];if(a)try{if(a.call(s.plugin,r,n)||r.defaultPrevented)return!0}catch(o){Ei(n.state,o)}}return!1}runScrollHandlers(t,n){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let r of this.customHandlers){let s=r.handlers.scroll;if(s)try{s.call(r.plugin,n,t)}catch(a){Ei(t.state,a)}}}keydown(t,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Ut.android&&Ut.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return t.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return Ut.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((r=Rv.find(s=>s.keyCode==n.keyCode))&&!n.ctrlKey||xS.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=r||n,setTimeout(()=>this.flushIOSKey(t),250),!0):!1}flushIOSKey(t){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,va(t.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:Ut.safari&&!Ut.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(t){return t.type=="keydown"&&t.keyCode!=229}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Rv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],xS="dthko",Dv=[16,17,18,20,91,92,224,225];function Pu(i){return i*.7+8}class SS{constructor(t,n,r,s){this.view=t,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=zx(t.contentDOM);let a=t.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=t.state.facet(kr.allowMultipleSelections)&&jS(t,n),this.dragMove=CS(t,n),this.dragging=TS(t,n)&&Fv(n)==1?null:!1}start(t){this.dragging===!1&&(t.preventDefault(),this.select(t))}move(t){var n;if(t.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=t);let r=0,s=0,a=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};t.clientX<=a.left?r=-Pu(a.left-t.clientX):t.clientX>=a.right&&(r=Pu(t.clientX-a.right)),t.clientY<=a.top?s=-Pu(a.top-t.clientY):t.clientY>=a.bottom&&(s=Pu(t.clientY-a.bottom)),this.setScrollSpeed(r,s)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(t,n){this.scrollSpeed={x:t,y:n},t||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(t){let n=this.style.get(t,this.extend,this.multiple);(this.mustSelect||!n.eq(this.view.state.selection)||n.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function jS(i,t){let n=i.state.facet(gv);return n.length?n[0](t):Ut.mac?t.metaKey:t.ctrlKey}function CS(i,t){let n=i.state.facet(yv);return n.length?n[0](t):Ut.mac?!t.altKey:!t.ctrlKey}function TS(i,t){let{main:n}=i.state.selection;if(n.empty)return!1;let r=pc(i.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let a=0;a<s.length;a++){let o=s[a];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}function og(i,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target,r;n!=i.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=an.get(n))&&r.ignoreEvent(t))return!1;return!0}const In=Object.create(null),pf=Object.create(null),Lv=Ut.ie&&Ut.ie_version<15||Ut.ios&&Ut.webkit_version<604;function kS(i){let t=i.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{i.focus(),n.remove(),Nv(i,n.value)},50)}function Nv(i,t){let{state:n}=i,r,s=1,a=n.toText(t),o=a.lines==n.selection.ranges.length;if(mf!=null&&n.selection.ranges.every(l=>l.empty)&&mf==a.toString()){let l=-1;r=n.changeByRange(c=>{let p=n.doc.lineAt(c.from);if(p.from==l)return{range:c};l=p.from;let m=n.toText((o?a.line(s++).text:t)+n.lineBreak);return{changes:{from:p.from,insert:m},range:pt.cursor(c.from+m.length)}})}else o?r=n.changeByRange(l=>{let c=a.line(s++);return{changes:{from:l.from,to:l.to,insert:c.text},range:pt.cursor(l.from+c.length)}}):r=n.replaceSelection(a);i.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}In.keydown=(i,t)=>{i.inputState.setSelectionOrigin("select"),t.keyCode==27?i.inputState.lastEscPress=Date.now():Dv.indexOf(t.keyCode)<0&&(i.inputState.lastEscPress=0)};In.touchstart=(i,t)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};In.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};pf.touchstart=pf.touchmove={passive:!0};In.mousedown=(i,t)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of i.state.facet(vv))if(n=r(i,t),n)break;if(!n&&t.button==0&&(n=AS(i,t)),n){let r=i.root.activeElement!=i.contentDOM;i.inputState.startMouseSelection(new SS(i,t,n,r)),r&&i.observer.ignore(()=>nv(i.contentDOM)),i.inputState.mouseSelection&&i.inputState.mouseSelection.start(t)}};function ag(i,t,n,r){if(r==1)return pt.cursor(t,n);if(r==2)return fS(i.state,t,n);{let s=ai.find(i.docView,t),a=i.state.doc.lineAt(s?s.posAtEnd:t),o=s?s.posAtStart:a.from,u=s?s.posAtEnd:a.to;return u<i.state.doc.length&&u==a.to&&u++,pt.range(o,u)}}let Bv=(i,t)=>i>=t.top&&i<=t.bottom,lg=(i,t,n)=>Bv(t,n)&&i>=n.left&&i<=n.right;function ES(i,t,n,r){let s=ai.find(i.docView,t);if(!s)return 1;let a=t-s.posAtStart;if(a==0)return 1;if(a==s.length)return-1;let o=s.coordsAt(a,-1);if(o&&lg(n,r,o))return-1;let u=s.coordsAt(a,1);return u&&lg(n,r,u)?1:o&&Bv(r,o)?-1:1}function ug(i,t){let n=i.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:ES(i,n,t.clientX,t.clientY)}}const MS=Ut.ie&&Ut.ie_version<=11;let cg=null,hg=0,dg=0;function Fv(i){if(!MS)return i.detail;let t=cg,n=dg;return cg=i,dg=Date.now(),hg=!t||n>Date.now()-400&&Math.abs(t.clientX-i.clientX)<2&&Math.abs(t.clientY-i.clientY)<2?(hg+1)%3:1}function AS(i,t){let n=ug(i,t),r=Fv(t),s=i.state.selection;return{update(a){a.docChanged&&(n.pos=a.changes.mapPos(n.pos),s=s.map(a.changes))},get(a,o,u){let l=ug(i,a),c=ag(i,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let p=ag(i,n.pos,n.bias,r),m=Math.min(p.from,c.from),h=Math.max(p.to,c.to);c=m<c.from?pt.range(m,h):pt.range(h,m)}return o?s.replaceRange(s.main.extend(c.from,c.to)):u&&s.ranges.length>1&&s.ranges.some(p=>p.eq(c))?OS(s,c):u?s.addRange(c):pt.create([c])}}}function OS(i,t){for(let n=0;;n++)if(i.ranges[n].eq(t))return pt.create(i.ranges.slice(0,n).concat(i.ranges.slice(n+1)),i.mainIndex==n?0:i.mainIndex-(i.mainIndex>n?1:0))}In.dragstart=(i,t)=>{let{selection:{main:n}}=i.state,{mouseSelection:r}=i.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",i.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")};function fg(i,t,n,r){if(!n)return;let s=i.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:a}=i.inputState,o=r&&a&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,u={from:s,insert:n},l=i.state.changes(o?[o,u]:u);i.focus(),i.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"})}In.drop=(i,t)=>{if(!t.dataTransfer)return;if(i.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),s=0,a=()=>{++s==n.length&&fg(i,t,r.filter(o=>o!=null).join(i.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let u=new FileReader;u.onerror=a,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(r[o]=u.result),a()},u.readAsText(n[o])}}else fg(i,t,t.dataTransfer.getData("Text"),!0)};In.paste=(i,t)=>{if(i.state.readOnly)return t.preventDefault();i.observer.flush();let n=Lv?null:t.clipboardData;n?(Nv(i,n.getData("text/plain")),t.preventDefault()):kS(i)};function IS(i,t){let n=i.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout(()=>{r.remove(),i.focus()},50)}function PS(i){let t=[],n=[],r=!1;for(let s of i.selection.ranges)s.empty||(t.push(i.sliceDoc(s.from,s.to)),n.push(s));if(!t.length){let s=-1;for(let{from:a}of i.selection.ranges){let o=i.doc.lineAt(a);o.number>s&&(t.push(o.text),n.push({from:o.from,to:Math.min(i.doc.length,o.to+1)})),s=o.number}r=!0}return{text:t.join(i.lineBreak),ranges:n,linewise:r}}let mf=null;In.copy=In.cut=(i,t)=>{let{text:n,ranges:r,linewise:s}=PS(i.state);if(!n&&!s)return;mf=s?n:null;let a=Lv?null:t.clipboardData;a?(t.preventDefault(),a.clearData(),a.setData("text/plain",n)):IS(i,n),t.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const Uv=Ps.define();function Vv(i,t){let n=[];for(let r of i.facet(wv)){let s=r(i,t);s&&n.push(s)}return n?i.update({effects:n,annotations:Uv.of(!0)}):null}function Gv(i){setTimeout(()=>{let t=i.hasFocus;if(t!=i.inputState.notifiedFocused){let n=Vv(i.state,t);n?i.dispatch(n):i.update([])}},10)}In.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),Gv(i)};In.blur=i=>{i.observer.clearSelectionRange(),Gv(i)};In.compositionstart=In.compositionupdate=i=>{i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0)};In.compositionend=i=>{i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionFirstChange=null,Ut.chrome&&Ut.android&&i.observer.flushSoon(),setTimeout(()=>{i.inputState.composing<0&&i.docView.compositionDeco.size&&i.update([])},50)};In.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};In.beforeinput=(i,t)=>{var n;let r;if(Ut.chrome&&Ut.android&&(r=Rv.find(s=>s.inputType==t.inputType))&&(i.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>s+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}};const pg=["pre-wrap","normal","pre-line","break-spaces"];class RS{constructor(t){this.lineWrapping=t,this.doc=Or.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-t-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return pg.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let n=!1;for(let r=0;r<t.length;r++){let s=t[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(t,n,r,s,a){let o=pg.indexOf(t)>-1,u=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.lineLength=s,u){this.heightSamples={};for(let l=0;l<a.length;l++){let c=a[l];c<0?l++:this.heightSamples[Math.floor(c*10)]=!0}}return u}}class DS{constructor(t,n){this.from=t,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class xs{constructor(t,n,r,s,a){this.from=t,this.length=n,this.top=r,this.height=s,this.type=a}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new xs(this.from,this.length+t.length,this.top,this.height+t.height,n)}}var on=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(on||(on={}));const rc=.001;class ui{constructor(t,n,r=2){this.length=t,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t,n){this.height!=n&&(Math.abs(this.height-n)>rc&&(t.heightChanged=!0),this.height=n)}replace(t,n,r){return ui.of(r)}decomposeLeft(t,n){n.push(this)}decomposeRight(t,n){n.push(this)}applyChanges(t,n,r,s){let a=this,o=r.doc;for(let u=s.length-1;u>=0;u--){let{fromA:l,toA:c,fromB:p,toB:m}=s[u],h=a.lineAt(l,on.ByPosNoHeight,r.setDoc(n),0,0),f=h.to>=c?h:a.lineAt(c,on.ByPosNoHeight,r,0,0);for(m+=f.to-c,c=f.to;u>0&&h.from<=s[u-1].toA;)l=s[u-1].fromA,p=s[u-1].fromB,u--,l<h.from&&(h=a.lineAt(l,on.ByPosNoHeight,r,0,0));p+=h.from-l,l=h.from;let d=lp.build(r.setDoc(o),t,p,m);a=a.replace(l,c,d)}return a.updateHeight(r,0)}static empty(){return new Ci(0,0)}static of(t){if(t.length==1)return t[0];let n=0,r=t.length,s=0,a=0;for(;;)if(n==r)if(s>a*2){let u=t[n-1];u.break?t.splice(--n,1,u.left,null,u.right):t.splice(--n,1,u.left,u.right),r+=1+u.break,s-=u.size}else if(a>s*2){let u=t[r];u.break?t.splice(r,1,u.left,null,u.right):t.splice(r,1,u.left,u.right),r+=2+u.break,a-=u.size}else break;else if(s<a){let u=t[n++];u&&(s+=u.size)}else{let u=t[--r];u&&(a+=u.size)}let o=0;return t[n-1]==null?(o=1,n--):t[n]==null&&(o=1,r++),new LS(ui.of(t.slice(0,n)),o,ui.of(t.slice(r)))}}ui.prototype.size=1;class Hv extends ui{constructor(t,n,r){super(t,n),this.type=r}blockAt(t,n,r,s){return new xs(s,this.length,r,this.height,this.type)}lineAt(t,n,r,s,a){return this.blockAt(0,r,s,a)}forEachLine(t,n,r,s,a,o){t<=a+this.length&&n>=a&&o(this.blockAt(0,r,s,a))}updateHeight(t,n=0,r=!1,s){return s&&s.from<=n&&s.more&&this.setHeight(t,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ci extends Hv{constructor(t,n){super(t,n,Xr.Text),this.collapsed=0,this.widgetHeight=0}replace(t,n,r){let s=r[0];return r.length==1&&(s instanceof Ci||s instanceof Un&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Un?s=new Ci(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):ui.of(r)}updateHeight(t,n=0,r=!1,s){return s&&s.from<=n&&s.more?this.setHeight(t,s.heights[s.index++]):(r||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Un extends ui{constructor(t){super(t,0)}heightMetrics(t,n){let r=t.doc.lineAt(n).number,s=t.doc.lineAt(n+this.length).number,a=s-r+1,o,u=0;if(t.lineWrapping){let l=Math.min(this.height,t.lineHeight*a);o=l/a,u=(this.height-l)/(this.length-a-1)}else o=this.height/a;return{firstLine:r,lastLine:s,perLine:o,perChar:u}}blockAt(t,n,r,s){let{firstLine:a,lastLine:o,perLine:u,perChar:l}=this.heightMetrics(n,s);if(n.lineWrapping){let c=s+Math.round(Math.max(0,Math.min(1,(t-r)/this.height))*this.length),p=n.doc.lineAt(c),m=u+p.length*l,h=Math.max(r,t-m/2);return new xs(p.from,p.length,h,m,Xr.Text)}else{let c=Math.max(0,Math.min(o-a,Math.floor((t-r)/u))),{from:p,length:m}=n.doc.line(a+c);return new xs(p,m,r+u*c,u,Xr.Text)}}lineAt(t,n,r,s,a){if(n==on.ByHeight)return this.blockAt(t,r,s,a);if(n==on.ByPosNoHeight){let{from:f,to:d}=r.doc.lineAt(t);return new xs(f,d-f,0,0,Xr.Text)}let{firstLine:o,perLine:u,perChar:l}=this.heightMetrics(r,a),c=r.doc.lineAt(t),p=u+c.length*l,m=c.number-o,h=s+u*m+l*(c.from-a-m);return new xs(c.from,c.length,Math.max(s,Math.min(h,s+this.height-p)),p,Xr.Text)}forEachLine(t,n,r,s,a,o){t=Math.max(t,a),n=Math.min(n,a+this.length);let{firstLine:u,perLine:l,perChar:c}=this.heightMetrics(r,a);for(let p=t,m=s;p<=n;){let h=r.doc.lineAt(p);if(p==t){let d=h.number-u;m+=l*d+c*(t-a-d)}let f=l+c*h.length;o(new xs(h.from,h.length,m,f,Xr.Text)),m+=f,p=h.to+1}}replace(t,n,r){let s=this.length-n;if(s>0){let a=r[r.length-1];a instanceof Un?r[r.length-1]=new Un(a.length+s):r.push(null,new Un(s-1))}if(t>0){let a=r[0];a instanceof Un?r[0]=new Un(t+a.length):r.unshift(new Un(t-1),null)}return ui.of(r)}decomposeLeft(t,n){n.push(new Un(t-1),null)}decomposeRight(t,n){n.push(null,new Un(this.length-t-1))}updateHeight(t,n=0,r=!1,s){let a=n+this.length;if(s&&s.from<=n+this.length&&s.more){let o=[],u=Math.max(n,s.from),l=-1;for(s.from>n&&o.push(new Un(s.from-n-1).updateHeight(t,n));u<=a&&s.more;){let p=t.doc.lineAt(u).length;o.length&&o.push(null);let m=s.heights[s.index++];l==-1?l=m:Math.abs(m-l)>=rc&&(l=-2);let h=new Ci(p,m);h.outdated=!1,o.push(h),u+=p+1}u<=a&&o.push(null,new Un(a-u).updateHeight(t,u));let c=ui.of(o);return(l<0||Math.abs(c.height-this.height)>=rc||Math.abs(l-this.heightMetrics(t,n).perLine)>=rc)&&(t.heightChanged=!0),c}else(r||this.outdated)&&(this.setHeight(t,t.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class LS extends ui{constructor(t,n,r){super(t.length+n+r.length,t.height+r.height,n|(t.outdated||r.outdated?2:0)),this.left=t,this.right=r,this.size=t.size+r.size}get break(){return this.flags&1}blockAt(t,n,r,s){let a=r+this.left.height;return t<a?this.left.blockAt(t,n,r,s):this.right.blockAt(t,n,a,s+this.left.length+this.break)}lineAt(t,n,r,s,a){let o=s+this.left.height,u=a+this.left.length+this.break,l=n==on.ByHeight?t<o:t<u,c=l?this.left.lineAt(t,n,r,s,a):this.right.lineAt(t,n,r,o,u);if(this.break||(l?c.to<u:c.from>u))return c;let p=n==on.ByPosNoHeight?on.ByPosNoHeight:on.ByPos;return l?c.join(this.right.lineAt(u,p,r,o,u)):this.left.lineAt(u,p,r,s,a).join(c)}forEachLine(t,n,r,s,a,o){let u=s+this.left.height,l=a+this.left.length+this.break;if(this.break)t<l&&this.left.forEachLine(t,n,r,s,a,o),n>=l&&this.right.forEachLine(t,n,r,u,l,o);else{let c=this.lineAt(l,on.ByPos,r,s,a);t<c.from&&this.left.forEachLine(t,c.from-1,r,s,a,o),c.to>=t&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,u,l,o)}}replace(t,n,r){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(t,n,r),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-s,n-s,r));let a=[];t>0&&this.decomposeLeft(t,a);let o=a.length;for(let u of r)a.push(u);if(t>0&&mg(a,o-1),n<this.length){let u=a.length;this.decomposeRight(n,a),mg(a,u)}return ui.of(a)}decomposeLeft(t,n){let r=this.left.length;if(t<=r)return this.left.decomposeLeft(t,n);n.push(this.left),this.break&&(r++,t>=r&&n.push(null)),t>r&&this.right.decomposeLeft(t-r,n)}decomposeRight(t,n){let r=this.left.length,s=r+this.break;if(t>=s)return this.right.decomposeRight(t-s,n);t<r&&this.left.decomposeRight(t,n),this.break&&t<s&&n.push(null),n.push(this.right)}balanced(t,n){return t.size>2*n.size||n.size>2*t.size?ui.of(this.break?[t,null,n]:[t,n]):(this.left=t,this.right=n,this.height=t.height+n.height,this.outdated=t.outdated||n.outdated,this.size=t.size+n.size,this.length=t.length+this.break+n.length,this)}updateHeight(t,n=0,r=!1,s){let{left:a,right:o}=this,u=n+a.length+this.break,l=null;return s&&s.from<=n+a.length&&s.more?l=a=a.updateHeight(t,n,r,s):a.updateHeight(t,n,r),s&&s.from<=u+o.length&&s.more?l=o=o.updateHeight(t,u,r,s):o.updateHeight(t,u,r),l?this.balanced(a,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mg(i,t){let n,r;i[t]==null&&(n=i[t-1])instanceof Un&&(r=i[t+1])instanceof Un&&i.splice(t-1,3,new Un(n.length+1+r.length))}const NS=5;class lp{constructor(t,n){this.pos=t,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Ci?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Ci(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(t,n,r){if(t<n||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0;s<0&&(s=this.oracle.lineHeight);let a=n-t;r.block?this.addBlock(new Hv(a,s,r.type)):(a||s>=NS)&&this.addLineDeco(s,a)}else n>t&&this.span(t,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=n,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Ci(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,n){let r=new Un(n-t);return this.oracle.doc.lineAt(t).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Ci)return t;let n=new Ci(0,-1);return this.nodes.push(n),n}addBlock(t){this.enterLine(),t.type==Xr.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=Xr.WidgetBefore&&(this.covering=t)}addLineDeco(t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,t),this.writtenTo=this.pos=this.pos+n}finish(t){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Ci)&&!this.isCovered?this.nodes.push(new Ci(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=t;for(let s of this.nodes)s instanceof Ci&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(t,n,r,s){let a=new lp(r,t);return Ur.spans(n,r,s,a,0),a.finish(r)}}function BS(i,t,n){let r=new FS;return Ur.compare(i,t,n,r,0),r.changes}class FS{constructor(){this.changes=[]}compareRange(){}comparePoint(t,n,r,s){(t<n||r&&r.heightRelevant||s&&s.heightRelevant)&&uf(t,n,this.changes,5)}}function US(i,t){let n=i.getBoundingClientRect(),r=i.ownerDocument,s=r.defaultView||window,a=Math.max(0,n.left),o=Math.min(s.innerWidth,n.right),u=Math.max(0,n.top),l=Math.min(s.innerHeight,n.bottom);for(let c=i.parentNode;c&&c!=r.body;)if(c.nodeType==1){let p=c,m=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&m.overflow!="visible"){let h=p.getBoundingClientRect();a=Math.max(a,h.left),o=Math.min(o,h.right),u=Math.max(u,h.top),l=c==i.parentNode?h.bottom:Math.min(l,h.bottom)}c=m.position=="absolute"||m.position=="fixed"?p.offsetParent:p.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:a-n.left,right:Math.max(a,o)-n.left,top:u-(n.top+t),bottom:Math.max(u,l)-(n.top+t)}}function VS(i,t){let n=i.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class ad{constructor(t,n,r){this.from=t,this.to=n,this.size=r}static same(t,n){if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){let s=t[r],a=n[r];if(s.from!=a.from||s.to!=a.to||s.size!=a.size)return!1}return!0}draw(t){return Qt.replace({widget:new GS(this.size,t)}).range(this.from,this.to)}}class GS extends yo{constructor(t,n){super(),this.size=t,this.vertical=n}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class gg{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=yg,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=mn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=t.facet(ap).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new RS(n),this.stateDeco=t.facet(Il).filter(r=>typeof r!="function"),this.heightMap=ui.empty().applyChanges(this.stateDeco,Or.empty,this.heightOracle.setDoc(t.doc),[new as(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Qt.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let s=r?n.head:n.anchor;if(!t.some(({from:a,to:o})=>s>=a&&s<=o)){let{from:a,to:o}=this.lineBlockAt(s);t.push(new Ru(a,o))}}this.viewports=t.sort((r,s)=>r.from-s.from),this.scaler=this.heightMap.height<=7e6?yg:new WS(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(this.scaler.scale==1?t:gl(t,this.scaler))})}update(t,n=null){this.state=t.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Il).filter(c=>typeof c!="function");let s=t.changedRanges,a=as.extendWithRanges(s,BS(r,this.stateDeco,t?t.changes:En.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=o&&(t.flags|=2);let u=a.length?this.mapViewport(this.viewport,t.changes):this.viewport;(n&&(n.range.head<u.from||n.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,n));let l=!t.changes.empty||t.flags&2||u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(Sv)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let n=t.contentDOM,r=window.getComputedStyle(n),s=this.heightOracle,a=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?mn.RTL:mn.LTR;let o=this.heightOracle.mustRefreshForWrapping(a),u=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let c=0,p=0,m=parseInt(r.paddingTop)||0,h=parseInt(r.paddingBottom)||0;(this.paddingTop!=m||this.paddingBottom!=h)&&(this.paddingTop=m,this.paddingBottom=h,c|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,c|=8);let f=(this.printing?VS:US)(n,this.paddingTop),d=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let b=u.width;if((this.contentDOMWidth!=b||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=t.scrollDOM.clientHeight,c|=8),l){let j=t.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(j)&&(o=!0),o||s.lineWrapping&&Math.abs(b-this.contentDOMWidth)>s.charWidth){let{lineHeight:S,charWidth:w}=t.docView.measureTextSize();o=S>0&&s.refresh(a,S,w,b/w,j),o&&(t.docView.minWidth=0,c|=8)}d>0&&g>0?p=Math.max(d,g):d<0&&g<0&&(p=Math.min(d,g)),s.heightChanged=!1;for(let S of this.viewports){let w=S.from==this.viewport.from?j:t.docView.measureVisibleLineHeights(S);this.heightMap=(o?ui.empty().applyChanges(this.stateDeco,Or.empty,this.heightOracle,[new as(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new DS(S.from,w))}s.heightChanged&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(p,this.scrollTarget)),this.updateForViewport(),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,n){let r=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),s=this.heightMap,a=this.heightOracle,{visibleTop:o,visibleBottom:u}=this,l=new Ru(s.lineAt(o-r*1e3,on.ByHeight,a,0,0).from,s.lineAt(u+(1-r)*1e3,on.ByHeight,a,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=s.lineAt(c,on.ByPos,a,0,0),h;n.y=="center"?h=(m.top+m.bottom)/2-p/2:n.y=="start"||n.y=="nearest"&&c<l.from?h=m.top:h=m.bottom-p,l=new Ru(s.lineAt(h-1e3/2,on.ByHeight,a,0,0).from,s.lineAt(h+p+1e3/2,on.ByHeight,a,0,0).to)}}return l}mapViewport(t,n){let r=n.mapPos(t.from,-1),s=n.mapPos(t.to,1);return new Ru(this.heightMap.lineAt(r,on.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,on.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:n},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(t,on.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(n,on.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:u}=this;return(t==0||s<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||a>=u+Math.max(10,Math.min(r,250)))&&s>o-2*1e3&&a<u+2*1e3}mapLineGaps(t,n){if(!t.length||n.empty)return t;let r=[];for(let s of t)n.touchesRange(s.from,s.to)||r.push(new ad(n.mapPos(s.from),n.mapPos(s.to),s.size));return r}ensureLineGaps(t,n){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,a=s>>1,o=s<<1;if(this.defaultTextDirection!=mn.LTR&&!r)return[];let u=[],l=(c,p,m,h)=>{if(p-c<a)return;let f=this.state.selection.main,d=[f.from];f.empty||d.push(f.to);for(let y of d)if(y>c&&y<p){l(c,y-10,m,h),l(y+10,p,m,h);return}let g=zS(t,y=>y.from>=m.from&&y.to<=m.to&&Math.abs(y.from-c)<a&&Math.abs(y.to-p)<a&&!d.some(b=>y.from<b&&y.to>b));if(!g){if(p<m.to&&n&&r&&n.visibleRanges.some(y=>y.from<=p&&y.to>=p)){let y=n.moveToLineBoundary(pt.cursor(p),!1,!0).head;y>c&&(p=y)}g=new ad(c,p,this.gapSize(m,c,p,h))}u.push(g)};for(let c of this.viewportLines){if(c.length<o)continue;let p=HS(c.from,c.to,this.stateDeco);if(p.total<o)continue;let m=this.scrollTarget?this.scrollTarget.range.head:null,h,f;if(r){let d=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,y;if(m!=null){let b=Lu(p,m),x=((this.visibleBottom-this.visibleTop)/2+d)/c.height;g=b-x,y=b+x}else g=(this.visibleTop-c.top-d)/c.height,y=(this.visibleBottom-c.top+d)/c.height;h=Du(p,g),f=Du(p,y)}else{let d=p.total*this.heightOracle.charWidth,g=s*this.heightOracle.charWidth,y,b;if(m!=null){let x=Lu(p,m),j=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/d;y=x-j,b=x+j}else y=(this.pixelViewport.left-g)/d,b=(this.pixelViewport.right+g)/d;h=Du(p,y),f=Du(p,b)}h>c.from&&l(c.from,h,c,p),f<c.to&&l(f,c.to,c,p)}return u}gapSize(t,n,r,s){let a=Lu(s,r)-Lu(s,n);return this.heightOracle.lineWrapping?t.height*a:s.total*this.heightOracle.charWidth*a}updateLineGaps(t){ad.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=Qt.set(t.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];Ur.spans(t,this.viewport.from,this.viewport.to,{span(s,a){n.push({from:s,to:a})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((s,a)=>s.from!=n[a].from||s.to!=n[a].to);return this.visibleRanges=n,r?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(n=>n.from<=t&&n.to>=t)||gl(this.heightMap.lineAt(t,on.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return gl(this.heightMap.lineAt(this.scaler.fromDOM(t),on.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(t){return gl(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ru{constructor(t,n){this.from=t,this.to=n}}function HS(i,t,n){let r=[],s=i,a=0;return Ur.spans(n,i,t,{span(){},point(o,u){o>s&&(r.push({from:s,to:o}),a+=o-s),s=u}},20),s<t&&(r.push({from:s,to:t}),a+=t-s),{total:a,ranges:r}}function Du({total:i,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(i*n);for(let s=0;;s++){let{from:a,to:o}=t[s],u=o-a;if(r<=u)return a+r;r-=u}}function Lu(i,t){let n=0;for(let{from:r,to:s}of i.ranges){if(t<=s){n+=t-r;break}n+=s-r}return n/i.total}function zS(i,t){for(let n of i)if(t(n))return n}const yg={toDOM(i){return i},fromDOM(i){return i},scale:1};class WS{constructor(t,n,r){let s=0,a=0,o=0;this.viewports=r.map(({from:u,to:l})=>{let c=n.lineAt(u,on.ByPos,t,0,0).top,p=n.lineAt(l,on.ByPos,t,0,0).bottom;return s+=p-c,{from:u,to:l,top:c,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let u of this.viewports)u.domTop=o+(u.top-a)*this.scale,o=u.domBottom=u.domTop+(u.bottom-u.top),a=u.bottom}toDOM(t){for(let n=0,r=0,s=0;;n++){let a=n<this.viewports.length?this.viewports[n]:null;if(!a||t<a.top)return s+(t-r)*this.scale;if(t<=a.bottom)return a.domTop+(t-a.top);r=a.bottom,s=a.domBottom}}fromDOM(t){for(let n=0,r=0,s=0;;n++){let a=n<this.viewports.length?this.viewports[n]:null;if(!a||t<a.domTop)return r+(t-s)/this.scale;if(t<=a.domBottom)return a.top+(t-a.domTop);r=a.bottom,s=a.domBottom}}}function gl(i,t){if(t.scale==1)return i;let n=t.toDOM(i.top),r=t.toDOM(i.bottom);return new xs(i.from,i.length,n,r-n,Array.isArray(i.type)?i.type.map(s=>gl(s,t)):i.type)}const Nu=Gt.define({combine:i=>i.join(" ")}),gf=Gt.define({combine:i=>i.indexOf(!0)>-1}),yf=uo.newName(),zv=uo.newName(),Wv=uo.newName(),qv={"&light":"."+zv,"&dark":"."+Wv};function vf(i,t,n){return new uo(t,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return i;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):i+" "+r}})}const qS=vf("."+yf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},qv);class $S{constructor(t,n,r,s){this.typeOver=s,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=t.docView.domBoundsAround(n,r,0))){let u=a||o?[]:YS(t),l=new Av(u,t.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=KS(u,this.bounds.from)}else{let u=t.observer.selectionRange,l=a&&a.node==u.focusNode&&a.offset==u.focusOffset||!Ea(t.contentDOM,u.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(u.focusNode,u.focusOffset),c=o&&o.node==u.anchorNode&&o.offset==u.anchorOffset||!Ea(t.contentDOM,u.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(u.anchorNode,u.anchorOffset);this.newSel=pt.single(c,l)}}}function $v(i,t){let n,{newSel:r}=t,s=i.state.selection.main;if(t.bounds){let{from:a,to:o}=t.bounds,u=s.from,l=null;(i.inputState.lastKeyCode===8&&i.inputState.lastKeyTime>Date.now()-100||Ut.android&&t.text.length<o-a)&&(u=s.to,l="end");let c=XS(i.state.doc.sliceString(a,o,Js),t.text,u-a,l);c&&(Ut.chrome&&i.inputState.lastKeyCode==13&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==Js+Js&&c.toB--,n={from:a+c.from,to:a+c.toA,insert:Or.of(t.text.slice(c.from,c.toB).split(Js))})}else r&&(!i.hasFocus&&i.state.facet(hh)||r.main.eq(s))&&(r=null);if(!n&&!r)return!1;if(!n&&t.typeOver&&!s.empty&&r&&r.main.empty?n={from:s.from,to:s.to,insert:i.state.doc.slice(s.from,s.to)}:n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:i.state.doc.slice(s.from,n.from).append(n.insert).append(i.state.doc.slice(n.to,s.to))}:(Ut.mac||Ut.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=pt.single(r.main.anchor-1,r.main.head-1)),n={from:s.from,to:s.to,insert:Or.of([" "])}):Ut.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&i.lineWrapping&&(r&&(r=pt.single(r.main.anchor-1,r.main.head-1)),n={from:s.from,to:s.to,insert:Or.of([" "])}),n){let a=i.state;if(Ut.ios&&i.inputState.flushIOSKey(i)||Ut.android&&(n.from==s.from&&n.to==s.to&&n.insert.length==1&&n.insert.lines==2&&va(i.contentDOM,"Enter",13)||n.from==s.from-1&&n.to==s.to&&n.insert.length==0&&va(i.contentDOM,"Backspace",8)||n.from==s.from&&n.to==s.to+1&&n.insert.length==0&&va(i.contentDOM,"Delete",46)))return!0;let o=n.insert.toString();if(i.state.facet(_v).some(c=>c(i,n.from,n.to,o)))return!0;i.inputState.composing>=0&&i.inputState.composing++;let u;if(n.from>=s.from&&n.to<=s.to&&n.to-n.from>=(s.to-s.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&i.inputState.composing<0){let c=s.from<n.from?a.sliceDoc(s.from,n.from):"",p=s.to>n.to?a.sliceDoc(n.to,s.to):"";u=a.replaceSelection(i.state.toText(c+n.insert.sliceString(0,void 0,i.state.lineBreak)+p))}else{let c=a.changes(n),p=r&&!a.selection.main.eq(r.main)&&r.main.to<=c.newLength?r.main:void 0;if(a.selection.ranges.length>1&&i.inputState.composing>=0&&n.to<=s.to&&n.to>=s.to-10){let m=i.state.sliceDoc(n.from,n.to),h=Ov(i)||i.state.doc.lineAt(s.head),f=s.to-n.to,d=s.to-s.from;u=a.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:c,range:p||g.map(c)};let y=g.to-f,b=y-m.length;if(g.to-g.from!=d||i.state.sliceDoc(b,y)!=m||h&&g.to>=h.from&&g.from<=h.to)return{range:g};let x=a.changes({from:b,to:y,insert:n.insert}),j=g.to-s.to;return{changes:x,range:p?pt.range(Math.max(0,p.anchor+j),Math.max(0,p.head+j)):g.map(x)}})}else u={changes:c,selection:p&&a.selection.replaceRange(p)}}let l="input.type";return i.composing&&(l+=".compose",i.inputState.compositionFirstChange&&(l+=".start",i.inputState.compositionFirstChange=!1)),i.dispatch(u,{scrollIntoView:!0,userEvent:l}),!0}else if(r&&!r.main.eq(s)){let a=!1,o="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(a=!0),o=i.inputState.lastSelectionOrigin),i.dispatch({selection:r,scrollIntoView:a,userEvent:o}),!0}else return!1}function XS(i,t,n,r){let s=Math.min(i.length,t.length),a=0;for(;a<s&&i.charCodeAt(a)==t.charCodeAt(a);)a++;if(a==s&&i.length==t.length)return null;let o=i.length,u=t.length;for(;o>0&&u>0&&i.charCodeAt(o-1)==t.charCodeAt(u-1);)o--,u--;if(r=="end"){let l=Math.max(0,a-Math.min(o,u));n-=o+l-a}if(o<a&&i.length<t.length){let l=n<=a&&n>=o?a-n:0;a-=l,u=a+(u-o),o=a}else if(u<a){let l=n<=a&&n>=u?a-n:0;a-=l,o=a+(o-u),u=a}return{from:a,toA:o,toB:u}}function YS(i){let t=[];if(i.root.activeElement!=i.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:a}=i.observer.selectionRange;return n&&(t.push(new Qm(n,r)),(s!=n||a!=r)&&t.push(new Qm(s,a))),t}function KS(i,t){if(i.length==0)return null;let n=i[0].pos,r=i.length==2?i[1].pos:n;return n>-1&&r>-1?pt.single(n+t,r+t):null}const JS={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ld=Ut.ie&&Ut.ie_version<=11;class QS{constructor(t){this.view=t,this.active=!1,this.selectionRange=new Wx,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Ut.ie&&Ut.ie_version<=11||Ut.ios&&t.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),ld&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(t.contentDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runScrollHandlers(this.view,t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((n,r)=>n!=t[r]))){this.gapIntersection.disconnect();for(let n of t)this.gapIntersection.observe(n);this.gaps=t}}onSelectionChange(t){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(hh)?r.root.activeElement!=this.dom:!tc(r.dom,s))return;let a=s.anchorNode&&r.docView.nearest(s.anchorNode);if(a&&a.ignoreEvent(t)){n||(this.selectionChanged=!1);return}(Ut.ie&&Ut.ie_version<=11||Ut.android&&Ut.chrome)&&!r.state.selection.main.empty&&s.focusNode&&mc(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,n=Ut.safari&&t.root.nodeType==11&&Vx(this.dom.ownerDocument)==this.dom&&ZS(this.view)||pc(t.root);if(!n||this.selectionRange.eq(n))return!1;let r=tc(this.dom,n);return r&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&$x(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(t,n){this.selectionRange.set(t.node,t.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&t<this.scrollTargets.length&&this.scrollTargets[t]==r?t++:n||(n=this.scrollTargets.slice(0,t)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(t<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,t)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,JS),ld&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ld&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,n){var r;if(!this.delayedAndroidKey){let s=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),!this.flush()&&a.force&&va(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let a of this.observer.takeRecords())t.push(a);t.length&&(this.queue=[]);let n=-1,r=-1,s=!1;for(let a of t){let o=this.readMutation(a);o&&(o.typeOver&&(s=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:s}}readChange(){let{from:t,to:n,typeOver:r}=this.processRecords(),s=this.selectionChanged&&tc(this.dom,this.selectionRange);return t<0&&!s?null:(t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new $S(this.view,t,n,r))}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let r=this.view.state,s=$v(this.view,n);return this.view.state==r&&this.view.update([]),s}readMutation(t){let n=this.view.docView.nearest(t.target);if(!n||n.ignoreMutation(t))return null;if(n.markDirty(t.type=="attributes"),t.type=="attributes"&&(n.dirty|=4),t.type=="childList"){let r=vg(n,t.previousSibling||t.target.previousSibling,-1),s=vg(n,t.nextSibling||t.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,n,r,s;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect(),(s=this.resizeContent)===null||s===void 0||s.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function vg(i,t,n){for(;t;){let r=an.get(t);if(r&&r.parent==i)return r;let s=t.parentNode;t=s!=i.dom?s:n>0?t.nextSibling:t.previousSibling}return null}function ZS(i){let t=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}if(i.contentDOM.addEventListener("beforeinput",n,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,s=t.startOffset,a=t.endContainer,o=t.endOffset,u=i.docView.domAtPos(i.state.selection.main.anchor);return mc(u.node,u.offset,a,o)&&([r,s,a,o]=[a,o,r,s]),{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o}}class Wt{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=t.root||qx(t.parent)||document,this.viewState=new gg(t.state||kr.create(t)),this.plugins=this.state.facet(pl).map(n=>new id(n));for(let n of this.plugins)n.update(this);this.observer=new QS(this),this.inputState=new wS(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Zm(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(t.length==1&&t[0]instanceof On?t[0]:this.state.update(...t))}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,s,a=this.state;for(let h of t){if(h.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=h.state}if(this.destroyed){this.viewState.state=a;return}let o=this.hasFocus,u=0,l=null;t.some(h=>h.annotation(Uv))?(this.inputState.notifiedFocused=o,u=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=Vv(a,o),l||(u=1));let c=this.observer.delayedAndroidKey,p=null;if(c?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(p=null)):this.observer.clear(),a.facet(kr.phrases)!=this.state.facet(kr.phrases))return this.setState(a);s=vc.create(this,a,t),s.flags|=u;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let h of t){if(m&&(m=m.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;m=new yc(f.empty?f:pt.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Km)&&(m=f.value)}this.viewState.update(s,m),this.bidiCache=bc.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),n=this.docView.update(s),this.state.facet(ml)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Nu)!=s.state.facet(Nu)&&(this.viewState.mustMeasureContent=!0),(n||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!s.empty)for(let h of this.state.facet(cf))h(s);(l||p)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),p&&!$v(this,p)&&c.force&&va(this.contentDOM,c.key,c.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new gg(t),this.plugins=t.facet(pl).map(r=>new id(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new Zm(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(t){let n=t.startState.facet(pl),r=t.state.facet(pl);if(n!=r){let s=[];for(let a of r){let o=n.indexOf(a);if(o<0)s.push(new id(a));else{let u=this.plugins[o];u.mustUpdate=t,s.push(u)}}for(let a of this.plugins)a.mustUpdate!=t&&a.destroy(this);this.plugins=s,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let s of this.plugins)s.mustUpdate=t;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let n=null,{scrollHeight:r,scrollTop:s,clientHeight:a}=this.scrollDOM,o=s>r-a-4?r:s;try{for(let u=0;;u++){this.updateState=1;let l=this.viewport,c=this.viewState.lineBlockAtHeight(o),p=this.viewState.measure(this);if(!p&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(u>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let m=[];p&4||([this.measureRequests,m]=[m,this.measureRequests]);let h=m.map(y=>{try{return y.read(this)}catch(b){return Ei(this.state,b),bg}}),f=vc.create(this,this.state,[]),d=!1,g=!1;f.flags|=p,n?n.flags|=p:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f));for(let y=0;y<m.length;y++)if(h[y]!=bg)try{let b=m[y];b.write&&b.write(h[y],this)}catch(b){Ei(this.state,b)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,g=!0;else{let y=this.viewState.lineBlockAt(c.from).top-c.top;(y>1||y<-1)&&(this.scrollDOM.scrollTop+=y,g=!0)}if(d&&this.docView.updateSelection(!0),this.viewport.from==l.from&&this.viewport.to==l.to&&!g&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let u of this.state.facet(cf))u(n)}get themeClasses(){return yf+" "+(this.state.facet(gf)?Wv:zv)+" "+this.state.facet(Nu)}updateAttrs(){let t=_g(this,jv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(hh)?"true":"false",class:"cm-content",style:`${Ut.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),_g(this,ap,n);let r=this.observer.ignore(()=>{let s=lf(this.contentDOM,this.contentAttrs,n),a=lf(this.dom,this.editorAttrs,t);return s||a});return this.editorAttrs=t,this.contentAttrs=n,r}showAnnouncements(t){let n=!0;for(let r of t)for(let s of r.effects)if(s.is(Wt.announce)){n&&(this.announceDOM.textContent=""),n=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(ml),uo.mount(this.root,this.styleModules.concat(qS).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===t.key){this.measureRequests[n]=t;return}}this.measureRequests.push(t)}}plugin(t){let n=this.pluginMap.get(t);return(n===void 0||n&&n.spec!=t)&&this.pluginMap.set(t,n=this.plugins.find(r=>r.spec==t)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,n,r){return od(this,t,sg(this,t,n,r))}moveByGroup(t,n){return od(this,t,sg(this,t,n,r=>bS(this,t.head,r)))}moveToLineBoundary(t,n,r=!0){return vS(this,t,n,r)}moveVertically(t,n,r){return od(this,t,_S(this,t,n,r))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,n=0){return this.docView.posFromDOM(t,n)}posAtCoords(t,n=!0){return this.readMeasured(),Pv(this,t,n)}coordsAtPos(t,n=1){this.readMeasured();let r=this.docView.coordsAt(t,n);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(t),a=this.bidiSpans(s),o=a[ba.find(a,t-s.from,-1,n)];return np(r,o.dir==mn.LTR==n>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(xv)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>e2)return Ev(t.length);let n=this.textDirectionAt(t.from);for(let s of this.bidiCache)if(s.from==t.from&&s.dir==n)return s.order;let r=iS(t.text,n);return this.bidiCache.push(new bc(t.from,t.to,n,r)),r}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||Ut.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{nv(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,n={}){return Km.of(new yc(typeof t=="number"?pt.cursor(t):t,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(t){return Tn.define(()=>({}),{eventHandlers:t})}static theme(t,n){let r=uo.newName(),s=[Nu.of(r),ml.of(vf(`.${r}`,t))];return n&&n.dark&&s.push(gf.of(!0)),s}static baseTheme(t){return Ga.lowest(ml.of(vf("."+yf,t,qv)))}static findFromDOM(t){var n;let r=t.querySelector(".cm-content"),s=r&&an.get(r)||an.get(t);return((n=s==null?void 0:s.rootView)===null||n===void 0?void 0:n.view)||null}}Wt.styleModule=ml;Wt.inputHandler=_v;Wt.focusChangeEffect=wv;Wt.perLineTextDirection=xv;Wt.exceptionSink=bv;Wt.updateListener=cf;Wt.editable=hh;Wt.mouseSelectionStyle=vv;Wt.dragMovesSelection=yv;Wt.clickAddsSelectionRange=gv;Wt.decorations=Il;Wt.atomicRanges=Cv;Wt.scrollMargins=Tv;Wt.darkTheme=gf;Wt.contentAttributes=ap;Wt.editorAttributes=jv;Wt.lineWrapping=Wt.contentAttributes.of({class:"cm-lineWrapping"});Wt.announce=yr.define();const e2=4096,bg={};class bc{constructor(t,n,r,s){this.from=t,this.to=n,this.dir=r,this.order=s}static update(t,n){if(n.empty)return t;let r=[],s=t.length?t[t.length-1].dir:mn.LTR;for(let a=Math.max(0,t.length-10);a<t.length;a++){let o=t[a];o.dir==s&&!n.touchesRange(o.from,o.to)&&r.push(new bc(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return r}}function _g(i,t,n){for(let r=i.state.facet(t),s=r.length-1;s>=0;s--){let a=r[s],o=typeof a=="function"?a(i):a;o&&af(o,n)}return n}const t2=Ut.mac?"mac":Ut.windows?"win":Ut.linux?"linux":"key";function r2(i,t){const n=i.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let s,a,o,u;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))u=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))a=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))t=="mac"?u=!0:a=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(r="Alt-"+r),a&&(r="Ctrl-"+r),u&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Bu(i,t,n){return t.altKey&&(i="Alt-"+i),t.ctrlKey&&(i="Ctrl-"+i),t.metaKey&&(i="Meta-"+i),n!==!1&&t.shiftKey&&(i="Shift-"+i),i}const n2=Ga.default(Wt.domEventHandlers({keydown(i,t){return Yv(Xv(t.state),i,t,"editor")}})),up=Gt.define({enables:n2}),wg=new WeakMap;function Xv(i){let t=i.facet(up),n=wg.get(t);return n||wg.set(t,n=o2(t.reduce((r,s)=>r.concat(s),[]))),n}function i2(i,t,n){return Yv(Xv(i.state),t,i,n)}let Ws=null;const s2=4e3;function o2(i,t=t2){let n=Object.create(null),r=Object.create(null),s=(o,u)=>{let l=r[o];if(l==null)r[o]=u;else if(l!=u)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},a=(o,u,l,c)=>{var p,m;let h=n[o]||(n[o]=Object.create(null)),f=u.split(/ (?!$)/).map(y=>r2(y,t));for(let y=1;y<f.length;y++){let b=f.slice(0,y).join(" ");s(b,!0),h[b]||(h[b]={preventDefault:!0,run:[x=>{let j=Ws={view:x,prefix:b,scope:o};return setTimeout(()=>{Ws==j&&(Ws=null)},s2),!0}]})}let d=f.join(" ");s(d,!1);let g=h[d]||(h[d]={preventDefault:!1,run:((m=(p=h._any)===null||p===void 0?void 0:p.run)===null||m===void 0?void 0:m.slice())||[]});l&&g.run.push(l),c&&(g.preventDefault=!0)};for(let o of i){let u=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of u){let p=n[c]||(n[c]=Object.create(null));p._any||(p._any={preventDefault:!1,run:[]});for(let m in p)p[m].run.push(o.any)}let l=o[t]||o.key;if(l)for(let c of u)a(c,l,o.run,o.preventDefault),o.shift&&a(c,"Shift-"+l,o.shift,o.preventDefault)}return n}function Yv(i,t,n,r){let s=Ux(t),a=Vn(s,0),o=Ri(a)==s.length&&s!=" ",u="",l=!1;Ws&&Ws.view==n&&Ws.scope==r&&(u=Ws.prefix+" ",(l=Dv.indexOf(t.keyCode)<0)&&(Ws=null));let c=new Set,p=d=>{if(d){for(let g of d.run)if(!c.has(g)&&(c.add(g),g(n,t)))return!0;d.preventDefault&&(l=!0)}return!1},m=i[r],h,f;if(m){if(p(m[u+Bu(s,t,!o)]))return!0;if(o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(Ut.windows&&t.ctrlKey&&t.altKey)&&(h=co[t.keyCode])&&h!=s){if(p(m[u+Bu(h,t,!0)]))return!0;if(t.shiftKey&&(f=Ml[t.keyCode])!=s&&f!=h&&p(m[u+Bu(f,t,!1)]))return!0}else if(o&&t.shiftKey&&p(m[u+Bu(s,t,!0)]))return!0;if(p(m._any))return!0}return l}class ru{constructor(t,n,r,s,a){this.className=t,this.left=n,this.top=r,this.width=s,this.height=a}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,n){return n.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,n,r){if(r.empty){let s=t.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let a=Kv(t);return[new ru(n,s.left-a.left,s.top-a.top,null,s.bottom-s.top)]}else return a2(t,n,r)}}function Kv(i){let t=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==mn.LTR?t.left:t.right-i.scrollDOM.clientWidth)-i.scrollDOM.scrollLeft,top:t.top-i.scrollDOM.scrollTop}}function xg(i,t,n){let r=pt.cursor(t);return{from:Math.max(n.from,i.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,i.moveToLineBoundary(r,!0,!0).from),type:Xr.Text}}function Sg(i,t){let n=i.lineBlockAt(t);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>t||r.to==t&&(r.to==n.to||r.type==Xr.Text))return r}return n}function a2(i,t,n){if(n.to<=i.viewport.from||n.from>=i.viewport.to)return[];let r=Math.max(n.from,i.viewport.from),s=Math.min(n.to,i.viewport.to),a=i.textDirection==mn.LTR,o=i.contentDOM,u=o.getBoundingClientRect(),l=Kv(i),c=window.getComputedStyle(o.firstChild),p=u.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),m=u.right-parseInt(c.paddingRight),h=Sg(i,r),f=Sg(i,s),d=h.type==Xr.Text?h:null,g=f.type==Xr.Text?f:null;if(i.lineWrapping&&(d&&(d=xg(i,r,d)),g&&(g=xg(i,s,g))),d&&g&&d.from==g.from)return b(x(n.from,n.to,d));{let S=d?x(n.from,null,d):j(h,!1),w=g?x(null,n.to,g):j(f,!0),_=[];return(d||h).to<(g||f).from-1?_.push(y(p,S.bottom,m,w.top)):S.bottom<w.top&&i.elementAtHeight((S.bottom+w.top)/2).type==Xr.Text&&(S.bottom=w.top=(S.bottom+w.top)/2),b(S).concat(_).concat(b(w))}function y(S,w,_,M){return new ru(t,S-l.left,w-l.top-.01,_-S,M-w+.01)}function b({top:S,bottom:w,horizontal:_}){let M=[];for(let I=0;I<_.length;I+=2)M.push(y(_[I],S,_[I+1],w));return M}function x(S,w,_){let M=1e9,I=-1e9,P=[];function R(F,z,K,Q,te){let Z=i.coordsAtPos(F,F==_.to?-2:2),q=i.coordsAtPos(K,K==_.from?2:-2);M=Math.min(Z.top,q.top,M),I=Math.max(Z.bottom,q.bottom,I),te==mn.LTR?P.push(a&&z?p:Z.left,a&&Q?m:q.right):P.push(!a&&Q?p:q.left,!a&&z?m:Z.right)}let D=S??_.from,U=w??_.to;for(let F of i.visibleRanges)if(F.to>D&&F.from<U)for(let z=Math.max(F.from,D),K=Math.min(F.to,U);;){let Q=i.state.doc.lineAt(z);for(let te of i.bidiSpans(Q)){let Z=te.from+Q.from,q=te.to+Q.from;if(Z>=K)break;q>z&&R(Math.max(Z,z),S==null&&Z<=D,Math.min(q,K),w==null&&q>=U,te.dir)}if(z=Q.to+1,z>=K)break}return P.length==0&&R(D,S==null,U,w==null,i.textDirection),{top:M,bottom:I,horizontal:P}}function j(S,w){let _=u.top+(w?S.top:S.bottom);return{top:_,bottom:_,horizontal:[]}}}function l2(i,t){return i.constructor==t.constructor&&i.eq(t)}class u2{constructor(t,n){this.view=t,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,t)}update(t){t.startState.facet(nc)!=t.state.facet(nc)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&t.view.requestMeasure(this.measureReq)}setOrder(t){let n=0,r=t.facet(nc);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(t){if(t.length!=this.drawn.length||t.some((n,r)=>!l2(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let s of t)s.update&&n&&s.constructor&&this.drawn[r].constructor&&s.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const nc=Gt.define();function Jv(i){return[Tn.define(t=>new u2(t,i)),nc.of(i)]}const Qv=!Ut.ios,Pl=Gt.define({combine(i){return ps(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,n)=>Math.min(t,n),drawRangeCursor:(t,n)=>t||n})}});function c2(i={}){return[Pl.of(i),h2,d2,f2,Sv.of(!0)]}function Zv(i){return i.startState.facet(Pl)!=i.state.facet(Pl)}const h2=Jv({above:!0,markers(i){let{state:t}=i,n=t.facet(Pl),r=[];for(let s of t.selection.ranges){let a=s==t.selection.main;if(s.empty?!a||Qv:n.drawRangeCursor){let o=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=s.empty?s:pt.cursor(s.head,s.head>s.anchor?-1:1);for(let l of ru.forRange(i,o,u))r.push(l)}}return r},update(i,t){i.transactions.some(r=>r.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=Zv(i);return n&&jg(i.state,t),i.docChanged||i.selectionSet||n},mount(i,t){jg(t.state,i)},class:"cm-cursorLayer"});function jg(i,t){t.style.animationDuration=i.facet(Pl).cursorBlinkRate+"ms"}const d2=Jv({above:!1,markers(i){return i.state.selection.ranges.map(t=>t.empty?[]:ru.forRange(i,"cm-selectionBackground",t)).reduce((t,n)=>t.concat(n))},update(i,t){return i.docChanged||i.selectionSet||i.viewportChanged||Zv(i)},class:"cm-selectionLayer"}),eb={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Qv&&(eb[".cm-line"].caretColor="transparent !important");const f2=Ga.highest(Wt.theme(eb)),tb=yr.define({map(i,t){return i==null?null:t.mapPos(i)}}),yl=zn.define({create(){return null},update(i,t){return i!=null&&(i=t.changes.mapPos(i)),t.effects.reduce((n,r)=>r.is(tb)?r.value:n,i)}}),p2=Tn.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var t;let n=i.state.field(yl);n==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(yl)!=n||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let i=this.view.state.field(yl),t=i!=null&&this.view.coordsAtPos(i);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(i){this.cursor&&(i?(this.cursor.style.left=i.left+"px",this.cursor.style.top=i.top+"px",this.cursor.style.height=i.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(yl)!=i&&this.view.dispatch({effects:tb.of(i)})}},{eventHandlers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function m2(){return[yl,p2]}function Cg(i,t,n,r,s){t.lastIndex=0;for(let a=i.iterRange(n,r),o=n,u;!a.next().done;o+=a.value.length)if(!a.lineBreak)for(;u=t.exec(a.value);)s(o+u.index,u)}function g2(i,t){let n=i.visibleRanges;if(n.length==1&&n[0].from==i.viewport.from&&n[0].to==i.viewport.to)return n;let r=[];for(let{from:s,to:a}of n)s=Math.max(i.state.doc.lineAt(s).from,s-t),a=Math.min(i.state.doc.lineAt(a).to,a+t),r.length&&r[r.length-1].to>=s?r[r.length-1].to=a:r.push({from:s,to:a});return r}class y2{constructor(t){const{regexp:n,decoration:r,decorate:s,boundary:a,maxLength:o=1e3}=t;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,s)this.addMatch=(u,l,c,p)=>s(p,c,c+u[0].length,u,l);else if(typeof r=="function")this.addMatch=(u,l,c,p)=>{let m=r(u,l,c);m&&p(c,c+u[0].length,m)};else if(r)this.addMatch=(u,l,c,p)=>p(c,c+u[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=o}createDeco(t){let n=new lo,r=n.add.bind(n);for(let{from:s,to:a}of g2(t,this.maxLength))Cg(t.state.doc,this.regexp,s,a,(o,u)=>this.addMatch(u,t,o,r));return n.finish()}updateDeco(t,n){let r=1e9,s=-1;return t.docChanged&&t.changes.iterChanges((a,o,u,l)=>{l>t.view.viewport.from&&u<t.view.viewport.to&&(r=Math.min(u,r),s=Math.max(l,s))}),t.viewportChanged||s-r>1e3?this.createDeco(t.view):s>-1?this.updateRange(t.view,n.map(t.changes),r,s):n}updateRange(t,n,r,s){for(let a of t.visibleRanges){let o=Math.max(a.from,r),u=Math.min(a.to,s);if(u>o){let l=t.state.doc.lineAt(o),c=l.to<u?t.state.doc.lineAt(u):l,p=Math.max(a.from,l.from),m=Math.min(a.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){p=o;break}for(;u<c.to;u++)if(this.boundary.test(c.text[u-c.from])){m=u;break}}let h=[],f,d=(g,y,b)=>h.push(b.range(g,y));if(l==c)for(this.regexp.lastIndex=p-l.from;(f=this.regexp.exec(l.text))&&f.index<m-l.from;)this.addMatch(f,t,f.index+l.from,d);else Cg(t.state.doc,this.regexp,p,m,(g,y)=>this.addMatch(y,t,g,d));n=n.update({filterFrom:p,filterTo:m,filter:(g,y)=>g<p||y>m,add:h})}}return n}}const bf=/x/.unicode!=null?"gu":"g",v2=new RegExp(`[\0-\b
--ÂÂ­Øâââ\u2028\u2029â­â®â¦â§â©\uFEFFï¿¹-ï¿¼]`,bf),b2={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ud=null;function _2(){var i;if(ud==null&&typeof document<"u"&&document.body){let t=document.body.style;ud=((i=t.tabSize)!==null&&i!==void 0?i:t.MozTabSize)!=null}return ud||!1}const ic=Gt.define({combine(i){let t=ps(i,{render:null,specialChars:v2,addSpecialChars:null});return(t.replaceTabs=!_2())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,bf)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,bf)),t}});function w2(i={}){return[ic.of(i),x2()]}let Tg=null;function x2(){return Tg||(Tg=Tn.fromClass(class{constructor(i){this.view=i,this.decorations=Qt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(ic)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new y2({regexp:i.specialChars,decoration:(t,n,r)=>{let{doc:s}=n.state,a=Vn(t[0],0);if(a==9){let o=s.lineAt(r),u=n.state.tabSize,l=eu(o.text,u,r-o.from);return Qt.replace({widget:new T2((u-l%u)*this.view.defaultCharacterWidth)})}return this.decorationCache[a]||(this.decorationCache[a]=Qt.replace({widget:new C2(i,a)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let t=i.state.facet(ic);i.startState.facet(ic)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const S2="â¢";function j2(i){return i>=32?S2:i==10?"â¤":String.fromCharCode(9216+i)}class C2 extends yo{constructor(t,n){super(),this.options=t,this.code=n}eq(t){return t.code==this.code}toDOM(t){let n=j2(this.code),r=t.state.phrase("Control character")+" "+(b2[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,r,n);if(s)return s;let a=document.createElement("span");return a.textContent=n,a.title=r,a.setAttribute("aria-label",r),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class T2 extends yo{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function k2(){return M2}const E2=Qt.line({class:"cm-activeLine"}),M2=Tn.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let t=-1,n=[];for(let r of i.state.selection.ranges){let s=i.lineBlockAt(r.head);s.from>t&&(n.push(E2.range(s.from)),t=s.from)}return Qt.set(n)}},{decorations:i=>i.decorations}),_f=2e3;function A2(i,t,n){let r=Math.min(t.line,n.line),s=Math.max(t.line,n.line),a=[];if(t.off>_f||n.off>_f||t.col<0||n.col<0){let o=Math.min(t.off,n.off),u=Math.max(t.off,n.off);for(let l=r;l<=s;l++){let c=i.doc.line(l);c.length<=u&&a.push(pt.range(c.from+o,c.to+u))}}else{let o=Math.min(t.col,n.col),u=Math.max(t.col,n.col);for(let l=r;l<=s;l++){let c=i.doc.line(l),p=Qd(c.text,o,i.tabSize,!0);if(p<0)a.push(pt.cursor(c.to));else{let m=Qd(c.text,u,i.tabSize);a.push(pt.range(c.from+p,c.from+m))}}}return a}function O2(i,t){let n=i.coordsAtPos(i.viewport.from);return n?Math.round(Math.abs((n.left-t)/i.defaultCharacterWidth)):-1}function kg(i,t){let n=i.posAtCoords({x:t.clientX,y:t.clientY},!1),r=i.state.doc.lineAt(n),s=n-r.from,a=s>_f?-1:s==r.length?O2(i,t.clientX):eu(r.text,i.state.tabSize,n-r.from);return{line:r.number,col:a,off:s}}function I2(i,t){let n=kg(i,t),r=i.state.selection;return n?{update(s){if(s.docChanged){let a=s.changes.mapPos(s.startState.doc.line(n.line).from),o=s.state.doc.lineAt(a);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(s.changes)}},get(s,a,o){let u=kg(i,s);if(!u)return r;let l=A2(i.state,n,u);return l.length?o?pt.create(l.concat(r.ranges)):pt.create(l):r}}:null}function P2(i){let t=(i==null?void 0:i.eventFilter)||(n=>n.altKey&&n.button==0);return Wt.mouseSelectionStyle.of((n,r)=>t(r)?I2(n,r):null)}const R2={Alt:[18,i=>i.altKey],Control:[17,i=>i.ctrlKey],Shift:[16,i=>i.shiftKey],Meta:[91,i=>i.metaKey]},D2={style:"cursor: crosshair"};function L2(i={}){let[t,n]=R2[i.key||"Alt"],r=Tn.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventHandlers:{keydown(s){this.set(s.keyCode==t||n(s))},keyup(s){(s.keyCode==t||!n(s))&&this.set(!1)},mousemove(s){this.set(n(s))}}});return[r,Wt.contentAttributes.of(s=>{var a;return!((a=s.plugin(r))===null||a===void 0)&&a.isDown?D2:null})]}const Fu="-10000px";class rb{constructor(t,n,r){this.facet=n,this.createTooltipView=r,this.input=t.state.facet(n),this.tooltips=this.input.filter(s=>s),this.tooltipViews=this.tooltips.map(r)}update(t){var n;let r=t.state.facet(this.facet),s=r.filter(o=>o);if(r===this.input){for(let o of this.tooltipViews)o.update&&o.update(t);return!1}let a=[];for(let o=0;o<s.length;o++){let u=s[o],l=-1;if(u){for(let c=0;c<this.tooltips.length;c++){let p=this.tooltips[c];p&&p.create==u.create&&(l=c)}if(l<0)a[o]=this.createTooltipView(u);else{let c=a[o]=this.tooltipViews[l];c.update&&c.update(t)}}}for(let o of this.tooltipViews)a.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=r,this.tooltips=s,this.tooltipViews=a,!0}}function N2(i){let{win:t}=i;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const cd=Gt.define({combine:i=>{var t,n,r;return{position:Ut.ios?"absolute":((t=i.find(s=>s.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((n=i.find(s=>s.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=i.find(s=>s.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||N2}}}),Eg=new WeakMap,nb=Tn.fromClass(class{constructor(i){this.view=i,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=i.state.facet(cd);this.position=t.position,this.parent=t.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new rb(i,cp,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(i);t&&this.observeIntersection();let n=t||i.geometryChanged,r=i.state.facet(cd);if(r.position!=this.position){this.position=r.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(i){let t=i.create(this.view);if(t.dom.classList.add("cm-tooltip"),i.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=Fu,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var i,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(i=n.destroy)===null||i===void 0||i.call(n);(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=this.view.dom.getBoundingClientRect();return{editor:i,parent:this.parent?this.container.getBoundingClientRect():i,pos:this.manager.tooltips.map((t,n)=>{let r=this.manager.tooltipViews[n];return r.getCoords?r.getCoords(t.pos):this.view.coordsAtPos(t.pos)}),size:this.manager.tooltipViews.map(({dom:t})=>t.getBoundingClientRect()),space:this.view.state.facet(cd).tooltipSpace(this.view)}}writeMeasure(i){var t;let{editor:n,space:r}=i,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let o=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:l}=u,c=i.pos[a],p=i.size[a];if(!c||c.bottom<=Math.max(n.top,r.top)||c.top>=Math.min(n.bottom,r.bottom)||c.right<Math.max(n.left,r.left)-.1||c.left>Math.min(n.right,r.right)+.1){l.style.top=Fu;continue}let m=o.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,h=m?7:0,f=p.right-p.left,d=(t=Eg.get(u))!==null&&t!==void 0?t:p.bottom-p.top,g=u.offset||F2,y=this.view.textDirection==mn.LTR,b=p.width>r.right-r.left?y?r.left:r.right-p.width:y?Math.min(c.left-(m?14:0)+g.x,r.right-f):Math.max(r.left,c.left-f+(m?14:0)-g.x),x=!!o.above;!o.strictSide&&(x?c.top-(p.bottom-p.top)-g.y<r.top:c.bottom+(p.bottom-p.top)+g.y>r.bottom)&&x==r.bottom-c.bottom>c.top-r.top&&(x=!x);let j=(x?c.top-r.top:r.bottom-c.bottom)-h;if(j<d&&u.resize!==!1){if(j<this.view.defaultLineHeight){l.style.top=Fu;continue}Eg.set(u,d),l.style.height=(d=j)+"px"}else l.style.height&&(l.style.height="");let S=x?c.top-d-h-g.y:c.bottom+h+g.y,w=b+f;if(u.overlap!==!0)for(let _ of s)_.left<w&&_.right>b&&_.top<S+d&&_.bottom>S&&(S=x?_.top-d-2-h:_.bottom+h+2);this.position=="absolute"?(l.style.top=S-i.parent.top+"px",l.style.left=b-i.parent.left+"px"):(l.style.top=S+"px",l.style.left=b+"px"),m&&(m.style.left=`${c.left+(y?g.x:-g.x)-(b+14-7)}px`),u.overlap!==!0&&s.push({left:b,top:S,right:w,bottom:S+d}),l.classList.toggle("cm-tooltip-above",x),l.classList.toggle("cm-tooltip-below",!x),u.positioned&&u.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=Fu}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),B2=Wt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),F2={x:0,y:0},cp=Gt.define({enables:[nb,B2]}),_c=Gt.define();class hp{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new rb(t,_c,n=>this.createHostedView(n))}static create(t){return new hp(t)}createHostedView(t){let n=t.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(t){for(let n of this.manager.tooltipViews)n.mount&&n.mount(t);this.mounted=!0}positioned(t){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(t)}update(t){this.manager.update(t)}}const U2=cp.compute([_c],i=>{let t=i.facet(_c).filter(n=>n);return t.length===0?null:{pos:Math.min(...t.map(n=>n.pos)),end:Math.max(...t.filter(n=>n.end!=null).map(n=>n.end)),create:hp.create,above:t[0].above,arrow:t.some(n=>n.arrow)}});class V2{constructor(t,n,r,s,a){this.view=t,this.source=n,this.field=r,this.setHover=s,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,n=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(n==null)return;let r=this.view.coordsAtPos(n);if(r==null||t.y<r.top||t.y>r.bottom||t.x<r.left-this.view.defaultCharacterWidth||t.x>r.right+this.view.defaultCharacterWidth)return;let s=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),a=s&&s.dir==mn.RTL?-1:1,o=this.source(this.view,n,t.x<r.left?-a:a);if(o!=null&&o.then){let u=this.pending={pos:n};o.then(l=>{this.pending==u&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Ei(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(t){var n;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!Mg(this.lastMove.target)||this.pending){let{pos:s}=r||this.pending,a=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!G2(this.view,s,a,t.clientX,t.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Mg(t.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Mg(i){for(let t=i;t;t=t.parentNode)if(t.nodeType==1&&t.classList.contains("cm-tooltip"))return!0;return!1}function G2(i,t,n,r,s,a){let o=document.createRange(),u=i.domAtPos(t),l=i.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(u.node,u.offset);let c=o.getClientRects();o.detach();for(let p=0;p<c.length;p++){let m=c[p];if(Math.max(m.top-s,s-m.bottom,m.left-r,r-m.right)<=a)return!0}return!1}function H2(i,t={}){let n=yr.define(),r=zn.define({create(){return null},update(s,a){if(s&&(t.hideOnChange&&(a.docChanged||a.selection)||t.hideOn&&t.hideOn(a,s)))return null;if(s&&a.docChanged){let o=a.changes.mapPos(s.pos,-1,si.TrackDel);if(o==null)return null;let u=Object.assign(Object.create(null),s);u.pos=o,s.end!=null&&(u.end=a.changes.mapPos(s.end)),s=u}for(let o of a.effects)o.is(n)&&(s=o.value),o.is(W2)&&(s=null);return s},provide:s=>_c.from(s)});return[r,Tn.define(s=>new V2(s,i,r,n,t.hoverTime||300)),U2]}function z2(i,t){let n=i.plugin(nb);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}const W2=yr.define(),Ag=Gt.define({combine(i){let t,n;for(let r of i)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function Rl(i,t){let n=i.plugin(ib),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const ib=Tn.fromClass(class{constructor(i){this.input=i.state.facet(Dl),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(i));let t=i.state.facet(Ag);this.top=new Uu(i,!0,t.topContainer),this.bottom=new Uu(i,!1,t.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(i){let t=i.state.facet(Ag);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Uu(i.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Uu(i.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=i.state.facet(Dl);if(n!=this.input){let r=n.filter(l=>l),s=[],a=[],o=[],u=[];for(let l of r){let c=this.specs.indexOf(l),p;c<0?(p=l(i.view),u.push(p)):(p=this.panels[c],p.update&&p.update(i)),s.push(p),(p.top?a:o).push(p)}this.specs=r,this.panels=s,this.top.sync(a),this.bottom.sync(o);for(let l of u)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>Wt.scrollMargins.of(t=>{let n=t.plugin(i);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Uu{constructor(t,n,r){this.view=t,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let n of this.panels)n.destroy&&t.indexOf(n)<0&&n.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let t=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;t!=n.dom;)t=Og(t);t=t.nextSibling}else this.dom.insertBefore(n.dom,t);for(;t;)t=Og(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function Og(i){let t=i.nextSibling;return i.remove(),t}const Dl=Gt.define({enables:ib});class Ms extends No{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}Ms.prototype.elementClass="";Ms.prototype.toDOM=void 0;Ms.prototype.mapMode=si.TrackBefore;Ms.prototype.startSide=Ms.prototype.endSide=-1;Ms.prototype.point=!0;const sc=Gt.define(),q2={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ur.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},_l=Gt.define();function $2(i){return[sb(),_l.of(Object.assign(Object.assign({},q2),i))]}const wf=Gt.define({combine:i=>i.some(t=>t)});function sb(i){let t=[X2];return i&&i.fixed===!1&&t.push(wf.of(!0)),t}const X2=Tn.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=i.state.facet(_l).map(t=>new Pg(i,t));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!i.state.facet(wf),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let t=this.prevViewport,n=i.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(wf)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let t=this.dom.nextSibling;i&&this.dom.remove();let n=Ur.iter(this.view.state.facet(sc),this.view.viewport.from),r=[],s=this.gutters.map(a=>new Y2(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks){let o;if(Array.isArray(a.type)){for(let u of a.type)if(u.type==Xr.Text){o=u;break}}else o=a.type==Xr.Text?a:void 0;if(o){r.length&&(r=[]),ob(n,r,a.from);for(let u of s)u.line(this.view,o,r)}}for(let a of s)a.finish();i&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(i){let t=i.startState.facet(_l),n=i.state.facet(_l),r=i.docChanged||i.heightChanged||i.viewportChanged||!Ur.eq(i.startState.facet(sc),i.state.facet(sc),i.view.viewport.from,i.view.viewport.to);if(t==n)for(let s of this.gutters)s.update(i)&&(r=!0);else{r=!0;let s=[];for(let a of n){let o=t.indexOf(a);o<0?s.push(new Pg(this.view,a)):(this.gutters[o].update(i),s.push(this.gutters[o]))}for(let a of this.gutters)a.dom.remove(),s.indexOf(a)<0&&a.destroy();for(let a of s)this.dom.appendChild(a.dom);this.gutters=s}return r}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>Wt.scrollMargins.of(t=>{let n=t.plugin(i);return!n||n.gutters.length==0||!n.fixed?null:t.textDirection==mn.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function Ig(i){return Array.isArray(i)?i:[i]}function ob(i,t,n){for(;i.value&&i.from<=n;)i.from==n&&t.push(i.value),i.next()}class Y2{constructor(t,n,r){this.gutter=t,this.height=r,this.i=0,this.cursor=Ur.iter(t.markers,n.from)}line(t,n,r){let s=[];ob(this.cursor,s,n.from),r.length&&(s=s.concat(r));let a=this.gutter.config.lineMarker(t,n,s);a&&s.unshift(a);let o=this.gutter;if(s.length==0&&!o.config.renderEmptyElements)return;let u=n.top-this.height;if(this.i==o.elements.length){let l=new ab(t,n.height,u,s);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(t,n.height,u,s);this.height=n.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let n=t.elements.pop();t.dom.removeChild(n.dom),n.destroy()}}}class Pg{constructor(t,n){this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,s=>{let a=s.target,o;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let l=a.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=s.clientY;let u=t.lineBlockAtHeight(o-t.documentTop);n.domEventHandlers[r](t,u,s)&&s.preventDefault()});this.markers=Ig(n.markers(t)),n.initialSpacer&&(this.spacer=new ab(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let n=this.markers;if(this.markers=Ig(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],t);s!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[s])}let r=t.view.viewport;return!Ur.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class ab{constructor(t,n,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,r,s)}update(t,n,r,s){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),K2(this.markers,s)||this.setMarkers(t,s)}setMarkers(t,n){let r="cm-gutterElement",s=this.dom.firstChild;for(let a=0,o=0;;){let u=o,l=a<n.length?n[a++]:null,c=!1;if(l){let p=l.elementClass;p&&(r+=" "+p);for(let m=o;m<this.markers.length;m++)if(this.markers[m].compare(l)){u=m,c=!0;break}}else u=this.markers.length;for(;o<u;){let p=this.markers[o++];if(p.toDOM){p.destroy(s);let m=s.nextSibling;s.remove(),s=m}}if(!l)break;l.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(l.toDOM(t),s)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function K2(i,t){if(i.length!=t.length)return!1;for(let n=0;n<i.length;n++)if(!i[n].compare(t[n]))return!1;return!0}const J2=Gt.define(),ha=Gt.define({combine(i){return ps(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,n){let r=Object.assign({},t);for(let s in n){let a=r[s],o=n[s];r[s]=a?(u,l,c)=>a(u,l,c)||o(u,l,c):o}return r}})}});class hd extends Ms{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function dd(i,t){return i.state.facet(ha).formatNumber(t,i.state)}const Q2=_l.compute([ha],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(J2)},lineMarker(t,n,r){return r.some(s=>s.toDOM)?null:new hd(dd(t,t.state.doc.lineAt(n.from).number))},lineMarkerChange:t=>t.startState.facet(ha)!=t.state.facet(ha),initialSpacer(t){return new hd(dd(t,Rg(t.state.doc.lines)))},updateSpacer(t,n){let r=dd(n.view,Rg(n.view.state.doc.lines));return r==t.number?t:new hd(r)},domEventHandlers:i.facet(ha).domEventHandlers}));function lb(i={}){return[ha.of(i),sb(),Q2]}function Rg(i){let t=9;for(;t<i;)t=t*10+9;return t}const Z2=new class extends Ms{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ej=sc.compute(["selection"],i=>{let t=[],n=-1;for(let r of i.selection.ranges){let s=i.doc.lineAt(r.head).from;s>n&&(n=s,t.push(Z2.range(s)))}return Ur.of(t)});function tj(){return ej}const rj=1024;let nj=0;class fd{constructor(t,n){this.from=t,this.to=n}}class jr{constructor(t={}){this.id=nj++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=yi.match(t)),n=>{let r=t(n);return r===void 0?null:[this,r]}}}jr.closedBy=new jr({deserialize:i=>i.split(" ")});jr.openedBy=new jr({deserialize:i=>i.split(" ")});jr.group=new jr({deserialize:i=>i.split(" ")});jr.contextHash=new jr({perNode:!0});jr.lookAhead=new jr({perNode:!0});jr.mounted=new jr({perNode:!0});const ij=Object.create(null);class yi{constructor(t,n,r,s=0){this.name=t,this.props=n,this.id=r,this.flags=s}static define(t){let n=t.props&&t.props.length?Object.create(null):ij,r=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),s=new yi(t.name||"",n,t.id,r);if(t.props){for(let a of t.props)if(Array.isArray(a)||(a=a(s)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[a[0].id]=a[1]}}return s}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let n=this.prop(jr.group);return n?n.indexOf(t)>-1:!1}return this.id==t}static match(t){let n=Object.create(null);for(let r in t)for(let s of r.split(" "))n[s]=t[r];return r=>{for(let s=r.prop(jr.group),a=-1;a<(s?s.length:0);a++){let o=n[a<0?r.name:s[a]];if(o)return o}}}}yi.none=new yi("",Object.create(null),0,8);class dp{constructor(t){this.types=t;for(let n=0;n<t.length;n++)if(t[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let n=[];for(let r of this.types){let s=null;for(let a of t){let o=a(r);o&&(s||(s=Object.assign({},r.props)),s[o[0].id]=o[1])}n.push(s?new yi(r.name,s,r.id,r.flags):r)}return new dp(n)}}const Vu=new WeakMap,Dg=new WeakMap;var Yn;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(Yn||(Yn={}));let Cn=class xf{constructor(t,n,r,s,a){if(this.type=t,this.children=n,this.positions=r,this.length=s,this.props=null,a&&a.length){this.props=Object.create(null);for(let[o,u]of a)this.props[typeof o=="number"?o:o.id]=u}}toString(){let t=this.prop(jr.mounted);if(t&&!t.overlay)return t.tree.toString();let n="";for(let r of this.children){let s=r.toString();s&&(n&&(n+=","),n+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(t=0){return new Sc(this.topNode,t)}cursorAt(t,n=0,r=0){let s=Vu.get(this)||this.topNode,a=new Sc(s);return a.moveTo(t,n),Vu.set(this,a._tree),a}get topNode(){return new ks(this,0,0,null)}resolve(t,n=0){let r=Oa(Vu.get(this)||this.topNode,t,n,!1);return Vu.set(this,r),r}resolveInner(t,n=0){let r=Oa(Dg.get(this)||this.topNode,t,n,!0);return Dg.set(this,r),r}iterate(t){let{enter:n,leave:r,from:s=0,to:a=this.length}=t;for(let o=this.cursor((t.mode||0)|Yn.IncludeAnonymous);;){let u=!1;if(o.from<=a&&o.to>=s&&(o.type.isAnonymous||n(o)!==!1)){if(o.firstChild())continue;u=!0}for(;u&&r&&!o.type.isAnonymous&&r(o),!o.nextSibling();){if(!o.parent())return;u=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let n in this.props)t.push([+n,this.props[n]]);return t}balance(t={}){return this.children.length<=8?this:mp(yi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,s)=>new xf(this.type,n,r,s,this.propValues),t.makeTree||((n,r,s)=>new xf(yi.none,n,r,s)))}static build(t){return oj(t)}};Cn.empty=new Cn(yi.none,[],[],0);class fp{constructor(t,n){this.buffer=t,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new fp(this.buffer,this.index)}}class Yo{constructor(t,n,r){this.buffer=t,this.length=n,this.set=r}get type(){return yi.none}toString(){let t=[];for(let n=0;n<this.buffer.length;)t.push(this.childString(n)),n=this.buffer[n+3];return t.join(",")}childString(t){let n=this.buffer[t],r=this.buffer[t+3],s=this.set.types[n],a=s.name;if(/\W/.test(a)&&!s.isError&&(a=JSON.stringify(a)),t+=4,r==t)return a;let o=[];for(;t<r;)o.push(this.childString(t)),t=this.buffer[t+3];return a+"("+o.join(",")+")"}findChild(t,n,r,s,a){let{buffer:o}=this,u=-1;for(let l=t;l!=n&&!(ub(a,s,o[l+1],o[l+2])&&(u=l,r>0));l=o[l+3]);return u}slice(t,n,r){let s=this.buffer,a=new Uint16Array(n-t),o=0;for(let u=t,l=0;u<n;){a[l++]=s[u++],a[l++]=s[u++]-r;let c=a[l++]=s[u++]-r;a[l++]=s[u++]-t,o=Math.max(o,c)}return new Yo(a,o,this.set)}}function ub(i,t,n,r){switch(i){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function cb(i,t){let n=i.childBefore(t);for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}function Oa(i,t,n,r){for(var s;i.from==i.to||(n<1?i.from>=t:i.from>t)||(n>-1?i.to<=t:i.to<t);){let o=!r&&i instanceof ks&&i.index<0?null:i.parent;if(!o)return i;i=o}let a=r?0:Yn.IgnoreOverlays;if(r)for(let o=i,u=o.parent;u;o=u,u=o.parent)o instanceof ks&&o.index<0&&((s=u.enter(t,n,a))===null||s===void 0?void 0:s.from)!=o.from&&(i=u);for(;;){let o=i.enter(t,n,a);if(!o)return i;i=o}}class ks{constructor(t,n,r,s){this._tree=t,this.from=n,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,n,r,s,a=0){for(let o=this;;){for(let{children:u,positions:l}=o._tree,c=n>0?u.length:-1;t!=c;t+=n){let p=u[t],m=l[t]+o.from;if(ub(s,r,m,m+p.length)){if(p instanceof Yo){if(a&Yn.ExcludeBuffers)continue;let h=p.findChild(0,p.buffer.length,n,r-m,s);if(h>-1)return new Qs(new sj(o,p,t,m),null,h)}else if(a&Yn.IncludeAnonymous||!p.type.isAnonymous||pp(p)){let h;if(!(a&Yn.IgnoreMounts)&&p.props&&(h=p.prop(jr.mounted))&&!h.overlay)return new ks(h.tree,m,t,o);let f=new ks(p,m,t,o);return a&Yn.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?p.children.length-1:0,n,r,s)}}}if(a&Yn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?t=o.index+n:t=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,n,r=0){let s;if(!(r&Yn.IgnoreOverlays)&&(s=this._tree.prop(jr.mounted))&&s.overlay){let a=t-this.from;for(let{from:o,to:u}of s.overlay)if((n>0?o<=a:o<a)&&(n<0?u>=a:u>a))return new ks(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,n,r)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new Sc(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,n=0){return Oa(this,t,n,!1)}resolveInner(t,n=0){return Oa(this,t,n,!0)}enterUnfinishedNodesBefore(t){return cb(this,t)}getChild(t,n=null,r=null){let s=wc(this,t,n,r);return s.length?s[0]:null}getChildren(t,n=null,r=null){return wc(this,t,n,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return xc(this,t)}}function wc(i,t,n,r){let s=i.cursor(),a=[];if(!s.firstChild())return a;if(n!=null){for(;!s.type.is(n);)if(!s.nextSibling())return a}for(;;){if(r!=null&&s.type.is(r))return a;if(s.type.is(t)&&a.push(s.node),!s.nextSibling())return r==null?a:[]}}function xc(i,t,n=t.length-1){for(let r=i.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class sj{constructor(t,n,r,s){this.parent=t,this.buffer=n,this.index=r,this.start=s}}class Qs{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,n,r){this.context=t,this._parent=n,this.index=r,this.type=t.buffer.set.types[t.buffer.buffer[r]]}child(t,n,r){let{buffer:s}=this.context,a=s.findChild(this.index+4,s.buffer[this.index+3],t,n-this.context.start,r);return a<0?null:new Qs(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,n,r=0){if(r&Yn.ExcludeBuffers)return null;let{buffer:s}=this.context,a=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,t-this.context.start,n);return a<0?null:new Qs(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,n=t.buffer[this.index+3];return n<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Qs(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Qs(this.context,this._parent,t.findChild(n,this.index,-1,0,4))}cursor(t=0){return new Sc(this,t)}get tree(){return null}toTree(){let t=[],n=[],{buffer:r}=this.context,s=this.index+4,a=r.buffer[this.index+3];if(a>s){let o=r.buffer[this.index+1];t.push(r.slice(s,a,o)),n.push(0)}return new Cn(this.type,t,n,this.to-this.from)}resolve(t,n=0){return Oa(this,t,n,!1)}resolveInner(t,n=0){return Oa(this,t,n,!0)}enterUnfinishedNodesBefore(t){return cb(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,n=null,r=null){let s=wc(this,t,n,r);return s.length?s[0]:null}getChildren(t,n=null,r=null){return wc(this,t,n,r)}get node(){return this}matchContext(t){return xc(this,t)}}class Sc{get name(){return this.type.name}constructor(t,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof ks)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let r=t._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,n){this.index=t;let{start:r,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[t]],this.from=r+s.buffer[t+1],this.to=r+s.buffer[t+2],!0}yield(t){return t?t instanceof ks?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,n,r,this.mode));let{buffer:s}=this.buffer,a=s.findChild(this.index+4,s.buffer[this.index+3],t,n-this.buffer.start,r);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,n,r=this.mode){return this.buffer?r&Yn.ExcludeBuffers?!1:this.enterChild(1,t,n):this.yield(this._tree.enter(t,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Yn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(t<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let n,r,{buffer:s}=this;if(s){if(t>0){if(this.index<s.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(s.buffer.buffer[a+3]<this.index)return!1;({index:n,parent:r}=s)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let a=n+t,o=t<0?-1:r._tree.children.length;a!=o;a+=t){let u=r._tree.children[a];if(this.mode&Yn.IncludeAnonymous||u instanceof Yo||!u.type.isAnonymous||pp(u))return!1}return!0}move(t,n){if(n&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,n=0){for(;(this.from==this.to||(n<1?this.from>=t:this.from>t)||(n>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,n););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,n=null,r=0;if(t&&t.context==this.buffer){e:for(let s=this.index,a=this.stack.length;a>=0;){for(let o=t;o;o=o._parent)if(o.index==s){if(s==this.index)return o;n=o,r=a+1;break e}s=this.stack[--a]}}for(let s=r;s<this.stack.length;s++)n=new Qs(this.buffer,n,this.stack[s]);return this.bufferNode=new Qs(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,n){for(let r=0;;){let s=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;s&&n&&n(this),s=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,s=!0}}}matchContext(t){if(!this.buffer)return xc(this.node,t);let{buffer:n}=this.buffer,{types:r}=n.set;for(let s=t.length-1,a=this.stack.length-1;s>=0;a--){if(a<0)return xc(this.node,t,s);let o=r[n.buffer[this.stack[a]]];if(!o.isAnonymous){if(t[s]&&t[s]!=o.name)return!1;s--}}return!0}}function pp(i){return i.children.some(t=>t instanceof Yo||!t.type.isAnonymous||pp(t))}function oj(i){var t;let{buffer:n,nodeSet:r,maxBufferLength:s=rj,reused:a=[],minRepeatType:o=r.types.length}=i,u=Array.isArray(n)?new fp(n,n.length):n,l=r.types,c=0,p=0;function m(S,w,_,M,I){let{id:P,start:R,end:D,size:U}=u,F=p;for(;U<0;)if(u.next(),U==-1){let Z=a[P];_.push(Z),M.push(R-S);return}else if(U==-3){c=P;return}else if(U==-4){p=P;return}else throw new RangeError(`Unrecognized record size: ${U}`);let z=l[P],K,Q,te=R-S;if(D-R<=s&&(Q=g(u.pos-w,I))){let Z=new Uint16Array(Q.size-Q.skip),q=u.pos-Q.size,Y=Z.length;for(;u.pos>q;)Y=y(Q.start,Z,Y);K=new Yo(Z,D-Q.start,r),te=Q.start-S}else{let Z=u.pos-U;u.next();let q=[],Y=[],X=P>=o?P:-1,ce=0,O=D;for(;u.pos>Z;)X>=0&&u.id==X&&u.size>=0?(u.end<=O-s&&(f(q,Y,R,ce,u.end,O,X,F),ce=q.length,O=u.end),u.next()):m(R,Z,q,Y,X);if(X>=0&&ce>0&&ce<q.length&&f(q,Y,R,ce,R,O,X,F),q.reverse(),Y.reverse(),X>-1&&ce>0){let B=h(z);K=mp(z,q,Y,0,q.length,0,D-R,B,B)}else K=d(z,q,Y,D-R,F-D)}_.push(K),M.push(te)}function h(S){return(w,_,M)=>{let I=0,P=w.length-1,R,D;if(P>=0&&(R=w[P])instanceof Cn){if(!P&&R.type==S&&R.length==M)return R;(D=R.prop(jr.lookAhead))&&(I=_[P]+R.length+D)}return d(S,w,_,M,I)}}function f(S,w,_,M,I,P,R,D){let U=[],F=[];for(;S.length>M;)U.push(S.pop()),F.push(w.pop()+_-I);S.push(d(r.types[R],U,F,P-I,D-P)),w.push(I-_)}function d(S,w,_,M,I=0,P){if(c){let R=[jr.contextHash,c];P=P?[R].concat(P):[R]}if(I>25){let R=[jr.lookAhead,I];P=P?[R].concat(P):[R]}return new Cn(S,w,_,M,P)}function g(S,w){let _=u.fork(),M=0,I=0,P=0,R=_.end-s,D={size:0,start:0,skip:0};e:for(let U=_.pos-S;_.pos>U;){let F=_.size;if(_.id==w&&F>=0){D.size=M,D.start=I,D.skip=P,P+=4,M+=4,_.next();continue}let z=_.pos-F;if(F<0||z<U||_.start<R)break;let K=_.id>=o?4:0,Q=_.start;for(_.next();_.pos>z;){if(_.size<0)if(_.size==-3)K+=4;else break e;else _.id>=o&&(K+=4);_.next()}I=Q,M+=F,P+=K}return(w<0||M==S)&&(D.size=M,D.start=I,D.skip=P),D.size>4?D:void 0}function y(S,w,_){let{id:M,start:I,end:P,size:R}=u;if(u.next(),R>=0&&M<o){let D=_;if(R>4){let U=u.pos-(R-4);for(;u.pos>U;)_=y(S,w,_)}w[--_]=D,w[--_]=P-S,w[--_]=I-S,w[--_]=M}else R==-3?c=M:R==-4&&(p=M);return _}let b=[],x=[];for(;u.pos>0;)m(i.start||0,i.bufferStart||0,b,x,-1);let j=(t=i.length)!==null&&t!==void 0?t:b.length?x[0]+b[0].length:0;return new Cn(l[i.topID],b.reverse(),x.reverse(),j)}const Lg=new WeakMap;function oc(i,t){if(!i.isAnonymous||t instanceof Yo||t.type!=i)return 1;let n=Lg.get(t);if(n==null){n=1;for(let r of t.children){if(r.type!=i||!(r instanceof Cn)){n=1;break}n+=oc(i,r)}Lg.set(t,n)}return n}function mp(i,t,n,r,s,a,o,u,l){let c=0;for(let d=r;d<s;d++)c+=oc(i,t[d]);let p=Math.ceil(c*1.5/8),m=[],h=[];function f(d,g,y,b,x){for(let j=y;j<b;){let S=j,w=g[j],_=oc(i,d[j]);for(j++;j<b;j++){let M=oc(i,d[j]);if(_+M>=p)break;_+=M}if(j==S+1){if(_>p){let M=d[S];f(M.children,M.positions,0,M.children.length,g[S]+x);continue}m.push(d[S])}else{let M=g[j-1]+d[j-1].length-w;m.push(mp(i,d,g,S,j,w,M,null,l))}h.push(w+x-a)}}return f(t,n,r,s,0),(u||l)(m,h,o)}class Ro{constructor(t,n,r,s,a=!1,o=!1){this.from=t,this.to=n,this.tree=r,this.offset=s,this.open=(a?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,n=[],r=!1){let s=[new Ro(0,t.length,t,0,!1,r)];for(let a of n)a.to>t.length&&s.push(a);return s}static applyChanges(t,n,r=128){if(!n.length)return t;let s=[],a=1,o=t.length?t[0]:null;for(let u=0,l=0,c=0;;u++){let p=u<n.length?n[u]:null,m=p?p.fromA:1e9;if(m-l>=r)for(;o&&o.from<m;){let h=o;if(l>=h.from||m<=h.to||c){let f=Math.max(h.from,l)-c,d=Math.min(h.to,m)-c;h=f>=d?null:new Ro(f,d,h.tree,h.offset+c,u>0,!!p)}if(h&&s.push(h),o.to>m)break;o=a<t.length?t[a++]:null}if(!p)break;l=p.toA,c=p.toA-p.toB}return s}}class hb{startParse(t,n,r){return typeof t=="string"&&(t=new aj(t)),r=r?r.length?r.map(s=>new fd(s.from,s.to)):[new fd(0,0)]:[new fd(0,t.length)],this.createParse(t,n||[],r)}parse(t,n,r){let s=this.startParse(t,n,r);for(;;){let a=s.advance();if(a)return a}}}class aj{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,n){return this.string.slice(t,n)}}new jr({perNode:!0});let lj=0;class rs{constructor(t,n,r){this.set=t,this.base=n,this.modified=r,this.id=lj++}static define(t){if(t!=null&&t.base)throw new Error("Can not derive from a modified tag");let n=new rs([],null,[]);if(n.set.push(n),t)for(let r of t.set)n.set.push(r);return n}static defineModifier(){let t=new jc;return n=>n.modified.indexOf(t)>-1?n:jc.get(n.base||n,n.modified.concat(t).sort((r,s)=>r.id-s.id))}}let uj=0;class jc{constructor(){this.instances=[],this.id=uj++}static get(t,n){if(!n.length)return t;let r=n[0].instances.find(u=>u.base==t&&cj(n,u.modified));if(r)return r;let s=[],a=new rs(s,t,n);for(let u of n)u.instances.push(a);let o=hj(n);for(let u of t.set)if(!u.modified.length)for(let l of o)s.push(jc.get(u,l));return a}}function cj(i,t){return i.length==t.length&&i.every((n,r)=>n==t[r])}function hj(i){let t=[[]];for(let n=0;n<i.length;n++)for(let r=0,s=t.length;r<s;r++)t.push(t[r].concat(i[n]));return t.sort((n,r)=>r.length-n.length)}function dj(i){let t=Object.create(null);for(let n in i){let r=i[n];Array.isArray(r)||(r=[r]);for(let s of n.split(" "))if(s){let a=[],o=2,u=s;for(let m=0;;){if(u=="..."&&m>0&&m+3==s.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!h)throw new RangeError("Invalid path: "+s);if(a.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),m+=h[0].length,m==s.length)break;let f=s[m++];if(m==s.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+s);u=s.slice(m)}let l=a.length-1,c=a[l];if(!c)throw new RangeError("Invalid path: "+s);let p=new Cc(r,o,l>0?a.slice(0,l):null);t[c]=p.sort(t[c])}}return db.add(t)}const db=new jr;class Cc{constructor(t,n,r,s){this.tags=t,this.mode=n,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Cc.empty=new Cc([],2,null);function fb(i,t){let n=Object.create(null);for(let a of i)if(!Array.isArray(a.tag))n[a.tag.id]=a.class;else for(let o of a.tag)n[o.id]=a.class;let{scope:r,all:s=null}=t||{};return{style:a=>{let o=s;for(let u of a)for(let l of u.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function fj(i,t){let n=null;for(let r of i){let s=r.style(t);s&&(n=n?n+" "+s:s)}return n}function pj(i,t,n,r=0,s=i.length){let a=new mj(r,Array.isArray(t)?t:[t],n);a.highlightRange(i.cursor(),r,s,"",a.highlighters),a.flush(s)}class mj{constructor(t,n,r){this.at=t,this.highlighters=n,this.span=r,this.class=""}startSpan(t,n){n!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=n)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,n,r,s,a){let{type:o,from:u,to:l}=t;if(u>=r||l<=n)return;o.isTop&&(a=this.highlighters.filter(f=>!f.scope||f.scope(o)));let c=s,p=gj(t)||Cc.empty,m=fj(a,p.tags);if(m&&(c&&(c+=" "),c+=m,p.mode==1&&(s+=(s?" ":"")+m)),this.startSpan(t.from,c),p.opaque)return;let h=t.tree&&t.tree.prop(jr.mounted);if(h&&h.overlay){let f=t.node.enter(h.overlay[0].from+u,1),d=this.highlighters.filter(y=>!y.scope||y.scope(h.tree.type)),g=t.firstChild();for(let y=0,b=u;;y++){let x=y<h.overlay.length?h.overlay[y]:null,j=x?x.from+u:l,S=Math.max(n,b),w=Math.min(r,j);if(S<w&&g)for(;t.from<w&&(this.highlightRange(t,S,w,s,a),this.startSpan(Math.min(w,t.to),c),!(t.to>=j||!t.nextSibling())););if(!x||j>r)break;b=x.to+u,b>n&&(this.highlightRange(f.cursor(),Math.max(n,x.from+u),Math.min(r,b),s,d),this.startSpan(b,c))}g&&t.parent()}else if(t.firstChild()){do if(!(t.to<=n)){if(t.from>=r)break;this.highlightRange(t,n,r,s,a),this.startSpan(Math.min(r,t.to),c)}while(t.nextSibling());t.parent()}}}function gj(i){let t=i.type.prop(db);for(;t&&t.context&&!i.matchContext(t.context);)t=t.next;return t||null}const Mt=rs.define,Gu=Mt(),Hs=Mt(),Ng=Mt(Hs),Bg=Mt(Hs),zs=Mt(),Hu=Mt(zs),pd=Mt(zs),ts=Mt(),So=Mt(ts),Zi=Mt(),es=Mt(),Sf=Mt(),ol=Mt(Sf),zu=Mt(),It={comment:Gu,lineComment:Mt(Gu),blockComment:Mt(Gu),docComment:Mt(Gu),name:Hs,variableName:Mt(Hs),typeName:Ng,tagName:Mt(Ng),propertyName:Bg,attributeName:Mt(Bg),className:Mt(Hs),labelName:Mt(Hs),namespace:Mt(Hs),macroName:Mt(Hs),literal:zs,string:Hu,docString:Mt(Hu),character:Mt(Hu),attributeValue:Mt(Hu),number:pd,integer:Mt(pd),float:Mt(pd),bool:Mt(zs),regexp:Mt(zs),escape:Mt(zs),color:Mt(zs),url:Mt(zs),keyword:Zi,self:Mt(Zi),null:Mt(Zi),atom:Mt(Zi),unit:Mt(Zi),modifier:Mt(Zi),operatorKeyword:Mt(Zi),controlKeyword:Mt(Zi),definitionKeyword:Mt(Zi),moduleKeyword:Mt(Zi),operator:es,derefOperator:Mt(es),arithmeticOperator:Mt(es),logicOperator:Mt(es),bitwiseOperator:Mt(es),compareOperator:Mt(es),updateOperator:Mt(es),definitionOperator:Mt(es),typeOperator:Mt(es),controlOperator:Mt(es),punctuation:Sf,separator:Mt(Sf),bracket:ol,angleBracket:Mt(ol),squareBracket:Mt(ol),paren:Mt(ol),brace:Mt(ol),content:ts,heading:So,heading1:Mt(So),heading2:Mt(So),heading3:Mt(So),heading4:Mt(So),heading5:Mt(So),heading6:Mt(So),contentSeparator:Mt(ts),list:Mt(ts),quote:Mt(ts),emphasis:Mt(ts),strong:Mt(ts),link:Mt(ts),monospace:Mt(ts),strikethrough:Mt(ts),inserted:Mt(),deleted:Mt(),changed:Mt(),invalid:Mt(),meta:zu,documentMeta:Mt(zu),annotation:Mt(zu),processingInstruction:Mt(zu),definition:rs.defineModifier(),constant:rs.defineModifier(),function:rs.defineModifier(),standard:rs.defineModifier(),local:rs.defineModifier(),special:rs.defineModifier()};fb([{tag:It.link,class:"tok-link"},{tag:It.heading,class:"tok-heading"},{tag:It.emphasis,class:"tok-emphasis"},{tag:It.strong,class:"tok-strong"},{tag:It.keyword,class:"tok-keyword"},{tag:It.atom,class:"tok-atom"},{tag:It.bool,class:"tok-bool"},{tag:It.url,class:"tok-url"},{tag:It.labelName,class:"tok-labelName"},{tag:It.inserted,class:"tok-inserted"},{tag:It.deleted,class:"tok-deleted"},{tag:It.literal,class:"tok-literal"},{tag:It.string,class:"tok-string"},{tag:It.number,class:"tok-number"},{tag:[It.regexp,It.escape,It.special(It.string)],class:"tok-string2"},{tag:It.variableName,class:"tok-variableName"},{tag:It.local(It.variableName),class:"tok-variableName tok-local"},{tag:It.definition(It.variableName),class:"tok-variableName tok-definition"},{tag:It.special(It.variableName),class:"tok-variableName2"},{tag:It.definition(It.propertyName),class:"tok-propertyName tok-definition"},{tag:It.typeName,class:"tok-typeName"},{tag:It.namespace,class:"tok-namespace"},{tag:It.className,class:"tok-className"},{tag:It.macroName,class:"tok-macroName"},{tag:It.propertyName,class:"tok-propertyName"},{tag:It.operator,class:"tok-operator"},{tag:It.comment,class:"tok-comment"},{tag:It.meta,class:"tok-meta"},{tag:It.invalid,class:"tok-invalid"},{tag:It.punctuation,class:"tok-punctuation"}]);var md;const da=new jr;function yj(i){return Gt.define({combine:i?t=>t.concat(i):void 0})}const vj=new jr;class Vi{constructor(t,n,r=[],s=""){this.data=t,this.name=s,kr.prototype.hasOwnProperty("tree")||Object.defineProperty(kr.prototype,"tree",{get(){return Hn(this)}}),this.parser=n,this.extension=[fo.of(this),kr.languageData.of((a,o,u)=>{let l=Fg(a,o,u),c=l.type.prop(da);if(!c)return[];let p=a.facet(c),m=l.type.prop(vj);if(m){let h=l.resolve(o-l.from,u);for(let f of m)if(f.test(h,a)){let d=a.facet(f.facet);return f.type=="replace"?d:d.concat(p)}}return p})].concat(r)}isActiveAt(t,n,r=-1){return Fg(t,n,r).type.prop(da)==this.data}findRegions(t){let n=t.facet(fo);if((n==null?void 0:n.data)==this.data)return[{from:0,to:t.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],s=(a,o)=>{if(a.prop(da)==this.data){r.push({from:o,to:o+a.length});return}let u=a.prop(jr.mounted);if(u){if(u.tree.prop(da)==this.data){if(u.overlay)for(let l of u.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+a.length});return}else if(u.overlay){let l=r.length;if(s(u.tree,u.overlay[0].from+o),r.length>l)return}}for(let l=0;l<a.children.length;l++){let c=a.children[l];c instanceof Cn&&s(c,a.positions[l]+o)}};return s(Hn(t),0),r}get allowsNesting(){return!0}}Vi.setState=yr.define();function Fg(i,t,n){let r=i.facet(fo),s=Hn(i).topNode;if(!r||r.allowsNesting)for(let a=s;a;a=a.enter(t,n,Yn.ExcludeBuffers))a.type.isTop&&(s=a);return s}function Hn(i){let t=i.field(Vi.state,!1);return t?t.tree:Cn.empty}class bj{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,n){let r=this.cursorPos-this.string.length;return t<r||n>=this.cursorPos?this.doc.sliceString(t,n):this.string.slice(t-r,n-r)}}let al=null;class Ia{constructor(t,n,r=[],s,a,o,u,l){this.parser=t,this.state=n,this.fragments=r,this.tree=s,this.treeLen=a,this.viewport=o,this.skipped=u,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(t,n,r){return new Ia(t,n,[],Cn.empty,0,r,[],null)}startParse(){return this.parser.startParse(new bj(this.state.doc),this.fragments)}work(t,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Cn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof t=="number"){let s=Date.now()+t;t=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Ro.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,n;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=t,this.tree=n,this.fragments=this.withoutTempSkipped(Ro.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let n=al;al=this;try{return t()}finally{al=n}}withoutTempSkipped(t){for(let n;n=this.tempSkipped.pop();)t=Ug(t,n.from,n.to);return t}changes(t,n){let{fragments:r,tree:s,treeLen:a,viewport:o,skipped:u}=this;if(this.takeTree(),!t.empty){let l=[];if(t.iterChangedRanges((c,p,m,h)=>l.push({fromA:c,toA:p,fromB:m,toB:h})),r=Ro.applyChanges(r,l),s=Cn.empty,a=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){u=[];for(let c of this.skipped){let p=t.mapPos(c.from,1),m=t.mapPos(c.to,-1);p<m&&u.push({from:p,to:m})}}}return new Ia(this.parser,n,r,s,a,o,u,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:a}=this.skipped[r];s<t.to&&a>t.from&&(this.fragments=Ug(this.fragments,s,a),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,n){this.skipped.push({from:t,to:n})}static getSkippingParser(t){return new class extends hb{createParse(n,r,s){let a=s[0].from,o=s[s.length-1].to;return{parsedPos:a,advance(){let l=al;if(l){for(let c of s)l.tempSkipped.push(c);t&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,t]):t)}return this.parsedPos=o,new Cn(yi.none,[],[],o-a)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let n=this.fragments;return this.treeLen>=t&&n.length&&n[0].from==0&&n[0].to>=t}static get(){return al}}function Ug(i,t,n){return Ro.applyChanges(i,[{fromA:t,toA:n,fromB:t,toB:n}])}class Pa{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(t.changes,t.state),r=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Pa(n)}static init(t){let n=Math.min(3e3,t.doc.length),r=Ia.create(t.facet(fo).parser,t,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Pa(r)}}Vi.state=zn.define({create:Pa.init,update(i,t){for(let n of t.effects)if(n.is(Vi.setState))return n.value;return t.startState.facet(fo)!=t.state.facet(fo)?Pa.init(t.state):i.apply(t)}});let pb=i=>{let t=setTimeout(()=>i(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(pb=i=>{let t=-1,n=setTimeout(()=>{t=requestIdleCallback(i,{timeout:500-100})},100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const gd=typeof navigator<"u"&&(!((md=navigator.scheduling)===null||md===void 0)&&md.isInputPending)?()=>navigator.scheduling.isInputPending():null,_j=Tn.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let n=this.view.state.field(Vi.state).context;(n.updateViewport(t.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:t}=this.view,n=t.field(Vi.state);(n.tree!=n.context.tree||!n.context.isDone(t.doc.length))&&(this.working=pb(this.work))}work(t){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,a=r.field(Vi.state);if(a.tree==a.context.tree&&a.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!gd?Math.max(25,t.timeRemaining()-5):1e9),u=a.context.treeLen<s&&r.doc.length>s+1e3,l=a.context.work(()=>gd&&gd()||Date.now()>o,s+(u?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Vi.setState.of(new Pa(a.context))})),this.chunkBudget>0&&!(l&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Ei(this.view.state,n)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),fo=Gt.define({combine(i){return i.length?i[0]:null},enables:i=>[Vi.state,_j,Wt.contentAttributes.compute([i],t=>{let n=t.facet(i);return n&&n.name?{"data-language":n.name}:{}})]}),mb=Gt.define(),gp=Gt.define({combine:i=>{if(!i.length)return"  ";let t=i[0];if(!t||/\S/.test(t)||Array.from(t).some(n=>n!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return t}});function Fo(i){let t=i.facet(gp);return t.charCodeAt(0)==9?i.tabSize*t.length:t.length}function Ll(i,t){let n="",r=i.tabSize,s=i.facet(gp)[0];if(s=="	"){for(;t>=r;)n+="	",t-=r;s=" "}for(let a=0;a<t;a++)n+=s;return n}function yp(i,t){i instanceof kr&&(i=new dh(i));for(let r of i.state.facet(mb)){let s=r(i,t);if(s!==void 0)return s}let n=Hn(i.state);return n?xj(i,n,t):null}class dh{constructor(t,n={}){this.state=t,this.options=n,this.unit=Fo(t)}lineAt(t,n=1){let r=this.state.doc.lineAt(t),{simulateBreak:s,simulateDoubleBreak:a}=this.options;return s!=null&&s>=r.from&&s<=r.to?a&&s==t?{text:"",from:t}:(n<0?s<t:s<=t)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(t,n=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(t,n);return r.slice(t-s,Math.min(r.length,t+100-s))}column(t,n=1){let{text:r,from:s}=this.lineAt(t,n),a=this.countColumn(r,t-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(a+=o-this.countColumn(r,r.search(/\S|$/))),a}countColumn(t,n=t.length){return eu(t,this.state.tabSize,n)}lineIndent(t,n=1){let{text:r,from:s}=this.lineAt(t,n),a=this.options.overrideIndentation;if(a){let o=a(s);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const wj=new jr;function xj(i,t,n){return gb(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,i)}function Sj(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function jj(i){let t=i.type.prop(wj);if(t)return t;let n=i.firstChild,r;if(n&&(r=n.type.prop(jr.closedBy))){let s=i.lastChild,a=s&&r.indexOf(s.name)>-1;return o=>Ej(o,!0,1,void 0,a&&!Sj(o)?s.from:void 0)}return i.parent==null?Cj:null}function gb(i,t,n){for(;i;i=i.parent){let r=jj(i);if(r)return r(vp.create(n,t,i))}return null}function Cj(){return 0}class vp extends dh{constructor(t,n,r){super(t.state,t.options),this.base=t,this.pos=n,this.node=r}static create(t,n,r){return new vp(t,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.from);for(;;){let n=this.node.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(Tj(n,this.node))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){let t=this.node.parent;return t?gb(t,this.pos,this.base):0}}function Tj(i,t){for(let n=t;n;n=n.parent)if(i==n)return!0;return!1}function kj(i){let t=i.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let s=i.options.simulateBreak,a=i.state.doc.lineAt(n.from),o=s==null||s<=a.from?a.to:Math.min(a.to,s);for(let u=n.to;;){let l=t.childAfter(u);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;u=l.to}}function Ej(i,t,n,r,s){let a=i.textAfter,o=a.match(/^\s*/)[0].length,u=r&&a.slice(o,o+r.length)==r||s==i.pos+o,l=t?kj(i):null;return l?u?i.column(l.from):i.column(l.to):i.baseIndent+(u?0:i.unit*n)}const Mj=200;function Aj(){return kr.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let t=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!t.length)return i;let n=i.newDoc,{head:r}=i.newSelection.main,s=n.lineAt(r);if(r>s.from+Mj)return i;let a=n.sliceString(s.from,r);if(!t.some(c=>c.test(a)))return i;let{state:o}=i,u=-1,l=[];for(let{head:c}of o.selection.ranges){let p=o.doc.lineAt(c);if(p.from==u)continue;u=p.from;let m=yp(o,p.from);if(m==null)continue;let h=/^\s*/.exec(p.text)[0],f=Ll(o,m);h!=f&&l.push({from:p.from,to:p.from+h.length,insert:f})}return l.length?[i,{changes:l,sequential:!0}]:i})}const Oj=Gt.define(),Ij=new jr;function Pj(i,t,n){let r=Hn(i);if(r.length<n)return null;let s=r.resolveInner(n,1),a=null;for(let o=s;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(a&&o.from<t)break;let u=o.type.prop(Ij);if(u&&(o.to<r.length-50||r.length==i.doc.length||!Rj(o))){let l=u(o,i);l&&l.from<=n&&l.from>=t&&l.to>n&&(a=l)}}return a}function Rj(i){let t=i.lastChild;return t&&t.to==i.to&&t.type.isError}function Tc(i,t,n){for(let r of i.facet(Oj)){let s=r(i,t,n);if(s)return s}return Pj(i,t,n)}function yb(i,t){let n=t.mapPos(i.from,1),r=t.mapPos(i.to,-1);return n>=r?void 0:{from:n,to:r}}const fh=yr.define({map:yb}),nu=yr.define({map:yb});function vb(i){let t=[];for(let{head:n}of i.state.selection.ranges)t.some(r=>r.from<=n&&r.to>=n)||t.push(i.lineBlockAt(n));return t}const Uo=zn.define({create(){return Qt.none},update(i,t){i=i.map(t.changes);for(let n of t.effects)n.is(fh)&&!Dj(i,n.value.from,n.value.to)?i=i.update({add:[Vg.range(n.value.from,n.value.to)]}):n.is(nu)&&(i=i.update({filter:(r,s)=>n.value.from!=r||n.value.to!=s,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;i.between(r,r,(s,a)=>{s<r&&a>r&&(n=!0)}),n&&(i=i.update({filterFrom:r,filterTo:r,filter:(s,a)=>a<=r||s>=r}))}return i},provide:i=>Wt.decorations.from(i),toJSON(i,t){let n=[];return i.between(0,t.doc.length,(r,s)=>{n.push(r,s)}),n},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<i.length;){let r=i[n++],s=i[n++];if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");t.push(Vg.range(r,s))}return Qt.set(t,!0)}});function kc(i,t,n){var r;let s=null;return(r=i.field(Uo,!1))===null||r===void 0||r.between(t,n,(a,o)=>{(!s||s.from>a)&&(s={from:a,to:o})}),s}function Dj(i,t,n){let r=!1;return i.between(t,t,(s,a)=>{s==t&&a==n&&(r=!0)}),r}function bb(i,t){return i.field(Uo,!1)?t:t.concat(yr.appendConfig.of(xb()))}const Lj=i=>{for(let t of vb(i)){let n=Tc(i.state,t.from,t.to);if(n)return i.dispatch({effects:bb(i.state,[fh.of(n),_b(i,n)])}),!0}return!1},Nj=i=>{if(!i.state.field(Uo,!1))return!1;let t=[];for(let n of vb(i)){let r=kc(i.state,n.from,n.to);r&&t.push(nu.of(r),_b(i,r,!1))}return t.length&&i.dispatch({effects:t}),t.length>0};function _b(i,t,n=!0){let r=i.state.doc.lineAt(t.from).number,s=i.state.doc.lineAt(t.to).number;return Wt.announce.of(`${i.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${i.state.phrase("to")} ${s}.`)}const Bj=i=>{let{state:t}=i,n=[];for(let r=0;r<t.doc.length;){let s=i.lineBlockAt(r),a=Tc(t,s.from,s.to);a&&n.push(fh.of(a)),r=(a?i.lineBlockAt(a.to):s).to+1}return n.length&&i.dispatch({effects:bb(i.state,n)}),!!n.length},Fj=i=>{let t=i.state.field(Uo,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,i.state.doc.length,(r,s)=>{n.push(nu.of({from:r,to:s}))}),i.dispatch({effects:n}),!0},Uj=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Lj},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Nj},{key:"Ctrl-Alt-[",run:Bj},{key:"Ctrl-Alt-]",run:Fj}],Vj={placeholderDOM:null,placeholderText:"â¦"},wb=Gt.define({combine(i){return ps(i,Vj)}});function xb(i){let t=[Uo,zj];return i&&t.push(wb.of(i)),t}const Vg=Qt.replace({widget:new class extends yo{toDOM(i){let{state:t}=i,n=t.facet(wb),r=a=>{let o=i.lineBlockAt(i.posAtDOM(a.target)),u=kc(i.state,o.from,o.to);u&&i.dispatch({effects:nu.of(u)}),a.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(i,r);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}}}),Gj={openText:"â",closedText:"âº",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class yd extends Ms{constructor(t,n){super(),this.config=t,this.open=n}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=t.state.phrase(this.open?"Fold line":"Unfold line"),n}}function Hj(i={}){let t=Object.assign(Object.assign({},Gj),i),n=new yd(t,!0),r=new yd(t,!1),s=Tn.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(fo)!=o.state.facet(fo)||o.startState.field(Uo,!1)!=o.state.field(Uo,!1)||Hn(o.startState)!=Hn(o.state)||t.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let u=new lo;for(let l of o.viewportLineBlocks){let c=kc(o.state,l.from,l.to)?r:Tc(o.state,l.from,l.to)?n:null;c&&u.add(l.from,l.from,c)}return u.finish()}}),{domEventHandlers:a}=t;return[s,$2({class:"cm-foldGutter",markers(o){var u;return((u=o.plugin(s))===null||u===void 0?void 0:u.markers)||Ur.empty},initialSpacer(){return new yd(t,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(o,u,l)=>{if(a.click&&a.click(o,u,l))return!0;let c=kc(o.state,u.from,u.to);if(c)return o.dispatch({effects:nu.of(c)}),!0;let p=Tc(o.state,u.from,u.to);return p?(o.dispatch({effects:fh.of(p)}),!0):!1}})}),xb()]}const zj=Wt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ph{constructor(t,n){this.specs=t;let r;function s(u){let l=uo.newName();return(r||(r=Object.create(null)))["."+l]=u,l}const a=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,o=n.scope;this.scope=o instanceof Vi?u=>u.prop(da)==o.data:o?u=>u==o:void 0,this.style=fb(t.map(u=>({tag:u.tag,class:u.class||s(Object.assign({},u,{tag:null}))})),{all:a}).style,this.module=r?new uo(r):null,this.themeType=n.themeType}static define(t,n){return new ph(t,n||{})}}const jf=Gt.define(),Sb=Gt.define({combine(i){return i.length?[i[0]]:null}});function vd(i){let t=i.facet(jf);return t.length?t:i.facet(Sb)}function Wj(i,t){let n=[$j],r;return i instanceof ph&&(i.module&&n.push(Wt.styleModule.of(i.module)),r=i.themeType),t!=null&&t.fallback?n.push(Sb.of(i)):r?n.push(jf.computeN([Wt.darkTheme],s=>s.facet(Wt.darkTheme)==(r=="dark")?[i]:[])):n.push(jf.of(i)),n}class qj{constructor(t){this.markCache=Object.create(null),this.tree=Hn(t.state),this.decorations=this.buildDeco(t,vd(t.state))}update(t){let n=Hn(t.state),r=vd(t.state),s=r!=vd(t.startState);n.length<t.view.viewport.to&&!s&&n.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(n!=this.tree||t.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(t.view,r))}buildDeco(t,n){if(!n||!this.tree.length)return Qt.none;let r=new lo;for(let{from:s,to:a}of t.visibleRanges)pj(this.tree,n,(o,u,l)=>{r.add(o,u,this.markCache[l]||(this.markCache[l]=Qt.mark({class:l})))},s,a);return r.finish()}}const $j=Ga.high(Tn.fromClass(qj,{decorations:i=>i.decorations})),Xj=ph.define([{tag:It.meta,color:"#404740"},{tag:It.link,textDecoration:"underline"},{tag:It.heading,textDecoration:"underline",fontWeight:"bold"},{tag:It.emphasis,fontStyle:"italic"},{tag:It.strong,fontWeight:"bold"},{tag:It.strikethrough,textDecoration:"line-through"},{tag:It.keyword,color:"#708"},{tag:[It.atom,It.bool,It.url,It.contentSeparator,It.labelName],color:"#219"},{tag:[It.literal,It.inserted],color:"#164"},{tag:[It.string,It.deleted],color:"#a11"},{tag:[It.regexp,It.escape,It.special(It.string)],color:"#e40"},{tag:It.definition(It.variableName),color:"#00f"},{tag:It.local(It.variableName),color:"#30a"},{tag:[It.typeName,It.namespace],color:"#085"},{tag:It.className,color:"#167"},{tag:[It.special(It.variableName),It.macroName],color:"#256"},{tag:It.definition(It.propertyName),color:"#00c"},{tag:It.comment,color:"#940"},{tag:It.invalid,color:"#f00"}]),Yj=Wt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),jb=1e4,Cb="()[]{}",Tb=Gt.define({combine(i){return ps(i,{afterCursor:!0,brackets:Cb,maxScanDistance:jb,renderMatch:Qj})}}),Kj=Qt.mark({class:"cm-matchingBracket"}),Jj=Qt.mark({class:"cm-nonmatchingBracket"});function Qj(i){let t=[],n=i.matched?Kj:Jj;return t.push(n.range(i.start.from,i.start.to)),i.end&&t.push(n.range(i.end.from,i.end.to)),t}const Zj=zn.define({create(){return Qt.none},update(i,t){if(!t.docChanged&&!t.selection)return i;let n=[],r=t.state.facet(Tb);for(let s of t.state.selection.ranges){if(!s.empty)continue;let a=is(t.state,s.head,-1,r)||s.head>0&&is(t.state,s.head-1,1,r)||r.afterCursor&&(is(t.state,s.head,1,r)||s.head<t.state.doc.length&&is(t.state,s.head+1,-1,r));a&&(n=n.concat(r.renderMatch(a,t.state)))}return Qt.set(n,!0)},provide:i=>Wt.decorations.from(i)}),eC=[Zj,Yj];function tC(i={}){return[Tb.of(i),eC]}const rC=new jr;function Cf(i,t,n){let r=i.prop(t<0?jr.openedBy:jr.closedBy);if(r)return r;if(i.name.length==1){let s=n.indexOf(i.name);if(s>-1&&s%2==(t<0?1:0))return[n[s+t]]}return null}function Tf(i){let t=i.type.prop(rC);return t?t(i.node):i}function is(i,t,n,r={}){let s=r.maxScanDistance||jb,a=r.brackets||Cb,o=Hn(i),u=o.resolveInner(t,n);for(let l=u;l;l=l.parent){let c=Cf(l.type,n,a);if(c&&l.from<l.to){let p=Tf(l);if(p&&(n>0?t>=p.from&&t<p.to:t>p.from&&t<=p.to))return nC(i,t,n,l,p,c,a)}}return iC(i,t,n,o,u.type,s,a)}function nC(i,t,n,r,s,a,o){let u=r.parent,l={from:s.from,to:s.to},c=0,p=u==null?void 0:u.cursor();if(p&&(n<0?p.childBefore(r.from):p.childAfter(r.to)))do if(n<0?p.to<=r.from:p.from>=r.to){if(c==0&&a.indexOf(p.type.name)>-1&&p.from<p.to){let m=Tf(p);return{start:l,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(Cf(p.type,n,o))c++;else if(Cf(p.type,-n,o)){if(c==0){let m=Tf(p);return{start:l,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}c--}}while(n<0?p.prevSibling():p.nextSibling());return{start:l,matched:!1}}function iC(i,t,n,r,s,a,o){let u=n<0?i.sliceDoc(t-1,t):i.sliceDoc(t,t+1),l=o.indexOf(u);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},p=i.doc.iterRange(t,n>0?i.doc.length:0),m=0;for(let h=0;!p.next().done&&h<=a;){let f=p.value;n<0&&(h+=f.length);let d=t+h*n;for(let g=n>0?0:f.length-1,y=n>0?f.length:-1;g!=y;g+=n){let b=o.indexOf(f[g]);if(!(b<0||r.resolveInner(d+g,1).type!=s))if(b%2==0==n>0)m++;else{if(m==1)return{start:c,end:{from:d+g,to:d+g+1},matched:b>>1==l>>1};m--}}n>0&&(h+=f.length)}return p.done?{start:c,matched:!1}:null}function Gg(i,t,n,r=0,s=0){t==null&&(t=i.search(/[^\s\u00a0]/),t==-1&&(t=i.length));let a=s;for(let o=r;o<t;o++)i.charCodeAt(o)==9?a+=n-a%n:a++;return a}class kb{constructor(t,n,r,s){this.string=t,this.tabSize=n,this.indentUnit=r,this.overrideIndent=s,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(t){let n=this.string.charAt(this.pos),r;if(typeof t=="string"?r=n==t:r=n&&(t instanceof RegExp?t.test(n):t(n)),r)return++this.pos,n}eatWhile(t){let n=this.pos;for(;this.eat(t););return this.pos>n}eatSpace(){let t=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t}skipToEnd(){this.pos=this.string.length}skipTo(t){let n=this.string.indexOf(t,this.pos);if(n>-1)return this.pos=n,!0}backUp(t){this.pos-=t}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Gg(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var t;return(t=this.overrideIndent)!==null&&t!==void 0?t:Gg(this.string,null,this.tabSize)}match(t,n,r){if(typeof t=="string"){let s=o=>r?o.toLowerCase():o,a=this.string.substr(this.pos,t.length);return s(a)==s(t)?(n!==!1&&(this.pos+=t.length),!0):null}else{let s=this.string.slice(this.pos).match(t);return s&&s.index>0?null:(s&&n!==!1&&(this.pos+=s[0].length),s)}}current(){return this.string.slice(this.start,this.pos)}}function sC(i){return{name:i.name||"",token:i.token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||oC,indent:i.indent||(()=>null),languageData:i.languageData||{},tokenTable:i.tokenTable||wp}}function oC(i){if(typeof i!="object")return i;let t={};for(let n in i){let r=i[n];t[n]=r instanceof Array?r.slice():r}return t}const Hg=new WeakMap;class bp extends Vi{constructor(t){let n=yj(t.languageData),r=sC(t),s,a=new class extends hb{createParse(o,u,l){return new lC(s,o,u,l)}};super(n,a,[mb.of((o,u)=>this.getIndent(o,u))],t.name),this.topNode=hC(n),s=this,this.streamParser=r,this.stateAfter=new jr({perNode:!0}),this.tokenTable=t.tokenTable?new Ob(r.tokenTable):cC}static define(t){return new bp(t)}getIndent(t,n){let r=Hn(t.state),s=r.resolve(n);for(;s&&s.type!=this.topNode;)s=s.parent;if(!s)return null;let a,{overrideIndentation:o}=t.options;o&&(a=Hg.get(t.state),a!=null&&a<n-1e4&&(a=void 0));let u=_p(this,r,0,s.from,a??n),l,c;if(u?(c=u.state,l=u.pos+1):(c=this.streamParser.startState(t.unit),l=0),n-l>1e4)return null;for(;l<n;){let m=t.state.doc.lineAt(l),h=Math.min(n,m.to);if(m.length){let f=o?o(m.from):-1,d=new kb(m.text,t.state.tabSize,t.unit,f<0?void 0:f);for(;d.pos<h-m.from;)Mb(this.streamParser.token,d,c)}else this.streamParser.blankLine(c,t.unit);if(h==n)break;l=m.to+1}let p=t.lineAt(n);return o&&a==null&&Hg.set(t.state,p.from),this.streamParser.indent(c,/^\s*(.*)/.exec(p.text)[1],t)}get allowsNesting(){return!1}}function _p(i,t,n,r,s){let a=n>=r&&n+t.length<=s&&t.prop(i.stateAfter);if(a)return{state:i.streamParser.copyState(a),pos:n+t.length};for(let o=t.children.length-1;o>=0;o--){let u=t.children[o],l=n+t.positions[o],c=u instanceof Cn&&l<s&&_p(i,u,l,r,s);if(c)return c}return null}function Eb(i,t,n,r,s){if(s&&n<=0&&r>=t.length)return t;!s&&t.type==i.topNode&&(s=!0);for(let a=t.children.length-1;a>=0;a--){let o=t.positions[a],u=t.children[a],l;if(o<r&&u instanceof Cn){if(!(l=Eb(i,u,n-o,r-o,s)))break;return s?new Cn(t.type,t.children.slice(0,a).concat(l),t.positions.slice(0,a+1),o+l.length):l}}return null}function aC(i,t,n,r){for(let s of t){let a=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),u=a<=n&&o>n&&_p(i,s.tree,0-s.offset,n,o),l;if(u&&(l=Eb(i,s.tree,n+s.offset,u.pos+s.offset,!1)))return{state:u.state,tree:l}}return{state:i.streamParser.startState(r?Fo(r):4),tree:Cn.empty}}class lC{constructor(t,n,r,s){this.lang=t,this.input=n,this.fragments=r,this.ranges=s,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=s[s.length-1].to;let a=Ia.get(),o=s[0].from,{state:u,tree:l}=aC(t,r,o,a==null?void 0:a.state);this.state=u,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);a&&this.parsedPos<a.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Fo(a.state)),a.skipUntilInView(this.parsedPos,a.viewport.from),this.parsedPos=a.viewport.from),this.moveRangeIndex()}advance(){let t=Ia.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(t&&(r=Math.min(r,t.viewport.to));this.parsedPos<r;)this.parseLine(t);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():t&&this.parsedPos>=t.viewport.to?(t.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(t){this.stoppedAt=t}lineAfter(t){let n=this.input.chunk(t);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return t+n.length<=this.to?n:n.slice(0,this.to-t)}nextLine(){let t=this.parsedPos,n=this.lineAfter(t),r=t+n.length;for(let s=this.rangeIndex;;){let a=this.ranges[s].to;if(a>=r||(n=n.slice(0,a-(r-n.length)),s++,s==this.ranges.length))break;let o=this.ranges[s].from,u=this.lineAfter(o);n+=u,r=o+u.length}return{line:n,end:r}}skipGapsTo(t,n,r){for(;;){let s=this.ranges[this.rangeIndex].to,a=t+n;if(r>0?s>a:s>=a)break;let o=this.ranges[++this.rangeIndex].from;n+=o-s}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(t,n,r,s,a){if(this.ranges.length>1){a=this.skipGapsTo(n,a,1),n+=a;let o=this.chunk.length;a=this.skipGapsTo(r,a,-1),r+=a,s+=this.chunk.length-o}return this.chunk.push(t,n,r,s),a}parseLine(t){let{line:n,end:r}=this.nextLine(),s=0,{streamParser:a}=this.lang,o=new kb(n,t?t.state.tabSize:4,t?Fo(t.state):2);if(o.eol())a.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let u=Mb(a.token,o,this.state);if(u&&(s=this.emitToken(this.lang.tokenTable.resolve(u),this.parsedPos+o.start,this.parsedPos+o.pos,4,s)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let t=Cn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:uC,topID:0,maxBufferLength:2048,reused:this.chunkReused});t=new Cn(t.type,t.children,t.positions,t.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(t),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Cn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Mb(i,t,n){t.start=t.pos;for(let r=0;r<10;r++){let s=i(t,n);if(t.pos>t.start)return s}throw new Error("Stream parser failed to advance stream.")}const wp=Object.create(null),Nl=[yi.none],uC=new dp(Nl),zg=[],Ab=Object.create(null);for(let[i,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Ab[i]=Ib(wp,t);class Ob{constructor(t){this.extra=t,this.table=Object.assign(Object.create(null),Ab)}resolve(t){return t?this.table[t]||(this.table[t]=Ib(this.extra,t)):0}}const cC=new Ob(wp);function bd(i,t){zg.indexOf(i)>-1||(zg.push(i),console.warn(t))}function Ib(i,t){let n=null;for(let a of t.split(".")){let o=i[a]||It[a];o?typeof o=="function"?n?n=o(n):bd(a,`Modifier ${a} used at start of tag`):n?bd(a,`Tag ${a} used as modifier`):n=o:bd(a,`Unknown highlighting tag ${a}`)}if(!n)return 0;let r=t.replace(/ /g,"_"),s=yi.define({id:Nl.length,name:r,props:[dj({[r]:n})]});return Nl.push(s),s.id}function hC(i){let t=yi.define({id:Nl.length,name:"Document",props:[da.add(()=>i)]});return Nl.push(t),t}const dC=i=>{let{state:t}=i,n=t.doc.lineAt(t.selection.main.head),r=Sp(i.state,n.from);return r.line?fC(i):r.block?mC(i):!1};function xp(i,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let s=i(t,n);return s?(r(n.update(s)),!0):!1}}const fC=xp(vC,0),pC=xp(Pb,0),mC=xp((i,t)=>Pb(i,t,yC(t)),0);function Sp(i,t){let n=i.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const ll=50;function gC(i,{open:t,close:n},r,s){let a=i.sliceDoc(r-ll,r),o=i.sliceDoc(s,s+ll),u=/\s*$/.exec(a)[0].length,l=/^\s*/.exec(o)[0].length,c=a.length-u;if(a.slice(c-t.length,c)==t&&o.slice(l,l+n.length)==n)return{open:{pos:r-u,margin:u&&1},close:{pos:s+l,margin:l&&1}};let p,m;s-r<=2*ll?p=m=i.sliceDoc(r,s):(p=i.sliceDoc(r,r+ll),m=i.sliceDoc(s-ll,s));let h=/^\s*/.exec(p)[0].length,f=/\s*$/.exec(m)[0].length,d=m.length-f-n.length;return p.slice(h,h+t.length)==t&&m.slice(d,d+n.length)==n?{open:{pos:r+h+t.length,margin:/\s/.test(p.charAt(h+t.length))?1:0},close:{pos:s-f-n.length,margin:/\s/.test(m.charAt(d-1))?1:0}}:null}function yC(i){let t=[];for(let n of i.selection.ranges){let r=i.doc.lineAt(n.from),s=n.to<=r.to?r:i.doc.lineAt(n.to),a=t.length-1;a>=0&&t[a].to>r.from?t[a].to=s.to:t.push({from:r.from,to:s.to})}return t}function Pb(i,t,n=t.selection.ranges){let r=n.map(a=>Sp(t,a.from).block);if(!r.every(a=>a))return null;let s=n.map((a,o)=>gC(t,r[o],a.from,a.to));if(i!=2&&!s.every(a=>a))return{changes:t.changes(n.map((a,o)=>s[o]?[]:[{from:a.from,insert:r[o].open+" "},{from:a.to,insert:" "+r[o].close}]))};if(i!=1&&s.some(a=>a)){let a=[];for(let o=0,u;o<s.length;o++)if(u=s[o]){let l=r[o],{open:c,close:p}=u;a.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:p.pos-p.margin,to:p.pos+l.close.length})}return{changes:a}}return null}function vC(i,t,n=t.selection.ranges){let r=[],s=-1;for(let{from:a,to:o}of n){let u=r.length,l=1e9;for(let c=a;c<=o;){let p=t.doc.lineAt(c);if(p.from>s&&(a==o||o>p.from)){s=p.from;let m=Sp(t,p.from).line;if(!m)continue;let h=/^\s*/.exec(p.text)[0].length,f=h==p.length,d=p.text.slice(h,h+m.length)==m?h:-1;h<p.text.length&&h<l&&(l=h),r.push({line:p,comment:d,token:m,indent:h,empty:f,single:!1})}c=p.to+1}if(l<1e9)for(let c=u;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==u+1&&(r[u].single=!0)}if(i!=2&&r.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:u,token:l,indent:c,empty:p,single:m}of r)(m||!p)&&a.push({from:u.from+c,insert:l+" "});let o=t.changes(a);return{changes:o,selection:t.selection.map(o,1)}}else if(i!=1&&r.some(a=>a.comment>=0)){let a=[];for(let{line:o,comment:u,token:l}of r)if(u>=0){let c=o.from+u,p=c+l.length;o.text[p-o.from]==" "&&p++,a.push({from:c,to:p})}return{changes:a}}return null}const kf=Ps.define(),bC=Ps.define(),_C=Gt.define(),Rb=Gt.define({combine(i){return ps(i,{minDepth:100,newGroupDelay:500,joinToEvent:(t,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,n)=>(r,s)=>t(r,s)||n(r,s)})}});function wC(i){let t=0;return i.iterChangedRanges((n,r)=>t=r),t}const Db=zn.define({create(){return ss.empty},update(i,t){let n=t.state.facet(Rb),r=t.annotation(kf);if(r){let l=t.docChanged?pt.single(wC(t.changes)):void 0,c=pi.fromTransaction(t,l),p=r.side,m=p==0?i.undone:i.done;return c?m=Ec(m,m.length,n.minDepth,c):m=Bb(m,t.startState.selection),new ss(p==0?r.rest:m,p==0?m:r.rest)}let s=t.annotation(bC);if((s=="full"||s=="before")&&(i=i.isolate()),t.annotation(On.addToHistory)===!1)return t.changes.empty?i:i.addMapping(t.changes.desc);let a=pi.fromTransaction(t),o=t.annotation(On.time),u=t.annotation(On.userEvent);return a?i=i.addChanges(a,o,u,n,t):t.selection&&(i=i.addSelection(t.startState.selection,o,u,n.newGroupDelay)),(s=="full"||s=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(t=>t.toJSON()),undone:i.undone.map(t=>t.toJSON())}},fromJSON(i){return new ss(i.done.map(pi.fromJSON),i.undone.map(pi.fromJSON))}});function xC(i={}){return[Db,Rb.of(i),Wt.domEventHandlers({beforeinput(t,n){let r=t.inputType=="historyUndo"?Lb:t.inputType=="historyRedo"?Ef:null;return r?(t.preventDefault(),r(n)):!1}})]}function mh(i,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let s=n.field(Db,!1);if(!s)return!1;let a=s.pop(i,n,t);return a?(r(a),!0):!1}}const Lb=mh(0,!1),Ef=mh(1,!1),SC=mh(0,!0),jC=mh(1,!0);class pi{constructor(t,n,r,s,a){this.changes=t,this.effects=n,this.mapped=r,this.startSelection=s,this.selectionsAfter=a}setSelAfter(t){return new pi(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,n,r;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(t){return new pi(t.changes&&En.fromJSON(t.changes),[],t.mapped&&os.fromJSON(t.mapped),t.startSelection&&pt.fromJSON(t.startSelection),t.selectionsAfter.map(pt.fromJSON))}static fromTransaction(t,n){let r=Di;for(let s of t.startState.facet(_C)){let a=s(t);a.length&&(r=r.concat(a))}return!r.length&&t.changes.empty?null:new pi(t.changes.invert(t.startState.doc),r,void 0,n||t.startState.selection,Di)}static selection(t){return new pi(void 0,Di,void 0,void 0,t)}}function Ec(i,t,n,r){let s=t+1>n+20?t-n-1:0,a=i.slice(s,t);return a.push(r),a}function CC(i,t){let n=[],r=!1;return i.iterChangedRanges((s,a)=>n.push(s,a)),t.iterChangedRanges((s,a,o,u)=>{for(let l=0;l<n.length;){let c=n[l++],p=n[l++];u>=c&&o<=p&&(r=!0)}}),r}function TC(i,t){return i.ranges.length==t.ranges.length&&i.ranges.filter((n,r)=>n.empty!=t.ranges[r].empty).length===0}function Nb(i,t){return i.length?t.length?i.concat(t):i:t}const Di=[],kC=200;function Bb(i,t){if(i.length){let n=i[i.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-kC));return r.length&&r[r.length-1].eq(t)?i:(r.push(t),Ec(i,i.length-1,1e9,n.setSelAfter(r)))}else return[pi.selection([t])]}function EC(i){let t=i[i.length-1],n=i.slice();return n[i.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function _d(i,t){if(!i.length)return i;let n=i.length,r=Di;for(;n;){let s=MC(i[n-1],t,r);if(s.changes&&!s.changes.empty||s.effects.length){let a=i.slice(0,n);return a[n-1]=s,a}else t=s.mapped,n--,r=s.selectionsAfter}return r.length?[pi.selection(r)]:Di}function MC(i,t,n){let r=Nb(i.selectionsAfter.length?i.selectionsAfter.map(u=>u.map(t)):Di,n);if(!i.changes)return pi.selection(r);let s=i.changes.map(t),a=t.mapDesc(i.changes,!0),o=i.mapped?i.mapped.composeDesc(a):a;return new pi(s,yr.mapEffects(i.effects,t),o,i.startSelection.map(a),r)}const AC=/^(input\.type|delete)($|\.)/;class ss{constructor(t,n,r=0,s=void 0){this.done=t,this.undone=n,this.prevTime=r,this.prevUserEvent=s}isolate(){return this.prevTime?new ss(this.done,this.undone):this}addChanges(t,n,r,s,a){let o=this.done,u=o[o.length-1];return u&&u.changes&&!u.changes.empty&&t.changes&&(!r||AC.test(r))&&(!u.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(a,CC(u.changes,t.changes))||r=="input.type.compose")?o=Ec(o,o.length-1,s.minDepth,new pi(t.changes.compose(u.changes),Nb(t.effects,u.effects),u.mapped,u.startSelection,Di)):o=Ec(o,o.length,s.minDepth,t),new ss(o,Di,n,r)}addSelection(t,n,r,s){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:Di;return a.length>0&&n-this.prevTime<s&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&TC(a[a.length-1],t)?this:new ss(Bb(this.done,t),this.undone,n,r)}addMapping(t){return new ss(_d(this.done,t),_d(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,n,r){let s=t==0?this.done:this.undone;if(s.length==0)return null;let a=s[s.length-1];if(r&&a.selectionsAfter.length)return n.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:kf.of({side:t,rest:EC(s)}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let o=s.length==1?Di:s.slice(0,s.length-1);return a.mapped&&(o=_d(o,a.mapped)),n.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:kf.of({side:t,rest:o}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}ss.empty=new ss(Di,Di);const OC=[{key:"Mod-z",run:Lb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ef,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ef,preventDefault:!0},{key:"Mod-u",run:SC,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:jC,preventDefault:!0}];function Ha(i,t){return pt.create(i.ranges.map(t),i.mainIndex)}function ms(i,t){return i.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Wi({state:i,dispatch:t},n){let r=Ha(i.selection,n);return r.eq(i.selection)?!1:(t(ms(i,r)),!0)}function gh(i,t){return pt.cursor(t?i.to:i.from)}function Fb(i,t){return Wi(i,n=>n.empty?i.moveByChar(n,t):gh(n,t))}function Zn(i){return i.textDirectionAt(i.state.selection.main.head)==mn.LTR}const Ub=i=>Fb(i,!Zn(i)),Vb=i=>Fb(i,Zn(i));function Gb(i,t){return Wi(i,n=>n.empty?i.moveByGroup(n,t):gh(n,t))}const IC=i=>Gb(i,!Zn(i)),PC=i=>Gb(i,Zn(i));function RC(i,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(i.sliceDoc(t.from,t.to)))||t.firstChild}function yh(i,t,n){let r=Hn(i).resolveInner(t.head),s=n?jr.closedBy:jr.openedBy;for(let l=t.head;;){let c=n?r.childAfter(l):r.childBefore(l);if(!c)break;RC(i,c,s)?r=c:l=n?c.to:c.from}let a=r.type.prop(s),o,u;return a&&(o=n?is(i,r.from,1):is(i,r.to,-1))&&o.matched?u=n?o.end.to:o.end.from:u=n?r.to:r.from,pt.cursor(u,n?-1:1)}const DC=i=>Wi(i,t=>yh(i.state,t,!Zn(i))),LC=i=>Wi(i,t=>yh(i.state,t,Zn(i)));function Hb(i,t){return Wi(i,n=>{if(!n.empty)return gh(n,t);let r=i.moveVertically(n,t);return r.head!=n.head?r:i.moveToLineBoundary(n,t)})}const zb=i=>Hb(i,!1),Wb=i=>Hb(i,!0);function qb(i){let t=i.scrollDOM.clientHeight<i.scrollDOM.scrollHeight-2,n=0,r=0,s;if(t){for(let a of i.state.facet(Wt.scrollMargins)){let o=a(i);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}s=i.scrollDOM.clientHeight-n-r}else s=(i.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:t,height:Math.max(i.defaultLineHeight,s-5)}}function $b(i,t){let n=qb(i),{state:r}=i,s=Ha(r.selection,o=>o.empty?i.moveVertically(o,t,n.height):gh(o,t));if(s.eq(r.selection))return!1;let a;if(n.selfScroll){let o=i.coordsAtPos(r.selection.main.head),u=i.scrollDOM.getBoundingClientRect(),l=u.top+n.marginTop,c=u.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(a=Wt.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-l}))}return i.dispatch(ms(r,s),{effects:a}),!0}const Wg=i=>$b(i,!1),Mf=i=>$b(i,!0);function vo(i,t,n){let r=i.lineBlockAt(t.head),s=i.moveToLineBoundary(t,n);if(s.head==t.head&&s.head!=(n?r.to:r.from)&&(s=i.moveToLineBoundary(t,n,!1)),!n&&s.head==r.from&&r.length){let a=/^\s*/.exec(i.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;a&&t.head!=r.from+a&&(s=pt.cursor(r.from+a))}return s}const NC=i=>Wi(i,t=>vo(i,t,!0)),BC=i=>Wi(i,t=>vo(i,t,!1)),FC=i=>Wi(i,t=>vo(i,t,!Zn(i))),UC=i=>Wi(i,t=>vo(i,t,Zn(i))),VC=i=>Wi(i,t=>pt.cursor(i.lineBlockAt(t.head).from,1)),GC=i=>Wi(i,t=>pt.cursor(i.lineBlockAt(t.head).to,-1));function HC(i,t,n){let r=!1,s=Ha(i.selection,a=>{let o=is(i,a.head,-1)||is(i,a.head,1)||a.head>0&&is(i,a.head-1,1)||a.head<i.doc.length&&is(i,a.head+1,-1);if(!o||!o.end)return a;r=!0;let u=o.start.from==a.head?o.end.to:o.end.from;return n?pt.range(a.anchor,u):pt.cursor(u)});return r?(t(ms(i,s)),!0):!1}const zC=({state:i,dispatch:t})=>HC(i,t,!1);function Bi(i,t){let n=Ha(i.state.selection,r=>{let s=t(r);return pt.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(i.state.selection)?!1:(i.dispatch(ms(i.state,n)),!0)}function Xb(i,t){return Bi(i,n=>i.moveByChar(n,t))}const Yb=i=>Xb(i,!Zn(i)),Kb=i=>Xb(i,Zn(i));function Jb(i,t){return Bi(i,n=>i.moveByGroup(n,t))}const WC=i=>Jb(i,!Zn(i)),qC=i=>Jb(i,Zn(i)),$C=i=>Bi(i,t=>yh(i.state,t,!Zn(i))),XC=i=>Bi(i,t=>yh(i.state,t,Zn(i)));function Qb(i,t){return Bi(i,n=>i.moveVertically(n,t))}const Zb=i=>Qb(i,!1),e1=i=>Qb(i,!0);function t1(i,t){return Bi(i,n=>i.moveVertically(n,t,qb(i).height))}const qg=i=>t1(i,!1),$g=i=>t1(i,!0),YC=i=>Bi(i,t=>vo(i,t,!0)),KC=i=>Bi(i,t=>vo(i,t,!1)),JC=i=>Bi(i,t=>vo(i,t,!Zn(i))),QC=i=>Bi(i,t=>vo(i,t,Zn(i))),ZC=i=>Bi(i,t=>pt.cursor(i.lineBlockAt(t.head).from)),eT=i=>Bi(i,t=>pt.cursor(i.lineBlockAt(t.head).to)),Xg=({state:i,dispatch:t})=>(t(ms(i,{anchor:0})),!0),Yg=({state:i,dispatch:t})=>(t(ms(i,{anchor:i.doc.length})),!0),Kg=({state:i,dispatch:t})=>(t(ms(i,{anchor:i.selection.main.anchor,head:0})),!0),Jg=({state:i,dispatch:t})=>(t(ms(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),tT=({state:i,dispatch:t})=>(t(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),rT=({state:i,dispatch:t})=>{let n=bh(i).map(({from:r,to:s})=>pt.range(r,Math.min(s+1,i.doc.length)));return t(i.update({selection:pt.create(n),userEvent:"select"})),!0},nT=({state:i,dispatch:t})=>{let n=Ha(i.selection,r=>{var s;let a=Hn(i).resolveInner(r.head,1);for(;!(a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from||!(!((s=a.parent)===null||s===void 0)&&s.parent));)a=a.parent;return pt.range(a.to,a.from)});return t(ms(i,n)),!0},iT=({state:i,dispatch:t})=>{let n=i.selection,r=null;return n.ranges.length>1?r=pt.create([n.main]):n.main.empty||(r=pt.create([pt.cursor(n.main.head)])),r?(t(ms(i,r)),!0):!1};function vh(i,t){if(i.state.readOnly)return!1;let n="delete.selection",{state:r}=i,s=r.changeByRange(a=>{let{from:o,to:u}=a;if(o==u){let l=t(o);l<o?(n="delete.backward",l=Wu(i,l,!1)):l>o&&(n="delete.forward",l=Wu(i,l,!0)),o=Math.min(o,l),u=Math.max(u,l)}else o=Wu(i,o,!1),u=Wu(i,u,!0);return o==u?{range:a}:{changes:{from:o,to:u},range:pt.cursor(o)}});return s.changes.empty?!1:(i.dispatch(r.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Wt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Wu(i,t,n){if(i instanceof Wt)for(let r of i.state.facet(Wt.atomicRanges).map(s=>s(i)))r.between(t,t,(s,a)=>{s<t&&a>t&&(t=n?a:s)});return t}const r1=(i,t)=>vh(i,n=>{let{state:r}=i,s=r.doc.lineAt(n),a,o;if(!t&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,n-s.from))){if(a[a.length-1]=="	")return n-1;let u=eu(a,r.tabSize),l=u%Fo(r)||Fo(r);for(let c=0;c<l&&a[a.length-1-c]==" ";c++)n--;o=n}else o=oi(s.text,n-s.from,t,t)+s.from,o==n&&s.number!=(t?r.doc.lines:1)&&(o+=t?1:-1);return o}),Af=i=>r1(i,!1),n1=i=>r1(i,!0),i1=(i,t)=>vh(i,n=>{let r=n,{state:s}=i,a=s.doc.lineAt(r),o=s.charCategorizer(r);for(let u=null;;){if(r==(t?a.to:a.from)){r==n&&a.number!=(t?s.doc.lines:1)&&(r+=t?1:-1);break}let l=oi(a.text,r-a.from,t)+a.from,c=a.text.slice(Math.min(r,l)-a.from,Math.max(r,l)-a.from),p=o(c);if(u!=null&&p!=u)break;(c!=" "||r!=n)&&(u=p),r=l}return r}),s1=i=>i1(i,!1),sT=i=>i1(i,!0),o1=i=>vh(i,t=>{let n=i.lineBlockAt(t).to;return t<n?n:Math.min(i.state.doc.length,t+1)}),oT=i=>vh(i,t=>{let n=i.lineBlockAt(t).from;return t>n?n:Math.max(0,t-1)}),aT=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let n=i.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Or.of(["",""])},range:pt.cursor(r.from)}));return t(i.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},lT=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let n=i.changeByRange(r=>{if(!r.empty||r.from==0||r.from==i.doc.length)return{range:r};let s=r.from,a=i.doc.lineAt(s),o=s==a.from?s-1:oi(a.text,s-a.from,!1)+a.from,u=s==a.to?s+1:oi(a.text,s-a.from,!0)+a.from;return{changes:{from:o,to:u,insert:i.doc.slice(s,u).append(i.doc.slice(o,s))},range:pt.cursor(u)}});return n.changes.empty?!1:(t(i.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function bh(i){let t=[],n=-1;for(let r of i.selection.ranges){let s=i.doc.lineAt(r.from),a=i.doc.lineAt(r.to);if(!r.empty&&r.to==a.from&&(a=i.doc.lineAt(r.to-1)),n>=s.number){let o=t[t.length-1];o.to=a.to,o.ranges.push(r)}else t.push({from:s.from,to:a.to,ranges:[r]});n=a.number+1}return t}function a1(i,t,n){if(i.readOnly)return!1;let r=[],s=[];for(let a of bh(i)){if(n?a.to==i.doc.length:a.from==0)continue;let o=i.doc.lineAt(n?a.to+1:a.from-1),u=o.length+1;if(n){r.push({from:a.to,to:o.to},{from:a.from,insert:o.text+i.lineBreak});for(let l of a.ranges)s.push(pt.range(Math.min(i.doc.length,l.anchor+u),Math.min(i.doc.length,l.head+u)))}else{r.push({from:o.from,to:a.from},{from:a.to,insert:i.lineBreak+o.text});for(let l of a.ranges)s.push(pt.range(l.anchor-u,l.head-u))}}return r.length?(t(i.update({changes:r,scrollIntoView:!0,selection:pt.create(s,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const uT=({state:i,dispatch:t})=>a1(i,t,!1),cT=({state:i,dispatch:t})=>a1(i,t,!0);function l1(i,t,n){if(i.readOnly)return!1;let r=[];for(let s of bh(i))n?r.push({from:s.from,insert:i.doc.slice(s.from,s.to)+i.lineBreak}):r.push({from:s.to,insert:i.lineBreak+i.doc.slice(s.from,s.to)});return t(i.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const hT=({state:i,dispatch:t})=>l1(i,t,!1),dT=({state:i,dispatch:t})=>l1(i,t,!0),fT=i=>{if(i.state.readOnly)return!1;let{state:t}=i,n=t.changes(bh(t).map(({from:s,to:a})=>(s>0?s--:a<t.doc.length&&a++,{from:s,to:a}))),r=Ha(t.selection,s=>i.moveVertically(s,!0)).map(n);return i.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function pT(i,t){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=Hn(i).resolveInner(t),r=n.childBefore(t),s=n.childAfter(t),a;return r&&s&&r.to<=t&&s.from>=t&&(a=r.type.prop(jr.closedBy))&&a.indexOf(s.name)>-1&&i.doc.lineAt(r.to).from==i.doc.lineAt(s.from).from?{from:r.to,to:s.from}:null}const mT=u1(!1),gT=u1(!0);function u1(i){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(s=>{let{from:a,to:o}=s,u=t.doc.lineAt(a),l=!i&&a==o&&pT(t,a);i&&(a=o=(o<=u.to?u:t.doc.lineAt(o)).to);let c=new dh(t,{simulateBreak:a,simulateDoubleBreak:!!l}),p=yp(c,a);for(p==null&&(p=/^\s*/.exec(t.doc.lineAt(a).text)[0].length);o<u.to&&/\s/.test(u.text[o-u.from]);)o++;l?{from:a,to:o}=l:a>u.from&&a<u.from+100&&!/\S/.test(u.text.slice(0,a))&&(a=u.from);let m=["",Ll(t,p)];return l&&m.push(Ll(t,c.lineIndent(u.from,-1))),{changes:{from:a,to:o,insert:Or.of(m)},range:pt.cursor(a+1+m[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function jp(i,t){let n=-1;return i.changeByRange(r=>{let s=[];for(let o=r.from;o<=r.to;){let u=i.doc.lineAt(o);u.number>n&&(r.empty||r.to>u.from)&&(t(u,s,r),n=u.number),o=u.to+1}let a=i.changes(s);return{changes:s,range:pt.range(a.mapPos(r.anchor,1),a.mapPos(r.head,1))}})}const yT=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let n=Object.create(null),r=new dh(i,{overrideIndentation:a=>{let o=n[a];return o??-1}}),s=jp(i,(a,o,u)=>{let l=yp(r,a.from);if(l==null)return;/\S/.test(a.text)||(l=0);let c=/^\s*/.exec(a.text)[0],p=Ll(i,l);(c!=p||u.from<a.from+c.length)&&(n[a.from]=l,o.push({from:a.from,to:a.from+c.length,insert:p}))});return s.changes.empty||t(i.update(s,{userEvent:"indent"})),!0},vT=({state:i,dispatch:t})=>i.readOnly?!1:(t(i.update(jp(i,(n,r)=>{r.push({from:n.from,insert:i.facet(gp)})}),{userEvent:"input.indent"})),!0),bT=({state:i,dispatch:t})=>i.readOnly?!1:(t(i.update(jp(i,(n,r)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let a=eu(s,i.tabSize),o=0,u=Ll(i,Math.max(0,a-Fo(i)));for(;o<s.length&&o<u.length&&s.charCodeAt(o)==u.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+s.length,insert:u.slice(o)})}),{userEvent:"delete.dedent"})),!0),_T=[{key:"Ctrl-b",run:Ub,shift:Yb,preventDefault:!0},{key:"Ctrl-f",run:Vb,shift:Kb},{key:"Ctrl-p",run:zb,shift:Zb},{key:"Ctrl-n",run:Wb,shift:e1},{key:"Ctrl-a",run:VC,shift:ZC},{key:"Ctrl-e",run:GC,shift:eT},{key:"Ctrl-d",run:n1},{key:"Ctrl-h",run:Af},{key:"Ctrl-k",run:o1},{key:"Ctrl-Alt-h",run:s1},{key:"Ctrl-o",run:aT},{key:"Ctrl-t",run:lT},{key:"Ctrl-v",run:Mf}],wT=[{key:"ArrowLeft",run:Ub,shift:Yb,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:IC,shift:WC,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:FC,shift:JC,preventDefault:!0},{key:"ArrowRight",run:Vb,shift:Kb,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:PC,shift:qC,preventDefault:!0},{mac:"Cmd-ArrowRight",run:UC,shift:QC,preventDefault:!0},{key:"ArrowUp",run:zb,shift:Zb,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Xg,shift:Kg},{mac:"Ctrl-ArrowUp",run:Wg,shift:qg},{key:"ArrowDown",run:Wb,shift:e1,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Yg,shift:Jg},{mac:"Ctrl-ArrowDown",run:Mf,shift:$g},{key:"PageUp",run:Wg,shift:qg},{key:"PageDown",run:Mf,shift:$g},{key:"Home",run:BC,shift:KC,preventDefault:!0},{key:"Mod-Home",run:Xg,shift:Kg},{key:"End",run:NC,shift:YC,preventDefault:!0},{key:"Mod-End",run:Yg,shift:Jg},{key:"Enter",run:mT},{key:"Mod-a",run:tT},{key:"Backspace",run:Af,shift:Af},{key:"Delete",run:n1},{key:"Mod-Backspace",mac:"Alt-Backspace",run:s1},{key:"Mod-Delete",mac:"Alt-Delete",run:sT},{mac:"Mod-Backspace",run:oT},{mac:"Mod-Delete",run:o1}].concat(_T.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),xT=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:DC,shift:$C},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:LC,shift:XC},{key:"Alt-ArrowUp",run:uT},{key:"Shift-Alt-ArrowUp",run:hT},{key:"Alt-ArrowDown",run:cT},{key:"Shift-Alt-ArrowDown",run:dT},{key:"Escape",run:iT},{key:"Mod-Enter",run:gT},{key:"Alt-l",mac:"Ctrl-l",run:rT},{key:"Mod-i",run:nT,preventDefault:!0},{key:"Mod-[",run:bT},{key:"Mod-]",run:vT},{key:"Mod-Alt-\\",run:yT},{key:"Shift-Mod-k",run:fT},{key:"Shift-Mod-\\",run:zC},{key:"Mod-/",run:dC},{key:"Alt-A",run:pC}].concat(wT);function Qr(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var t=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var s=n[r];typeof s=="string"?i.setAttribute(r,s):s!=null&&(i[r]=s)}t++}for(;t<arguments.length;t++)c1(i,arguments[t]);return i}function c1(i,t){if(typeof t=="string")i.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)i.appendChild(t);else if(Array.isArray(t))for(var n=0;n<t.length;n++)c1(i,t[n]);else throw new RangeError("Unsupported child node: "+t)}const Qg=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i;class Ra{constructor(t,n,r=0,s=t.length,a,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(r,s),this.bufferStart=r,this.normalize=a?u=>a(Qg(u)):Qg,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Vn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let n=Zf(t),r=this.bufferStart+this.bufferPos;this.bufferPos+=Ri(t);let s=this.normalize(n);for(let a=0,o=r;;a++){let u=s.charCodeAt(a),l=this.match(u,o);if(l)return this.value=l,this;if(a==s.length-1)break;o==r&&a<n.length&&n.charCodeAt(a)==u&&o++}}}match(t,n){let r=null;for(let s=0;s<this.matches.length;s+=2){let a=this.matches[s],o=!1;this.query.charCodeAt(a)==t&&(a==this.query.length-1?r={from:this.matches[s+1],to:n+1}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(Ra.prototype[Symbol.iterator]=function(){return this});const h1={from:-1,to:-1,match:/.*/.exec("")},Cp="gm"+(/x/.unicode==null?"":"u");class d1{constructor(t,n,r,s=0,a=t.length){if(this.text=t,this.to=a,this.curLine="",this.done=!1,this.value=h1,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new f1(t,n,r,s,a);this.re=new RegExp(n,Cp+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=t.iter();let o=t.lineAt(s);this.curLineStart=o.from,this.matchPos=Mc(t,s),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,s=r+n[0].length;if(this.matchPos=Mc(this.text,s+(r==s?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<s||r>this.value.to)&&(!this.test||this.test(r,s,n)))return this.value={from:r,to:s,match:n},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const wd=new WeakMap;class _a{constructor(t,n){this.from=t,this.text=n}get to(){return this.from+this.text.length}static get(t,n,r){let s=wd.get(t);if(!s||s.from>=r||s.to<=n){let u=new _a(n,t.sliceString(n,r));return wd.set(t,u),u}if(s.from==n&&s.to==r)return s;let{text:a,from:o}=s;return o>n&&(a=t.sliceString(n,o)+a,o=n),s.to<r&&(a+=t.sliceString(s.to,r)),wd.set(t,new _a(o,a)),new _a(n,a.slice(n-o,r-o))}}class f1{constructor(t,n,r,s,a){this.text=t,this.to=a,this.done=!1,this.value=h1,this.matchPos=Mc(t,s),this.re=new RegExp(n,Cp+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=_a.get(t,s,this.chunkEnd(s+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==t&&(this.re.lastIndex=t+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,s=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,s,n)))return this.value={from:r,to:s,match:n},this.matchPos=Mc(this.text,s+(r==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=_a.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(d1.prototype[Symbol.iterator]=f1.prototype[Symbol.iterator]=function(){return this});function ST(i){try{return new RegExp(i,Cp),!0}catch{return!1}}function Mc(i,t){if(t>=i.length)return t;let n=i.lineAt(t),r;for(;t<n.to&&(r=n.text.charCodeAt(t-n.from))>=56320&&r<57344;)t++;return t}function Of(i){let t=Qr("input",{class:"cm-textfield",name:"line"}),n=Qr("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),i.dispatch({effects:Ac.of(!1)}),i.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Qr("label",i.state.phrase("Go to line"),": ",t)," ",Qr("button",{class:"cm-button",type:"submit"},i.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:a}=i,o=a.doc.lineAt(a.selection.main.head),[,u,l,c,p]=s,m=c?+c.slice(1):0,h=l?+l:o.number;if(l&&p){let d=h/100;u&&(d=d*(u=="-"?-1:1)+o.number/a.doc.lines),h=Math.round(a.doc.lines*d)}else l&&u&&(h=h*(u=="-"?-1:1)+o.number);let f=a.doc.line(Math.max(1,Math.min(a.doc.lines,h)));i.dispatch({effects:Ac.of(!1),selection:pt.cursor(f.from+Math.max(0,Math.min(m,f.length))),scrollIntoView:!0}),i.focus()}return{dom:n}}const Ac=yr.define(),Zg=zn.define({create(){return!0},update(i,t){for(let n of t.effects)n.is(Ac)&&(i=n.value);return i},provide:i=>Dl.from(i,t=>t?Of:null)}),jT=i=>{let t=Rl(i,Of);if(!t){let n=[Ac.of(!0)];i.state.field(Zg,!1)==null&&n.push(yr.appendConfig.of([Zg,CT])),i.dispatch({effects:n}),t=Rl(i,Of)}return t&&t.dom.querySelector("input").focus(),!0},CT=Wt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),TT={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},p1=Gt.define({combine(i){return ps(i,TT,{highlightWordAroundCursor:(t,n)=>t||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function kT(i){let t=[IT,OT];return i&&t.push(p1.of(i)),t}const ET=Qt.mark({class:"cm-selectionMatch"}),MT=Qt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function ey(i,t,n,r){return(n==0||i(t.sliceDoc(n-1,n))!=hn.Word)&&(r==t.doc.length||i(t.sliceDoc(r,r+1))!=hn.Word)}function AT(i,t,n,r){return i(t.sliceDoc(n,n+1))==hn.Word&&i(t.sliceDoc(r-1,r))==hn.Word}const OT=Tn.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let t=i.state.facet(p1),{state:n}=i,r=n.selection;if(r.ranges.length>1)return Qt.none;let s=r.main,a,o=null;if(s.empty){if(!t.highlightWordAroundCursor)return Qt.none;let l=n.wordAt(s.head);if(!l)return Qt.none;o=n.charCategorizer(s.head),a=n.sliceDoc(l.from,l.to)}else{let l=s.to-s.from;if(l<t.minSelectionLength||l>200)return Qt.none;if(t.wholeWords){if(a=n.sliceDoc(s.from,s.to),o=n.charCategorizer(s.head),!(ey(o,n,s.from,s.to)&&AT(o,n,s.from,s.to)))return Qt.none}else if(a=n.sliceDoc(s.from,s.to).trim(),!a)return Qt.none}let u=[];for(let l of i.visibleRanges){let c=new Ra(n.doc,a,l.from,l.to);for(;!c.next().done;){let{from:p,to:m}=c.value;if((!o||ey(o,n,p,m))&&(s.empty&&p<=s.from&&m>=s.to?u.push(MT.range(p,m)):(p>=s.to||m<=s.from)&&u.push(ET.range(p,m)),u.length>t.maxMatches))return Qt.none}}return Qt.set(u)}},{decorations:i=>i.decorations}),IT=Wt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),PT=({state:i,dispatch:t})=>{let{selection:n}=i,r=pt.create(n.ranges.map(s=>i.wordAt(s.head)||pt.cursor(s.head)),n.mainIndex);return r.eq(n)?!1:(t(i.update({selection:r})),!0)};function RT(i,t){let{main:n,ranges:r}=i.selection,s=i.wordAt(n.head),a=s&&s.from==n.from&&s.to==n.to;for(let o=!1,u=new Ra(i.doc,t,r[r.length-1].to);;)if(u.next(),u.done){if(o)return null;u=new Ra(i.doc,t,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==u.value.from))continue;if(a){let l=i.wordAt(u.value.from);if(!l||l.from!=u.value.from||l.to!=u.value.to)continue}return u.value}}const DT=({state:i,dispatch:t})=>{let{ranges:n}=i.selection;if(n.some(a=>a.from===a.to))return PT({state:i,dispatch:t});let r=i.sliceDoc(n[0].from,n[0].to);if(i.selection.ranges.some(a=>i.sliceDoc(a.from,a.to)!=r))return!1;let s=RT(i,r);return s?(t(i.update({selection:i.selection.addRange(pt.range(s.from,s.to),!1),effects:Wt.scrollIntoView(s.to)})),!0):!1},Tp=Gt.define({combine(i){return ps(i,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:t=>new $T(t)})}});class m1{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||ST(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new FT(this):new NT(this)}getCursor(t,n=0,r){let s=t.doc?t:kr.create({doc:t});return r==null&&(r=s.doc.length),this.regexp?ua(this,s,n,r):la(this,s,n,r)}}class g1{constructor(t){this.spec=t}}function la(i,t,n,r){return new Ra(t.doc,i.unquoted,n,r,i.caseSensitive?void 0:s=>s.toLowerCase(),i.wholeWord?LT(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function LT(i,t){return(n,r,s,a)=>((a>n||a+s.length<r)&&(a=Math.max(0,n-2),s=i.sliceString(a,Math.min(i.length,r+2))),(t(Oc(s,n-a))!=hn.Word||t(Ic(s,n-a))!=hn.Word)&&(t(Ic(s,r-a))!=hn.Word||t(Oc(s,r-a))!=hn.Word))}class NT extends g1{constructor(t){super(t)}nextMatch(t,n,r){let s=la(this.spec,t,r,t.doc.length).nextOverlapping();return s.done&&(s=la(this.spec,t,0,n).nextOverlapping()),s.done?null:s.value}prevMatchInRange(t,n,r){for(let s=r;;){let a=Math.max(n,s-1e4-this.spec.unquoted.length),o=la(this.spec,t,a,s),u=null;for(;!o.nextOverlapping().done;)u=o.value;if(u)return u;if(a==n)return null;s-=1e4}}prevMatch(t,n,r){return this.prevMatchInRange(t,0,n)||this.prevMatchInRange(t,r,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,n){let r=la(this.spec,t,0,t.doc.length),s=[];for(;!r.next().done;){if(s.length>=n)return null;s.push(r.value)}return s}highlight(t,n,r,s){let a=la(this.spec,t,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,t.doc.length));for(;!a.next().done;)s(a.value.from,a.value.to)}}function ua(i,t,n,r){return new d1(t.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?BT(t.charCategorizer(t.selection.main.head)):void 0},n,r)}function Oc(i,t){return i.slice(oi(i,t,!1),t)}function Ic(i,t){return i.slice(t,oi(i,t))}function BT(i){return(t,n,r)=>!r[0].length||(i(Oc(r.input,r.index))!=hn.Word||i(Ic(r.input,r.index))!=hn.Word)&&(i(Ic(r.input,r.index+r[0].length))!=hn.Word||i(Oc(r.input,r.index+r[0].length))!=hn.Word)}class FT extends g1{nextMatch(t,n,r){let s=ua(this.spec,t,r,t.doc.length).next();return s.done&&(s=ua(this.spec,t,0,n).next()),s.done?null:s.value}prevMatchInRange(t,n,r){for(let s=1;;s++){let a=Math.max(n,r-s*1e4),o=ua(this.spec,t,a,r),u=null;for(;!o.next().done;)u=o.value;if(u&&(a==n||u.from>a+10))return u;if(a==n)return null}}prevMatch(t,n,r){return this.prevMatchInRange(t,0,n)||this.prevMatchInRange(t,r,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?t.match[0]:r!="0"&&+r<t.match.length?t.match[r]:n))}matchAll(t,n){let r=ua(this.spec,t,0,t.doc.length),s=[];for(;!r.next().done;){if(s.length>=n)return null;s.push(r.value)}return s}highlight(t,n,r,s){let a=ua(this.spec,t,Math.max(0,n-250),Math.min(r+250,t.doc.length));for(;!a.next().done;)s(a.value.from,a.value.to)}}const Bl=yr.define(),kp=yr.define(),eo=zn.define({create(i){return new xd(If(i).create(),null)},update(i,t){for(let n of t.effects)n.is(Bl)?i=new xd(n.value.create(),i.panel):n.is(kp)&&(i=new xd(i.query,n.value?Ep:null));return i},provide:i=>Dl.from(i,t=>t.panel)});class xd{constructor(t,n){this.query=t,this.panel=n}}const UT=Qt.mark({class:"cm-searchMatch"}),VT=Qt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),GT=Tn.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(eo))}update(i){let t=i.state.field(eo);(t!=i.startState.field(eo)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:i,panel:t}){if(!t||!i.spec.valid)return Qt.none;let{view:n}=this,r=new lo;for(let s=0,a=n.visibleRanges,o=a.length;s<o;s++){let{from:u,to:l}=a[s];for(;s<o-1&&l>a[s+1].from-2*250;)l=a[++s].to;i.highlight(n.state,u,l,(c,p)=>{let m=n.state.selection.ranges.some(h=>h.from==c&&h.to==p);r.add(c,p,m?VT:UT)})}return r.finish()}},{decorations:i=>i.decorations});function iu(i){return t=>{let n=t.state.field(eo,!1);return n&&n.query.spec.valid?i(t,n):y1(t)}}const Pc=iu((i,{query:t})=>{let{to:n}=i.state.selection.main,r=t.nextMatch(i.state,n,n);return r?(i.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Mp(i,r),userEvent:"select.search"}),!0):!1}),Rc=iu((i,{query:t})=>{let{state:n}=i,{from:r}=n.selection.main,s=t.prevMatch(n,r,r);return s?(i.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:Mp(i,s),userEvent:"select.search"}),!0):!1}),HT=iu((i,{query:t})=>{let n=t.matchAll(i.state,1e3);return!n||!n.length?!1:(i.dispatch({selection:pt.create(n.map(r=>pt.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),zT=({state:i,dispatch:t})=>{let n=i.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:s}=n.main,a=[],o=0;for(let u=new Ra(i.doc,i.sliceDoc(r,s));!u.next().done;){if(a.length>1e3)return!1;u.value.from==r&&(o=a.length),a.push(pt.range(u.value.from,u.value.to))}return t(i.update({selection:pt.create(a,o),userEvent:"select.search.matches"})),!0},ty=iu((i,{query:t})=>{let{state:n}=i,{from:r,to:s}=n.selection.main;if(n.readOnly)return!1;let a=t.nextMatch(n,r,r);if(!a)return!1;let o=[],u,l,c=[];if(a.from==r&&a.to==s&&(l=n.toText(t.getReplacement(a)),o.push({from:a.from,to:a.to,insert:l}),a=t.nextMatch(n,a.from,a.to),c.push(Wt.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),a){let p=o.length==0||o[0].from>=a.to?0:a.to-a.from-l.length;u={anchor:a.from-p,head:a.to-p},c.push(Mp(i,a))}return i.dispatch({changes:o,selection:u,scrollIntoView:!!u,effects:c,userEvent:"input.replace"}),!0}),WT=iu((i,{query:t})=>{if(i.state.readOnly)return!1;let n=t.matchAll(i.state,1e9).map(s=>{let{from:a,to:o}=s;return{from:a,to:o,insert:t.getReplacement(s)}});if(!n.length)return!1;let r=i.state.phrase("replaced $ matches",n.length)+".";return i.dispatch({changes:n,effects:Wt.announce.of(r),userEvent:"input.replace.all"}),!0});function Ep(i){return i.state.facet(Tp).createPanel(i)}function If(i,t){var n,r,s,a;let o=i.selection.main,u=o.empty||o.to>o.from+100?"":i.sliceDoc(o.from,o.to);if(t&&!u)return t;let l=i.facet(Tp);return new m1({search:((n=t==null?void 0:t.literal)!==null&&n!==void 0?n:l.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(r=t==null?void 0:t.caseSensitive)!==null&&r!==void 0?r:l.caseSensitive,literal:(s=t==null?void 0:t.literal)!==null&&s!==void 0?s:l.literal,wholeWord:(a=t==null?void 0:t.wholeWord)!==null&&a!==void 0?a:l.wholeWord})}const y1=i=>{let t=i.state.field(eo,!1);if(t&&t.panel){let n=Rl(i,Ep);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=i.root.activeElement){let s=If(i.state,t.query.spec);s.valid&&i.dispatch({effects:Bl.of(s)}),r.focus(),r.select()}}else i.dispatch({effects:[kp.of(!0),t?Bl.of(If(i.state,t.query.spec)):yr.appendConfig.of(YT)]});return!0},v1=i=>{let t=i.state.field(eo,!1);if(!t||!t.panel)return!1;let n=Rl(i,Ep);return n&&n.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:kp.of(!1)}),!0},qT=[{key:"Mod-f",run:y1,scope:"editor search-panel"},{key:"F3",run:Pc,shift:Rc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Pc,shift:Rc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:v1,scope:"editor search-panel"},{key:"Mod-Shift-l",run:zT},{key:"Alt-g",run:jT},{key:"Mod-d",run:DT,preventDefault:!0}];class $T{constructor(t){this.view=t;let n=this.query=t.state.field(eo).query.spec;this.commit=this.commit.bind(this),this.searchField=Qr("input",{value:n.search,placeholder:ji(t,"Find"),"aria-label":ji(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Qr("input",{value:n.replace,placeholder:ji(t,"Replace"),"aria-label":ji(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Qr("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Qr("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Qr("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(s,a,o){return Qr("button",{class:"cm-button",name:s,onclick:a,type:"button"},o)}this.dom=Qr("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,r("next",()=>Pc(t),[ji(t,"next")]),r("prev",()=>Rc(t),[ji(t,"previous")]),r("select",()=>HT(t),[ji(t,"all")]),Qr("label",null,[this.caseField,ji(t,"match case")]),Qr("label",null,[this.reField,ji(t,"regexp")]),Qr("label",null,[this.wordField,ji(t,"by word")]),...t.state.readOnly?[]:[Qr("br"),this.replaceField,r("replace",()=>ty(t),[ji(t,"replace")]),r("replaceAll",()=>WT(t),[ji(t,"replace all")])],Qr("button",{name:"close",onclick:()=>v1(t),"aria-label":ji(t,"close"),type:"button"},["Ã"])])}commit(){let t=new m1({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:Bl.of(t)}))}keydown(t){i2(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Rc:Pc)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),ty(this.view))}update(t){for(let n of t.transactions)for(let r of n.effects)r.is(Bl)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Tp).top}}function ji(i,t){return i.state.phrase(t)}const qu=30,$u=/[\s\.,:;?!]/;function Mp(i,{from:t,to:n}){let r=i.state.doc.lineAt(t),s=i.state.doc.lineAt(n).to,a=Math.max(r.from,t-qu),o=Math.min(s,n+qu),u=i.state.sliceDoc(a,o);if(a!=r.from){for(let l=0;l<qu;l++)if(!$u.test(u[l+1])&&$u.test(u[l])){u=u.slice(l);break}}if(o!=s){for(let l=u.length-1;l>u.length-qu;l--)if(!$u.test(u[l-1])&&$u.test(u[l])){u=u.slice(0,l);break}}return Wt.announce.of(`${i.state.phrase("current match")}. ${u} ${i.state.phrase("on line")} ${r.number}.`)}const XT=Wt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),YT=[eo,Ga.lowest(GT),XT];class b1{constructor(t,n,r){this.state=t,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(t){let n=Hn(this.state).resolveInner(this.pos,-1);for(;n&&t.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(t){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),s=n.text.slice(r-n.from,this.pos-n.from),a=s.search(_1(t,!1));return a<0?null:{from:r+a,to:this.pos,text:s.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(t,n){t=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function ry(i){let t=Object.keys(i).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function KT(i){let t=Object.create(null),n=Object.create(null);for(let{label:s}of i){t[s[0]]=!0;for(let a=1;a<s.length;a++)n[s[a]]=!0}let r=ry(t)+ry(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function JT(i){let t=i.map(s=>typeof s=="string"?{label:s}:s),[n,r]=t.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:KT(t);return s=>{let a=s.matchBefore(r);return a||s.explicit?{from:a?a.from:s.pos,options:t,validFor:n}:null}}class ny{constructor(t,n,r){this.completion=t,this.source=n,this.match=r}}function to(i){return i.selection.main.head}function _1(i,t){var n;let{source:r}=i,s=t&&r[0]!="^",a=r[r.length-1]!="$";return!s&&!a?i:new RegExp(`${s?"^":""}(?:${r})${a?"$":""}`,(n=i.flags)!==null&&n!==void 0?n:i.ignoreCase?"i":"")}const QT=Ps.define();function ZT(i,t,n,r){return Object.assign(Object.assign({},i.changeByRange(s=>{if(s==i.selection.main)return{changes:{from:n,to:r,insert:t},range:pt.cursor(n+t.length)};let a=r-n;return!s.empty||a&&i.sliceDoc(s.from-a,s.from)!=i.sliceDoc(n,r)?{range:s}:{changes:{from:s.from-a,to:s.from,insert:t},range:pt.cursor(s.from-a+t.length)}})),{userEvent:"input.complete"})}function w1(i,t){const n=t.completion.apply||t.completion.label;let r=t.source;typeof n=="string"?i.dispatch(Object.assign(Object.assign({},ZT(i.state,n,r.from,r.to)),{annotations:QT.of(t.completion)})):n(i,t.completion,r.from,r.to)}const iy=new WeakMap;function ek(i){if(!Array.isArray(i))return i;let t=iy.get(i);return t||iy.set(i,t=JT(i)),t}class tk{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<t.length;){let r=Vn(t,n),s=Ri(r);this.chars.push(r);let a=t.slice(n,n+s),o=a.toUpperCase();this.folded.push(Vn(o==a?a.toLowerCase():o,0)),n+=s}this.astral=t.length!=this.chars.length}match(t){if(this.pattern.length==0)return[0];if(t.length<this.pattern.length)return null;let{chars:n,folded:r,any:s,precise:a,byWord:o}=this;if(n.length==1){let x=Vn(t,0),j=Ri(x),S=j==t.length?0:-100;if(x!=n[0])if(x==r[0])S+=-200;else return null;return[S,0,j]}let u=t.indexOf(this.pattern);if(u==0)return[t.length==this.pattern.length?0:-100,0,this.pattern.length];let l=n.length,c=0;if(u<0){for(let x=0,j=Math.min(t.length,200);x<j&&c<l;){let S=Vn(t,x);(S==n[c]||S==r[c])&&(s[c++]=x),x+=Ri(S)}if(c<l)return null}let p=0,m=0,h=!1,f=0,d=-1,g=-1,y=/[a-z]/.test(t),b=!0;for(let x=0,j=Math.min(t.length,200),S=0;x<j&&m<l;){let w=Vn(t,x);u<0&&(p<l&&w==n[p]&&(a[p++]=x),f<l&&(w==n[f]||w==r[f]?(f==0&&(d=x),g=x+1,f++):f=0));let _,M=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(_=Zf(w))!=_.toLowerCase()?1:_!=_.toUpperCase()?2:0;(!x||M==1&&y||S==0&&M!=0)&&(n[m]==w||r[m]==w&&(h=!0)?o[m++]=x:o.length&&(b=!1)),S=M,x+=Ri(w)}return m==l&&o[0]==0&&b?this.result(-100+(h?-200:0),o,t):f==l&&d==0?[-200-t.length+(g==t.length?0:-100),0,g]:u>-1?[-700-t.length,u,u+this.pattern.length]:f==l?[-200+-700-t.length,d,g]:m==l?this.result(-100+(h?-200:0)+-700+(b?0:-1100),o,t):n.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,t)}result(t,n,r){let s=[t-r.length],a=1;for(let o of n){let u=o+(this.astral?Ri(Vn(r,o)):1);a>1&&s[a-1]==o?s[a-1]=u:(s[a++]=o,s[a++]=u)}return s}}const Ni=Gt.define({combine(i){return ps(i,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(t,n)=>t.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(t,n)=>t&&n,closeOnBlur:(t,n)=>t&&n,icons:(t,n)=>t&&n,tooltipClass:(t,n)=>r=>sy(t(r),n(r)),optionClass:(t,n)=>r=>sy(t(r),n(r)),addToOptions:(t,n)=>t.concat(n)})}});function sy(i,t){return i?t?i+" "+t:i:t}function rk(i){let t=i.addToOptions.slice();return i.icons&&t.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),r.setAttribute("aria-hidden","true"),r},position:20}),t.push({render(n,r,s){let a=document.createElement("span");a.className="cm-completionLabel";let{label:o}=n,u=0;for(let l=1;l<s.length;){let c=s[l++],p=s[l++];c>u&&a.appendChild(document.createTextNode(o.slice(u,c)));let m=a.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(o.slice(c,p))),m.className="cm-completionMatchedText",u=p}return u<o.length&&a.appendChild(document.createTextNode(o.slice(u))),a},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),t.sort((n,r)=>n.position-r.position).map(n=>n.render)}function oy(i,t,n){if(i<=n)return{from:0,to:i};if(t<0&&(t=0),t<=i>>1){let s=Math.floor(t/n);return{from:s*n,to:(s+1)*n}}let r=Math.floor((i-t)/n);return{from:i-(r+1)*n,to:i-r*n}}class nk{constructor(t,n){this.view=t,this.stateField=n,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:u=>this.positionInfo(u),key:this},this.space=null,this.currentClass="";let r=t.state.field(n),{options:s,selected:a}=r.open,o=t.state.facet(Ni);this.optionContent=rk(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=oy(s.length,a,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",u=>{for(let l=u.target,c;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(c=/-(\d+)$/.exec(l.id))&&+c[1]<s.length){w1(t,s[+c[1]]),u.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(t){var n,r,s;let a=t.state.field(this.stateField),o=t.startState.field(this.stateField);this.updateTooltipClass(t.state),a!=o&&(this.updateSel(),((n=a.open)===null||n===void 0?void 0:n.disabled)!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((s=a.open)===null||s===void 0)&&s.disabled)))}updateTooltipClass(t){let n=this.tooltipClass(t);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let t=this.view.state.field(this.stateField),n=t.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=oy(n.options.length,n.selected,this.view.state.facet(Ni).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,t.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=n.options[n.selected],{info:s}=r;if(!s)return;let a=typeof s=="string"?document.createTextNode(s):s(r);if(!a)return;"then"in a?a.then(o=>{o&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(o)}).catch(o=>Ei(this.view.state,o,"completion info")):this.addInfoPane(a)}}addInfoPane(t){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(t),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(t){let n=null;for(let r=this.list.firstChild,s=this.range.from;r;r=r.nextSibling,s++)s==t?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&sk(this.list,n),n}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),s=t.getBoundingClientRect(),a=this.space;if(!a){let d=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:d.innerWidth,bottom:d.innerHeight}}if(s.top>Math.min(a.bottom,n.bottom)-10||s.bottom<Math.max(a.top,n.top)+10)return null;let o=this.view.textDirection==mn.RTL,u=o,l=!1,c,p="",m="",h=n.left-a.left,f=a.right-n.right;if(u&&h<Math.min(r.width,f)?u=!1:!u&&f<Math.min(r.width,h)&&(u=!0),r.width<=(u?h:f))p=Math.max(a.top,Math.min(s.top,a.bottom-r.height))-n.top+"px",c=Math.min(400,u?h:f)+"px";else{l=!0,c=Math.min(400,(o?n.right:a.right-n.left)-30)+"px";let d=a.bottom-n.bottom;d>=r.height||d>n.top?p=s.bottom-n.top+"px":m=n.bottom-s.top+"px"}return{top:p,bottom:m,maxWidth:c,class:l?o?"left-narrow":"right-narrow":u?"left":"right"}}positionInfo(t){this.info&&(t?(this.info.style.top=t.top,this.info.style.bottom=t.bottom,this.info.style.maxWidth=t.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+t.class):this.info.style.top="-1e6px")}createListBox(t,n,r){const s=document.createElement("ul");s.id=n,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let a=r.from;a<r.to;a++){let{completion:o,match:u}=t[a];const l=s.appendChild(document.createElement("li"));l.id=n+"-"+a,l.setAttribute("role","option");let c=this.optionClass(o);c&&(l.className=c);for(let p of this.optionContent){let m=p(o,this.view.state,u);m&&l.appendChild(m)}}return r.from&&s.classList.add("cm-completionListIncompleteTop"),r.to<t.length&&s.classList.add("cm-completionListIncompleteBottom"),s}}function ik(i){return t=>new nk(t,i)}function sk(i,t){let n=i.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?i.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(i.scrollTop+=r.bottom-n.bottom)}function ay(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function ok(i,t){let n=[],r=0;for(let u of i)if(u.hasResult())if(u.result.filter===!1){let l=u.result.getMatch;for(let c of u.result.options){let p=[1e9-r++];if(l)for(let m of l(c))p.push(m);n.push(new ny(c,u,p))}}else{let l=new tk(t.sliceDoc(u.from,u.to)),c;for(let p of u.result.options)(c=l.match(p.label))&&(p.boost!=null&&(c[0]+=p.boost),n.push(new ny(p,u,c)))}let s=[],a=null,o=t.facet(Ni).compareCompletions;for(let u of n.sort((l,c)=>c.match[0]-l.match[0]||o(l.completion,c.completion)))!a||a.label!=u.completion.label||a.detail!=u.completion.detail||a.type!=null&&u.completion.type!=null&&a.type!=u.completion.type||a.apply!=u.completion.apply?s.push(u):ay(u.completion)>ay(a)&&(s[s.length-1]=u),a=u.completion;return s}class fa{constructor(t,n,r,s,a,o){this.options=t,this.attrs=n,this.tooltip=r,this.timestamp=s,this.selected=a,this.disabled=o}setSelected(t,n){return t==this.selected||t>=this.options.length?this:new fa(this.options,ly(n,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,n,r,s,a){let o=ok(t,n);if(!o.length)return s&&t.some(l=>l.state==1)?new fa(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let u=n.facet(Ni).selectOnOpen?0:-1;if(s&&s.selected!=u&&s.selected!=-1){let l=s.options[s.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){u=c;break}}return new fa(o,ly(r,u),{pos:t.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:ik(Pi),above:a.aboveCursor},s?s.timestamp:Date.now(),u,!1)}map(t){return new fa(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Dc{constructor(t,n,r){this.active=t,this.id=n,this.open=r}static start(){return new Dc(uk,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:n}=t,r=n.facet(Ni),a=(r.override||n.languageDataAt("autocomplete",to(n)).map(ek)).map(u=>(this.active.find(c=>c.source==u)||new fi(u,this.active.some(c=>c.state!=0)?1:0)).update(t,r));a.length==this.active.length&&a.every((u,l)=>u==this.active[l])&&(a=this.active);let o=this.open;o&&t.docChanged&&(o=o.map(t.changes)),t.selection||a.some(u=>u.hasResult()&&t.changes.touchesRange(u.from,u.to))||!ak(a,this.active)?o=fa.build(a,n,this.id,o,r):o&&o.disabled&&!a.some(u=>u.state==1)&&(o=null),!o&&a.every(u=>u.state!=1)&&a.some(u=>u.hasResult())&&(a=a.map(u=>u.hasResult()?new fi(u.source,0):u));for(let u of t.effects)u.is(S1)&&(o=o&&o.setSelected(u.value,this.id));return a==this.active&&o==this.open?this:new Dc(a,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:lk}}function ak(i,t){if(i==t)return!0;for(let n=0,r=0;;){for(;n<i.length&&!i[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let s=n==i.length,a=r==t.length;if(s||a)return s==a;if(i[n++].result!=t[r++].result)return!1}}const lk={"aria-autocomplete":"list"};function ly(i,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return t>-1&&(n["aria-activedescendant"]=i+"-"+t),n}const uk=[];function Pf(i){return i.isUserEvent("input.type")?"input":i.isUserEvent("delete.backward")?"delete":null}class fi{constructor(t,n,r=-1){this.source=t,this.state=n,this.explicitPos=r}hasResult(){return!1}update(t,n){let r=Pf(t),s=this;r?s=s.handleUserEvent(t,r,n):t.docChanged?s=s.handleChange(t):t.selection&&s.state!=0&&(s=new fi(s.source,0));for(let a of t.effects)if(a.is(Ap))s=new fi(s.source,1,a.value?to(t.state):-1);else if(a.is(Lc))s=new fi(s.source,0);else if(a.is(x1))for(let o of a.value)o.source==s.source&&(s=o);return s}handleUserEvent(t,n,r){return n=="delete"||!r.activateOnTyping?this.map(t.changes):new fi(this.source,1)}handleChange(t){return t.changes.touchesRange(to(t.startState))?new fi(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new fi(this.source,this.state,t.mapPos(this.explicitPos))}}class wl extends fi{constructor(t,n,r,s,a){super(t,2,n),this.result=r,this.from=s,this.to=a}hasResult(){return!0}handleUserEvent(t,n,r){var s;let a=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),u=to(t.state);if((this.explicitPos<0?u<=a:u<this.from)||u>o||n=="delete"&&to(t.startState)==this.from)return new fi(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos),c;return ck(this.result.validFor,t.state,a,o)?new wl(this.source,l,this.result,a,o):this.result.update&&(c=this.result.update(this.result,a,o,new b1(t.state,u,l>=0)))?new wl(this.source,l,c,c.from,(s=c.to)!==null&&s!==void 0?s:to(t.state)):new fi(this.source,1,l)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new fi(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new wl(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}function ck(i,t,n,r){if(!i)return!1;let s=t.sliceDoc(n,r);return typeof i=="function"?i(s,n,r,t):_1(i,!0).test(s)}const Ap=yr.define(),Lc=yr.define(),x1=yr.define({map(i,t){return i.map(n=>n.map(t))}}),S1=yr.define(),Pi=zn.define({create(){return Dc.start()},update(i,t){return i.update(t)},provide:i=>[cp.from(i,t=>t.tooltip),Wt.contentAttributes.from(i,t=>t.attrs)]});function Xu(i,t="option"){return n=>{let r=n.state.field(Pi,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Ni).interactionDelay)return!1;let s=1,a;t=="page"&&(a=z2(n,r.open.tooltip))&&(s=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,u=r.open.selected>-1?r.open.selected+s*(i?1:-1):i?0:o-1;return u<0?u=t=="page"?0:o-1:u>=o&&(u=t=="page"?o-1:0),n.dispatch({effects:S1.of(u)}),!0}}const hk=i=>{let t=i.state.field(Pi,!1);return i.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<i.state.facet(Ni).interactionDelay?!1:(t.open.disabled||w1(i,t.open.options[t.open.selected]),!0)},dk=i=>i.state.field(Pi,!1)?(i.dispatch({effects:Ap.of(!0)}),!0):!1,fk=i=>{let t=i.state.field(Pi,!1);return!t||!t.active.some(n=>n.state!=0)?!1:(i.dispatch({effects:Lc.of(null)}),!0)};class pk{constructor(t,n){this.active=t,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const uy=50,mk=50,gk=1e3,yk=Tn.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of i.state.field(Pi).active)t.state==1&&this.startQuery(t)}update(i){let t=i.state.field(Pi);if(!i.selectionSet&&!i.docChanged&&i.startState.field(Pi)==t)return;let n=i.transactions.some(r=>(r.selection||r.docChanged)&&!Pf(r));for(let r=0;r<this.running.length;r++){let s=this.running[r];if(n||s.updates.length+i.transactions.length>mk&&Date.now()-s.time>gk){for(let a of s.context.abortListeners)try{a()}catch(o){Ei(this.view.state,o)}s.context.abortListeners=null,this.running.splice(r--,1)}else s.updates.push(...i.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some(r=>r.state==1&&!this.running.some(s=>s.active.source==r.source))?setTimeout(()=>this.startUpdate(),uy):-1,this.composing!=0)for(let r of i.transactions)Pf(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:i}=this.view,t=i.field(Pi);for(let n of t.active)n.state==1&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n)}startQuery(i){let{state:t}=this.view,n=to(t),r=new b1(t,n,i.explicitPos==n),s=new pk(i,r);this.running.push(s),Promise.resolve(i.source(r)).then(a=>{s.context.aborted||(s.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:Lc.of(null)}),Ei(this.view.state,a)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),uy))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(Ni);for(let r=0;r<this.running.length;r++){let s=this.running[r];if(s.done===void 0)continue;if(this.running.splice(r--,1),s.done){let o=new wl(s.active.source,s.active.explicitPos,s.done,s.done.from,(i=s.done.to)!==null&&i!==void 0?i:to(s.updates.length?s.updates[0].startState:this.view.state));for(let u of s.updates)o=o.update(u,n);if(o.hasResult()){t.push(o);continue}}let a=this.view.state.field(Pi).active.find(o=>o.source==s.active.source);if(a&&a.state==1)if(s.done==null){let o=new fi(s.active.source,0);for(let u of s.updates)o=o.update(u,n);o.state!=1&&t.push(o)}else this.startQuery(a)}t.length&&this.view.dispatch({effects:x1.of(t)})}},{eventHandlers:{blur(){let i=this.view.state.field(Pi,!1);i&&i.tooltip&&this.view.state.facet(Ni).closeOnBlur&&this.view.dispatch({effects:Lc.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ap.of(!1)}),20),this.composing=0}}}),vk=Wt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ'"}},".cm-completionIcon-class":{"&:after":{content:"'â'"}},".cm-completionIcon-interface":{"&:after":{content:"'â'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âª'"}},".cm-completionIcon-property":{"&:after":{content:"'â¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðï¸'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Fl={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Mo=yr.define({map(i,t){let n=t.mapPos(i,-1,si.TrackAfter);return n??void 0}}),Op=yr.define({map(i,t){return t.mapPos(i)}}),Ip=new class extends No{};Ip.startSide=1;Ip.endSide=-1;const j1=zn.define({create(){return Ur.empty},update(i,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(r,-1)&&(i=Ur.empty)}i=i.map(t.changes);for(let n of t.effects)n.is(Mo)?i=i.update({add:[Ip.range(n.value,n.value+1)]}):n.is(Op)&&(i=i.update({filter:r=>r!=n.value}));return i}});function bk(){return[wk,j1]}const Sd="()[]{}<>";function C1(i){for(let t=0;t<Sd.length;t+=2)if(Sd.charCodeAt(t)==i)return Sd.charAt(t+1);return Zf(i<128?i:i+1)}function T1(i,t){return i.languageDataAt("closeBrackets",t)[0]||Fl}const _k=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),wk=Wt.inputHandler.of((i,t,n,r)=>{if((_k?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let s=i.state.selection.main;if(r.length>2||r.length==2&&Ri(Vn(r,0))==1||t!=s.from||n!=s.to)return!1;let a=jk(i.state,r);return a?(i.dispatch(a),!0):!1}),xk=({state:i,dispatch:t})=>{if(i.readOnly)return!1;let r=T1(i,i.selection.main.head).brackets||Fl.brackets,s=null,a=i.changeByRange(o=>{if(o.empty){let u=Ck(i.doc,o.head);for(let l of r)if(l==u&&_h(i.doc,o.head)==C1(Vn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:pt.cursor(o.head-l.length)}}return{range:s=o}});return s||t(i.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},Sk=[{key:"Backspace",run:xk}];function jk(i,t){let n=T1(i,i.selection.main.head),r=n.brackets||Fl.brackets;for(let s of r){let a=C1(Vn(s,0));if(t==s)return a==s?Ek(i,s,r.indexOf(s+s+s)>-1,n):Tk(i,s,a,n.before||Fl.before);if(t==a&&k1(i,i.selection.main.from))return kk(i,s,a)}return null}function k1(i,t){let n=!1;return i.field(j1).between(0,i.doc.length,r=>{r==t&&(n=!0)}),n}function _h(i,t){let n=i.sliceString(t,t+2);return n.slice(0,Ri(Vn(n,0)))}function Ck(i,t){let n=i.sliceString(t-2,t);return Ri(Vn(n,0))==n.length?n:n.slice(1)}function Tk(i,t,n,r){let s=null,a=i.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:Mo.of(o.to+t.length),range:pt.range(o.anchor+t.length,o.head+t.length)};let u=_h(i.doc,o.head);return!u||/\s/.test(u)||r.indexOf(u)>-1?{changes:{insert:t+n,from:o.head},effects:Mo.of(o.head+t.length),range:pt.cursor(o.head+t.length)}:{range:s=o}});return s?null:i.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function kk(i,t,n){let r=null,s=i.selection.ranges.map(a=>a.empty&&_h(i.doc,a.head)==n?pt.cursor(a.head+n.length):r=a);return r?null:i.update({selection:pt.create(s,i.selection.mainIndex),scrollIntoView:!0,effects:i.selection.ranges.map(({from:a})=>Op.of(a))})}function Ek(i,t,n,r){let s=r.stringPrefixes||Fl.stringPrefixes,a=null,o=i.changeByRange(u=>{if(!u.empty)return{changes:[{insert:t,from:u.from},{insert:t,from:u.to}],effects:Mo.of(u.to+t.length),range:pt.range(u.anchor+t.length,u.head+t.length)};let l=u.head,c=_h(i.doc,l),p;if(c==t){if(cy(i,l))return{changes:{insert:t+t,from:l},effects:Mo.of(l+t.length),range:pt.cursor(l+t.length)};if(k1(i,l)){let m=n&&i.sliceDoc(l,l+t.length*3)==t+t+t;return{range:pt.cursor(l+t.length*(m?3:1)),effects:Op.of(l)}}}else{if(n&&i.sliceDoc(l-2*t.length,l)==t+t&&(p=hy(i,l-2*t.length,s))>-1&&cy(i,p))return{changes:{insert:t+t+t+t,from:l},effects:Mo.of(l+t.length),range:pt.cursor(l+t.length)};if(i.charCategorizer(l)(c)!=hn.Word&&hy(i,l,s)>-1&&!Mk(i,l,t,s))return{changes:{insert:t+t,from:l},effects:Mo.of(l+t.length),range:pt.cursor(l+t.length)}}return{range:a=u}});return a?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function cy(i,t){let n=Hn(i).resolveInner(t+1);return n.parent&&n.from==t}function Mk(i,t,n,r){let s=Hn(i).resolveInner(t,-1),a=r.reduce((o,u)=>Math.max(o,u.length),0);for(let o=0;o<5;o++){let u=i.sliceDoc(s.from,Math.min(s.to,s.from+n.length+a)),l=u.indexOf(n);if(!l||l>-1&&r.indexOf(u.slice(0,l))>-1){let p=s.firstChild;for(;p&&p.from==s.from&&p.to-p.from>n.length+l;){if(i.sliceDoc(p.to-n.length,p.to)==n)return!1;p=p.firstChild}return!0}let c=s.to==t&&s.parent;if(!c)break;s=c}return!1}function hy(i,t,n){let r=i.charCategorizer(t);if(r(i.sliceDoc(t-1,t))!=hn.Word)return t;for(let s of n){let a=t-s.length;if(i.sliceDoc(a,t)==s&&r(i.sliceDoc(a-1,a))!=hn.Word)return a}return-1}function Ak(i={}){return[Pi,Ni.of(i),yk,Ok,vk]}const E1=[{key:"Ctrl-Space",run:dk},{key:"Escape",run:fk},{key:"ArrowDown",run:Xu(!0)},{key:"ArrowUp",run:Xu(!1)},{key:"PageDown",run:Xu(!0,"page")},{key:"PageUp",run:Xu(!1,"page")},{key:"Enter",run:hk}],Ok=Ga.highest(up.computeN([Ni],i=>i.facet(Ni).defaultKeymap?[E1]:[]));class Ik{constructor(t,n,r){this.from=t,this.to=n,this.diagnostic=r}}class ko{constructor(t,n,r){this.diagnostics=t,this.panel=n,this.selected=r}static init(t,n,r){let s=t,a=r.facet(pa).markerFilter;a&&(s=a(s));let o=Qt.set(s.map(u=>u.from==u.to||u.from==u.to-1&&r.doc.lineAt(u.from).to==u.from?Qt.widget({widget:new Gk(u),diagnostic:u}).range(u.from):Qt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+u.severity},diagnostic:u}).range(u.from,u.to)),!0);return new ko(o,n,Da(o))}}function Da(i,t=null,n=0){let r=null;return i.between(n,1e9,(s,a,{spec:o})=>{if(!(t&&o.diagnostic!=t))return r=new Ik(s,a,o.diagnostic),!1}),r}function Pk(i,t){return!!(i.effects.some(n=>n.is(Pp))||i.changes.touchesRange(t.pos))}function M1(i,t){return i.field(ki,!1)?t:t.concat(yr.appendConfig.of([ki,Wt.decorations.compute([ki],n=>{let{selected:r,panel:s}=n.field(ki);return!r||!s||r.from==r.to?Qt.none:Qt.set([Dk.range(r.from,r.to)])}),H2(Lk,{hideOn:Pk}),zk]))}function Rk(i,t){return{effects:M1(i,[Pp.of(t)])}}const Pp=yr.define(),Rp=yr.define(),A1=yr.define(),ki=zn.define({create(){return new ko(Qt.none,null,null)},update(i,t){if(t.docChanged){let n=i.diagnostics.map(t.changes),r=null;if(i.selected){let s=t.changes.mapPos(i.selected.from,1);r=Da(n,i.selected.diagnostic,s)||Da(n,null,s)}i=new ko(n,i.panel,r)}for(let n of t.effects)n.is(Pp)?i=ko.init(n.value,i.panel,t.state):n.is(Rp)?i=new ko(i.diagnostics,n.value?wh.open:null,i.selected):n.is(A1)&&(i=new ko(i.diagnostics,i.panel,n.value));return i},provide:i=>[Dl.from(i,t=>t.panel),Wt.decorations.from(i,t=>t.diagnostics)]}),Dk=Qt.mark({class:"cm-lintRange cm-lintRange-active"});function Lk(i,t,n){let{diagnostics:r}=i.state.field(ki),s=[],a=2e8,o=0;r.between(t-(n<0?1:0),t+(n>0?1:0),(l,c,{spec:p})=>{t>=l&&t<=c&&(l==c||(t>l||n>0)&&(t<c||n<0))&&(s.push(p.diagnostic),a=Math.min(l,a),o=Math.max(c,o))});let u=i.state.facet(pa).tooltipFilter;return u&&(s=u(s)),s.length?{pos:a,end:o,above:i.state.doc.lineAt(a).to<o,create(){return{dom:Nk(i,s)}}}:null}function Nk(i,t){return Qr("ul",{class:"cm-tooltip-lint"},t.map(n=>I1(i,n,!1)))}const Bk=i=>{let t=i.state.field(ki,!1);(!t||!t.panel)&&i.dispatch({effects:M1(i.state,[Rp.of(!0)])});let n=Rl(i,wh.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},dy=i=>{let t=i.state.field(ki,!1);return!t||!t.panel?!1:(i.dispatch({effects:Rp.of(!1)}),!0)},Fk=i=>{let t=i.state.field(ki,!1);if(!t)return!1;let n=i.state.selection.main,r=t.diagnostics.iter(n.to+1);return!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(i.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},Uk=[{key:"Mod-Shift-m",run:Bk,preventDefault:!0},{key:"F8",run:Fk}],Vk=Tn.fromClass(class{constructor(i){this.view=i,this.timeout=-1,this.set=!0;let{delay:t}=i.state.facet(pa);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let i=Date.now();if(i<this.lintTime-10)setTimeout(this.run,this.lintTime-i);else{this.set=!1;let{state:t}=this.view,{sources:n}=t.facet(pa);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let s=r.reduce((a,o)=>a.concat(o));this.view.state.doc==t.doc&&this.view.dispatch(Rk(this.view.state,s))},r=>{Ei(this.view.state,r)})}}update(i){let t=i.state.facet(pa);(i.docChanged||t!=i.startState.facet(pa))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),pa=Gt.define({combine(i){return Object.assign({sources:i.map(t=>t.source)},ps(i.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:Vk});function O1(i){let t=[];if(i)e:for(let{name:n}of i){for(let r=0;r<n.length;r++){let s=n[r];if(/[a-zA-Z]/.test(s)&&!t.some(a=>a.toLowerCase()==s.toLowerCase())){t.push(s);continue e}}t.push("")}return t}function I1(i,t,n){var r;let s=n?O1(t.actions):[];return Qr("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Qr("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),(r=t.actions)===null||r===void 0?void 0:r.map((a,o)=>{let u=!1,l=h=>{if(h.preventDefault(),u)return;u=!0;let f=Da(i.state.field(ki).diagnostics,t);f&&a.apply(i,f.from,f.to)},{name:c}=a,p=s[o]?c.indexOf(s[o]):-1,m=p<0?c:[c.slice(0,p),Qr("u",c.slice(p,p+1)),c.slice(p+1)];return Qr("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${p<0?"":` (access key "${s[o]})"`}.`},m)}),t.source&&Qr("div",{class:"cm-diagnosticSource"},t.source))}class Gk extends yo{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return Qr("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class fy{constructor(t,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=I1(t,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class wh{constructor(t){this.view=t,this.items=[];let n=s=>{if(s.keyCode==27)dy(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],o=O1(a.actions);for(let u=0;u<o.length;u++)if(o[u].toUpperCase().charCodeAt(0)==s.keyCode){let l=Da(this.view.state.field(ki).diagnostics,a);l&&a.actions[u].apply(t,l.from,l.to)}}else return;s.preventDefault()},r=s=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(s.target)&&this.moveSelection(a)};this.list=Qr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=Qr("div",{class:"cm-panel-lint"},this.list,Qr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>dy(this.view)},"Ã")),this.update()}get selectedIndex(){let t=this.view.state.field(ki).selected;if(!t)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==t.diagnostic)return n;return-1}update(){let{diagnostics:t,selected:n}=this.view.state.field(ki),r=0,s=!1,a=null;for(t.between(0,this.view.state.doc.length,(o,u,{spec:l})=>{let c=-1,p;for(let m=r;m<this.items.length;m++)if(this.items[m].diagnostic==l.diagnostic){c=m;break}c<0?(p=new fy(this.view,l.diagnostic),this.items.splice(r,0,p),s=!0):(p=this.items[c],c>r&&(this.items.splice(r,c-r),s=!0)),n&&p.diagnostic==n.diagnostic?p.dom.hasAttribute("aria-selected")||(p.dom.setAttribute("aria-selected","true"),a=p):p.dom.hasAttribute("aria-selected")&&p.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new fy(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:u})=>{o.top<u.top?this.list.scrollTop-=u.top-o.top:o.bottom>u.bottom&&(this.list.scrollTop+=o.bottom-u.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let t=this.list.firstChild;function n(){let r=t;t=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;t!=r.dom;)n();t=r.dom.nextSibling}else this.list.insertBefore(r.dom,t);for(;t;)n()}moveSelection(t){if(this.selectedIndex<0)return;let n=this.view.state.field(ki),r=Da(n.diagnostics,this.items[t].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:A1.of(r)})}static open(t){return new wh(t)}}function Hk(i,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(i)}</svg>')`}function jd(i){return Hk(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const zk=Wt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:jd("#d11")},".cm-lintRange-warning":{backgroundImage:jd("orange")},".cm-lintRange-info":{backgroundImage:jd("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Wk=(()=>[lb(),tj(),w2(),xC(),Hj(),c2(),m2(),kr.allowMultipleSelections.of(!0),Aj(),Wj(Xj,{fallback:!0}),tC(),bk(),Ak(),P2(),L2(),k2(),kT(),up.of([...Sk,...xT,...qT,...OC,...Uj,...E1,...Uk])])();function Dp(i,t,n,r,s,a){this.indented=i,this.column=t,this.type=n,this.info=r,this.align=s,this.prev=a}function Yu(i,t,n,r){var s=i.indented;return i.context&&i.context.type=="statement"&&n!="statement"&&(s=i.context.indented),i.context=new Dp(s,t,n,r,null,i.context)}function ul(i){var t=i.context.type;return(t==")"||t=="]"||t=="}")&&(i.indented=i.context.indented),i.context=i.context.prev}function py(i,t,n){if(t.prevToken=="variable"||t.prevToken=="type"||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(i.string.slice(0,n))||t.typeAtEndOfLine&&i.column()==i.indentation())return!0}function my(i){for(;;){if(!i||i.type=="top")return!0;if(i.type=="}"&&i.prev.info!="namespace")return!1;i=i.prev}}function Mi(i){var t=i.statementIndentUnit,n=i.dontAlignCalls,r=i.keywords||{},s=i.types||{},a=i.builtin||{},o=i.blockKeywords||{},u=i.defKeywords||{},l=i.atoms||{},c=i.hooks||{},p=i.multiLineStrings,m=i.indentStatements!==!1,h=i.indentSwitch!==!1,f=i.namespaceSeparator,d=i.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,g=i.numberStart||/[\d\.]/,y=i.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,b=i.isOperatorChar||/[+\-*&%=<>!?|\/]/,x=i.isIdentifierChar||/[\w\$_\xa1-\uffff]/,j=i.isReservedIdentifier||!1,S,w;function _(R,D){var U=R.next();if(c[U]){var F=c[U](R,D);if(F!==!1)return F}if(U=='"'||U=="'")return D.tokenize=M(U),D.tokenize(R,D);if(g.test(U)){if(R.backUp(1),R.match(y))return"number";R.next()}if(d.test(U))return S=U,null;if(U=="/"){if(R.eat("*"))return D.tokenize=I,I(R,D);if(R.eat("/"))return R.skipToEnd(),"comment"}if(b.test(U)){for(;!R.match(/^\/[\/*]/,!1)&&R.eat(b););return"operator"}if(R.eatWhile(x),f)for(;R.match(f);)R.eatWhile(x);var z=R.current();return ws(r,z)?(ws(o,z)&&(S="newstatement"),ws(u,z)&&(w=!0),"keyword"):ws(s,z)?"type":ws(a,z)||j&&j(z)?(ws(o,z)&&(S="newstatement"),"builtin"):ws(l,z)?"atom":"variable"}function M(R){return function(D,U){for(var F=!1,z,K=!1;(z=D.next())!=null;){if(z==R&&!F){K=!0;break}F=!F&&z=="\\"}return(K||!(F||p))&&(U.tokenize=null),"string"}}function I(R,D){for(var U=!1,F;F=R.next();){if(F=="/"&&U){D.tokenize=null;break}U=F=="*"}return"comment"}function P(R,D){i.typeFirstDefinitions&&R.eol()&&my(D.context)&&(D.typeAtEndOfLine=py(R,D,R.pos))}return{name:i.name,startState:function(R){return{tokenize:null,context:new Dp(-R,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(R,D){var U=D.context;if(R.sol()&&(U.align==null&&(U.align=!1),D.indented=R.indentation(),D.startOfLine=!0),R.eatSpace())return P(R,D),null;S=w=null;var F=(D.tokenize||_)(R,D);if(F=="comment"||F=="meta")return F;if(U.align==null&&(U.align=!0),S==";"||S==":"||S==","&&R.match(/^\s*(?:\/\/.*)?$/,!1))for(;D.context.type=="statement";)ul(D);else if(S=="{")Yu(D,R.column(),"}");else if(S=="[")Yu(D,R.column(),"]");else if(S=="(")Yu(D,R.column(),")");else if(S=="}"){for(;U.type=="statement";)U=ul(D);for(U.type=="}"&&(U=ul(D));U.type=="statement";)U=ul(D)}else S==U.type?ul(D):m&&((U.type=="}"||U.type=="top")&&S!=";"||U.type=="statement"&&S=="newstatement")&&Yu(D,R.column(),"statement",R.current());if(F=="variable"&&(D.prevToken=="def"||i.typeFirstDefinitions&&py(R,D,R.start)&&my(D.context)&&R.match(/^\s*\(/,!1))&&(F="def"),c.token){var z=c.token(R,D,F);z!==void 0&&(F=z)}return F=="def"&&i.styleDefs===!1&&(F="variable"),D.startOfLine=!1,D.prevToken=w?"def":F||S,P(R,D),F},indent:function(R,D,U){if(R.tokenize!=_&&R.tokenize!=null||R.typeAtEndOfLine)return null;var F=R.context,z=D&&D.charAt(0),K=z==F.type;if(F.type=="statement"&&z=="}"&&(F=F.prev),i.dontIndentStatements)for(;F.type=="statement"&&i.dontIndentStatements.test(F.info);)F=F.prev;if(c.indent){var Q=c.indent(R,F,D,U.unit);if(typeof Q=="number")return Q}var te=F.prev&&F.prev.info=="switch";if(i.allmanIndentation&&/[{(]/.test(z)){for(;F.type!="top"&&F.type!="}";)F=F.prev;return F.indented}return F.type=="statement"?F.indented+(z=="{"?0:t||U.unit):F.align&&(!n||F.type!=")")?F.column+(K?0:1):F.type==")"&&!K?F.indented+(t||U.unit):F.indented+(K?0:U.unit)+(!K&&te&&!/^(?:case|default)\b/.test(D)?U.unit:0)},languageData:{indentOnInput:h?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}},autocomplete:Object.keys(r).concat(Object.keys(s)).concat(Object.keys(a)).concat(Object.keys(l)),...i.languageData}}}function Vt(i){for(var t={},n=i.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function ws(i,t){return typeof i=="function"?i(t):i.propertyIsEnumerable(t)}var su="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile inline restrict asm fortran",P1="alignas alignof and and_eq audit axiom bitand bitor catch class compl concept constexpr const_cast decltype delete dynamic_cast explicit export final friend import module mutable namespace new noexcept not not_eq operator or or_eq override private protected public reinterpret_cast requires static_assert static_cast template this thread_local throw try typeid typename using virtual xor xor_eq",R1="bycopy byref in inout oneway out self super atomic nonatomic retain copy readwrite readonly strong weak assign typeof nullable nonnull null_resettable _cmd @interface @implementation @end @protocol @encode @property @synthesize @dynamic @class @public @package @private @protected @required @optional @try @catch @finally @import @selector @encode @defs @synchronized @autoreleasepool @compatibility_alias @available",D1="FOUNDATION_EXPORT FOUNDATION_EXTERN NS_INLINE NS_FORMAT_FUNCTION  NS_RETURNS_RETAINEDNS_ERROR_ENUM NS_RETURNS_NOT_RETAINED NS_RETURNS_INNER_POINTER NS_DESIGNATED_INITIALIZER NS_ENUM NS_OPTIONS NS_REQUIRES_NIL_TERMINATION NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_SWIFT_NAME NS_REFINED_FOR_SWIFT",qk=Vt("int long char short double float unsigned signed void bool"),$k=Vt("SEL instancetype id Class Protocol BOOL");function ou(i){return ws(qk,i)||/.+_t$/.test(i)}function L1(i){return ou(i)||ws($k,i)}var au="case do else for if switch while struct enum union",xh="struct enum union";function bo(i,t){if(!t.startOfLine)return!1;for(var n,r=null;n=i.peek();){if(n=="\\"&&i.match(/^.$/)){r=bo;break}else if(n=="/"&&i.match(/^\/[\/\*]/,!1))break;i.next()}return t.tokenize=r,"meta"}function Sh(i,t){return t.prevToken=="type"?"type":!1}function jh(i){return!i||i.length<2||i[0]!="_"?!1:i[1]=="_"||i[1]!==i[1].toLowerCase()}function jn(i){return i.eatWhile(/[\w\.']/),"number"}function Zs(i,t){if(i.backUp(1),i.match(/^(?:R|u8R|uR|UR|LR)/)){var n=i.match(/^"([^\s\\()]{0,16})\(/);return n?(t.cpp11RawStringDelim=n[1],t.tokenize=yy,yy(i,t)):!1}return i.match(/^(?:u8|u|U|L)/)?i.match(/^["']/,!1)?"string":!1:(i.next(),!1)}function N1(i){var t=/(\w+)::~?(\w+)$/.exec(i);return t&&t[1]==t[2]}function gy(i,t){for(var n;(n=i.next())!=null;)if(n=='"'&&!i.eat('"')){t.tokenize=null;break}return"string"}function yy(i,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),r=i.match(new RegExp(".*?\\)"+n+'"'));return r?t.tokenize=null:i.skipToEnd(),"string"}Mi({name:"c",keywords:Vt(su),types:ou,blockKeywords:Vt(au),defKeywords:Vt(xh),typeFirstDefinitions:!0,atoms:Vt("NULL true false"),isReservedIdentifier:jh,hooks:{"#":bo,"*":Sh}});Mi({name:"cpp",keywords:Vt(su+" "+P1),types:ou,blockKeywords:Vt(au+" class try catch"),defKeywords:Vt(xh+" class namespace"),typeFirstDefinitions:!0,atoms:Vt("true false NULL nullptr"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,isReservedIdentifier:jh,hooks:{"#":bo,"*":Sh,u:Zs,U:Zs,L:Zs,R:Zs,0:jn,1:jn,2:jn,3:jn,4:jn,5:jn,6:jn,7:jn,8:jn,9:jn,token:function(i,t,n){if(n=="variable"&&i.peek()=="("&&(t.prevToken==";"||t.prevToken==null||t.prevToken=="}")&&N1(i.current()))return"def"}},namespaceSeparator:"::"});Mi({name:"java",keywords:Vt("abstract assert break case catch class const continue default do else enum extends final finally for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:Vt("var byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:Vt("catch class do else finally for if switch try while"),defKeywords:Vt("class interface enum @interface"),typeFirstDefinitions:!0,atoms:Vt("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(i){return i.match("interface",!1)?!1:(i.eatWhile(/[\w\$_]/),"meta")},'"':function(i,t){return i.match(/""$/)?(t.tokenize=B1,t.tokenize(i,t)):!1}}});Mi({name:"csharp",keywords:Vt("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:Vt("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:Vt("catch class do else finally for foreach if struct switch try while"),defKeywords:Vt("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:Vt("true false null"),hooks:{"@":function(i,t){return i.eat('"')?(t.tokenize=gy,gy(i,t)):(i.eatWhile(/[\w\$_]/),"meta")}}});function B1(i,t){for(var n=!1;!i.eol();){if(!n&&i.match('"""')){t.tokenize=null;break}n=i.next()=="\\"&&!n}return"string"}function Ul(i){return function(t,n){for(var r;r=t.next();)if(r=="*"&&t.eat("/"))if(i==1){n.tokenize=null;break}else return n.tokenize=Ul(i-1),n.tokenize(t,n);else if(r=="/"&&t.eat("*"))return n.tokenize=Ul(i+1),n.tokenize(t,n);return"comment"}}Mi({name:"scala",keywords:Vt("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:Vt("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:Vt("catch class enum do else finally for forSome if match switch try while"),defKeywords:Vt("class enum def object package trait type val var"),atoms:Vt("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(i){return i.eatWhile(/[\w\$_]/),"meta"},'"':function(i,t){return i.match('""')?(t.tokenize=B1,t.tokenize(i,t)):!1},"'":function(i){return i.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(i,t){var n=t.context;return n.type=="}"&&n.align&&i.eat(">")?(t.context=new Dp(n.indented,n.column,n.type,n.info,null,n.prev),"operator"):!1},"/":function(i,t){return i.eat("*")?(t.tokenize=Ul(1),t.tokenize(i,t)):!1}},languageData:{closeBrackets:{brackets:["(","[","{","'",'"','"""']}}});function Xk(i){return function(t,n){for(var r=!1,s,a=!1;!t.eol();){if(!i&&!r&&t.match('"')){a=!0;break}if(i&&t.match('"""')){a=!0;break}s=t.next(),!r&&s=="$"&&t.match("{")&&t.skipTo("}"),r=!r&&s=="\\"&&!i}return(a||!i)&&(n.tokenize=null),"string"}}Mi({name:"kotlin",keywords:Vt("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam"),types:Vt("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:Vt("catch class do else finally for if where try while enum"),defKeywords:Vt("class val var object interface fun"),atoms:Vt("true false null this"),hooks:{"@":function(i){return i.eatWhile(/[\w\$_]/),"meta"},"*":function(i,t){return t.prevToken=="."?"variable":"operator"},'"':function(i,t){return t.tokenize=Xk(i.match('""')),t.tokenize(i,t)},"/":function(i,t){return i.eat("*")?(t.tokenize=Ul(1),t.tokenize(i,t)):!1},indent:function(i,t,n,r){var s=n&&n.charAt(0);if((i.prevToken=="}"||i.prevToken==")")&&n=="")return i.indented;if(i.prevToken=="operator"&&n!="}"&&i.context.type!="}"||i.prevToken=="variable"&&s=="."||(i.prevToken=="}"||i.prevToken==")")&&s==".")return r*2+t.indented;if(t.align&&t.type=="}")return t.indented+(i.context.type==(n||"").charAt(0)?0:r)}},languageData:{closeBrackets:{brackets:["(","[","{","'",'"','"""']}}});const Yk=Mi({name:"shader",keywords:Vt("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:Vt("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:Vt("for while do if else struct"),builtin:Vt("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:Vt("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TextureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":bo}});Mi({name:"nesc",keywords:Vt(su+" as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:ou,blockKeywords:Vt(au),atoms:Vt("null true false"),hooks:{"#":bo}});Mi({name:"objectivec",keywords:Vt(su+" "+R1),types:L1,builtin:Vt(D1),blockKeywords:Vt(au+" @synthesize @try @catch @finally @autoreleasepool @synchronized"),defKeywords:Vt(xh+" @interface @implementation @protocol @class"),dontIndentStatements:/^@.*$/,typeFirstDefinitions:!0,atoms:Vt("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:jh,hooks:{"#":bo,"*":Sh}});Mi({name:"objectivecpp",keywords:Vt(su+" "+R1+" "+P1),types:L1,builtin:Vt(D1),blockKeywords:Vt(au+" @synthesize @try @catch @finally @autoreleasepool @synchronized class try catch"),defKeywords:Vt(xh+" @interface @implementation @protocol @class class namespace"),dontIndentStatements:/^@.*$|^template$/,typeFirstDefinitions:!0,atoms:Vt("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:jh,hooks:{"#":bo,"*":Sh,u:Zs,U:Zs,L:Zs,R:Zs,0:jn,1:jn,2:jn,3:jn,4:jn,5:jn,6:jn,7:jn,8:jn,9:jn,token:function(i,t,n){if(n=="variable"&&i.peek()=="("&&(t.prevToken==";"||t.prevToken==null||t.prevToken=="}")&&N1(i.current()))return"def"}},namespaceSeparator:"::"});Mi({name:"squirrel",keywords:Vt("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:ou,blockKeywords:Vt("case catch class else for foreach if switch try while"),defKeywords:Vt("function local class"),typeFirstDefinitions:!0,atoms:Vt("true false null"),hooks:{"#":bo}});var ac=null;function F1(i){return function(t,n){for(var r=!1,s,a=!1;!t.eol();){if(!r&&t.match('"')&&(i=="single"||t.match('""'))){a=!0;break}if(!r&&t.match("``")){ac=F1(i),a=!0;break}s=t.next(),r=i=="single"&&!r&&s=="\\"}return a&&(n.tokenize=null),"string"}}Mi({name:"ceylon",keywords:Vt("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(i){var t=i.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()},blockKeywords:Vt("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:Vt("class dynamic function interface module object package value"),builtin:Vt("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:Vt("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(i){return i.eatWhile(/[\w\$_]/),"meta"},'"':function(i,t){return t.tokenize=F1(i.match('""')?"triple":"single"),t.tokenize(i,t)},"`":function(i,t){return!ac||!i.match("`")?!1:(t.tokenize=ac,ac=null,t.tokenize(i,t))},"'":function(i){return i.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(i,t,n){if((n=="variable"||n=="type")&&t.prevToken==".")return"variableName.special"}},languageData:{closeBrackets:{brackets:["(","[","{","'",'"','"""']}}});function Kk(i){(i.interpolationStack||(i.interpolationStack=[])).push(i.tokenize)}function U1(i){return(i.interpolationStack||(i.interpolationStack=[])).pop()}function Jk(i){return i.interpolationStack?i.interpolationStack.length:0}function Cd(i,t,n,r){var s=!1;if(t.eat(i))if(t.eat(i))s=!0;else return"string";function a(o,u){for(var l=!1;!o.eol();){if(!r&&!l&&o.peek()=="$")return Kk(u),u.tokenize=Qk,"string";var c=o.next();if(c==i&&!l&&(!s||o.match(i+i))){u.tokenize=null;break}l=!r&&!l&&c=="\\"}return"string"}return n.tokenize=a,a(t,n)}function Qk(i,t){return i.eat("$"),i.eat("{")?t.tokenize=null:t.tokenize=Zk,null}function Zk(i,t){return i.eatWhile(/[\w_]/),t.tokenize=U1(t),"variable"}Mi({name:"dart",keywords:Vt("this super static final const abstract class extends external factory implements mixin get native set typedef with enum throw rethrow assert break case continue default in return new deferred async await covariant try catch finally do else for if switch while import library export part of show hide is as extension on yield late required"),blockKeywords:Vt("try catch finally do else for if switch while"),builtin:Vt("void bool num int double dynamic var String Null Never"),atoms:Vt("true false null"),hooks:{"@":function(i){return i.eatWhile(/[\w\$_\.]/),"meta"},"'":function(i,t){return Cd("'",i,t,!1)},'"':function(i,t){return Cd('"',i,t,!1)},r:function(i,t){var n=i.peek();return n=="'"||n=='"'?Cd(i.next(),i,t,!0):!1},"}":function(i,t){return Jk(t)>0?(t.tokenize=U1(t),null):!1},"/":function(i,t){return i.eat("*")?(t.tokenize=Ul(1),t.tokenize(i,t)):!1},token:function(i,t,n){if(n=="variable"){var r=RegExp("^[_$]*[A-Z][a-zA-Z0-9_$]*$","g");if(r.test(i.current()))return"type"}}}});var Nc={},eE={get exports(){return Nc},set exports(i){Nc=i}};(function(i,t){(function(n,r){var s={};n.PubSub?(s=n.PubSub,console.warn("PubSub already loaded, using existing version")):(n.PubSub=s,r(s)),i!==void 0&&i.exports&&(t=i.exports=s),t.PubSub=s,i.exports=t=s})(typeof window=="object"&&window||ca,function(n){var r={},s=-1,a="*";function o(g){var y;for(y in g)if(Object.prototype.hasOwnProperty.call(g,y))return!0;return!1}function u(g){return function(){throw g}}function l(g,y,b){try{g(y,b)}catch(x){setTimeout(u(x),0)}}function c(g,y,b){g(y,b)}function p(g,y,b,x){var j=r[y],S=x?c:l,w;if(Object.prototype.hasOwnProperty.call(r,y))for(w in j)Object.prototype.hasOwnProperty.call(j,w)&&S(j[w],g,b)}function m(g,y,b){return function(){var j=String(g),S=j.lastIndexOf(".");for(p(g,g,y,b);S!==-1;)j=j.substr(0,S),S=j.lastIndexOf("."),p(g,j,y,b);p(g,a,y,b)}}function h(g){var y=String(g),b=Boolean(Object.prototype.hasOwnProperty.call(r,y)&&o(r[y]));return b}function f(g){for(var y=String(g),b=h(y)||h(a),x=y.lastIndexOf(".");!b&&x!==-1;)y=y.substr(0,x),x=y.lastIndexOf("."),b=h(y);return b}function d(g,y,b,x){g=typeof g=="symbol"?g.toString():g;var j=m(g,y,x),S=f(g);return S?(b===!0?j():setTimeout(j,0),!0):!1}n.publish=function(g,y){return d(g,y,!1,n.immediateExceptions)},n.publishSync=function(g,y){return d(g,y,!0,n.immediateExceptions)},n.subscribe=function(g,y){if(typeof y!="function")return!1;g=typeof g=="symbol"?g.toString():g,Object.prototype.hasOwnProperty.call(r,g)||(r[g]={});var b="uid_"+String(++s);return r[g][b]=y,b},n.subscribeAll=function(g){return n.subscribe(a,g)},n.subscribeOnce=function(g,y){var b=n.subscribe(g,function(){n.unsubscribe(b),y.apply(this,arguments)});return n},n.clearAllSubscriptions=function(){r={}},n.clearSubscriptions=function(y){var b;for(b in r)Object.prototype.hasOwnProperty.call(r,b)&&b.indexOf(y)===0&&delete r[b]},n.countSubscriptions=function(y){var b,x,j=0;for(b in r)if(Object.prototype.hasOwnProperty.call(r,b)&&b.indexOf(y)===0){for(x in r[b])j++;break}return j},n.getSubscriptions=function(y){var b,x=[];for(b in r)Object.prototype.hasOwnProperty.call(r,b)&&b.indexOf(y)===0&&x.push(b);return x},n.unsubscribe=function(g){var y=function(I){var P;for(P in r)if(Object.prototype.hasOwnProperty.call(r,P)&&P.indexOf(I)===0)return!0;return!1},b=typeof g=="string"&&(Object.prototype.hasOwnProperty.call(r,g)||y(g)),x=!b&&typeof g=="string",j=typeof g=="function",S=!1,w,_,M;if(b){n.clearSubscriptions(g);return}for(w in r)if(Object.prototype.hasOwnProperty.call(r,w)){if(_=r[w],x&&_[g]){delete _[g],S=g;break}if(j)for(M in _)Object.prototype.hasOwnProperty.call(_,M)&&_[M]===g&&(delete _[M],S=!0)}return S}})})(eE,Nc);const Bc=Nc;var Lp,Fc,V1,Np,G1,H1,z1,ii,or,Bp,Fp;or={shaderObj:null,cam:null,paramValues:{},imagesCache:{},lastShaderDrawError:""};Fc=`///////////////////////////////////////////////////////////////////
//  Fill in the image function below to write your shader!       //
//  Built-ins:                                                   //
//    - Uniforms:                                                //
//      - vec2 iResolution                                       //
//      - float iTime - seconds since shader load                //
//    - Functions:                                               //
//      - vec3 sampleCamera(uv)                                  //
//      - vec3 samplePrevFrame(uv)                               //
///////////////////////////////////////////////////////////////////

vec3 image(vec2 uv, vec3 color) {
  return color;
}`;ii=null;Fp=!1;Bp=Date.now()/1e3;z1=i=>(ii=i,ii.setup=function(){var t;return t=ii.createCanvas(710,400,ii.WEBGL),t.parent("canvas"),ii.noStroke(),or.cam=ii.createCapture(ii.VIDEO),or.cam.size(710,400),or.cam.hide(),or.shaderObj=ii.createShader(L0,Np(Fc,[])),ii.shader(or.shaderObj)},ii.draw=function(){return or.shaderObj.setUniform("tex0",or.cam),or.shaderObj.setUniform("iResolution",[710,400]),or.shaderObj.setUniform("iTime",Bp-Date.now()/1e3),Fp&&or.shaderObj.setUniform("prevFrame",ii.get()),Object.entries(or.paramValues).forEach(([t,n])=>{var r,s,a,o;if(t.length>0&&(n.type==="color"?s=H1(n.val):n.type==="float"||n.type==="boolean"?s=n.val:n.type==="texture"&&(s=null,a=or.imagesCache[n.val],a&&!a.error?or.shaderObj.setUniform(t,a.img):a||(o=u=>or.imagesCache[n.val]={img:u},r=u=>{var l,c,p;return c="Possibly a CORS error. Try a different image host such as Imgur.",p=`Error fetching image ${n.val}

 ${u.message}.

 ${c}`,l=or.lastShaderDrawError===p,l||(or.lastShaderDrawError=p,Bc.publish("shaderDrawError",p)),or.imagesCache[n.val]={error:!0}},ii.loadImage(n.val,o,r))),s||n.type==="boolean"))return or.shaderObj.setUniform(t,s)}),ii.rect(0,0,1,1)});H1=function(i){var t;return t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),t?[parseFloat(parseInt(t[1],16))/255,parseFloat(parseInt(t[2],16))/255,parseFloat(parseInt(t[3],16))/255]:[0,0,0]};Lp=`precision mediump float;

varying vec2 vTexCoord; // grab texcoords from vert shader
uniform sampler2D tex0; // our texture coming from p5
uniform vec2 iResolution;
uniform float iTime;
uniform sampler2D prevFrame; // only set if the shader text references it

float round(float val) {
  return floor(val + 0.5);
}

vec3 sampleCamera(vec2 uv) {
  return texture2D(tex0, uv).rgb;
}

vec3 samplePrevFrame(vec2 uv) {
  uv.x = 1.0 - uv.x;
  return texture2D(prevFrame, uv).rgb;
}`;Np=function(i,t){var n;return Bp=Date.now()/1e3,Fp=i.includes("samplePrevFrame"),n=t.map(function(r){var s,a;return s=r.type.split(".").slice(-1)[0],a={FloatShaderParam:"float",ColorShaderParam:"vec3",TextureShaderParam:"sampler2D",BooleanShaderParam:"bool"}[s],`uniform ${a} ${r.paramName};`}).join(`
`),`${Lp}
${n}
${i}

void main() {
    vec2 uv = vTexCoord;
    uv.x = 1.0 - uv.x;
    uv.y = 1.0 - uv.y;
    vec4 tex = texture2D(tex0, uv);
    vec3 finalRGB = image(uv, tex.rgb);
    gl_FragColor = vec4(finalRGB, 1.0);
}`};V1=function(i,t){var n,r,s;return n=Np(i,t),r=ii.createShader(L0,n),s=G1(or.shaderObj,n),[r,s]};G1=function(i,t){var n,r;return n=i._renderer.GL,r=n.createShader(n.FRAGMENT_SHADER),n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)?null:n.getShaderInfoLog(r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt=function(i,t){if(!i)throw za(t)},za=function(i){return new Error("Firebase Database ("+W1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=function(i){const t=[];let n=0;for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},tE=function(i){const t=[];let n=0,r=0;for(;n<i.length;){const s=i[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=i[n++];t[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=i[n++],o=i[n++],u=i[n++],l=((s&7)<<18|(a&63)<<12|(o&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const a=i[n++],o=i[n++];t[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return t.join("")},Up={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<i.length;s+=3){const a=i[s],o=s+1<i.length,u=o?i[s+1]:0,l=s+2<i.length,c=l?i[s+2]:0,p=a>>2,m=(a&3)<<4|u>>4;let h=(u&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(n[p],n[m],n[h],n[f])}return r.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(q1(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):tE(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<i.length;){const a=n[i.charAt(s++)],u=s<i.length?n[i.charAt(s)]:0;++s;const c=s<i.length?n[i.charAt(s)]:64;++s;const m=s<i.length?n[i.charAt(s)]:64;if(++s,a==null||u==null||c==null||m==null)throw Error();const h=a<<2|u>>4;if(r.push(h),c!==64){const f=u<<4&240|c>>2;if(r.push(f),m!==64){const d=c<<6&192|m;r.push(d)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},$1=function(i){const t=q1(i);return Up.encodeByteArray(t,!0)},Uc=function(i){return $1(i).replace(/\./g,"")},Vc=function(i){try{return Up.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(i){return X1(void 0,i)}function X1(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!nE(n)||(i[n]=X1(i[n],t[n]));return i}function nE(i){return i!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=()=>iE().__FIREBASE_DEFAULTS__,oE=()=>{if(typeof process>"u"||typeof process.env>"u")return;const i={}.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},aE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&Vc(i[1]);return t&&JSON.parse(t)},Vp=()=>{try{return sE()||oE()||aE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Y1=i=>{var t,n;return(n=(t=Vp())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[i]},lE=i=>{const t=Y1(i);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},uE=()=>{var i;return(i=Vp())===null||i===void 0?void 0:i.config},K1=i=>{var t;return(t=Vp())===null||t===void 0?void 0:t[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},i),u="";return[Uc(JSON.stringify(n)),Uc(JSON.stringify(o)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function hE(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function J1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dE(){const i=Qn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Q1(){return W1.NODE_ADMIN===!0}function fE(){try{return typeof indexedDB=="object"}catch{return!1}}function pE(){return new Promise((i,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;t(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="FirebaseError";class _o extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=mE,Object.setPrototypeOf(this,_o.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,a=this.errors[t],o=a?gE(a,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new _o(s,u,r)}}function gE(i,t){return i.replace(yE,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const yE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(i){return JSON.parse(i)}function Mn(i){return JSON.stringify(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=function(i){let t={},n={},r={},s="";try{const a=i.split(".");t=Vl(Vc(a[0])||""),n=Vl(Vc(a[1])||""),s=a[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:s}},vE=function(i){const t=Z1(i),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},bE=function(i){const t=Z1(i).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function La(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function Rf(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function Gc(i,t,n){const r={};for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=t.call(n,i[s],s,i));return r}function Hc(i,t){if(i===t)return!0;const n=Object.keys(i),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const a=i[s],o=t[s];if(vy(a)&&vy(o)){if(!Hc(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vy(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(i){const t=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if(typeof t=="string")for(let m=0;m<16;m++)r[m]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let m=0;m<16;m++)r[m]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let m=16;m<80;m++){const h=r[m-3]^r[m-8]^r[m-14]^r[m-16];r[m]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],u=this.chain_[3],l=this.chain_[4],c,p;for(let m=0;m<80;m++){m<40?m<20?(c=u^a&(o^u),p=1518500249):(c=a^o^u,p=1859775393):m<60?(c=a&o|u&(a|o),p=2400959708):(c=a^o^u,p=3395469782);const h=(s<<5|s>>>27)+c+l+p+r[m]&4294967295;l=u,u=o,o=(a<<30|a>>>2)&4294967295,a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const r=n-this.blockSize;let s=0;const a=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<n;)if(a[o]=t.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(a),o=0;break}}else for(;s<n;)if(a[o]=t[s],++o,++s,o===this.blockSize){this.compress_(a),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)t[r]=this.chain_[s]>>a&255,++r;return t}}function wE(i,t){const n=new xE(i,t);return n.subscribe.bind(n)}class xE{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SE(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=Td),s.error===void 0&&(s.error=Td),s.complete===void 0&&(s.complete=Td);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SE(i,t){if(typeof i!="object"||i===null)return!1;for(const n of t)if(n in i&&typeof i[n]=="function")return!0;return!1}function Td(){}function Hp(i,t){return`${i} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=function(i){const t=[];let n=0;for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);if(s>=55296&&s<=56319){const a=s-55296;r++,Tt(r<i.length,"Surrogate pair missing trail surrogate.");const o=i.charCodeAt(r)-56320;s=65536+(a<<10)+o}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Th=function(i){let t=0;for(let n=0;n<i.length;n++){const r=i.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(i){return i&&i._delegate?i._delegate:i}class Vo{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Ch;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kE(t))try{this.getOrInitializeService({instanceIdentifier:jo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(t=jo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=jo){return this.instances.has(t)}getOptions(t=jo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(t),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&t(o,s),()=>{a.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TE(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=jo){return this.component?this.component.multipleInstances?t:jo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TE(i){return i===jo?void 0:i}function kE(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new CE(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $r;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})($r||($r={}));const ME={debug:$r.DEBUG,verbose:$r.VERBOSE,info:$r.INFO,warn:$r.WARN,error:$r.ERROR,silent:$r.SILENT},AE=$r.INFO,OE={[$r.DEBUG]:"log",[$r.VERBOSE]:"log",[$r.INFO]:"info",[$r.WARN]:"warn",[$r.ERROR]:"error"},IE=(i,t,...n)=>{if(t<i.logLevel)return;const r=new Date().toISOString(),s=OE[t];if(s)console[s](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class zp{constructor(t){this.name=t,this._logLevel=AE,this._logHandler=IE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $r))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ME[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$r.DEBUG,...t),this._logHandler(this,$r.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$r.VERBOSE,...t),this._logHandler(this,$r.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$r.INFO,...t),this._logHandler(this,$r.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$r.WARN,...t),this._logHandler(this,$r.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$r.ERROR,...t),this._logHandler(this,$r.ERROR,...t)}}const PE=(i,t)=>t.some(n=>i instanceof n);let by,_y;function RE(){return by||(by=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DE(){return _y||(_y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e_=new WeakMap,Df=new WeakMap,t_=new WeakMap,kd=new WeakMap,Wp=new WeakMap;function LE(i){const t=new Promise((n,r)=>{const s=()=>{i.removeEventListener("success",a),i.removeEventListener("error",o)},a=()=>{n(ro(i.result)),s()},o=()=>{r(i.error),s()};i.addEventListener("success",a),i.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&e_.set(n,i)}).catch(()=>{}),Wp.set(t,i),t}function NE(i){if(Df.has(i))return;const t=new Promise((n,r)=>{const s=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",o),i.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",a),i.addEventListener("error",o),i.addEventListener("abort",o)});Df.set(i,t)}let Lf={get(i,t,n){if(i instanceof IDBTransaction){if(t==="done")return Df.get(i);if(t==="objectStoreNames")return i.objectStoreNames||t_.get(i);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ro(i[t])},set(i,t,n){return i[t]=n,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function BE(i){Lf=i(Lf)}function FE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=i.call(Ed(this),t,...n);return t_.set(r,t.sort?t.sort():[t]),ro(r)}:DE().includes(i)?function(...t){return i.apply(Ed(this),t),ro(e_.get(this))}:function(...t){return ro(i.apply(Ed(this),t))}}function UE(i){return typeof i=="function"?FE(i):(i instanceof IDBTransaction&&NE(i),PE(i,RE())?new Proxy(i,Lf):i)}function ro(i){if(i instanceof IDBRequest)return LE(i);if(kd.has(i))return kd.get(i);const t=UE(i);return t!==i&&(kd.set(i,t),Wp.set(t,i)),t}const Ed=i=>Wp.get(i);function VE(i,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(i,t),u=ro(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ro(o.result),l.oldVersion,l.newVersion,ro(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),u.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),u}const GE=["get","getKey","getAll","getAllKeys","count"],HE=["put","add","delete","clear"],Md=new Map;function wy(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Md.get(t))return Md.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=HE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||GE.includes(n)))return;const a=async function(o,...u){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(await Promise.all([c[n](...u),s&&l.done]))[0]};return Md.set(t,a),a}BE(i=>({...i,get:(t,n,r)=>wy(t,n)||i.get(t,n,r),has:(t,n)=>!!wy(t,n)||i.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WE(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Nf="@firebase/app",xy="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=new zp("@firebase/app"),qE="@firebase/app-compat",$E="@firebase/analytics-compat",XE="@firebase/analytics",YE="@firebase/app-check-compat",KE="@firebase/app-check",JE="@firebase/auth",QE="@firebase/auth-compat",ZE="@firebase/database",eM="@firebase/database-compat",tM="@firebase/functions",rM="@firebase/functions-compat",nM="@firebase/installations",iM="@firebase/installations-compat",sM="@firebase/messaging",oM="@firebase/messaging-compat",aM="@firebase/performance",lM="@firebase/performance-compat",uM="@firebase/remote-config",cM="@firebase/remote-config-compat",hM="@firebase/storage",dM="@firebase/storage-compat",fM="@firebase/firestore",pM="@firebase/firestore-compat",mM="firebase",gM="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="[DEFAULT]",yM={[Nf]:"fire-core",[qE]:"fire-core-compat",[XE]:"fire-analytics",[$E]:"fire-analytics-compat",[KE]:"fire-app-check",[YE]:"fire-app-check-compat",[JE]:"fire-auth",[QE]:"fire-auth-compat",[ZE]:"fire-rtdb",[eM]:"fire-rtdb-compat",[tM]:"fire-fn",[rM]:"fire-fn-compat",[nM]:"fire-iid",[iM]:"fire-iid-compat",[sM]:"fire-fcm",[oM]:"fire-fcm-compat",[aM]:"fire-perf",[lM]:"fire-perf-compat",[uM]:"fire-rc",[cM]:"fire-rc-compat",[hM]:"fire-gcs",[dM]:"fire-gcs-compat",[fM]:"fire-fst",[pM]:"fire-fst-compat","fire-js":"fire-js",[mM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Map,Ff=new Map;function vM(i,t){try{i.container.addComponent(t)}catch(n){Go.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,n)}}function Na(i){const t=i.name;if(Ff.has(t))return Go.debug(`There were multiple attempts to register component ${t}.`),!1;Ff.set(t,i);for(const n of zc.values())vM(n,i);return!0}function qp(i,t){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},no=new lu("app","Firebase",bM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=gM;function r_(i,t={}){let n=i;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Bf,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw no.create("bad-app-name",{appName:String(s)});if(n||(n=uE()),!n)throw no.create("no-options");const a=zc.get(s);if(a){if(Hc(n,a.options)&&Hc(r,a.config))return a;throw no.create("duplicate-app",{appName:s})}const o=new EE(s);for(const l of Ff.values())o.addComponent(l);const u=new _M(n,r,o);return zc.set(s,u),u}function n_(i=Bf){const t=zc.get(i);if(!t&&i===Bf)return r_();if(!t)throw no.create("no-app",{appName:i});return t}function io(i,t,n){var r;let s=(r=yM[i])!==null&&r!==void 0?r:i;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const u=[`Unable to register library "${s}" with version "${t}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&u.push("and"),o&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Go.warn(u.join(" "));return}Na(new Vo(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="firebase-heartbeat-database",xM=1,Gl="firebase-heartbeat-store";let Ad=null;function i_(){return Ad||(Ad=VE(wM,xM,{upgrade:(i,t)=>{switch(t){case 0:i.createObjectStore(Gl)}}}).catch(i=>{throw no.create("idb-open",{originalErrorMessage:i.message})})),Ad}async function SM(i){try{return(await i_()).transaction(Gl).objectStore(Gl).get(s_(i))}catch(t){if(t instanceof _o)Go.warn(t.message);else{const n=no.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Go.warn(n.message)}}}async function Sy(i,t){try{const r=(await i_()).transaction(Gl,"readwrite");return await r.objectStore(Gl).put(t,s_(i)),r.done}catch(n){if(n instanceof _o)Go.warn(n.message);else{const r=no.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Go.warn(r.message)}}}function s_(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=1024,CM=30*24*60*60*1e3;class TM{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=jy();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=CM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jy(),{heartbeatsToSend:n,unsentEntries:r}=kM(this._heartbeatsCache.heartbeats),s=Uc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function jy(){return new Date().toISOString().substring(0,10)}function kM(i,t=jM){const n=[];let r=i.slice();for(const s of i){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),Cy(n)>t){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cy(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fE()?pE().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await SM(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Cy(i){return Uc(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(i){Na(new Vo("platform-logger",t=>new zE(t),"PRIVATE")),Na(new Vo("heartbeat",t=>new TM(t),"PRIVATE")),io(Nf,xy,i),io(Nf,xy,"esm2017"),io("fire-js","")}MM("");function $p(i,t){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(n[r[s]]=i[r[s]]);return n}function o_(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AM=o_,a_=new lu("auth","Firebase",o_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new zp("@firebase/auth");function lc(i,...t){Ty.logLevel<=$r.ERROR&&Ty.error(`Auth (${uu}): ${i}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(i,...t){throw Xp(i,...t)}function ls(i,...t){return Xp(i,...t)}function l_(i,t,n){const r=Object.assign(Object.assign({},AM()),{[t]:n});return new lu("auth","Firebase",r).create(t,{appName:i.name})}function OM(i,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&hs(i,"argument-error"),l_(i,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xp(i,...t){if(typeof i!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return a_.create(i,...t)}function cr(i,t,...n){if(!i)throw Xp(t,...n)}function js(i){const t="INTERNAL ASSERTION FAILED: "+i;throw lc(t),new Error(t)}function As(i,t){i||js(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=new Map;function Cs(i){As(i instanceof Function,"Expected a class definition");let t=ky.get(i);return t?(As(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,ky.set(i,t),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(i,t){const n=qp(i,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Hc(a,t??{}))return s;hs(s,"already-initialized")}return n.initialize({options:t})}function PM(i,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cs);t!=null&&t.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function RM(){return Ey()==="http:"||Ey()==="https:"}function Ey(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RM()||hE()||"connection"in navigator)?navigator.onLine:!0}function LM(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t,n){this.shortDelay=t,this.longDelay=n,As(n>t,"Short delay should be less than long delay!"),this.isMobile=Gp()||J1()}get(){return DM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(i,t){As(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new cu(3e4,6e4);function FM(i,t){return i.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:i.tenantId}):t}async function kh(i,t,n,r,s={}){return c_(i,s,async()=>{let a={},o={};r&&(t==="GET"?o=r:a={body:JSON.stringify(r)});const u=Wa(Object.assign({key:i.config.apiKey},o)).slice(1),l=await i._getAdditionalHeaders();return l["Content-Type"]="application/json",i.languageCode&&(l["X-Firebase-Locale"]=i.languageCode),u_.fetch()(h_(i,i.config.apiHost,n,u),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},a))})}async function c_(i,t,n){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},NM),t);try{const s=new VM(i),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Ku(i,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const u=a.ok?o.errorMessage:o.error.message,[l,c]=u.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ku(i,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ku(i,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ku(i,"user-disabled",o);const p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw l_(i,p,c);hs(i,p)}}catch(s){if(s instanceof _o)throw s;hs(i,"network-request-failed")}}async function UM(i,t,n,r,s={}){const a=await kh(i,t,n,r,s);return"mfaPendingCredential"in a&&hs(i,"multi-factor-auth-required",{_serverResponse:a}),a}function h_(i,t,n,r){const s=`${t}${n}?${r}`;return i.config.emulator?Yp(i.config,s):`${i.config.apiScheme}://${s}`}class VM{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ls(this.auth,"network-request-failed")),BM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ku(i,t,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ls(i,t,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(i,t){return kh(i,"POST","/v1/accounts:delete",t)}async function HM(i,t){return kh(i,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(i){if(i)try{const t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function zM(i,t=!1){const n=Ai(i),r=await n.getIdToken(t),s=Kp(r);cr(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:xl(Od(s.auth_time)),issuedAtTime:xl(Od(s.iat)),expirationTime:xl(Od(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Od(i){return Number(i)*1e3}function Kp(i){const[t,n,r]=i.split(".");if(t===void 0||n===void 0||r===void 0)return lc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Vc(n);return s?JSON.parse(s):(lc("Failed to decode base64 JWT payload"),null)}catch(s){return lc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function WM(i){const t=Kp(i);return cr(t,"internal-error"),cr(typeof t.exp<"u","internal-error"),cr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(i,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof _o&&qM(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function qM({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xl(this.lastLoginAt),this.creationTime=xl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(i){var t;const n=i.auth,r=await i.getIdToken(),s=await Hl(i,HM(n,{idToken:r}));cr(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];i._notifyReloadListener(a);const o=!((t=a.providerUserInfo)===null||t===void 0)&&t.length?KM(a.providerUserInfo):[],u=YM(i.providerData,o),l=i.isAnonymous,c=!(i.email&&a.passwordHash)&&!(u!=null&&u.length),p=l?c:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new d_(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(i,m)}async function XM(i){const t=Ai(i);await Wc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function YM(i,t){return[...i.filter(r=>!t.some(s=>s.providerId===r.providerId)),...t]}function KM(i){return i.map(t=>{var{providerId:n}=t,r=$p(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(i,t){const n=await c_(i,{},async()=>{const r=Wa({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:a}=i.config,o=h_(i,s,"/v1/token",`key=${a}`),u=await i._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",u_.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){cr(t.idToken,"internal-error"),cr(typeof t.idToken<"u","internal-error"),cr(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):WM(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return cr(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await JM(t,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new zl;return r&&(cr(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),s&&(cr(typeof s=="string","internal-error",{appName:t}),o.accessToken=s),a&&(cr(typeof a=="number","internal-error",{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new zl,this.toJSON())}_performRefresh(){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(i,t){cr(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}class Do{constructor(t){var{uid:n,auth:r,stsTokenManager:s}=t,a=$p(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $M(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new d_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const n=await Hl(this,this.stsTokenManager.getToken(this.auth,t));return cr(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return zM(this,t)}reload(){return XM(this)}_assign(t){this!==t&&(cr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new Do(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){cr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Wc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Hl(this,GM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,s,a,o,u,l,c,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(s=n.email)!==null&&s!==void 0?s:void 0,f=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,d=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(u=n.tenantId)!==null&&u!==void 0?u:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:j,emailVerified:S,isAnonymous:w,providerData:_,stsTokenManager:M}=n;cr(j&&M,t,"internal-error");const I=zl.fromJSON(this.name,M);cr(typeof j=="string",t,"internal-error"),Gs(m,t.name),Gs(h,t.name),cr(typeof S=="boolean",t,"internal-error"),cr(typeof w=="boolean",t,"internal-error"),Gs(f,t.name),Gs(d,t.name),Gs(g,t.name),Gs(y,t.name),Gs(b,t.name),Gs(x,t.name);const P=new Do({uid:j,auth:t,email:h,emailVerified:S,displayName:m,isAnonymous:w,photoURL:d,phoneNumber:f,tenantId:g,stsTokenManager:I,createdAt:b,lastLoginAt:x});return _&&Array.isArray(_)&&(P.providerData=_.map(R=>Object.assign({},R))),y&&(P._redirectEventId=y),P}static async _fromIdTokenResponse(t,n,r=!1){const s=new zl;s.updateFromServerResponse(n);const a=new Do({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:r});return await Wc(a),a}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}f_.type="NONE";const My=f_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(i,t,n){return`firebase:${i}:${t}:${n}`}class wa{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=uc(this.userKey,s.apiKey,a),this.fullPersistenceKey=uc("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Do._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new wa(Cs(My),t,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=s[0]||Cs(My);const o=uc(r,t.config.apiKey,t.name);let u=null;for(const c of n)try{const p=await c._get(o);if(p){const m=Do._fromJSON(t,p);c!==a&&(u=m),a=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new wa(a,t,r):(a=l[0],u&&await a._set(o,u.toJSON()),await Promise.all(n.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new wa(a,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(i){const t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(g_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(p_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(v_(t))return"Blackberry";if(b_(t))return"Webos";if(Jp(t))return"Safari";if((t.includes("chrome/")||m_(t))&&!t.includes("edge/"))return"Chrome";if(y_(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function p_(i=Qn()){return/firefox\//i.test(i)}function Jp(i=Qn()){const t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function m_(i=Qn()){return/crios\//i.test(i)}function g_(i=Qn()){return/iemobile/i.test(i)}function y_(i=Qn()){return/android/i.test(i)}function v_(i=Qn()){return/blackberry/i.test(i)}function b_(i=Qn()){return/webos/i.test(i)}function Eh(i=Qn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function QM(i=Qn()){var t;return Eh(i)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function ZM(){return dE()&&document.documentMode===10}function __(i=Qn()){return Eh(i)||y_(i)||b_(i)||v_(i)||/windows phone/i.test(i)||g_(i)}function eA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(i,t=[]){let n;switch(i){case"Browser":n=Ay(Qn());break;case"Worker":n=`${Ay(Qn())}-${i}`;break;default:n=i}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${uu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=a=>new Promise((o,u)=>{try{const l=t(a);o(l)}catch(l){u(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(t,n,r){this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oy(this),this.idTokenSubscription=new Oy(this),this.beforeStateQueue=new tA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a_,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Cs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await wa.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===u)&&(l!=null&&l.user)&&(s=l.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return cr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Wc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=LM()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?Ai(t):null;return n&&cr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&cr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(t))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new lu("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Cs(t)||this._popupRedirectResolver;cr(n,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[Cs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return cr(o,this,"internal-error"),o.then(()=>a(this.currentUser)),typeof n=="function"?t.addObserver(n,r,s):t.addObserver(n)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return cr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=w_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Mh(i){return Ai(i)}class Oy{constructor(t){this.auth=t,this.observer=null,this.addObserver=wE(n=>this.observer=n)}get next(){return cr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function nA(i,t,n){const r=Mh(i);cr(r._canInitEmulator,r,"emulator-config-failed"),cr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),a=x_(t),{host:o,port:u}=iA(t),l=u===null?"":`:${u}`;r.config.emulator={url:`${a}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||sA()}function x_(i){const t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function iA(i){const t=x_(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Iy(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Iy(o)}}}function Iy(i){if(!i)return null;const t=Number(i);return isNaN(t)?null:t}function sA(){function i(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return js("not implemented")}_getIdTokenResponse(t){return js("not implemented")}_linkToIdToken(t,n){return js("not implemented")}_getReauthenticationResolver(t){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(i,t){return UM(i,"POST","/v1/accounts:signInWithIdp",FM(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="http://localhost";class Ho extends S_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ho(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:s}=n,a=$p(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ho(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return xa(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,xa(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,xa(t,n)}buildRequest(){const t={requestUri:oA,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Wa(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends Qp{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends hu{constructor(){super("facebook.com")}static credential(t){return Ho._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qs.credentialFromTaggedObject(t)}static credentialFromError(t){return qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qs.credential(t.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ho._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ss.credentialFromTaggedObject(t)}static credentialFromError(t){return Ss.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ss.credential(n,r)}catch{return null}}}Ss.GOOGLE_SIGN_IN_METHOD="google.com";Ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends hu{constructor(){super("github.com")}static credential(t){return Ho._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return $s.credentialFromTaggedObject(t)}static credentialFromError(t){return $s.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return $s.credential(t.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends hu{constructor(){super("twitter.com")}static credential(t,n){return Ho._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Xs.credentialFromTaggedObject(t)}static credentialFromError(t){return Xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Xs.credential(n,r)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,s=!1){const a=await Do._fromIdTokenResponse(t,r,s),o=Py(r);return new Ba({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const s=Py(r);return new Ba({user:t,providerId:s,_tokenResponse:r,operationType:n})}}function Py(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends _o{constructor(t,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,qc.prototype),this.customData={appName:t.name,tenantId:(a=t.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,s){return new qc(t,n,r,s)}}function j_(i,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?qc._fromErrorAndOperation(i,a,t,r):a})}async function aA(i,t,n=!1){const r=await Hl(i,t._linkToIdToken(i.auth,await i.getIdToken()),n);return Ba._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(i,t,n=!1){const{auth:r}=i,s="reauthenticate";try{const a=await Hl(i,j_(r,s,t,i),n);cr(a.idToken,r,"internal-error");const o=Kp(a.idToken);cr(o,r,"internal-error");const{sub:u}=o;return cr(i.uid===u,r,"user-mismatch"),Ba._forOperation(i,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&hs(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(i,t,n=!1){const r="signIn",s=await j_(i,r,t),a=await Ba._fromIdTokenResponse(i,r,s);return n||await i._updateCurrentUser(a.user),a}function cA(i,t,n,r){return Ai(i).onIdTokenChanged(t,n,r)}function hA(i,t,n){return Ai(i).beforeAuthStateChanged(t,n)}function dA(i,t,n,r){return Ai(i).onAuthStateChanged(t,n,r)}const $c="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($c,"1"),this.storage.removeItem($c),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(){const i=Qn();return Jp(i)||Eh(i)}const pA=1e3,mA=10;class T_ extends C_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=fA()&&eA(),this.fallbackToPolling=__(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&t(n,s,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,u,l)=>{this.notifyListeners(o,l)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);ZM()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,mA):s()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},pA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}T_.type="LOCAL";const gA=T_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends C_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}k_.type="SESSION";const E_=k_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const r=new Ah(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async c=>c(n.origin,a)),l=await yA(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(i="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((u,l)=>{const c=Zp("",20);s.port1.start();const p=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const h=m;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(h.data.response);break;default:clearTimeout(p),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(){return window}function bA(i){us().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(){return typeof us().WorkerGlobalScope<"u"&&typeof us().importScripts=="function"}async function _A(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wA(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function xA(){return M_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="firebaseLocalStorageDb",SA=1,Xc="firebaseLocalStorage",O_="fbase_key";class du{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Oh(i,t){return i.transaction([Xc],t?"readwrite":"readonly").objectStore(Xc)}function jA(){const i=indexedDB.deleteDatabase(A_);return new du(i).toPromise()}function Vf(){const i=indexedDB.open(A_,SA);return new Promise((t,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Xc,{keyPath:O_})}catch(s){n(s)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Xc)?t(r):(r.close(),await jA(),t(await Vf()))})})}async function Ry(i,t,n){const r=Oh(i,!0).put({[O_]:t,value:n});return new du(r).toPromise()}async function CA(i,t){const n=Oh(i,!1).get(t),r=await new du(n).toPromise();return r===void 0?null:r.value}function Dy(i,t){const n=Oh(i,!0).delete(t);return new du(n).toPromise()}const TA=800,kA=3;class I_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vf(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>kA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return M_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ah._getInstance(xA()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await _A(),!this.activeServiceWorker)return;this.sender=new vA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||wA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Vf();return await Ry(t,$c,"1"),await Dy(t,$c),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ry(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>CA(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dy(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const a=Oh(s,!1).getAll();return new du(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:a}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}I_.type="LOCAL";const EA=I_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){var i,t;return(t=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&t!==void 0?t:document}function AA(i){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=t,r.onerror=s=>{const a=ls("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",MA().appendChild(r)})}function OA(i){return`__${i}${Math.floor(Math.random()*1e6)}`}new cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(i,t){return t?Cs(t):(cr(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends S_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return xa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return xa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return xa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function IA(i){return uA(i.auth,new em(i),i.bypassAuthState)}function PA(i){const{auth:t,user:n}=i;return cr(n,t,"internal-error"),lA(n,new em(i),i.bypassAuthState)}async function RA(i){const{auth:t,user:n}=i;return cr(n,t,"internal-error"),aA(n,new em(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(t,n,r,s,a=!1){this.auth=t,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:u}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return IA;case"linkViaPopup":case"linkViaRedirect":return RA;case"reauthViaPopup":case"reauthViaRedirect":return PA;default:hs(this.auth,"internal-error")}}resolve(t){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=new cu(2e3,1e4);async function LA(i,t,n){const r=Mh(i);OM(i,t,Qp);const s=P_(r,n);return new Ao(r,"signInViaPopup",t,s).executeNotNull()}class Ao extends R_{constructor(t,n,r,s,a){super(t,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return cr(t,this.auth,"internal-error"),t}async onExecution(){As(this.filter.length===1,"Popup operations only handle one event");const t=Zp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ls(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(t,DA.get())};t()}}Ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="pendingRedirect",cc=new Map;class BA extends R_{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=cc.get(this.auth._key());if(!t){try{const r=await FA(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}cc.set(this.auth._key(),t)}return this.bypassAuthState||cc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FA(i,t){const n=GA(t),r=VA(i);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function UA(i,t){cc.set(i._key(),t)}function VA(i){return Cs(i._redirectPersistence)}function GA(i){return uc(NA,i.config.apiKey,i.name)}async function HA(i,t,n=!1){const r=Mh(i),s=P_(r,t),o=await new BA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=10*60*1e3;class WA{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!qA(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!D_(t)){const s=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ls(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=zA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ly(t))}saveEventToCache(t){this.cachedEventUids.add(Ly(t)),this.lastProcessedEventTime=Date.now()}}function Ly(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function D_({type:i,error:t}){return i==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function qA(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D_(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(i,t={}){return kh(i,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YA=/^https?/;async function KA(i){if(i.config.emulator)return;const{authorizedDomains:t}=await $A(i);for(const n of t)try{if(JA(n))return}catch{}hs(i,"unauthorized-domain")}function JA(i){const t=Uf(),{protocol:n,hostname:r}=new URL(t);if(i.startsWith("chrome-extension://")){const o=new URL(i);return o.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!YA.test(n))return!1;if(XA.test(i))return r===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new cu(3e4,6e4);function Ny(){const i=us().___jsl;if(i!=null&&i.H){for(const t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function ZA(i){return new Promise((t,n)=>{var r,s,a;function o(){Ny(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ny(),n(ls(i,"network-request-failed"))},timeout:QA.get()})}if(!((s=(r=us().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((a=us().gapi)===null||a===void 0)&&a.load)o();else{const u=OA("iframefcb");return us()[u]=()=>{gapi.load?o():n(ls(i,"network-request-failed"))},AA(`https://apis.google.com/js/api.js?onload=${u}`).catch(l=>n(l))}}).catch(t=>{throw hc=null,t})}let hc=null;function eO(i){return hc=hc||ZA(i),hc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=new cu(5e3,15e3),rO="__/auth/iframe",nO="emulator/auth/iframe",iO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oO(i){const t=i.config;cr(t.authDomain,i,"auth-domain-config-required");const n=t.emulator?Yp(t,nO):`https://${i.config.authDomain}/${rO}`,r={apiKey:t.apiKey,appName:i.name,v:uu},s=sO.get(i.config.apiHost);s&&(r.eid=s);const a=i._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Wa(r).slice(1)}`}async function aO(i){const t=await eO(i),n=us().gapi;return cr(n,i,"internal-error"),t.open({where:document.body,url:oO(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iO,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=ls(i,"network-request-failed"),u=us().setTimeout(()=>{a(o)},tO.get());function l(){us().clearTimeout(u),s(r)}r.ping(l).then(l,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uO=500,cO=600,hO="_blank",dO="http://localhost";class By{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fO(i,t,n,r=uO,s=cO){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const l=Object.assign(Object.assign({},lO),{width:r.toString(),height:s.toString(),top:a,left:o}),c=Qn().toLowerCase();n&&(u=m_(c)?hO:n),p_(c)&&(t=t||dO,l.scrollbars="yes");const p=Object.entries(l).reduce((h,[f,d])=>`${h}${f}=${d},`,"");if(QM(c)&&u!=="_self")return pO(t||"",u),new By(null);const m=window.open(t||"",u,p);cr(m,i,"popup-blocked");try{m.focus()}catch{}return new By(m)}function pO(i,t){const n=document.createElement("a");n.href=i,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="__/auth/handler",gO="emulator/auth/handler";function Fy(i,t,n,r,s,a){cr(i.config.authDomain,i,"auth-domain-config-required"),cr(i.config.apiKey,i,"invalid-api-key");const o={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:uu,eventId:s};if(t instanceof Qp){t.setDefaultLanguage(i.languageCode),o.providerId=t.providerId||"",Rf(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[l,c]of Object.entries(a||{}))o[l]=c}if(t instanceof hu){const l=t.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}i.tenantId&&(o.tid=i.tenantId);const u=o;for(const l of Object.keys(u))u[l]===void 0&&delete u[l];return`${yO(i)}?${Wa(u).slice(1)}`}function yO({config:i}){return i.emulator?Yp(i,gO):`https://${i.authDomain}/${mO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="webStorageSupport";class vO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E_,this._completeRedirectFn=HA,this._overrideRedirectResult=UA}async _openPopup(t,n,r,s){var a;As((a=this.eventManagers[t._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=Fy(t,n,r,Uf(),s);return fO(t,o,Zp())}async _openRedirect(t,n,r,s){return await this._originValidation(t),bA(Fy(t,n,r,Uf(),s)),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(As(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await aO(t),r=new WA(t);return n.register("authEvent",s=>(cr(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Id,{type:Id},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Id];o!==void 0&&n(!!o),hs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KA(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return __()||Jp()||Eh()}}const bO=vO;var Uy="@firebase/auth",Vy="0.21.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){cr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function xO(i){Na(new Vo("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),{apiKey:a,authDomain:o}=r.options;return((u,l)=>{cr(a&&!a.includes(":"),"invalid-api-key",{appName:u.name}),cr(!(o!=null&&o.includes(":")),"argument-error",{appName:u.name});const c={apiKey:a,authDomain:o,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:w_(i)},p=new rA(u,l,c);return PM(p,n),p})(r,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Na(new Vo("auth-internal",t=>{const n=Mh(t.getProvider("auth").getImmediate());return(r=>new _O(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),io(Uy,Vy,wO(i)),io(Uy,Vy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=5*60,jO=K1("authIdTokenMaxAge")||SO;let Gy=null;const CO=i=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jO)return;const s=n==null?void 0:n.token;Gy!==s&&(Gy=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function TO(i=n_()){const t=qp(i,"auth");if(t.isInitialized())return t.getImmediate();const n=IM(i,{popupRedirectResolver:bO,persistence:[EA,gA,E_]}),r=K1("authTokenSyncURL");if(r){const a=CO(r);hA(n,a,()=>a(n.currentUser)),cA(n,o=>a(o))}const s=Y1("auth");return s&&nA(n,`http://${s}`),n}xO("Browser");const Hy="@firebase/database",zy="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L_="";function kO(i){L_=i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Mn(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Vl(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Rs(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new EO(t)}}catch{}return new MO},Oo=N_("localStorage"),Gf=N_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new zp("@firebase/database"),AO=function(){let i=1;return function(){return i++}}(),B_=function(i){const t=jE(i),n=new _E;n.update(t);const r=n.digest();return Up.encodeByteArray(r)},fu=function(...i){let t="";for(let n=0;n<i.length;n++){const r=i[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=fu.apply(null,r):typeof r=="object"?t+=Mn(r):t+=r,t+=" "}return t};let Lo=null,Wy=!0;const OO=function(i,t){Tt(!t||i===!0||i===!1,"Can't turn on custom loggers persistently."),i===!0?(Sa.logLevel=$r.VERBOSE,Lo=Sa.log.bind(Sa),t&&Gf.set("logging_enabled",!0)):typeof i=="function"?Lo=i:(Lo=null,Gf.remove("logging_enabled"))},Kn=function(...i){if(Wy===!0&&(Wy=!1,Lo===null&&Gf.get("logging_enabled")===!0&&OO(!0)),Lo){const t=fu.apply(null,i);Lo(t)}},pu=function(i){return function(...t){Kn(i,...t)}},Hf=function(...i){const t="FIREBASE INTERNAL ERROR: "+fu(...i);Sa.error(t)},Os=function(...i){const t=`FIREBASE FATAL ERROR: ${fu(...i)}`;throw Sa.error(t),new Error(t)},gi=function(...i){const t="FIREBASE WARNING: "+fu(...i);Sa.warn(t)},IO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},F_=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},PO=function(i){if(document.readyState==="complete")i();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Fa="[MIN_NAME]",zo="[MAX_NAME]",qa=function(i,t){if(i===t)return 0;if(i===Fa||t===zo)return-1;if(t===Fa||i===zo)return 1;{const n=qy(i),r=qy(t);return n!==null?r!==null?n-r===0?i.length-t.length:n-r:-1:r!==null?1:i<t?-1:1}},RO=function(i,t){return i===t?0:i<t?-1:1},cl=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+Mn(t))},tm=function(i){if(typeof i!="object"||i===null)return Mn(i);const t=[];for(const r in i)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Mn(t[r]),n+=":",n+=tm(i[t[r]]);return n+="}",n},U_=function(i,t){const n=i.length;if(n<=t)return[i];const r=[];for(let s=0;s<n;s+=t)s+t>n?r.push(i.substring(s,n)):r.push(i.substring(s,s+t));return r};function vi(i,t){for(const n in i)i.hasOwnProperty(n)&&t(n,i[n])}const V_=function(i){Tt(!F_(i),"Invalid JSON number");const t=11,n=52,r=(1<<t-1)-1;let s,a,o,u,l;i===0?(a=0,o=0,s=1/i===-1/0?1:0):(s=i<0,i=Math.abs(i),i>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(i)/Math.LN2),r),a=u+r,o=Math.round(i*Math.pow(2,n-u)-Math.pow(2,n))):(a=0,o=Math.round(i/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=t;l;l-=1)c.push(a%2?1:0),a=Math.floor(a/2);c.push(s?1:0),c.reverse();const p=c.join("");let m="";for(l=0;l<64;l+=8){let h=parseInt(p.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),m=m+h}return m.toLowerCase()},DO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},LO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function NO(i,t){let n="Unknown Error";i==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?n="Client doesn't have permission to access the desired data.":i==="unavailable"&&(n="The service is unavailable");const r=new Error(i+" at "+t._path.toString()+": "+n);return r.code=i.toUpperCase(),r}const BO=new RegExp("^-?(0*)\\d{1,10}$"),FO=-2147483648,UO=2147483647,qy=function(i){if(BO.test(i)){const t=Number(i);if(t>=FO&&t<=UO)return t}return null},$a=function(i){try{i()}catch(t){setTimeout(()=>{const n=t.stack||"";throw gi("Exception was thrown by user callback.",n),t},Math.floor(0))}},VO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Sl=function(i,t){const n=setTimeout(i,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){gi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Kn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gi(t)}}class ja{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}ja.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="5",G_="v",H_="s",z_="r",W_="f",q_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$_="ls",X_="p",zf="ac",Y_="websocket",K_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(t,n,r,s,a=!1,o="",u=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Oo.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Oo.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function zO(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function Q_(i,t,n){Tt(typeof t=="string","typeof type must == string"),Tt(typeof n=="object","typeof params must == object");let r;if(t===Y_)r=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===K_)r=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);zO(i)&&(n.ns=i.namespace);const s=[];return vi(n,(a,o)=>{s.push(a+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(){this.counters_={}}incrementCounter(t,n=1){Rs(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return rE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd={},Rd={};function nm(i){const t=i.toString();return Pd[t]||(Pd[t]=new WO),Pd[t]}function qO(i,t){const n=i.toString();return Rd[n]||(Rd[n]=t()),Rd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&$a(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="start",XO="close",YO="pLPCommand",KO="pRTLPCB",Z_="id",ew="pw",tw="ser",JO="cb",QO="seg",ZO="ts",eI="d",tI="dframe",rw=1870,nw=30,rI=rw-nw,nI=25e3,iI=3e4;class ma{constructor(t,n,r,s,a,o,u){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pu(t),this.stats_=nm(n),this.urlFn=l=>(this.appCheckToken&&(l[zf]=this.appCheckToken),Q_(n,K_,l))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new $O(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(iI)),PO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new im((...a)=>{const[o,u,l,c,p]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===$y)this.id=u,this.password=l;else if(o===XO)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...a)=>{const[o,u]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(o,u)},()=>{this.onClosed_()},this.urlFn);const r={};r[$y]="t",r[tw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[JO]=this.scriptTagHolder.uniqueCallbackIdentifier),r[G_]=rm,this.transportSessionId&&(r[H_]=this.transportSessionId),this.lastSessionId&&(r[$_]=this.lastSessionId),this.applicationId&&(r[X_]=this.applicationId),this.appCheckToken&&(r[zf]=this.appCheckToken),typeof location<"u"&&location.hostname&&q_.test(location.hostname)&&(r[z_]=W_);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ma.forceAllow_=!0}static forceDisallow(){ma.forceDisallow_=!0}static isAvailable(){return ma.forceAllow_?!0:!ma.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!DO()&&!LO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Mn(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=$1(n),s=U_(r,rI);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[tI]="t",r[Z_]=t,r[ew]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Mn(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class im{constructor(t,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=AO(),window[YO+this.uniqueCallbackIdentifier]=t,window[KO+this.uniqueCallbackIdentifier]=n,this.myIFrame=im.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Kn("frame writing exception"),u.stack&&Kn(u.stack),Kn(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Kn("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[Z_]=this.myID,t[ew]=this.myPW,t[tw]=this.currentSerial;let n=this.urlFn(t),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+nw+r.length<=rw;){const o=this.pendingSegs.shift();r=r+"&"+QO+s+"="+o.seg+"&"+ZO+s+"="+o.ts+"&"+eI+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(nI)),a=()=>{clearTimeout(s),r()};this.addTag(t,a)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Kn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=16384,oI=45e3;let Yc=null;typeof MozWebSocket<"u"?Yc=MozWebSocket:typeof WebSocket<"u"&&(Yc=WebSocket);class Ui{constructor(t,n,r,s,a,o,u){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pu(this.connId),this.stats_=nm(n),this.connURL=Ui.connectionURL_(n,o,u,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,r,s,a){const o={};return o[G_]=rm,typeof location<"u"&&location.hostname&&q_.test(location.hostname)&&(o[z_]=W_),n&&(o[H_]=n),r&&(o[$_]=r),s&&(o[zf]=s),a&&(o[X_]=a),Q_(t,Y_,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Oo.set("previous_websocket_failure",!0);try{let r;Q1(),this.mySock=new Yc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ui.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Yc!==null&&!Ui.forceDisallow_}static previouslyFailed(){return Oo.isInMemoryStorage||Oo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Oo.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Vl(n);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Tt(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const n=Mn(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=U_(n,sI);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(oI))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ui.responsesRequiredToBeHealthy=2;Ui.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ma,Ui]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const n=Ui&&Ui.isAvailable();let r=n&&!Ui.previouslyFailed();if(t.webSocketOnly&&(n||gi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ui];else{const s=this.transports_=[];for(const a of Wl.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);Wl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=6e4,lI=5e3,uI=10*1024,cI=100*1024,Dd="t",Xy="d",hI="s",Yy="r",dI="e",Ky="o",Jy="a",Qy="n",Zy="p",fI="h";class pI{constructor(t,n,r,s,a,o,u,l,c,p){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pu("c:"+this.id+":"),this.transportManager_=new Wl(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Sl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>cI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>uI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Dd in t){const n=t[Dd];n===Jy?this.upgradeIfSecondaryHealthy_():n===Yy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ky&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=cl("t",t),r=cl("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Zy,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Qy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=cl("t",t),r=cl("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=cl(Dd,t);if(Xy in t){const r=t[Xy];if(n===fI){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Qy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===hI?this.onConnectionShutdown_(r):n===Yy?this.onReset_(r):n===dI?Hf("Server Error: "+r):n===Ky?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hf("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),rm!==r&&gi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Sl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(aI))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Sl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(lI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Zy,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Oo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{put(t,n,r,s){}merge(t,n,r,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(t){this.allowedEvents_=t,this.listeners_={},Tt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const s=this.getInitialEvent(t);s&&n.apply(r,s)}off(t,n,r){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let a=0;a<s.length;a++)if(s[a].callback===n&&(!r||r===s[a].context)){s.splice(a,1);return}}validateEventType_(t){Tt(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends sw{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Gp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Kc}getInitialEvent(t){return Tt(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=32,t0=768;class Yr{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function Er(){return new Yr("")}function Sr(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function po(i){return i.pieces_.length-i.pieceNum_}function Zr(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new Yr(i.pieces_,t)}function ow(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function mI(i){let t="";for(let n=i.pieceNum_;n<i.pieces_.length;n++)i.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[n])));return t||"/"}function aw(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function lw(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let n=i.pieceNum_;n<i.pieces_.length-1;n++)t.push(i.pieces_[n]);return new Yr(t,0)}function An(i,t){const n=[];for(let r=i.pieceNum_;r<i.pieces_.length;r++)n.push(i.pieces_[r]);if(t instanceof Yr)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Yr(n,0)}function _r(i){return i.pieceNum_>=i.pieces_.length}function li(i,t){const n=Sr(i),r=Sr(t);if(n===null)return t;if(n===r)return li(Zr(i),Zr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function uw(i,t){if(po(i)!==po(t))return!1;for(let n=i.pieceNum_,r=t.pieceNum_;n<=i.pieces_.length;n++,r++)if(i.pieces_[n]!==t.pieces_[r])return!1;return!0}function Gi(i,t){let n=i.pieceNum_,r=t.pieceNum_;if(po(i)>po(t))return!1;for(;n<i.pieces_.length;){if(i.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class gI{constructor(t,n){this.errorPrefix_=n,this.parts_=aw(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Th(this.parts_[r]);cw(this)}}function yI(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=Th(t),cw(i)}function vI(i){const t=i.parts_.pop();i.byteLength_-=Th(t),i.parts_.length>0&&(i.byteLength_-=1)}function cw(i){if(i.byteLength_>t0)throw new Error(i.errorPrefix_+"has a key path longer than "+t0+" bytes ("+i.byteLength_+").");if(i.parts_.length>e0)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e0+") or object contains a cycle "+Co(i))}function Co(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends sw{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new sm}getInitialEvent(t){return Tt(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=1e3,bI=60*5*1e3,r0=30*1e3,_I=1.3,wI=3e4,xI="server_kill",n0=3;class Es extends iw{constructor(t,n,r,s,a,o,u,l){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=o,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=Es.nextPersistentConnectionId_++,this.log_=pu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hl,this.maxReconnectDelay_=bI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Q1())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sm.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Kc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,r){const s=++this.requestNumber_,a={r:s,a:t,b:n};this.log_(Mn(a)),Tt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const n=new Ch,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const u=o.d;o.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(t,n,r,s){this.initConnection_();const a=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+a),this.listens.has(o)||this.listens.set(o,new Map),Tt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Tt(!this.listens.get(o).has(a),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:n,query:t,tag:r};this.listens.get(o).set(a,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(t){const n=t.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const a={p:r},o="q";t.tag&&(a.q=n._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(o,a,u=>{const l=u.d,c=u.s;Es.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",u),c!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(c,l))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Rs(t,"w")){const r=La(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();gi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||bE(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=r0)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=vE(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const a=s.s,o=s.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,r=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(t,n){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Tt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,n)}sendUnlisten_(t,n,r,s){this.log_("Unlisten on "+t+" for "+n);const a={p:t},o="n";s&&(a.q=r,a.t=s),this.sendRequest(o,a)}onDisconnectPut(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:r})}onDisconnectMerge(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:r})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,r,s){const a={p:n,d:r};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(t,n,r,s){this.putInternal("p",t,n,r,s)}merge(t,n,r,s){this.putInternal("m",t,n,r,s)}putInternal(t,n,r,s,a){this.initConnection_();const o={p:n,d:r};a!==void 0&&(o.h=a),this.outstandingPuts_.push({action:t,request:o,onComplete:s}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Mn(t));const n=t.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):Hf("Unrecognized action received from server: "+Mn(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Tt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>wI&&(this.reconnectDelay_=hl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_I)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Es.nextConnectionId_++,a=this.lastSessionId;let o=!1,u=null;const l=function(){u?u.close():(o=!0,r())},c=function(m){Tt(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:l,sendRequest:c};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,h]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);o?Kn("getToken() completed but was canceled"):(Kn("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=h&&h.token,u=new pI(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,f=>{gi(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(xI)},a))}catch(m){this.log_("Failed to get token: "+m),o||(this.repoInfo_.nodeAdmin&&gi(m),l())}}}interrupt(t){Kn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Kn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Rf(this.interruptReasons_)&&(this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let r;n?r=n.map(a=>tm(a)).join("$"):r="default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,n){const r=new Yr(t).toString();let s;if(this.listens.has(r)){const a=this.listens.get(r);s=a.get(n),a.delete(n),a.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,n){Kn("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=n0&&(this.reconnectDelay_=r0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){Kn("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=n0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+L_.replace(/\./g,"-")]=1,Gp()?t["framework.cordova"]=1:J1()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Kc.getInstance().currentlyOnline();return Rf(this.interruptReasons_)&&t}}Es.nextPersistentConnectionId_=0;Es.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new br(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new br(Fa,t),s=new br(Fa,n);return this.compare(r,s)!==0}minPost(){return br.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju;class hw extends Ih{static get __EMPTY_NODE(){return Ju}static set __EMPTY_NODE(t){Ju=t}compare(t,n){return qa(t.name,n.name)}isDefinedOn(t){throw za("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return br.MIN}maxPost(){return new br(zo,Ju)}makePost(t,n){return Tt(typeof t=="string","KeyIndex indexValue must always be a string."),new br(t,Ju)}toString(){return".key"}}const Ca=new hw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t,n,r,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,s&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Dn{constructor(t,n,r,s,a){this.key=t,this.value=n,this.color=r??Dn.RED,this.left=s??mi.EMPTY_NODE,this.right=a??mi.EMPTY_NODE}copy(t,n,r,s,a){return new Dn(t??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const a=r(t,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(t,n,r),null):a===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return mi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let r,s;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return mi.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Dn.RED=!0;Dn.BLACK=!1;class SI{copy(t,n,r,s,a){return this}insert(t,n,r){return new Dn(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class mi{constructor(t,n=mi.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new mi(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Dn.BLACK,null,null))}remove(t){return new mi(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Dn.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Qu(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Qu(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Qu(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Qu(this.root_,null,this.comparator_,!0,t)}}mi.EMPTY_NODE=new SI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(i,t){return qa(i.name,t.name)}function om(i,t){return qa(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wf;function CI(i){Wf=i}const dw=function(i){return typeof i=="number"?"number:"+V_(i):"string:"+i},fw=function(i){if(i.isLeafNode()){const t=i.val();Tt(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Rs(t,".sv"),"Priority must be a string or number.")}else Tt(i===Wf||i.isEmpty(),"priority of unexpected type.");Tt(i===Wf||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i0;class Rn{constructor(t,n=Rn.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Tt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fw(this.priorityNode_)}static set __childrenNodeConstructor(t){i0=t}static get __childrenNodeConstructor(){return i0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Rn(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Rn.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return _r(t)?this:Sr(t)===".priority"?this.priorityNode_:Rn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Rn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=Sr(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Tt(r!==".priority"||po(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Rn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zr(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+dw(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=V_(this.value_):t+=this.value_,this.lazyHash_=B_(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Rn.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Rn.__childrenNodeConstructor?-1:(Tt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,s=Rn.VALUE_TYPE_ORDER.indexOf(n),a=Rn.VALUE_TYPE_ORDER.indexOf(r);return Tt(s>=0,"Unknown leaf type: "+n),Tt(a>=0,"Unknown leaf type: "+r),s===a?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Rn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pw,mw;function TI(i){pw=i}function kI(i){mw=i}class EI extends Ih{compare(t,n){const r=t.node.getPriority(),s=n.node.getPriority(),a=r.compareTo(s);return a===0?qa(t.name,n.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return br.MIN}maxPost(){return new br(zo,new Rn("[PRIORITY-POST]",mw))}makePost(t,n){const r=pw(t);return new br(n,new Rn("[PRIORITY-POST]",r))}toString(){return".priority"}}const yn=new EI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=Math.log(2);class AI{constructor(t){const n=a=>parseInt(Math.log(a)/MI,10),r=a=>parseInt(Array(a+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const s=r(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Jc=function(i,t,n,r){i.sort(t);const s=function(l,c){const p=c-l;let m,h;if(p===0)return null;if(p===1)return m=i[l],h=n?n(m):m,new Dn(h,m.node,Dn.BLACK,null,null);{const f=parseInt(p/2,10)+l,d=s(l,f),g=s(f+1,c);return m=i[f],h=n?n(m):m,new Dn(h,m.node,Dn.BLACK,d,g)}},a=function(l){let c=null,p=null,m=i.length;const h=function(d,g){const y=m-d,b=m;m-=d;const x=s(y+1,b),j=i[y],S=n?n(j):j;f(new Dn(S,j.node,g,null,x))},f=function(d){c?(c.left=d,c=d):(p=d,c=d)};for(let d=0;d<l.count;++d){const g=l.nextBitIsOne(),y=Math.pow(2,l.count-(d+1));g?h(y,Dn.BLACK):(h(y,Dn.BLACK),h(y,Dn.RED))}return p},o=new AI(i.length),u=a(o);return new mi(r||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld;const aa={};class Ts{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return Tt(aa&&yn,"ChildrenNode.ts has not been loaded"),Ld=Ld||new Ts({".priority":aa},{".priority":yn}),Ld}get(t){const n=La(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof mi?n:null}hasIndex(t){return Rs(this.indexSet_,t.toString())}addIndex(t,n){Tt(t!==Ca,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const a=n.getIterator(br.Wrap);let o=a.getNext();for(;o;)s=s||t.isDefinedOn(o.node),r.push(o),o=a.getNext();let u;s?u=Jc(r,t.getCompare()):u=aa;const l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;const p=Object.assign({},this.indexes_);return p[l]=u,new Ts(p,c)}addToIndexes(t,n){const r=Gc(this.indexes_,(s,a)=>{const o=La(this.indexSet_,a);if(Tt(o,"Missing index implementation for "+a),s===aa)if(o.isDefinedOn(t.node)){const u=[],l=n.getIterator(br.Wrap);let c=l.getNext();for(;c;)c.name!==t.name&&u.push(c),c=l.getNext();return u.push(t),Jc(u,o.getCompare())}else return aa;else{const u=n.get(t.name);let l=s;return u&&(l=l.remove(new br(t.name,u))),l.insert(t,t.node)}});return new Ts(r,this.indexSet_)}removeFromIndexes(t,n){const r=Gc(this.indexes_,s=>{if(s===aa)return s;{const a=n.get(t.name);return a?s.remove(new br(t.name,a)):s}});return new Ts(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl;class er{constructor(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&fw(this.priorityNode_),this.children_.isEmpty()&&Tt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return dl||(dl=new er(new mi(om),null,Ts.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||dl}updatePriority(t){return this.children_.isEmpty()?this:new er(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?dl:n}}getChild(t){const n=Sr(t);return n===null?this:this.getImmediateChild(n).getChild(Zr(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(Tt(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const r=new br(t,n);let s,a;n.isEmpty()?(s=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?dl:this.priorityNode_;return new er(s,o,a)}}updateChild(t,n){const r=Sr(t);if(r===null)return n;{Tt(Sr(t)!==".priority"||po(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Zr(t),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,s=0,a=!0;if(this.forEachChild(yn,(o,u)=>{n[o]=u.val(t),r++,a&&er.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):a=!1}),!t&&a&&s<2*r){const o=[];for(const u in n)o[u]=n[u];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+dw(this.getPriority().val())+":"),this.forEachChild(yn,(n,r)=>{const s=r.hash();s!==""&&(t+=":"+n+":"+s)}),this.lazyHash_=t===""?"":B_(t)}return this.lazyHash_}getPredecessorChildName(t,n,r){const s=this.resolveIndex_(r);if(s){const a=s.getPredecessorKey(new br(t,n));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new br(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new br(n,this.children_.get(n)):null}forEachChild(t,n){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,br.Wrap);let a=s.peek();for(;a!=null&&n.compare(a,t)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,br.Wrap);let a=s.peek();for(;a!=null&&n.compare(a,t)>0;)s.getNext(),a=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===mu?-1:0}withIndex(t){if(t===Ca||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new er(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Ca||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(yn),s=n.getIterator(yn);let a=r.getNext(),o=s.getNext();for(;a&&o;){if(a.name!==o.name||!a.node.equals(o.node))return!1;a=r.getNext(),o=s.getNext()}return a===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===Ca?null:this.indexMap_.get(t.toString())}}er.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class OI extends er{constructor(){super(new mi(om),er.EMPTY_NODE,Ts.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return er.EMPTY_NODE}isEmpty(){return!1}}const mu=new OI;Object.defineProperties(br,{MIN:{value:new br(Fa,er.EMPTY_NODE)},MAX:{value:new br(zo,mu)}});hw.__EMPTY_NODE=er.EMPTY_NODE;Rn.__childrenNodeConstructor=er;CI(mu);kI(mu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=!0;function Ln(i,t=null){if(i===null)return er.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),Tt(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const n=i;return new Rn(n,Ln(t))}if(!(i instanceof Array)&&II){const n=[];let r=!1;if(vi(i,(o,u)=>{if(o.substring(0,1)!=="."){const l=Ln(u);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new br(o,l)))}}),n.length===0)return er.EMPTY_NODE;const a=Jc(n,jI,o=>o.name,om);if(r){const o=Jc(n,yn.getCompare());return new er(a,Ln(t),new Ts({".priority":o},{".priority":yn}))}else return new er(a,Ln(t),Ts.Default)}else{let n=er.EMPTY_NODE;return vi(i,(r,s)=>{if(Rs(i,r)&&r.substring(0,1)!=="."){const a=Ln(s);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(r,a))}}),n.updatePriority(Ln(t))}}TI(Ln);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI extends Ih{constructor(t){super(),this.indexPath_=t,Tt(!_r(t)&&Sr(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),s=this.extractChild(n.node),a=r.compareTo(s);return a===0?qa(t.name,n.name):a}makePost(t,n){const r=Ln(t),s=er.EMPTY_NODE.updateChild(this.indexPath_,r);return new br(n,s)}maxPost(){const t=er.EMPTY_NODE.updateChild(this.indexPath_,mu);return new br(zo,t)}toString(){return aw(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI extends Ih{compare(t,n){const r=t.node.compareTo(n.node);return r===0?qa(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return br.MIN}maxPost(){return br.MAX}makePost(t,n){const r=Ln(t);return new br(n,r)}toString(){return".value"}}const DI=new RI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(i){return{type:"value",snapshotNode:i}}function Ua(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function ql(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function $l(i,t,n){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:n}}function LI(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(t){this.index_=t}updateChild(t,n,r,s,a,o){Tt(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(n);return u.getChild(s).equals(r.getChild(s))&&u.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?t.hasChild(n)?o.trackChildChange(ql(n,u)):Tt(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?o.trackChildChange(Ua(n,r)):o.trackChildChange($l(n,r,u))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(yn,(s,a)=>{n.hasChild(s)||r.trackChildChange(ql(s,a))}),n.isLeafNode()||n.forEachChild(yn,(s,a)=>{if(t.hasChild(s)){const o=t.getImmediateChild(s);o.equals(a)||r.trackChildChange($l(s,a,o))}else r.trackChildChange(Ua(s,a))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?er.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(t){this.indexedFilter_=new am(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Xl.getStartPost_(t),this.endPost_=Xl.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,s,a,o){return this.matches(new br(n,r))||(r=er.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,s,a,o)}updateFullNode(t,n,r){n.isLeafNode()&&(n=er.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(er.EMPTY_NODE);const a=this;return n.forEachChild(yn,(o,u)=>{a.matches(new br(o,u))||(s=s.updateImmediateChild(o,er.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Xl(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,s,a,o){return this.rangedFilter_.matches(new br(n,r))||(r=er.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,s,a,o):this.fullLimitUpdateChild_(t,n,r,a,o)}updateFullNode(t,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=er.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=er.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;a.hasNext()&&o<this.limit_;){const u=a.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))s=s.updateImmediateChild(u.name,u.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(er.EMPTY_NODE);let a;this.reverse_?a=s.getReverseIterator(this.index_):a=s.getIterator(this.index_);let o=0;for(;a.hasNext();){const u=a.getNext();o<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?o++:s=s.updateImmediateChild(u.name,er.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,s,a){let o;if(this.reverse_){const m=this.index_.getCompare();o=(h,f)=>m(f,h)}else o=this.index_.getCompare();const u=t;Tt(u.numChildren()===this.limit_,"");const l=new br(n,r),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),p=this.rangedFilter_.matches(l);if(u.hasChild(n)){const m=u.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||u.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,l);if(p&&!r.isEmpty()&&f>=0)return a!=null&&a.trackChildChange($l(n,r,m)),u.updateImmediateChild(n,r);{a!=null&&a.trackChildChange(ql(n,m));const g=u.updateImmediateChild(n,er.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(a!=null&&a.trackChildChange(Ua(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?t:p&&o(c,l)>=0?(a!=null&&(a.trackChildChange(ql(c.name,c.node)),a.trackChildChange(Ua(n,r))),u.updateImmediateChild(n,r).updateImmediateChild(c.name,er.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Tt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Tt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fa}hasEnd(){return this.endSet_}getIndexEndValue(){return Tt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Tt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Tt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yn}copy(){const t=new lm;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function BI(i){return i.loadsAllData()?new am(i.getIndex()):i.hasLimit()?new NI(i):new Xl(i)}function s0(i){const t={};if(i.isDefault())return t;let n;if(i.index_===yn?n="$priority":i.index_===DI?n="$value":i.index_===Ca?n="$key":(Tt(i.index_ instanceof PI,"Unrecognized index type!"),n=i.index_.toString()),t.orderBy=Mn(n),i.startSet_){const r=i.startAfterSet_?"startAfter":"startAt";t[r]=Mn(i.indexStartValue_),i.startNameSet_&&(t[r]+=","+Mn(i.indexStartName_))}if(i.endSet_){const r=i.endBeforeSet_?"endBefore":"endAt";t[r]=Mn(i.indexEndValue_),i.endNameSet_&&(t[r]+=","+Mn(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function o0(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let n=i.viewFrom_;n===""&&(i.isViewFromLeft()?n="l":n="r"),t.vf=n}return i.index_!==yn&&(t.i=i.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends iw{constructor(t,n,r,s){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=pu("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(Tt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,s){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const o=Qc.getListenId_(t,r),u={};this.listens_[o]=u;const l=s0(t._queryParams);this.restRequest_(a+".json",l,(c,p)=>{let m=p;if(c===404&&(m=null,c=null),c===null&&this.onDataUpdate_(a,m,!1,r),La(this.listens_,o)===u){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",s(h,null)}})}unlisten(t,n){const r=Qc.getListenId_(t,n);delete this.listens_[r]}get(t){const n=s0(t._queryParams),r=t._path.toString(),s=new Ch;return this.restRequest_(r+".json",n,(a,o)=>{let u=o;a===404&&(u=null,a=null),a===null?(this.onDataUpdate_(r,u,!1,null),s.resolve(u)):s.reject(new Error(u))}),s.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(n.auth=s.accessToken),a&&a.token&&(n.ac=a.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Wa(n);this.log_("Sending REST request for "+o);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+o+" received. status:",u.status,"response:",u.responseText);let l=null;if(u.status>=200&&u.status<300){try{l=Vl(u.responseText)}catch{gi("Failed to parse JSON response for "+o+": "+u.responseText)}r(null,l)}else u.status!==401&&u.status!==404&&gi("Got unsuccessful REST response for "+o+" Status: "+u.status),r(u.status);r=null}},u.open("GET",o,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.rootNode_=er.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(){return{value:null,children:new Map}}function yw(i,t,n){if(_r(t))i.value=n,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,n);else{const r=Sr(t);i.children.has(r)||i.children.set(r,Zc());const s=i.children.get(r);t=Zr(t),yw(s,t,n)}}function qf(i,t,n){i.value!==null?n(t,i.value):UI(i,(r,s)=>{const a=new Yr(t.toString()+"/"+r);qf(s,a,n)})}function UI(i,t){i.children.forEach((n,r)=>{t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&vi(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=10*1e3,GI=30*1e3,HI=5*60*1e3;class zI{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new VI(t);const r=a0+(GI-a0)*Math.random();Sl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;vi(t,(s,a)=>{a>0&&Rs(this.statsToReport_,s)&&(n[s]=a,r=!0)}),r&&this.server_.reportStats(n),Sl(this.reportStats_.bind(this),Math.floor(Math.random()*2*HI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hi;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Hi||(Hi={}));function vw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function um(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cm(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Hi.ACK_USER_WRITE,this.source=vw()}operationForChild(t){if(_r(this.path)){if(this.affectedTree.value!=null)return Tt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Yr(t));return new eh(Er(),n,this.revert)}}else return Tt(Sr(this.path)===t,"operationForChild called for unrelated child."),new eh(Zr(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(t,n){this.source=t,this.path=n,this.type=Hi.LISTEN_COMPLETE}operationForChild(t){return _r(this.path)?new Yl(this.source,Er()):new Yl(this.source,Zr(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Hi.OVERWRITE}operationForChild(t){return _r(this.path)?new Wo(this.source,Er(),this.snap.getImmediateChild(t)):new Wo(this.source,Zr(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Hi.MERGE}operationForChild(t){if(_r(this.path)){const n=this.children.subtree(new Yr(t));return n.isEmpty()?null:n.value?new Wo(this.source,Er(),n.value):new Kl(this.source,Er(),n)}else return Tt(Sr(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Kl(this.source,Zr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(_r(t))return this.isFullyInitialized()&&!this.filtered_;const n=Sr(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function qI(i,t,n,r){const s=[],a=[];return t.forEach(o=>{o.type==="child_changed"&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&a.push(LI(o.childName,o.snapshotNode))}),fl(i,s,"child_removed",t,r,n),fl(i,s,"child_added",t,r,n),fl(i,s,"child_moved",a,r,n),fl(i,s,"child_changed",t,r,n),fl(i,s,"value",t,r,n),s}function fl(i,t,n,r,s,a){const o=r.filter(u=>u.type===n);o.sort((u,l)=>XI(i,u,l)),o.forEach(u=>{const l=$I(i,u,a);s.forEach(c=>{c.respondsTo(u.type)&&t.push(c.createEvent(l,i.query_))})})}function $I(i,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function XI(i,t,n){if(t.childName==null||n.childName==null)throw za("Should only compare child_ events.");const r=new br(t.childName,t.snapshotNode),s=new br(n.childName,n.snapshotNode);return i.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(i,t){return{eventCache:i,serverCache:t}}function jl(i,t,n,r){return Ph(new mo(t,n,r),i.serverCache)}function bw(i,t,n,r){return Ph(i.eventCache,new mo(t,n,r))}function th(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function qo(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd;const YI=()=>(Nd||(Nd=new mi(RO)),Nd);class sn{constructor(t,n=YI()){this.value=t,this.children=n}static fromObject(t){let n=new sn(null);return vi(t,(r,s)=>{n=n.set(new Yr(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:Er(),value:this.value};if(_r(t))return null;{const r=Sr(t),s=this.children.get(r);if(s!==null){const a=s.findRootMostMatchingPathAndValue(Zr(t),n);return a!=null?{path:An(new Yr(r),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(_r(t))return this;{const n=Sr(t),r=this.children.get(n);return r!==null?r.subtree(Zr(t)):new sn(null)}}set(t,n){if(_r(t))return new sn(n,this.children);{const r=Sr(t),a=(this.children.get(r)||new sn(null)).set(Zr(t),n),o=this.children.insert(r,a);return new sn(this.value,o)}}remove(t){if(_r(t))return this.children.isEmpty()?new sn(null):new sn(null,this.children);{const n=Sr(t),r=this.children.get(n);if(r){const s=r.remove(Zr(t));let a;return s.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,s),this.value===null&&a.isEmpty()?new sn(null):new sn(this.value,a)}else return this}}get(t){if(_r(t))return this.value;{const n=Sr(t),r=this.children.get(n);return r?r.get(Zr(t)):null}}setTree(t,n){if(_r(t))return n;{const r=Sr(t),a=(this.children.get(r)||new sn(null)).setTree(Zr(t),n);let o;return a.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,a),new sn(this.value,o)}}fold(t){return this.fold_(Er(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((s,a)=>{r[s]=a.fold_(An(t,s),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,Er(),n)}findOnPath_(t,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(_r(t))return null;{const a=Sr(t),o=this.children.get(a);return o?o.findOnPath_(Zr(t),An(n,a),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,Er(),n)}foreachOnPath_(t,n,r){if(_r(t))return this;{this.value&&r(n,this.value);const s=Sr(t),a=this.children.get(s);return a?a.foreachOnPath_(Zr(t),An(n,s),r):new sn(null)}}foreach(t){this.foreach_(Er(),t)}foreach_(t,n){this.children.inorderTraversal((r,s)=>{s.foreach_(An(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t){this.writeTree_=t}static empty(){return new zi(new sn(null))}}function Cl(i,t,n){if(_r(t))return new zi(new sn(n));{const r=i.writeTree_.findRootMostValueAndPath(t);if(r!=null){const s=r.path;let a=r.value;const o=li(s,t);return a=a.updateChild(o,n),new zi(i.writeTree_.set(s,a))}else{const s=new sn(n),a=i.writeTree_.setTree(t,s);return new zi(a)}}}function l0(i,t,n){let r=i;return vi(n,(s,a)=>{r=Cl(r,An(t,s),a)}),r}function u0(i,t){if(_r(t))return zi.empty();{const n=i.writeTree_.setTree(t,new sn(null));return new zi(n)}}function $f(i,t){return Ko(i,t)!=null}function Ko(i,t){const n=i.writeTree_.findRootMostValueAndPath(t);return n!=null?i.writeTree_.get(n.path).getChild(li(n.path,t)):null}function c0(i){const t=[],n=i.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(yn,(r,s)=>{t.push(new br(r,s))}):i.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&t.push(new br(r,s.value))}),t}function so(i,t){if(_r(t))return i;{const n=Ko(i,t);return n!=null?new zi(new sn(n)):new zi(i.writeTree_.subtree(t))}}function Xf(i){return i.writeTree_.isEmpty()}function Va(i,t){return _w(Er(),i.writeTree_,t)}function _w(i,t,n){if(t.value!=null)return n.updateChild(i,t.value);{let r=null;return t.children.inorderTraversal((s,a)=>{s===".priority"?(Tt(a.value!==null,"Priority writes must always be leaf nodes"),r=a.value):n=_w(An(i,s),a,n)}),!n.getChild(i).isEmpty()&&r!==null&&(n=n.updateChild(An(i,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(i,t){return jw(t,i)}function KI(i,t,n,r,s){Tt(r>i.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),i.allWrites.push({path:t,snap:n,writeId:r,visible:s}),s&&(i.visibleWrites=Cl(i.visibleWrites,t,n)),i.lastWriteId=r}function JI(i,t){for(let n=0;n<i.allWrites.length;n++){const r=i.allWrites[n];if(r.writeId===t)return r}return null}function QI(i,t){const n=i.allWrites.findIndex(u=>u.writeId===t);Tt(n>=0,"removeWrite called with nonexistent writeId.");const r=i.allWrites[n];i.allWrites.splice(n,1);let s=r.visible,a=!1,o=i.allWrites.length-1;for(;s&&o>=0;){const u=i.allWrites[o];u.visible&&(o>=n&&ZI(u,r.path)?s=!1:Gi(r.path,u.path)&&(a=!0)),o--}if(s){if(a)return eP(i),!0;if(r.snap)i.visibleWrites=u0(i.visibleWrites,r.path);else{const u=r.children;vi(u,l=>{i.visibleWrites=u0(i.visibleWrites,An(r.path,l))})}return!0}else return!1}function ZI(i,t){if(i.snap)return Gi(i.path,t);for(const n in i.children)if(i.children.hasOwnProperty(n)&&Gi(An(i.path,n),t))return!0;return!1}function eP(i){i.visibleWrites=ww(i.allWrites,tP,Er()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function tP(i){return i.visible}function ww(i,t,n){let r=zi.empty();for(let s=0;s<i.length;++s){const a=i[s];if(t(a)){const o=a.path;let u;if(a.snap)Gi(n,o)?(u=li(n,o),r=Cl(r,u,a.snap)):Gi(o,n)&&(u=li(o,n),r=Cl(r,Er(),a.snap.getChild(u)));else if(a.children){if(Gi(n,o))u=li(n,o),r=l0(r,u,a.children);else if(Gi(o,n))if(u=li(o,n),_r(u))r=l0(r,Er(),a.children);else{const l=La(a.children,Sr(u));if(l){const c=l.getChild(Zr(u));r=Cl(r,Er(),c)}}}else throw za("WriteRecord should have .snap or .children")}}return r}function xw(i,t,n,r,s){if(!r&&!s){const a=Ko(i.visibleWrites,t);if(a!=null)return a;{const o=so(i.visibleWrites,t);if(Xf(o))return n;if(n==null&&!$f(o,Er()))return null;{const u=n||er.EMPTY_NODE;return Va(o,u)}}}else{const a=so(i.visibleWrites,t);if(!s&&Xf(a))return n;if(!s&&n==null&&!$f(a,Er()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(Gi(c.path,t)||Gi(t,c.path))},u=ww(i.allWrites,o,t),l=n||er.EMPTY_NODE;return Va(u,l)}}}function rP(i,t,n){let r=er.EMPTY_NODE;const s=Ko(i.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(yn,(a,o)=>{r=r.updateImmediateChild(a,o)}),r;if(n){const a=so(i.visibleWrites,t);return n.forEachChild(yn,(o,u)=>{const l=Va(so(a,new Yr(o)),u);r=r.updateImmediateChild(o,l)}),c0(a).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const a=so(i.visibleWrites,t);return c0(a).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function nP(i,t,n,r,s){Tt(r||s,"Either existingEventSnap or existingServerSnap must exist");const a=An(t,n);if($f(i.visibleWrites,a))return null;{const o=so(i.visibleWrites,a);return Xf(o)?s.getChild(n):Va(o,s.getChild(n))}}function iP(i,t,n,r){const s=An(t,n),a=Ko(i.visibleWrites,s);if(a!=null)return a;if(r.isCompleteForChild(n)){const o=so(i.visibleWrites,s);return Va(o,r.getNode().getImmediateChild(n))}else return null}function sP(i,t){return Ko(i.visibleWrites,t)}function oP(i,t,n,r,s,a,o){let u;const l=so(i.visibleWrites,t),c=Ko(l,Er());if(c!=null)u=c;else if(n!=null)u=Va(l,n);else return[];if(u=u.withIndex(o),!u.isEmpty()&&!u.isLeafNode()){const p=[],m=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o);let f=h.getNext();for(;f&&p.length<s;)m(f,r)!==0&&p.push(f),f=h.getNext();return p}else return[]}function aP(){return{visibleWrites:zi.empty(),allWrites:[],lastWriteId:-1}}function rh(i,t,n,r){return xw(i.writeTree,i.treePath,t,n,r)}function hm(i,t){return rP(i.writeTree,i.treePath,t)}function h0(i,t,n,r){return nP(i.writeTree,i.treePath,t,n,r)}function nh(i,t){return sP(i.writeTree,An(i.treePath,t))}function lP(i,t,n,r,s,a){return oP(i.writeTree,i.treePath,t,n,r,s,a)}function dm(i,t,n){return iP(i.writeTree,i.treePath,t,n)}function Sw(i,t){return jw(An(i.treePath,t),i.writeTree)}function jw(i,t){return{treePath:i,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;Tt(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Tt(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const a=s.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(r,$l(r,t.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(r,ql(r,s.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(r,Ua(r,t.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(r,$l(r,t.snapshotNode,s.oldSnap));else throw za("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}}const Cw=new cP;class fm{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new mo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dm(this.writes_,t,r)}}getChildAfterChild(t,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qo(this.viewCache_),a=lP(this.writes_,s,n,1,r,t);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(i){return{filter:i}}function dP(i,t){Tt(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Tt(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function fP(i,t,n,r,s){const a=new uP;let o,u;if(n.type===Hi.OVERWRITE){const c=n;c.source.fromUser?o=Yf(i,t,c.path,c.snap,r,s,a):(Tt(c.source.fromServer,"Unknown source."),u=c.source.tagged||t.serverCache.isFiltered()&&!_r(c.path),o=ih(i,t,c.path,c.snap,r,s,u,a))}else if(n.type===Hi.MERGE){const c=n;c.source.fromUser?o=mP(i,t,c.path,c.children,r,s,a):(Tt(c.source.fromServer,"Unknown source."),u=c.source.tagged||t.serverCache.isFiltered(),o=Kf(i,t,c.path,c.children,r,s,u,a))}else if(n.type===Hi.ACK_USER_WRITE){const c=n;c.revert?o=vP(i,t,c.path,r,s,a):o=gP(i,t,c.path,c.affectedTree,r,s,a)}else if(n.type===Hi.LISTEN_COMPLETE)o=yP(i,t,n.path,r,a);else throw za("Unknown operation type: "+n.type);const l=a.getChanges();return pP(t,o,l),{viewCache:o,changes:l}}function pP(i,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=th(i);(n.length>0||!i.eventCache.isFullyInitialized()||s&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(gw(th(t)))}}function Tw(i,t,n,r,s,a){const o=t.eventCache;if(nh(r,n)!=null)return t;{let u,l;if(_r(n))if(Tt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const c=qo(t),p=c instanceof er?c:er.EMPTY_NODE,m=hm(r,p);u=i.filter.updateFullNode(t.eventCache.getNode(),m,a)}else{const c=rh(r,qo(t));u=i.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{const c=Sr(n);if(c===".priority"){Tt(po(n)===1,"Can't have a priority with additional path components");const p=o.getNode();l=t.serverCache.getNode();const m=h0(r,n,p,l);m!=null?u=i.filter.updatePriority(p,m):u=o.getNode()}else{const p=Zr(n);let m;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const h=h0(r,n,o.getNode(),l);h!=null?m=o.getNode().getImmediateChild(c).updateChild(p,h):m=o.getNode().getImmediateChild(c)}else m=dm(r,c,t.serverCache);m!=null?u=i.filter.updateChild(o.getNode(),c,m,p,s,a):u=o.getNode()}}return jl(t,u,o.isFullyInitialized()||_r(n),i.filter.filtersNodes())}}function ih(i,t,n,r,s,a,o,u){const l=t.serverCache;let c;const p=o?i.filter:i.filter.getIndexedFilter();if(_r(n))c=p.updateFullNode(l.getNode(),r,null);else if(p.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=p.updateFullNode(l.getNode(),f,null)}else{const f=Sr(n);if(!l.isCompleteForPath(n)&&po(n)>1)return t;const d=Zr(n),y=l.getNode().getImmediateChild(f).updateChild(d,r);f===".priority"?c=p.updatePriority(l.getNode(),y):c=p.updateChild(l.getNode(),f,y,d,Cw,null)}const m=bw(t,c,l.isFullyInitialized()||_r(n),p.filtersNodes()),h=new fm(s,m,a);return Tw(i,m,n,s,h,u)}function Yf(i,t,n,r,s,a,o){const u=t.eventCache;let l,c;const p=new fm(s,t,a);if(_r(n))c=i.filter.updateFullNode(t.eventCache.getNode(),r,o),l=jl(t,c,!0,i.filter.filtersNodes());else{const m=Sr(n);if(m===".priority")c=i.filter.updatePriority(t.eventCache.getNode(),r),l=jl(t,c,u.isFullyInitialized(),u.isFiltered());else{const h=Zr(n),f=u.getNode().getImmediateChild(m);let d;if(_r(h))d=r;else{const g=p.getCompleteChild(m);g!=null?ow(h)===".priority"&&g.getChild(lw(h)).isEmpty()?d=g:d=g.updateChild(h,r):d=er.EMPTY_NODE}if(f.equals(d))l=t;else{const g=i.filter.updateChild(u.getNode(),m,d,h,p,o);l=jl(t,g,u.isFullyInitialized(),i.filter.filtersNodes())}}}return l}function d0(i,t){return i.eventCache.isCompleteForChild(t)}function mP(i,t,n,r,s,a,o){let u=t;return r.foreach((l,c)=>{const p=An(n,l);d0(t,Sr(p))&&(u=Yf(i,u,p,c,s,a,o))}),r.foreach((l,c)=>{const p=An(n,l);d0(t,Sr(p))||(u=Yf(i,u,p,c,s,a,o))}),u}function f0(i,t,n){return n.foreach((r,s)=>{t=t.updateChild(r,s)}),t}function Kf(i,t,n,r,s,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;_r(n)?c=r:c=new sn(null).setTree(n,r);const p=t.serverCache.getNode();return c.children.inorderTraversal((m,h)=>{if(p.hasChild(m)){const f=t.serverCache.getNode().getImmediateChild(m),d=f0(i,f,h);l=ih(i,l,new Yr(m),d,s,a,o,u)}}),c.children.inorderTraversal((m,h)=>{const f=!t.serverCache.isCompleteForChild(m)&&h.value===null;if(!p.hasChild(m)&&!f){const d=t.serverCache.getNode().getImmediateChild(m),g=f0(i,d,h);l=ih(i,l,new Yr(m),g,s,a,o,u)}}),l}function gP(i,t,n,r,s,a,o){if(nh(s,n)!=null)return t;const u=t.serverCache.isFiltered(),l=t.serverCache;if(r.value!=null){if(_r(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ih(i,t,n,l.getNode().getChild(n),s,a,u,o);if(_r(n)){let c=new sn(null);return l.getNode().forEachChild(Ca,(p,m)=>{c=c.set(new Yr(p),m)}),Kf(i,t,n,c,s,a,u,o)}else return t}else{let c=new sn(null);return r.foreach((p,m)=>{const h=An(n,p);l.isCompleteForPath(h)&&(c=c.set(p,l.getNode().getChild(h)))}),Kf(i,t,n,c,s,a,u,o)}}function yP(i,t,n,r,s){const a=t.serverCache,o=bw(t,a.getNode(),a.isFullyInitialized()||_r(n),a.isFiltered());return Tw(i,o,n,r,Cw,s)}function vP(i,t,n,r,s,a){let o;if(nh(r,n)!=null)return t;{const u=new fm(r,t,s),l=t.eventCache.getNode();let c;if(_r(n)||Sr(n)===".priority"){let p;if(t.serverCache.isFullyInitialized())p=rh(r,qo(t));else{const m=t.serverCache.getNode();Tt(m instanceof er,"serverChildren would be complete if leaf node"),p=hm(r,m)}p=p,c=i.filter.updateFullNode(l,p,a)}else{const p=Sr(n);let m=dm(r,p,t.serverCache);m==null&&t.serverCache.isCompleteForChild(p)&&(m=l.getImmediateChild(p)),m!=null?c=i.filter.updateChild(l,p,m,Zr(n),u,a):t.eventCache.getNode().hasChild(p)?c=i.filter.updateChild(l,p,er.EMPTY_NODE,Zr(n),u,a):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=rh(r,qo(t)),o.isLeafNode()&&(c=i.filter.updateFullNode(c,o,a)))}return o=t.serverCache.isFullyInitialized()||nh(r,Er())!=null,jl(t,c,o,i.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new am(r.getIndex()),a=BI(r);this.processor_=hP(a);const o=n.serverCache,u=n.eventCache,l=s.updateFullNode(er.EMPTY_NODE,o.getNode(),null),c=a.updateFullNode(er.EMPTY_NODE,u.getNode(),null),p=new mo(l,o.isFullyInitialized(),s.filtersNodes()),m=new mo(c,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=Ph(m,p),this.eventGenerator_=new WI(this.query_)}get query(){return this.query_}}function _P(i){return i.viewCache_.serverCache.getNode()}function wP(i){return th(i.viewCache_)}function xP(i,t){const n=qo(i.viewCache_);return n&&(i.query._queryParams.loadsAllData()||!_r(t)&&!n.getImmediateChild(Sr(t)).isEmpty())?n.getChild(t):null}function p0(i){return i.eventRegistrations_.length===0}function SP(i,t){i.eventRegistrations_.push(t)}function m0(i,t,n){const r=[];if(n){Tt(t==null,"A cancel should cancel all event registrations.");const s=i.query._path;i.eventRegistrations_.forEach(a=>{const o=a.createCancelEvent(n,s);o&&r.push(o)})}if(t){let s=[];for(let a=0;a<i.eventRegistrations_.length;++a){const o=i.eventRegistrations_[a];if(!o.matches(t))s.push(o);else if(t.hasAnyCallback()){s=s.concat(i.eventRegistrations_.slice(a+1));break}}i.eventRegistrations_=s}else i.eventRegistrations_=[];return r}function g0(i,t,n,r){t.type===Hi.MERGE&&t.source.queryId!==null&&(Tt(qo(i.viewCache_),"We should always have a full cache before handling merges"),Tt(th(i.viewCache_),"Missing event cache, even though we have a server cache"));const s=i.viewCache_,a=fP(i.processor_,s,t,n,r);return dP(i.processor_,a.viewCache),Tt(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=a.viewCache,kw(i,a.changes,a.viewCache.eventCache.getNode(),null)}function jP(i,t){const n=i.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(yn,(a,o)=>{r.push(Ua(a,o))}),n.isFullyInitialized()&&r.push(gw(n.getNode())),kw(i,r,n.getNode(),t)}function kw(i,t,n,r){const s=r?[r]:i.eventRegistrations_;return qI(i.eventGenerator_,t,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh;class Ew{constructor(){this.views=new Map}}function CP(i){Tt(!sh,"__referenceConstructor has already been defined"),sh=i}function TP(){return Tt(sh,"Reference.ts has not been loaded"),sh}function kP(i){return i.views.size===0}function pm(i,t,n,r){const s=t.source.queryId;if(s!==null){const a=i.views.get(s);return Tt(a!=null,"SyncTree gave us an op for an invalid query."),g0(a,t,n,r)}else{let a=[];for(const o of i.views.values())a=a.concat(g0(o,t,n,r));return a}}function Mw(i,t,n,r,s){const a=t._queryIdentifier,o=i.views.get(a);if(!o){let u=rh(n,s?r:null),l=!1;u?l=!0:r instanceof er?(u=hm(n,r),l=!1):(u=er.EMPTY_NODE,l=!1);const c=Ph(new mo(u,l,!1),new mo(r,s,!1));return new bP(t,c)}return o}function EP(i,t,n,r,s,a){const o=Mw(i,t,r,s,a);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,o),SP(o,n),jP(o,n)}function MP(i,t,n,r){const s=t._queryIdentifier,a=[];let o=[];const u=go(i);if(s==="default")for(const[l,c]of i.views.entries())o=o.concat(m0(c,n,r)),p0(c)&&(i.views.delete(l),c.query._queryParams.loadsAllData()||a.push(c.query));else{const l=i.views.get(s);l&&(o=o.concat(m0(l,n,r)),p0(l)&&(i.views.delete(s),l.query._queryParams.loadsAllData()||a.push(l.query)))}return u&&!go(i)&&a.push(new(TP())(t._repo,t._path)),{removed:a,events:o}}function Aw(i){const t=[];for(const n of i.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function oo(i,t){let n=null;for(const r of i.views.values())n=n||xP(r,t);return n}function Ow(i,t){if(t._queryParams.loadsAllData())return Dh(i);{const r=t._queryIdentifier;return i.views.get(r)}}function Iw(i,t){return Ow(i,t)!=null}function go(i){return Dh(i)!=null}function Dh(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh;function AP(i){Tt(!oh,"__referenceConstructor has already been defined"),oh=i}function OP(){return Tt(oh,"Reference.ts has not been loaded"),oh}let IP=1;class y0{constructor(t){this.listenProvider_=t,this.syncPointTree_=new sn(null),this.pendingWriteTree_=aP(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Pw(i,t,n,r,s){return KI(i.pendingWriteTree_,t,n,r,s),s?yu(i,new Wo(vw(),t,n)):[]}function Io(i,t,n=!1){const r=JI(i.pendingWriteTree_,t);if(QI(i.pendingWriteTree_,t)){let a=new sn(null);return r.snap!=null?a=a.set(Er(),!0):vi(r.children,o=>{a=a.set(new Yr(o),!0)}),yu(i,new eh(r.path,a,n))}else return[]}function gu(i,t,n){return yu(i,new Wo(um(),t,n))}function PP(i,t,n){const r=sn.fromObject(n);return yu(i,new Kl(um(),t,r))}function RP(i,t){return yu(i,new Yl(um(),t))}function DP(i,t,n){const r=gm(i,n);if(r){const s=ym(r),a=s.path,o=s.queryId,u=li(a,t),l=new Yl(cm(o),u);return vm(i,a,l)}else return[]}function Rw(i,t,n,r,s=!1){const a=t._path,o=i.syncPointTree_.get(a);let u=[];if(o&&(t._queryIdentifier==="default"||Iw(o,t))){const l=MP(o,t,n,r);kP(o)&&(i.syncPointTree_=i.syncPointTree_.remove(a));const c=l.removed;if(u=l.events,!s){const p=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,m=i.syncPointTree_.findOnPath(a,(h,f)=>go(f));if(p&&!m){const h=i.syncPointTree_.subtree(a);if(!h.isEmpty()){const f=FP(h);for(let d=0;d<f.length;++d){const g=f[d],y=g.query,b=Bw(i,g);i.listenProvider_.startListening(Tl(y),Jl(i,y),b.hashFn,b.onComplete)}}}!m&&c.length>0&&!r&&(p?i.listenProvider_.stopListening(Tl(t),null):c.forEach(h=>{const f=i.queryToTagMap.get(Lh(h));i.listenProvider_.stopListening(Tl(h),f)}))}UP(i,c)}return u}function Dw(i,t,n,r){const s=gm(i,r);if(s!=null){const a=ym(s),o=a.path,u=a.queryId,l=li(o,t),c=new Wo(cm(u),l,n);return vm(i,o,c)}else return[]}function LP(i,t,n,r){const s=gm(i,r);if(s){const a=ym(s),o=a.path,u=a.queryId,l=li(o,t),c=sn.fromObject(n),p=new Kl(cm(u),l,c);return vm(i,o,p)}else return[]}function NP(i,t,n,r=!1){const s=t._path;let a=null,o=!1;i.syncPointTree_.foreachOnPath(s,(h,f)=>{const d=li(h,s);a=a||oo(f,d),o=o||go(f)});let u=i.syncPointTree_.get(s);u?(o=o||go(u),a=a||oo(u,Er())):(u=new Ew,i.syncPointTree_=i.syncPointTree_.set(s,u));let l;a!=null?l=!0:(l=!1,a=er.EMPTY_NODE,i.syncPointTree_.subtree(s).foreachChild((f,d)=>{const g=oo(d,Er());g&&(a=a.updateImmediateChild(f,g))}));const c=Iw(u,t);if(!c&&!t._queryParams.loadsAllData()){const h=Lh(t);Tt(!i.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=VP();i.queryToTagMap.set(h,f),i.tagToQueryMap.set(f,h)}const p=Rh(i.pendingWriteTree_,s);let m=EP(u,t,n,p,a,l);if(!c&&!o&&!r){const h=Ow(u,t);m=m.concat(GP(i,t,h))}return m}function mm(i,t,n){const s=i.pendingWriteTree_,a=i.syncPointTree_.findOnPath(t,(o,u)=>{const l=li(o,t),c=oo(u,l);if(c)return c});return xw(s,t,a,n,!0)}function BP(i,t){const n=t._path;let r=null;i.syncPointTree_.foreachOnPath(n,(c,p)=>{const m=li(c,n);r=r||oo(p,m)});let s=i.syncPointTree_.get(n);s?r=r||oo(s,Er()):(s=new Ew,i.syncPointTree_=i.syncPointTree_.set(n,s));const a=r!=null,o=a?new mo(r,!0,!1):null,u=Rh(i.pendingWriteTree_,t._path),l=Mw(s,t,u,a?o.getNode():er.EMPTY_NODE,a);return wP(l)}function yu(i,t){return Lw(t,i.syncPointTree_,null,Rh(i.pendingWriteTree_,Er()))}function Lw(i,t,n,r){if(_r(i.path))return Nw(i,t,n,r);{const s=t.get(Er());n==null&&s!=null&&(n=oo(s,Er()));let a=[];const o=Sr(i.path),u=i.operationForChild(o),l=t.children.get(o);if(l&&u){const c=n?n.getImmediateChild(o):null,p=Sw(r,o);a=a.concat(Lw(u,l,c,p))}return s&&(a=a.concat(pm(s,i,r,n))),a}}function Nw(i,t,n,r){const s=t.get(Er());n==null&&s!=null&&(n=oo(s,Er()));let a=[];return t.children.inorderTraversal((o,u)=>{const l=n?n.getImmediateChild(o):null,c=Sw(r,o),p=i.operationForChild(o);p&&(a=a.concat(Nw(p,u,l,c)))}),s&&(a=a.concat(pm(s,i,r,n))),a}function Bw(i,t){const n=t.query,r=Jl(i,n);return{hashFn:()=>(_P(t)||er.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?DP(i,n._path,r):RP(i,n._path);{const a=NO(s,n);return Rw(i,n,null,a)}}}}function Jl(i,t){const n=Lh(t);return i.queryToTagMap.get(n)}function Lh(i){return i._path.toString()+"$"+i._queryIdentifier}function gm(i,t){return i.tagToQueryMap.get(t)}function ym(i){const t=i.indexOf("$");return Tt(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new Yr(i.substr(0,t))}}function vm(i,t,n){const r=i.syncPointTree_.get(t);Tt(r,"Missing sync point for query tag that we're tracking");const s=Rh(i.pendingWriteTree_,t);return pm(r,n,s,null)}function FP(i){return i.fold((t,n,r)=>{if(n&&go(n))return[Dh(n)];{let s=[];return n&&(s=Aw(n)),vi(r,(a,o)=>{s=s.concat(o)}),s}})}function Tl(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(OP())(i._repo,i._path):i}function UP(i,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const s=Lh(r),a=i.queryToTagMap.get(s);i.queryToTagMap.delete(s),i.tagToQueryMap.delete(a)}}}function VP(){return IP++}function GP(i,t,n){const r=t._path,s=Jl(i,t),a=Bw(i,n),o=i.listenProvider_.startListening(Tl(t),s,a.hashFn,a.onComplete),u=i.syncPointTree_.subtree(r);if(s)Tt(!go(u.value),"If we're adding a query, it shouldn't be shadowed");else{const l=u.fold((c,p,m)=>{if(!_r(c)&&p&&go(p))return[Dh(p).query];{let h=[];return p&&(h=h.concat(Aw(p).map(f=>f.query))),vi(m,(f,d)=>{h=h.concat(d)}),h}});for(let c=0;c<l.length;++c){const p=l[c];i.listenProvider_.stopListening(Tl(p),Jl(i,p))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new bm(n)}node(){return this.node_}}class _m{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=An(this.path_,t);return new _m(this.syncTree_,n)}node(){return mm(this.syncTree_,this.path_)}}const HP=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},v0=function(i,t,n){if(!i||typeof i!="object")return i;if(Tt(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return zP(i[".sv"],t,n);if(typeof i[".sv"]=="object")return WP(i[".sv"],t);Tt(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},zP=function(i,t,n){switch(i){case"timestamp":return n.timestamp;default:Tt(!1,"Unexpected server value: "+i)}},WP=function(i,t,n){i.hasOwnProperty("increment")||Tt(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const r=i.increment;typeof r!="number"&&Tt(!1,"Unexpected increment value: "+r);const s=t.node();if(Tt(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},qP=function(i,t,n,r){return wm(t,new _m(n,i),r)},Fw=function(i,t,n){return wm(i,new bm(t),n)};function wm(i,t,n){const r=i.getPriority().val(),s=v0(r,t.getImmediateChild(".priority"),n);let a;if(i.isLeafNode()){const o=i,u=v0(o.getValue(),t,n);return u!==o.getValue()||s!==o.getPriority().val()?new Rn(u,Ln(s)):i}else{const o=i;return a=o,s!==o.getPriority().val()&&(a=a.updatePriority(new Rn(s))),o.forEachChild(yn,(u,l)=>{const c=wm(l,t.getImmediateChild(u),n);c!==l&&(a=a.updateImmediateChild(u,c))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function Sm(i,t){let n=t instanceof Yr?t:new Yr(t),r=i,s=Sr(n);for(;s!==null;){const a=La(r.node.children,s)||{children:{},childCount:0};r=new xm(s,r,a),n=Zr(n),s=Sr(n)}return r}function Xa(i){return i.node.value}function Uw(i,t){i.node.value=t,Jf(i)}function Vw(i){return i.node.childCount>0}function $P(i){return Xa(i)===void 0&&!Vw(i)}function Nh(i,t){vi(i.node.children,(n,r)=>{t(new xm(n,i,r))})}function Gw(i,t,n,r){n&&!r&&t(i),Nh(i,s=>{Gw(s,t,!0,r)}),n&&r&&t(i)}function XP(i,t,n){let r=n?i:i.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function vu(i){return new Yr(i.parent===null?i.name:vu(i.parent)+"/"+i.name)}function Jf(i){i.parent!==null&&YP(i.parent,i.name,i)}function YP(i,t,n){const r=$P(n),s=Rs(i.node.children,t);r&&s?(delete i.node.children[t],i.node.childCount--,Jf(i)):!r&&!s&&(i.node.children[t]=n.node,i.node.childCount++,Jf(i))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=/[\[\].#$\/\u0000-\u001F\u007F]/,JP=/[\[\].#$\u0000-\u001F\u007F]/,Bd=10*1024*1024,Hw=function(i){return typeof i=="string"&&i.length!==0&&!KP.test(i)},zw=function(i){return typeof i=="string"&&i.length!==0&&!JP.test(i)},QP=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),zw(i)},ZP=function(i,t,n,r){r&&t===void 0||jm(Hp(i,"value"),t,n)},jm=function(i,t,n){const r=n instanceof Yr?new gI(n,i):n;if(t===void 0)throw new Error(i+"contains undefined "+Co(r));if(typeof t=="function")throw new Error(i+"contains a function "+Co(r)+" with contents = "+t.toString());if(F_(t))throw new Error(i+"contains "+t.toString()+" "+Co(r));if(typeof t=="string"&&t.length>Bd/3&&Th(t)>Bd)throw new Error(i+"contains a string greater than "+Bd+" utf8 bytes "+Co(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,a=!1;if(vi(t,(o,u)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(a=!0,!Hw(o)))throw new Error(i+" contains an invalid key ("+o+") "+Co(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yI(r,o),jm(i,u,r),vI(r)}),s&&a)throw new Error(i+' contains ".value" child '+Co(r)+" in addition to actual children.")}},Ww=function(i,t,n,r){if(!(r&&n===void 0)&&!zw(n))throw new Error(Hp(i,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},eR=function(i,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ww(i,t,n,r)},qw=function(i,t){if(Sr(t)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},tR=function(i,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Hw(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!QP(n))throw new Error(Hp(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $w(i,t){let n=null;for(let r=0;r<t.length;r++){const s=t[r],a=s.getPath();n!==null&&!uw(a,n.path)&&(i.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(s)}n&&i.eventLists_.push(n)}function ds(i,t,n){$w(i,n),nR(i,r=>Gi(r,t)||Gi(t,r))}function nR(i,t){i.recursionDepth_++;let n=!0;for(let r=0;r<i.eventLists_.length;r++){const s=i.eventLists_[r];if(s){const a=s.path;t(a)?(iR(i.eventLists_[r]),i.eventLists_[r]=null):n=!1}}n&&(i.eventLists_=[]),i.recursionDepth_--}function iR(i){for(let t=0;t<i.events.length;t++){const n=i.events[t];if(n!==null){i.events[t]=null;const r=n.getEventRunner();Lo&&Kn("event: "+n.toString()),$a(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="repo_interrupt",oR=25;class aR{constructor(t,n,r,s){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zc(),this.transactionQueueTree_=new xm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function lR(i,t,n){if(i.stats_=nm(i.repoInfo_),i.forceRestClient_||VO())i.server_=new Qc(i.repoInfo_,(r,s,a,o)=>{b0(i,r,s,a,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>_0(i,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Mn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}i.persistentConnection_=new Es(i.repoInfo_,t,(r,s,a,o)=>{b0(i,r,s,a,o)},r=>{_0(i,r)},r=>{cR(i,r)},i.authTokenProvider_,i.appCheckProvider_,n),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(r=>{i.server_.refreshAuthToken(r)}),i.appCheckProvider_.addTokenChangeListener(r=>{i.server_.refreshAppCheckToken(r.token)}),i.statsReporter_=qO(i.repoInfo_,()=>new zI(i.stats_,i.server_)),i.infoData_=new FI,i.infoSyncTree_=new y0({startListening:(r,s,a,o)=>{let u=[];const l=i.infoData_.getNode(r._path);return l.isEmpty()||(u=gu(i.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),u},stopListening:()=>{}}),Tm(i,"connected",!1),i.serverSyncTree_=new y0({startListening:(r,s,a,o)=>(i.server_.listen(r,a,s,(u,l)=>{const c=o(u,l);ds(i.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{i.server_.unlisten(r,s)}})}function uR(i){const n=i.infoData_.getNode(new Yr(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Cm(i){return HP({timestamp:uR(i)})}function b0(i,t,n,r,s){i.dataUpdateCount++;const a=new Yr(t);n=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,n):n;let o=[];if(s)if(r){const l=Gc(n,c=>Ln(c));o=LP(i.serverSyncTree_,a,l,s)}else{const l=Ln(n);o=Dw(i.serverSyncTree_,a,l,s)}else if(r){const l=Gc(n,c=>Ln(c));o=PP(i.serverSyncTree_,a,l)}else{const l=Ln(n);o=gu(i.serverSyncTree_,a,l)}let u=a;o.length>0&&(u=Fh(i,a)),ds(i.eventQueue_,u,o)}function _0(i,t){Tm(i,"connected",t),t===!1&&fR(i)}function cR(i,t){vi(t,(n,r)=>{Tm(i,n,r)})}function Tm(i,t,n){const r=new Yr("/.info/"+t),s=Ln(n);i.infoData_.updateSnapshot(r,s);const a=gu(i.infoSyncTree_,r,s);ds(i.eventQueue_,r,a)}function Xw(i){return i.nextWriteId_++}function hR(i,t,n){const r=BP(i.serverSyncTree_,t);return r!=null?Promise.resolve(r):i.server_.get(t).then(s=>{const a=Ln(s).withIndex(t._queryParams.getIndex());NP(i.serverSyncTree_,t,n,!0);let o;if(t._queryParams.loadsAllData())o=gu(i.serverSyncTree_,t._path,a);else{const u=Jl(i.serverSyncTree_,t);o=Dw(i.serverSyncTree_,t._path,a,u)}return ds(i.eventQueue_,t._path,o),Rw(i.serverSyncTree_,t,n,null,!0),a},s=>(Bh(i,"get for query "+Mn(t)+" failed: "+s),Promise.reject(new Error(s))))}function dR(i,t,n,r,s){Bh(i,"set",{path:t.toString(),value:n,priority:r});const a=Cm(i),o=Ln(n,r),u=mm(i.serverSyncTree_,t),l=Fw(o,u,a),c=Xw(i),p=Pw(i.serverSyncTree_,t,l,c,!0);$w(i.eventQueue_,p),i.server_.put(t.toString(),o.val(!0),(h,f)=>{const d=h==="ok";d||gi("set at "+t+" failed: "+h);const g=Io(i.serverSyncTree_,c,!d);ds(i.eventQueue_,t,g),mR(i,s,h,f)});const m=Zw(i,t);Fh(i,m),ds(i.eventQueue_,m,[])}function fR(i){Bh(i,"onDisconnectEvents");const t=Cm(i),n=Zc();qf(i.onDisconnect_,Er(),(s,a)=>{const o=qP(s,a,i.serverSyncTree_,t);yw(n,s,o)});let r=[];qf(n,Er(),(s,a)=>{r=r.concat(gu(i.serverSyncTree_,s,a));const o=Zw(i,s);Fh(i,o)}),i.onDisconnect_=Zc(),ds(i.eventQueue_,Er(),r)}function pR(i){i.persistentConnection_&&i.persistentConnection_.interrupt(sR)}function Bh(i,...t){let n="";i.persistentConnection_&&(n=i.persistentConnection_.id+":"),Kn(n,...t)}function mR(i,t,n,r){t&&$a(()=>{if(n==="ok")t(null);else{const s=(n||"error").toUpperCase();let a=s;r&&(a+=": "+r);const o=new Error(a);o.code=s,t(o)}})}function Yw(i,t,n){return mm(i.serverSyncTree_,t,n)||er.EMPTY_NODE}function km(i,t=i.transactionQueueTree_){if(t||Uh(i,t),Xa(t)){const n=Jw(i,t);Tt(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&gR(i,vu(t),n)}else Vw(t)&&Nh(t,n=>{km(i,n)})}function gR(i,t,n){const r=n.map(c=>c.currentWriteId),s=Yw(i,t,r);let a=s;const o=s.hash();for(let c=0;c<n.length;c++){const p=n[c];Tt(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const m=li(t,p.path);a=a.updateChild(m,p.currentOutputSnapshotRaw)}const u=a.val(!0),l=t;i.server_.put(l.toString(),u,c=>{Bh(i,"transaction put response",{path:l.toString(),status:c});let p=[];if(c==="ok"){const m=[];for(let h=0;h<n.length;h++)n[h].status=2,p=p.concat(Io(i.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&m.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Uh(i,Sm(i.transactionQueueTree_,t)),km(i,i.transactionQueueTree_),ds(i.eventQueue_,t,p);for(let h=0;h<m.length;h++)$a(m[h])}else{if(c==="datastale")for(let m=0;m<n.length;m++)n[m].status===3?n[m].status=4:n[m].status=0;else{gi("transaction at "+l.toString()+" failed: "+c);for(let m=0;m<n.length;m++)n[m].status=4,n[m].abortReason=c}Fh(i,t)}},o)}function Fh(i,t){const n=Kw(i,t),r=vu(n),s=Jw(i,n);return yR(i,s,r),r}function yR(i,t,n){if(t.length===0)return;const r=[];let s=[];const o=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const l=t[u],c=li(n,l.path);let p=!1,m;if(Tt(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)p=!0,m=l.abortReason,s=s.concat(Io(i.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=oR)p=!0,m="maxretry",s=s.concat(Io(i.serverSyncTree_,l.currentWriteId,!0));else{const h=Yw(i,l.path,o);l.currentInputSnapshot=h;const f=t[u].update(h.val());if(f!==void 0){jm("transaction failed: Data returned ",f,l.path);let d=Ln(f);typeof f=="object"&&f!=null&&Rs(f,".priority")||(d=d.updatePriority(h.getPriority()));const y=l.currentWriteId,b=Cm(i),x=Fw(d,h,b);l.currentOutputSnapshotRaw=d,l.currentOutputSnapshotResolved=x,l.currentWriteId=Xw(i),o.splice(o.indexOf(y),1),s=s.concat(Pw(i.serverSyncTree_,l.path,x,l.currentWriteId,l.applyLocally)),s=s.concat(Io(i.serverSyncTree_,y,!0))}else p=!0,m="nodata",s=s.concat(Io(i.serverSyncTree_,l.currentWriteId,!0))}ds(i.eventQueue_,n,s),s=[],p&&(t[u].status=2,function(h){setTimeout(h,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(m==="nodata"?r.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):r.push(()=>t[u].onComplete(new Error(m),!1,null))))}Uh(i,i.transactionQueueTree_);for(let u=0;u<r.length;u++)$a(r[u]);km(i,i.transactionQueueTree_)}function Kw(i,t){let n,r=i.transactionQueueTree_;for(n=Sr(t);n!==null&&Xa(r)===void 0;)r=Sm(r,n),t=Zr(t),n=Sr(t);return r}function Jw(i,t){const n=[];return Qw(i,t,n),n.sort((r,s)=>r.order-s.order),n}function Qw(i,t,n){const r=Xa(t);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Nh(t,s=>{Qw(i,s,n)})}function Uh(i,t){const n=Xa(t);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Uw(t,n.length>0?n:void 0)}Nh(t,r=>{Uh(i,r)})}function Zw(i,t){const n=vu(Kw(i,t)),r=Sm(i.transactionQueueTree_,t);return XP(r,s=>{Fd(i,s)}),Fd(i,r),Gw(r,s=>{Fd(i,s)}),n}function Fd(i,t){const n=Xa(t);if(n){const r=[];let s=[],a=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Tt(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Tt(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Io(i.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));a===-1?Uw(t,void 0):n.length=a+1,ds(i.eventQueue_,vu(t),s);for(let o=0;o<r.length;o++)$a(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(i){let t="";const n=i.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function bR(i){const t={};i.charAt(0)==="?"&&(i=i.substring(1));for(const n of i.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gi(`Invalid query segment '${n}' in query '${i}'`)}return t}const w0=function(i,t){const n=_R(i),r=n.namespace;n.domain==="firebase.com"&&Os(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Os("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||IO();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new J_(n.host,n.secure,r,s,t,"",r!==n.subdomain),path:new Yr(n.pathString)}},_R=function(i){let t="",n="",r="",s="",a="",o=!0,u="https",l=443;if(typeof i=="string"){let c=i.indexOf("//");c>=0&&(u=i.substring(0,c-1),i=i.substring(c+2));let p=i.indexOf("/");p===-1&&(p=i.length);let m=i.indexOf("?");m===-1&&(m=i.length),t=i.substring(0,Math.min(p,m)),p<m&&(s=vR(i.substring(p,m)));const h=bR(i.substring(Math.min(i.length,m)));c=t.indexOf(":"),c>=0?(o=u==="https"||u==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const d=t.indexOf(".");r=t.substring(0,d).toLowerCase(),n=t.substring(d+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:u,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t,n,r,s){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Mn(this.snapshot.exportVal())}}class xR{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return Tt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(t,n,r,s){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return _r(this._path)?null:ow(this._path)}get ref(){return new Ds(this._repo,this._path)}get _queryIdentifier(){const t=o0(this._queryParams),n=tm(t);return n==="{}"?"default":n}get _queryObject(){return o0(this._queryParams)}isEqual(t){if(t=Ai(t),!(t instanceof Em))return!1;const n=this._repo===t._repo,r=uw(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+mI(this._path)}}class Ds extends Em{constructor(t,n){super(t,n,new lm,!1)}get parent(){const t=lw(this._path);return t===null?null:new Ds(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Ql{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new Yr(t),r=$o(this.ref,t);return new Ql(this._node.getChild(n),r,yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>t(new Ql(s,$o(this.ref,r),yn)))}hasChild(t){const n=new Yr(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Is(i,t){return i=Ai(i),i._checkNotDeleted("ref"),t!==void 0?$o(i._root,t):i._root}function $o(i,t){return i=Ai(i),Sr(i._path)===null?eR("child","path",t,!1):Ww("child","path",t,!1),new Ds(i._repo,An(i._path,t))}function Mm(i){return qw("remove",i._path),Vh(i,null)}function Vh(i,t){i=Ai(i),qw("set",i._path),ZP("set",t,i._path,!1);const n=new Ch;return dR(i._repo,i._path,t,null,n.wrapCallback(()=>{})),n.promise}function ah(i){i=Ai(i);const t=new SR(()=>{}),n=new Am(t);return hR(i._repo,i,n).then(r=>new Ql(r,new Ds(i._repo,i._path),i._queryParams.getIndex()))}class Am{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const r=n._queryParams.getIndex();return new wR("value",this,new Ql(t.snapshotNode,new Ds(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new xR(this,t,n):null}matches(t){return t instanceof Am?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}CP(Ds);AP(Ds);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="FIREBASE_DATABASE_EMULATOR_HOST",Qf={};let CR=!1;function TR(i,t,n,r){i.repoInfo_=new J_(`${t}:${n}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),r&&(i.authTokenProvider_=r)}function kR(i,t,n,r,s){let a=r||i.options.databaseURL;a===void 0&&(i.options.projectId||Os("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kn("Using default host for project ",i.options.projectId),a=`${i.options.projectId}-default-rtdb.firebaseio.com`);let o=w0(a,s),u=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[jR]),c?(l=!0,a=`http://${c}?ns=${u.namespace}`,o=w0(a,s),u=o.repoInfo):l=!o.repoInfo.secure;const p=s&&l?new ja(ja.OWNER):new HO(i.name,i.options,t);tR("Invalid Firebase Database URL",o),_r(o.path)||Os("Database URL must point to the root of a Firebase Database (not including a child path).");const m=MR(u,i,p,new GO(i.name,n));return new AR(m,i)}function ER(i,t){const n=Qf[t];(!n||n[i.key]!==i)&&Os(`Database ${t}(${i.repoInfo_}) has already been deleted.`),pR(i),delete n[i.key]}function MR(i,t,n,r){let s=Qf[t.name];s||(s={},Qf[t.name]=s);let a=s[i.toURLString()];return a&&Os("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new aR(i,CR,n,r),s[i.toURLString()]=a,a}class AR{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(lR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ds(this._repo,Er())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ER(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Os("Cannot call "+t+" on a deleted database.")}}function OR(i=n_(),t){const n=qp(i,"database").getImmediate({identifier:t});if(!n._instanceStarted){const r=lE("database");r&&IR(n,...r)}return n}function IR(i,t,n,r={}){i=Ai(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&Os("Cannot call useEmulator() after instance has already been initialized.");const s=i._repoInternal;let a;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Os('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new ja(ja.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:cE(r.mockUserToken,i.app.options.projectId);a=new ja(o)}TR(s,t,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(i){kO(uu),Na(new Vo("database",(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return kR(r,s,a,n)},"PUBLIC").setMultipleInstances(!0)),io(Hy,zy,i),io(Hy,zy,"esm2017")}Es.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};Es.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};PR();var RR="firebase",DR="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */io(RR,DR,"app");var Nn,Gh,fs,ex,tx,rx,nx,ix,Hh,sx,ox,ax,lx,ux,Ta,Om;Nn={};ax=new Ss;rx={apiKey:"AIzaSyBiC68RVONr8MrNN6032hLHLp2jWh_WD-A",authDomain:"shadercam-fabcd.firebaseapp.com",databaseURL:"https://shadercam-fabcd-default-rtdb.firebaseio.com",projectId:"shadercam-fabcd",storageBucket:"shadercam-fabcd.appspot.com",messagingSenderId:"225470326967",appId:"1:225470326967:web:65cd4f40b8778bbe170532"};r_(rx);fs=OR();Gh=TO();Ta=function(i,t){return Nn[i]=t,Bc.publish("firebaseStateUpdated")};dA(Gh,async i=>{var t,n;return Ta("user",i),n=i?await Hh(i.uid):{},Ta("userShaders",n),t=(i!=null?i.uid:void 0)==="X8Seokq0dqaDUfNciKJC4LOeBe13",Ta("isAdmin",t)});sx=function(){return LA(Gh,ax)};ox=function(){return Gh.signOut()};nx=async function(){var i,t,n;return t=Is(fs),n={},i=await ah($o(t,"templateShaders")),i.exists()&&Object.assign(n,i.val()),Ta("templateShaders",n)};Hh=async function(i,t=!1){var n,r,s,a,o,u,l,c;if(r=Is(fs),c={},o=await ah($o(r,`userShaders/${i}/shaders/public`)),o.exists()){l=o.val();for(s in l)n=l[s],n.isPublic=!0;Object.assign(c,l)}if(((u=Nn.user)!=null?u.uid:void 0)===i&&!t&&(a=await ah($o(r,`userShaders/${i}/shaders/private`)),a.exists())){l=a.val();for(s in l)n=l[s],n.isPublic=!1;Object.assign(c,l)}return c};ix=async function(){var i,t,n,r,s,a,o,u;if(i=Is(fs),u=[],n=await ah($o(i,"usernames")),n.exists()){s=n.val();for(o in s)({name:t,publicShadersCount:r}=s[o]),o!==((a=Nn.user)!=null?a.uid:void 0)&&r>0&&u.push({uid:o,name:t,publicShadersCount:r})}return Ta("userList",u)};Om=async function(){var i,t,n;if(Nn.user)return n=await Hh(Nn.user.uid,!0),i=Object.keys(n).length,t=`usernames/${Nn.user.uid}/publicShadersCount`,Vh(Is(fs,t),i)};lx=function(i,t,n,r,s){var a,o,u,l,c,p;return Nn.user?i.length===0?[null,"shader name is empty"]:i.includes("/")?[null,"shader name cannot contain slashes"]:(c=s?ux(i,t,n):(a=r?"public":"private",u=r?"private":"public",o=`userShaders/${Nn.user.uid}/shaders/${a}/${i}`,l=`userShaders/${Nn.user.uid}/shaders/${u}/${i}`,Mm(Is(fs,l)),p={shaderMainText:t,paramsJson:JSON.stringify(n),isPublic:r},Vh(Is(fs,o),p),[p,null]),Om(),c):[null,"Not logged in; cannot save"]};ux=function(i,t,n){var r,s;return r=`templateShaders/${i}`,s={shaderMainText:t,paramsJson:JSON.stringify(n)},Vh(Is(fs,r),s),[s,null]};ex=function(i,t){return Nn.user?(t?tx(i):(["public","private"].forEach(function(n){var r;return r=`userShaders/${Nn.user.uid}/shaders/${n}/${i}`,Mm(Is(fs,r))}),Om()),null):"Not logged in; cannot delete"};tx=function(i){var t;return t=`templateShaders/${i}`,Mm(Is(fs,t))};var Xo=function(){/*!
* Copyright (c) 2021-2023 Momo Bassit.
* Licensed under the MIT License (MIT)
* https://github.com/mdbassit/Coloris
* Version: 0.18.0
* NPM: https://github.com/melloware/coloris-npm
*/return function(i,t,n){var r=t.createElement("canvas").getContext("2d"),s={r:0,g:0,b:0,h:0,s:0,v:0,a:1},a,o,u,l,c,p,m,h,f,d,g,y,b,x,j,S,w={el:"[data-coloris]",parent:"body",theme:"default",themeMode:"light",rtl:!1,wrap:!0,margin:2,format:"hex",formatToggle:!1,swatches:[],swatchesOnly:!1,alpha:!0,forceAlpha:!1,focusInput:!0,selectInput:!1,inline:!1,defaultColor:"#000000",clearButton:!1,clearLabel:"Clear",closeButton:!1,closeLabel:"Close",onChange:function(){},a11y:{open:"Open color picker",close:"Close color picker",clear:"Clear the selected color",marker:"Saturation: {s}. Brightness: {v}.",hueSlider:"Hue slider",alphaSlider:"Opacity slider",input:"Color value field",format:"Color format",swatch:"Color swatch",instruction:"Saturation and brightness selector. Use up, down, left and right arrow keys to select."}},_={},M="",I={},P=!1;function R(ve){if(typeof ve=="object"){var Le=function(){switch(Fe){case"el":K(ve.el),ve.wrap!==!1&&te(ve.el);break;case"parent":a=t.querySelector(ve.parent),a&&(a.appendChild(o),w.parent=ve.parent,a===t.body&&(a=null));break;case"themeMode":w.themeMode=ve.themeMode,ve.themeMode==="auto"&&i.matchMedia&&i.matchMedia("(prefers-color-scheme: dark)").matches&&(w.themeMode="dark");case"theme":ve.theme&&(w.theme=ve.theme),o.className="clr-picker clr-"+w.theme+" clr-"+w.themeMode,w.inline&&Q();break;case"rtl":w.rtl=!!ve.rtl,t.querySelectorAll(".clr-field").forEach(function(le){return le.classList.toggle("clr-rtl",w.rtl)});break;case"margin":ve.margin*=1,w.margin=isNaN(ve.margin)?w.margin:ve.margin;break;case"wrap":ve.el&&ve.wrap&&te(ve.el);break;case"formatToggle":w.formatToggle=!!ve.formatToggle,Ve("clr-format").style.display=w.formatToggle?"block":"none",w.formatToggle&&(w.format="auto");break;case"swatches":if(Array.isArray(ve.swatches)){var et=[];ve.swatches.forEach(function(le,Ee){et.push('<button type="button" id="clr-swatch-'+Ee+'" aria-labelledby="clr-swatch-label clr-swatch-'+Ee+'" style="color: '+le+';">'+le+"</button>")}),Ve("clr-swatches").innerHTML=et.length?"<div>"+et.join("")+"</div>":"",w.swatches=ve.swatches.slice()}break;case"swatchesOnly":w.swatchesOnly=!!ve.swatchesOnly,o.setAttribute("data-minimal",w.swatchesOnly);break;case"alpha":w.alpha=!!ve.alpha,o.setAttribute("data-alpha",w.alpha);break;case"inline":if(w.inline=!!ve.inline,o.setAttribute("data-inline",w.inline),w.inline){var je=ve.defaultColor||w.defaultColor;j=Y(je),Q(),q(je)}break;case"clearButton":typeof ve.clearButton=="object"&&(ve.clearButton.label&&(w.clearLabel=ve.clearButton.label,h.innerHTML=w.clearLabel),ve.clearButton=ve.clearButton.show),w.clearButton=!!ve.clearButton,h.style.display=w.clearButton?"block":"none";break;case"clearLabel":w.clearLabel=ve.clearLabel,h.innerHTML=w.clearLabel;break;case"closeButton":w.closeButton=!!ve.closeButton,w.closeButton?o.insertBefore(f,p):p.appendChild(f);break;case"closeLabel":w.closeLabel=ve.closeLabel,f.innerHTML=w.closeLabel;break;case"a11y":var $e=ve.a11y,Pe=!1;if(typeof $e=="object")for(var J in $e)$e[J]&&w.a11y[J]&&(w.a11y[J]=$e[J],Pe=!0);if(Pe){var ie=Ve("clr-open-label"),$=Ve("clr-swatch-label");ie.innerHTML=w.a11y.open,$.innerHTML=w.a11y.swatch,f.setAttribute("aria-label",w.a11y.close),h.setAttribute("aria-label",w.a11y.clear),d.setAttribute("aria-label",w.a11y.hueSlider),y.setAttribute("aria-label",w.a11y.alphaSlider),m.setAttribute("aria-label",w.a11y.input),u.setAttribute("aria-label",w.a11y.instruction)}break;default:w[Fe]=ve[Fe]}};for(var Fe in ve)Le()}}function D(ve,Le){typeof ve=="string"&&typeof Le=="object"&&(_[ve]=Le,P=!0)}function U(ve){delete _[ve],Object.keys(_).length===0&&(P=!1,ve===M&&z())}function F(ve){if(P){var Le=["el","wrap","rtl","inline","defaultColor","a11y"],Fe=function(){var $e=_[Ze];if(ve.matches(Ze)){M=Ze,I={},Le.forEach(function(J){return delete $e[J]});for(var Pe in $e)I[Pe]=Array.isArray(w[Pe])?w[Pe].slice():w[Pe];return R($e),"break"}};for(var Ze in _){var et=Fe();if(et==="break")break}}}function z(){Object.keys(I).length>0&&(R(I),M="",I={})}function K(ve){Be(t,"click",ve,function(Le){w.inline||(F(Le.target),x=Le.target,S=x.value,j=Y(S),o.classList.add("clr-open"),Q(),q(S),(w.focusInput||w.selectInput)&&m.focus({preventScroll:!0}),w.selectInput&&m.select(),x.dispatchEvent(new Event("open",{bubbles:!0})))}),Be(t,"input",ve,function(Le){var Fe=Le.target.parentNode;Fe.classList.contains("clr-field")&&(Fe.style.color=Le.target.value)})}function Q(){var ve=a,Le=i.scrollY,Fe=o.offsetWidth,Ze=o.offsetHeight,et={left:!1,top:!1},je,$e,Pe,J={x:0,y:0};if(ve&&(je=i.getComputedStyle(ve),$e=parseFloat(je.marginTop),Pe=parseFloat(je.borderTopWidth),J=ve.getBoundingClientRect(),J.y+=Pe+Le),!w.inline){var ie=x.getBoundingClientRect(),$=ie.x,le=Le+ie.y+ie.height+w.margin;ve?($-=J.x,le-=J.y,$+Fe>ve.clientWidth&&($+=ie.width-Fe,et.left=!0),le+Ze>ve.clientHeight-$e&&Ze+w.margin<=ie.top-(J.y-Le)&&(le-=ie.height+Ze+w.margin*2,et.top=!0),le+=ve.scrollTop):($+Fe>t.documentElement.clientWidth&&($+=ie.width-Fe,et.left=!0),le+Ze-Le>t.documentElement.clientHeight&&Ze+w.margin<=ie.top&&(le=Le+ie.y-Ze-w.margin,et.top=!0)),o.classList.toggle("clr-left",et.left),o.classList.toggle("clr-top",et.top),o.style.left=$+"px",o.style.top=le+"px",J.x+=o.offsetLeft,J.y+=o.offsetTop}l={width:u.offsetWidth,height:u.offsetHeight,x:u.offsetLeft+J.x,y:u.offsetTop+J.y}}function te(ve){t.querySelectorAll(ve).forEach(function(Le){var Fe=Le.parentNode;if(!Fe.classList.contains("clr-field")){var Ze=t.createElement("div"),et="clr-field";(w.rtl||Le.classList.contains("clr-rtl"))&&(et+=" clr-rtl"),Ze.innerHTML='<button type="button" aria-labelledby="clr-open-label"></button>',Fe.insertBefore(Ze,Le),Ze.setAttribute("class",et),Ze.style.color=Le.value,Ze.appendChild(Le)}})}function Z(ve){if(x&&!w.inline){var Le=x;ve&&(x=null,S!==Le.value&&(Le.value=S,Le.dispatchEvent(new Event("input",{bubbles:!0})))),setTimeout(function(){S!==Le.value&&Le.dispatchEvent(new Event("change",{bubbles:!0}))}),o.classList.remove("clr-open"),P&&z(),Le.dispatchEvent(new Event("close",{bubbles:!0})),w.focusInput&&Le.focus({preventScroll:!0}),x=null}}function q(ve){var Le=oe(ve),Fe=Te(Le);O(Fe.s,Fe.v),me(Le,Fe),d.value=Fe.h,o.style.color="hsl("+Fe.h+", 100%, 50%)",g.style.left=Fe.h/360*100+"%",c.style.left=l.width*Fe.s/100+"px",c.style.top=l.height-l.height*Fe.v/100+"px",y.value=Fe.a*100,b.style.left=Fe.a*100+"%"}function Y(ve){var Le=ve.substring(0,3).toLowerCase();return Le==="rgb"||Le==="hsl"?Le:"hex"}function X(ve){ve=ve!==void 0?ve:m.value,x&&(x.value=ve,x.dispatchEvent(new Event("input",{bubbles:!0}))),w.onChange&&w.onChange.call(i,ve),t.dispatchEvent(new CustomEvent("coloris:pick",{detail:{color:ve}}))}function ce(ve,Le){var Fe={h:d.value*1,s:ve/l.width*100,v:100-Le/l.height*100,a:y.value/100},Ze=fe(Fe);O(Fe.s,Fe.v),me(Ze,Fe),X()}function O(ve,Le){var Fe=w.a11y.marker;ve=ve.toFixed(1)*1,Le=Le.toFixed(1)*1,Fe=Fe.replace("{s}",ve),Fe=Fe.replace("{v}",Le),c.setAttribute("aria-label",Fe)}function B(ve){return{pageX:ve.changedTouches?ve.changedTouches[0].pageX:ve.pageX,pageY:ve.changedTouches?ve.changedTouches[0].pageY:ve.pageY}}function W(ve){var Le=B(ve),Fe=Le.pageX-l.x,Ze=Le.pageY-l.y;a&&(Ze+=a.scrollTop),ae(Fe,Ze),ve.preventDefault(),ve.stopPropagation()}function re(ve,Le){var Fe=c.style.left.replace("px","")*1+ve,Ze=c.style.top.replace("px","")*1+Le;ae(Fe,Ze)}function ae(ve,Le){ve=ve<0?0:ve>l.width?l.width:ve,Le=Le<0?0:Le>l.height?l.height:Le,c.style.left=ve+"px",c.style.top=Le+"px",ce(ve,Le),c.focus()}function me(ve,Le){ve===void 0&&(ve={}),Le===void 0&&(Le={});var Fe=w.format;for(var Ze in ve)s[Ze]=ve[Ze];for(var et in Le)s[et]=Le[et];var je=Se(s),$e=je.substring(0,7);switch(c.style.color=$e,b.parentNode.style.color=$e,b.style.color=je,p.style.color=je,u.style.display="none",u.offsetHeight,u.style.display="",b.nextElementSibling.style.display="none",b.nextElementSibling.offsetHeight,b.nextElementSibling.style.display="",Fe==="mixed"?Fe=s.a===1?"hex":"rgb":Fe==="auto"&&(Fe=j),Fe){case"hex":m.value=je;break;case"rgb":m.value=be(s);break;case"hsl":m.value=Ie(ye(s));break}t.querySelector('.clr-format [value="'+Fe+'"]').checked=!0}function ge(){var ve=d.value*1,Le=c.style.left.replace("px","")*1,Fe=c.style.top.replace("px","")*1;o.style.color="hsl("+ve+", 100%, 50%)",g.style.left=ve/360*100+"%",ce(Le,Fe)}function xe(){var ve=y.value/100;b.style.left=ve*100+"%",me({a:ve}),X()}function fe(ve){var Le=ve.s/100,Fe=ve.v/100,Ze=Le*Fe,et=ve.h/60,je=Ze*(1-n.abs(et%2-1)),$e=Fe-Ze;Ze=Ze+$e,je=je+$e;var Pe=n.floor(et)%6,J=[Ze,je,$e,$e,je,Ze][Pe],ie=[je,Ze,Ze,je,$e,$e][Pe],$=[$e,$e,je,Ze,Ze,je][Pe];return{r:n.round(J*255),g:n.round(ie*255),b:n.round($*255),a:ve.a}}function ye(ve){var Le=ve.v/100,Fe=Le*(1-ve.s/100/2),Ze;return Fe>0&&Fe<1&&(Ze=n.round((Le-Fe)/n.min(Fe,1-Fe)*100)),{h:ve.h,s:Ze||0,l:n.round(Fe*100),a:ve.a}}function Te(ve){var Le=ve.r/255,Fe=ve.g/255,Ze=ve.b/255,et=n.max(Le,Fe,Ze),je=n.min(Le,Fe,Ze),$e=et-je,Pe=et,J=0,ie=0;return $e&&(et===Le&&(J=(Fe-Ze)/$e),et===Fe&&(J=2+(Ze-Le)/$e),et===Ze&&(J=4+(Le-Fe)/$e),et&&(ie=$e/et)),J=n.floor(J*60),{h:J<0?J+360:J,s:n.round(ie*100),v:n.round(Pe*100),a:ve.a}}function oe(ve){var Le=/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,Fe,Ze;return r.fillStyle="#000",r.fillStyle=ve,Fe=Le.exec(r.fillStyle),Fe?(Ze={r:Fe[3]*1,g:Fe[4]*1,b:Fe[5]*1,a:Fe[6]*1},Ze.a=+Ze.a.toFixed(2)):(Fe=r.fillStyle.replace("#","").match(/.{2}/g).map(function(et){return parseInt(et,16)}),Ze={r:Fe[0],g:Fe[1],b:Fe[2],a:1}),Ze}function Se(ve){var Le=ve.r.toString(16),Fe=ve.g.toString(16),Ze=ve.b.toString(16),et="";if(ve.r<16&&(Le="0"+Le),ve.g<16&&(Fe="0"+Fe),ve.b<16&&(Ze="0"+Ze),w.alpha&&(ve.a<1||w.forceAlpha)){var je=ve.a*255|0;et=je.toString(16),je<16&&(et="0"+et)}return"#"+Le+Fe+Ze+et}function be(ve){return!w.alpha||ve.a===1&&!w.forceAlpha?"rgb("+ve.r+", "+ve.g+", "+ve.b+")":"rgba("+ve.r+", "+ve.g+", "+ve.b+", "+ve.a+")"}function Ie(ve){return!w.alpha||ve.a===1&&!w.forceAlpha?"hsl("+ve.h+", "+ve.s+"%, "+ve.l+"%)":"hsla("+ve.h+", "+ve.s+"%, "+ve.l+"%, "+ve.a+")"}function Me(){t.getElementById("clr-picker")||(a=null,o=t.createElement("div"),o.setAttribute("id","clr-picker"),o.className="clr-picker",o.innerHTML='<input id="clr-color-value" name="clr-color-value" class="clr-color" type="text" value="" spellcheck="false" aria-label="'+w.a11y.input+'">'+('<div id="clr-color-area" class="clr-gradient" role="application" aria-label="'+w.a11y.instruction+'">')+'<div id="clr-color-marker" class="clr-marker" tabindex="0"></div></div><div class="clr-hue">'+('<input id="clr-hue-slider" name="clr-hue-slider" type="range" min="0" max="360" step="1" aria-label="'+w.a11y.hueSlider+'">')+'<div id="clr-hue-marker"></div></div><div class="clr-alpha">'+('<input id="clr-alpha-slider" name="clr-alpha-slider" type="range" min="0" max="100" step="1" aria-label="'+w.a11y.alphaSlider+'">')+'<div id="clr-alpha-marker"></div><span></span></div><div id="clr-format" class="clr-format"><fieldset class="clr-segmented">'+("<legend>"+w.a11y.format+"</legend>")+'<input id="clr-f1" type="radio" name="clr-format" value="hex"><label for="clr-f1">Hex</label><input id="clr-f2" type="radio" name="clr-format" value="rgb"><label for="clr-f2">RGB</label><input id="clr-f3" type="radio" name="clr-format" value="hsl"><label for="clr-f3">HSL</label><span></span></fieldset></div><div id="clr-swatches" class="clr-swatches"></div>'+('<button type="button" id="clr-clear" class="clr-clear" aria-label="'+w.a11y.clear+'">'+w.clearLabel+"</button>")+'<div id="clr-color-preview" class="clr-preview">'+('<button type="button" id="clr-close" class="clr-close" aria-label="'+w.a11y.close+'">'+w.closeLabel+"</button>")+"</div>"+('<span id="clr-open-label" hidden>'+w.a11y.open+"</span>")+('<span id="clr-swatch-label" hidden>'+w.a11y.swatch+"</span>"),t.body.appendChild(o),u=Ve("clr-color-area"),c=Ve("clr-color-marker"),h=Ve("clr-clear"),f=Ve("clr-close"),p=Ve("clr-color-preview"),m=Ve("clr-color-value"),d=Ve("clr-hue-slider"),g=Ve("clr-hue-marker"),y=Ve("clr-alpha-slider"),b=Ve("clr-alpha-marker"),K(w.el),te(w.el),Be(o,"mousedown",function(ve){o.classList.remove("clr-keyboard-nav"),ve.stopPropagation()}),Be(u,"mousedown",function(ve){Be(t,"mousemove",W)}),Be(u,"touchstart",function(ve){t.addEventListener("touchmove",W,{passive:!1})}),Be(c,"mousedown",function(ve){Be(t,"mousemove",W)}),Be(c,"touchstart",function(ve){t.addEventListener("touchmove",W,{passive:!1})}),Be(m,"change",function(ve){(x||w.inline)&&(q(m.value),X())}),Be(h,"click",function(ve){X(""),Z()}),Be(f,"click",function(ve){X(),Z()}),Be(t,"click",".clr-format input",function(ve){j=ve.target.value,me(),X()}),Be(o,"click",".clr-swatches button",function(ve){q(ve.target.textContent),X(),w.swatchesOnly&&Z()}),Be(t,"mouseup",function(ve){t.removeEventListener("mousemove",W)}),Be(t,"touchend",function(ve){t.removeEventListener("touchmove",W)}),Be(t,"mousedown",function(ve){o.classList.remove("clr-keyboard-nav"),Z()}),Be(t,"keydown",function(ve){var Le=["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];ve.key==="Escape"?Z(!0):Le.includes(ve.key)&&o.classList.add("clr-keyboard-nav")}),Be(t,"click",".clr-field button",function(ve){P&&z(),ve.target.nextElementSibling.dispatchEvent(new Event("click",{bubbles:!0}))}),Be(c,"keydown",function(ve){var Le={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};Object.keys(Le).includes(ve.key)&&(re.apply(void 0,Le[ve.key]),ve.preventDefault())}),Be(u,"click",W),Be(d,"input",ge),Be(y,"input",xe))}function Ve(ve){return t.getElementById(ve)}function Be(ve,Le,Fe,Ze){var et=Element.prototype.matches||Element.prototype.msMatchesSelector;typeof Fe=="string"?ve.addEventListener(Le,function(je){et.call(je.target,Fe)&&Ze.call(je.target,je)}):(Ze=Fe,ve.addEventListener(Le,Ze))}function tt(ve,Le){Le=Le!==void 0?Le:[],t.readyState!=="loading"?ve.apply(void 0,Le):t.addEventListener("DOMContentLoaded",function(){ve.apply(void 0,Le)})}NodeList!==void 0&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var Ue=function(){var ve={init:Me,set:R,wrap:te,close:Z,setInstance:D,removeInstance:U,updatePosition:Q};function Le(et){tt(function(){et&&(typeof et=="string"?K(et):R(et))})}var Fe=function(je){Le[je]=function(){for(var $e=arguments.length,Pe=new Array($e),J=0;J<$e;J++)Pe[J]=arguments[J];tt(ve[je],Pe)}};for(var Ze in ve)Fe(Ze);return Le}();return Ue.coloris=Ue,Ue}(window,document,Math)}();Xo.coloris;Xo.init;Xo.set;Xo.wrap;Xo.close;function x0(i,t,n){const r=i.slice();return r[38]=t[n],r}function S0(i,t,n){const r=i.slice();return r[34]=t[n][0],r[35]=t[n][1],r}function j0(i,t,n){const r=i.slice();return r[34]=t[n][0],r[35]=t[n][1],r}function C0(i,t,n){const r=i.slice();return r[34]=t[n][0],r[35]=t[n][1],r}function T0(i,t,n){const r=i.slice();return r[45]=t[n],r}function LR(i){let t,n,r,s;return{c(){t=jt("button"),n=hr("Login"),this.h()},l(a){t=Ct(a,"BUTTON",{id:!0});var o=Bt(t);n=dr(o,"Login"),o.forEach(vt),this.h()},h(){_t(t,"id","login")},m(a,o){Dr(a,t,o),Je(t,n),r||(s=Rr(t,"click",sx),r=!0)},p:ao,d(a){a&&vt(t),r=!1,s()}}}function NR(i){let t,n,r=i[9].user.email+"",s,a,o,u,l,c;return{c(){t=jt("span"),n=hr("Logged in as "),s=hr(r),a=ar(),o=jt("button"),u=hr("Logout"),this.h()},l(p){t=Ct(p,"SPAN",{});var m=Bt(t);n=dr(m,"Logged in as "),s=dr(m,r),m.forEach(vt),a=lr(p),o=Ct(p,"BUTTON",{id:!0});var h=Bt(o);u=dr(h,"Logout"),h.forEach(vt),this.h()},h(){_t(o,"id","logout")},m(p,m){Dr(p,t,m),Je(t,n),Je(t,s),Dr(p,a,m),Dr(p,o,m),Je(o,u),l||(c=Rr(o,"click",ox),l=!0)},p(p,m){m[0]&512&&r!==(r=p[9].user.email+"")&&ka(s,r)},d(p){p&&vt(t),p&&vt(a),p&&vt(o),l=!1,c()}}}function k0(i){let t,n,r,s;return{c(){t=jt("label"),n=hr("Template"),r=ar(),s=jt("input"),this.h()},l(a){t=Ct(a,"LABEL",{for:!0});var o=Bt(t);n=dr(o,"Template"),o.forEach(vt),r=lr(a),s=Ct(a,"INPUT",{type:!0,id:!0}),this.h()},h(){_t(t,"for","isTemplate"),_t(s,"type","checkbox"),_t(s,"id","isTemplate"),s.value="Template"},m(a,o){Dr(a,t,o),Je(t,n),Dr(a,r,o),Dr(a,s,o)},d(a){a&&vt(t),a&&vt(r),a&&vt(s)}}}function E0(i){let t,n,r,s,a,o,u,l,c,p,m,h,f,d,g,y,b,x,j,S,w,_,M,I,P,R,D,U,F,z,K,Q,te,Z,q,Y,X,ce,O,B,W,re,ae,me,ge,xe,fe,ye,Te,oe,Se,be,Ie,Me,Ve,Be,tt,Ue,ve,Le,Fe,Ze,et,je,$e,Pe,J,ie,$,le,Ee,Re,Ge,st,ht,ft,yt,Ht,Dt,kt,qt,Rt,nr,en,Tr,tr,zt;return{c(){t=jt("li"),n=jt("input"),s=ar(),a=jt("select"),o=jt("option"),u=hr("Float"),c=jt("option"),p=hr("Color"),h=jt("option"),f=hr("Texture"),g=jt("option"),y=hr("Boolean"),x=ar(),j=jt("div"),S=jt("b"),w=hr(`Value:
                  `),_=jt("input"),I=ar(),P=jt("b"),R=hr(`Default:
                  `),D=jt("input"),z=ar(),K=jt("div"),Q=jt("b"),te=hr(`Value:
                  `),Z=jt("input"),Y=ar(),X=jt("b"),ce=hr(`Default:
                  `),O=jt("input"),re=ar(),ae=jt("div"),me=jt("b"),ge=hr(`Value:
                  `),xe=jt("input"),ye=ar(),Te=jt("b"),oe=hr(`Default:
                  `),Se=jt("input"),Me=ar(),Ve=jt("div"),Be=jt("b"),tt=hr(`Value:
                  `),Ue=jt("input"),Le=ar(),Fe=jt("b"),Ze=hr(`Default:
                  `),et=jt("input"),$e=ar(),Pe=jt("b"),J=hr(`Min:
                  `),ie=jt("input"),le=ar(),Ee=jt("b"),Re=hr(`Max:
                  `),Ge=jt("input"),ht=ar(),ft=jt("input"),qt=ar(),Rt=jt("button"),nr=hr("Delete"),en=ar(),this.h()},l(At){t=Ct(At,"LI",{class:!0,"data-param-name":!0});var xt=Bt(t);n=Ct(xt,"INPUT",{type:!0,class:!0,placeholder:!0}),s=lr(xt),a=Ct(xt,"SELECT",{class:!0});var Cr=Bt(a);o=Ct(Cr,"OPTION",{});var wr=Bt(o);u=dr(wr,"Float"),wr.forEach(vt),c=Ct(Cr,"OPTION",{});var Ir=Bt(c);p=dr(Ir,"Color"),Ir.forEach(vt),h=Ct(Cr,"OPTION",{});var ci=Bt(h);f=dr(ci,"Texture"),ci.forEach(vt),g=Ct(Cr,"OPTION",{});var vn=Bt(g);y=dr(vn,"Boolean"),vn.forEach(vt),Cr.forEach(vt),x=lr(xt),j=Ct(xt,"DIV",{class:!0,"data-param-type":!0});var gr=Bt(j);S=Ct(gr,"B",{});var Wn=Bt(S);w=dr(Wn,`Value:
                  `),_=Ct(Wn,"INPUT",{class:!0,type:!0}),Wn.forEach(vt),I=lr(gr),P=Ct(gr,"B",{});var ei=Bt(P);R=dr(ei,`Default:
                  `),D=Ct(ei,"INPUT",{class:!0,type:!0}),ei.forEach(vt),gr.forEach(vt),z=lr(xt),K=Ct(xt,"DIV",{class:!0,"data-param-type":!0});var ti=Bt(K);Q=Ct(ti,"B",{});var _e=Bt(Q);te=dr(_e,`Value:
                  `),Z=Ct(_e,"INPUT",{class:!0,type:!0}),_e.forEach(vt),Y=lr(ti),X=Ct(ti,"B",{});var dt=Bt(X);ce=dr(dt,`Default:
                  `),O=Ct(dt,"INPUT",{class:!0,type:!0}),dt.forEach(vt),ti.forEach(vt),re=lr(xt),ae=Ct(xt,"DIV",{class:!0,"data-param-type":!0});var bt=Bt(ae);me=Ct(bt,"B",{});var ut=Bt(me);ge=dr(ut,`Value:
                  `),xe=Ct(ut,"INPUT",{class:!0,type:!0}),ut.forEach(vt),ye=lr(bt),Te=Ct(bt,"B",{});var ir=Bt(Te);oe=dr(ir,`Default:
                  `),Se=Ct(ir,"INPUT",{class:!0,type:!0}),ir.forEach(vt),bt.forEach(vt),Me=lr(xt),Ve=Ct(xt,"DIV",{class:!0,"data-param-type":!0});var nt=Bt(Ve);Be=Ct(nt,"B",{});var fr=Bt(Be);tt=dr(fr,`Value:
                  `),Ue=Ct(fr,"INPUT",{class:!0,type:!0,step:!0}),fr.forEach(vt),Le=lr(nt),Fe=Ct(nt,"B",{});var wt=Bt(Fe);Ze=dr(wt,`Default:
                  `),et=Ct(wt,"INPUT",{class:!0,type:!0,step:!0}),wt.forEach(vt),$e=lr(nt),Pe=Ct(nt,"B",{});var ur=Bt(Pe);J=dr(ur,`Min:
                  `),ie=Ct(ur,"INPUT",{class:!0,type:!0,step:!0}),ur.forEach(vt),le=lr(nt),Ee=Ct(nt,"B",{});var St=Bt(Ee);Re=dr(St,`Max:
                  `),Ge=Ct(St,"INPUT",{class:!0,type:!0,step:!0}),St.forEach(vt),ht=lr(nt),ft=Ct(nt,"INPUT",{class:!0,type:!0,step:!0,min:!0,max:!0}),nt.forEach(vt),qt=lr(xt),Rt=Ct(xt,"BUTTON",{class:!0});var Lr=Bt(Rt);nr=dr(Lr,"Delete"),Lr.forEach(vt),en=lr(xt),xt.forEach(vt),this.h()},h(){_t(n,"type","text"),_t(n,"class","paramName"),n.value=r=i[45].paramName,_t(n,"placeholder","param name"),o.__value="FOO.BAR.FloatShaderParam",o.value=o.__value,o.selected=l=i[45].type.split(".").slice(-1)[0]=="FloatShaderParam",c.__value="FOO.BAR.ColorShaderParam",c.value=c.__value,c.selected=m=i[45].type.split(".").slice(-1)[0]=="ColorShaderParam",h.__value="FOO.BAR.TextureShaderParam",h.value=h.__value,h.selected=d=i[45].type.split(".").slice(-1)[0]=="TextureShaderParam",g.__value="FOO.BAR.BooleanShaderParam",g.value=g.__value,g.selected=b=i[45].type.split(".").slice(-1)[0]=="BooleanShaderParam",_t(a,"class","type-select"),_t(_,"class","texture-param-val-direct-set small-number-input svelte-eh1r7q"),_t(_,"type","text"),_.value=M=i[45].default||"",_t(D,"class","texture-param-default small-number-input svelte-eh1r7q"),_t(D,"type","text"),D.value=U=i[45].default||"",_t(j,"class",F=Vs(`shaderOptions inline-block ${i[45].type.includes("TextureShaderParam")?"":"hidden"}`)+" svelte-eh1r7q"),_t(j,"data-param-type","TextureShaderParam"),_t(Z,"class","boolean-param-val-direct-set small-number-input svelte-eh1r7q"),_t(Z,"type","checkbox"),Z.checked=q=i[45].default||!1,_t(O,"class","boolean-param-default small-number-input svelte-eh1r7q"),_t(O,"type","checkbox"),O.checked=B=i[45].default,_t(K,"class",W=Vs(`shaderOptions inline-block ${i[45].type.includes("BooleanShaderParam")?"":"hidden"}`)+" svelte-eh1r7q"),_t(K,"data-param-type","BooleanShaderParam"),_t(xe,"class","color-picker color-param-val-direct-set small-number-input svelte-eh1r7q"),_t(xe,"type","text"),xe.value=fe=i[45].default||"",_t(Se,"class","color-picker color-param-default small-number-input svelte-eh1r7q"),_t(Se,"type","text"),Se.value=be=i[45].default||"",_t(ae,"class",Ie=Vs(`shaderOptions inline-block ${i[45].type.includes("ColorShaderParam")?"":"hidden"}`)+" svelte-eh1r7q"),_t(ae,"data-param-type","ColorShaderParam"),_t(Ue,"class","float-param-val-direct-set small-number-input svelte-eh1r7q"),_t(Ue,"type","number"),_t(Ue,"step","0.001"),Ue.value=ve=i[45].type.includes("FloatShaderParam")&&i[45].default||.5,_t(et,"class","float-param-default small-number-input svelte-eh1r7q"),_t(et,"type","number"),_t(et,"step","0.001"),et.value=je=i[45].type.includes("FloatShaderParam")&&i[45].default||.5,_t(ie,"class","float-param-min small-number-input svelte-eh1r7q"),_t(ie,"type","number"),_t(ie,"step","0.001"),ie.value=$=i[45].type.includes("FloatShaderParam")&&i[45].min||0,_t(Ge,"class","float-param-max small-number-input svelte-eh1r7q"),_t(Ge,"type","number"),_t(Ge,"step","0.001"),Ge.value=st=i[45].type.includes("FloatShaderParam")&&i[45].max||1,_t(ft,"class","float-param-slider"),_t(ft,"type","range"),_t(ft,"step","0.001"),_t(ft,"min",yt=i[45].type.includes("FloatShaderParam")&&i[45].min||0),_t(ft,"max",Ht=i[45].type.includes("FloatShaderParam")&&i[45].max||1),ft.value=Dt=i[45].default||1,_t(Ve,"class",kt=Vs(`shaderOptions inline-block ${i[45].type.includes("FloatShaderParam")?"":"hidden"}`)+" svelte-eh1r7q"),_t(Ve,"data-param-type","FloatShaderParam"),_t(Rt,"class","delete-param"),_t(t,"class","shaderParam"),_t(t,"data-param-name",Tr=i[45].paramName)},m(At,xt){Dr(At,t,xt),Je(t,n),Je(t,s),Je(t,a),Je(a,o),Je(o,u),Je(a,c),Je(c,p),Je(a,h),Je(h,f),Je(a,g),Je(g,y),Je(t,x),Je(t,j),Je(j,S),Je(S,w),Je(S,_),Je(j,I),Je(j,P),Je(P,R),Je(P,D),Je(t,z),Je(t,K),Je(K,Q),Je(Q,te),Je(Q,Z),Je(K,Y),Je(K,X),Je(X,ce),Je(X,O),Je(t,re),Je(t,ae),Je(ae,me),Je(me,ge),Je(me,xe),Je(ae,ye),Je(ae,Te),Je(Te,oe),Je(Te,Se),Je(t,Me),Je(t,Ve),Je(Ve,Be),Je(Be,tt),Je(Be,Ue),Je(Ve,Le),Je(Ve,Fe),Je(Fe,Ze),Je(Fe,et),Je(Ve,$e),Je(Ve,Pe),Je(Pe,J),Je(Pe,ie),Je(Ve,le),Je(Ve,Ee),Je(Ee,Re),Je(Ee,Ge),Je(Ve,ht),Je(Ve,ft),Je(t,qt),Je(t,Rt),Je(Rt,nr),Je(t,en),tr||(zt=[Rr(n,"change",function(){Wr(i[26])&&i[26].apply(this,arguments)}),Rr(a,"change",function(){Wr(i[17])&&i[17].apply(this,arguments)}),Rr(_,"input",function(){Wr(i[23])&&i[23].apply(this,arguments)}),Rr(D,"input",function(){Wr(i[22])&&i[22].apply(this,arguments)}),Rr(Z,"input",function(){Wr(i[2])&&i[2].apply(this,arguments)}),Rr(O,"input",function(){Wr(i[1])&&i[1].apply(this,arguments)}),Rr(xe,"input",function(){Wr(i[5])&&i[5].apply(this,arguments)}),Rr(Se,"input",function(){Wr(i[4])&&i[4].apply(this,arguments)}),Rr(Ue,"change",function(){Wr(i[11])&&i[11].apply(this,arguments)}),Rr(et,"change",function(){Wr(i[10])&&i[10].apply(this,arguments)}),Rr(ie,"change",function(){Wr(i[13])&&i[13].apply(this,arguments)}),Rr(Ge,"change",function(){Wr(i[12])&&i[12].apply(this,arguments)}),Rr(ft,"input",function(){Wr(i[14])&&i[14].apply(this,arguments)}),Rr(Rt,"click",function(){Wr(i[7])&&i[7].apply(this,arguments)})],tr=!0)},p(At,xt){i=At,xt[0]&262144&&r!==(r=i[45].paramName)&&n.value!==r&&(n.value=r),xt[0]&262144&&l!==(l=i[45].type.split(".").slice(-1)[0]=="FloatShaderParam")&&(o.selected=l),xt[0]&262144&&m!==(m=i[45].type.split(".").slice(-1)[0]=="ColorShaderParam")&&(c.selected=m),xt[0]&262144&&d!==(d=i[45].type.split(".").slice(-1)[0]=="TextureShaderParam")&&(h.selected=d),xt[0]&262144&&b!==(b=i[45].type.split(".").slice(-1)[0]=="BooleanShaderParam")&&(g.selected=b),xt[0]&262144&&M!==(M=i[45].default||"")&&_.value!==M&&(_.value=M),xt[0]&262144&&U!==(U=i[45].default||"")&&D.value!==U&&(D.value=U),xt[0]&262144&&F!==(F=Vs(`shaderOptions inline-block ${i[45].type.includes("TextureShaderParam")?"":"hidden"}`)+" svelte-eh1r7q")&&_t(j,"class",F),xt[0]&262144&&q!==(q=i[45].default||!1)&&(Z.checked=q),xt[0]&262144&&B!==(B=i[45].default)&&(O.checked=B),xt[0]&262144&&W!==(W=Vs(`shaderOptions inline-block ${i[45].type.includes("BooleanShaderParam")?"":"hidden"}`)+" svelte-eh1r7q")&&_t(K,"class",W),xt[0]&262144&&fe!==(fe=i[45].default||"")&&xe.value!==fe&&(xe.value=fe),xt[0]&262144&&be!==(be=i[45].default||"")&&Se.value!==be&&(Se.value=be),xt[0]&262144&&Ie!==(Ie=Vs(`shaderOptions inline-block ${i[45].type.includes("ColorShaderParam")?"":"hidden"}`)+" svelte-eh1r7q")&&_t(ae,"class",Ie),xt[0]&262144&&ve!==(ve=i[45].type.includes("FloatShaderParam")&&i[45].default||.5)&&Ue.value!==ve&&(Ue.value=ve),xt[0]&262144&&je!==(je=i[45].type.includes("FloatShaderParam")&&i[45].default||.5)&&et.value!==je&&(et.value=je),xt[0]&262144&&$!==($=i[45].type.includes("FloatShaderParam")&&i[45].min||0)&&ie.value!==$&&(ie.value=$),xt[0]&262144&&st!==(st=i[45].type.includes("FloatShaderParam")&&i[45].max||1)&&Ge.value!==st&&(Ge.value=st),xt[0]&262144&&yt!==(yt=i[45].type.includes("FloatShaderParam")&&i[45].min||0)&&_t(ft,"min",yt),xt[0]&262144&&Ht!==(Ht=i[45].type.includes("FloatShaderParam")&&i[45].max||1)&&_t(ft,"max",Ht),xt[0]&262144&&Dt!==(Dt=i[45].default||1)&&(ft.value=Dt),xt[0]&262144&&kt!==(kt=Vs(`shaderOptions inline-block ${i[45].type.includes("FloatShaderParam")?"":"hidden"}`)+" svelte-eh1r7q")&&_t(Ve,"class",kt),xt[0]&262144&&Tr!==(Tr=i[45].paramName)&&_t(t,"data-param-name",Tr)},d(At){At&&vt(t),tr=!1,D0(zt)}}}function BR(i){let t,n=Object.entries(i[9].templateShaders||{}).sort(R0),r=[];for(let s=0;s<n.length;s+=1)r[s]=M0(C0(i,n,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();t=Li()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);t=Li()},m(s,a){for(let o=0;o<r.length;o+=1)r[o].m(s,a);Dr(s,t,a)},p(s,a){if(a[0]&66048){n=Object.entries(s[9].templateShaders||{}).sort(R0);let o;for(o=0;o<n.length;o+=1){const u=C0(s,n,o);r[o]?r[o].p(u,a):(r[o]=M0(u),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(s){Zl(r,s),s&&vt(t)}}}function FR(i){let t,n;return{c(){t=jt("p"),n=hr("No template shaders found.")},l(r){t=Ct(r,"P",{});var s=Bt(t);n=dr(s,"No template shaders found."),s.forEach(vt)},m(r,s){Dr(r,t,s),Je(t,n)},p:ao,d(r){r&&vt(t)}}}function M0(i){let t,n,r=i[34]+"",s,a,o,u;return{c(){t=jt("li"),n=jt("button"),s=hr(r),a=ar()},l(l){t=Ct(l,"LI",{});var c=Bt(t);n=Ct(c,"BUTTON",{});var p=Bt(n);s=dr(p,r),p.forEach(vt),a=lr(c),c.forEach(vt)},m(l,c){Dr(l,t,c),Je(t,n),Je(n,s),Je(t,a),o||(u=Rr(n,"click",function(){Wr(i[16](i[34],i[35]))&&i[16](i[34],i[35]).apply(this,arguments)}),o=!0)},p(l,c){i=l,c[0]&512&&r!==(r=i[34]+"")&&ka(s,r)},d(l){l&&vt(t),o=!1,u()}}}function UR(i){let t,n=Object.entries(i[9].userShaders||{}),r=[];for(let s=0;s<n.length;s+=1)r[s]=A0(j0(i,n,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();t=Li()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);t=Li()},m(s,a){for(let o=0;o<r.length;o+=1)r[o].m(s,a);Dr(s,t,a)},p(s,a){if(a[0]&66048){n=Object.entries(s[9].userShaders||{});let o;for(o=0;o<n.length;o+=1){const u=j0(s,n,o);r[o]?r[o].p(u,a):(r[o]=A0(u),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(s){Zl(r,s),s&&vt(t)}}}function VR(i){let t,n;return{c(){t=jt("p"),n=hr("No saved shaders found.")},l(r){t=Ct(r,"P",{});var s=Bt(t);n=dr(s,"No saved shaders found."),s.forEach(vt)},m(r,s){Dr(r,t,s),Je(t,n)},p:ao,d(r){r&&vt(t)}}}function A0(i){let t,n,r=i[34]+"",s,a,o=i[35].isPublic?"Public":"Private",u,l,c,p,m;return{c(){t=jt("li"),n=jt("button"),s=hr(r),a=hr(" ("),u=hr(o),l=hr(")"),c=ar()},l(h){t=Ct(h,"LI",{});var f=Bt(t);n=Ct(f,"BUTTON",{});var d=Bt(n);s=dr(d,r),a=dr(d," ("),u=dr(d,o),l=dr(d,")"),d.forEach(vt),c=lr(f),f.forEach(vt)},m(h,f){Dr(h,t,f),Je(t,n),Je(n,s),Je(n,a),Je(n,u),Je(n,l),Je(t,c),p||(m=Rr(n,"click",function(){Wr(i[16](i[34],i[35]))&&i[16](i[34],i[35]).apply(this,arguments)}),p=!0)},p(h,f){i=h,f[0]&512&&r!==(r=i[34]+"")&&ka(s,r),f[0]&512&&o!==(o=i[35].isPublic?"Public":"Private")&&ka(u,o)},d(h){h&&vt(t),p=!1,m()}}}function GR(i){let t;function n(a,o){var u;return(((u=a[9].userList)==null?void 0:u.length)||0)==0?WR:zR}let r=n(i),s=r(i);return{c(){t=jt("ul"),s.c()},l(a){t=Ct(a,"UL",{});var o=Bt(t);s.l(o),o.forEach(vt)},m(a,o){Dr(a,t,o),s.m(t,null)},p(a,o){r===(r=n(a))&&s?s.p(a,o):(s.d(1),s=r(a),s&&(s.c(),s.m(t,null)))},d(a){a&&vt(t),s.d()}}}function HR(i){let t,n,r,s,a,o,u;function l(m,h){return h[0]&768&&(a=null),a==null&&(a=Object.keys(m[9].discoverShaders[m[8]]||{}).length==0),a?$R:qR}let c=l(i,[-1,-1]),p=c(i);return{c(){t=jt("button"),n=hr("Back to user list"),r=ar(),s=jt("ul"),p.c()},l(m){t=Ct(m,"BUTTON",{});var h=Bt(t);n=dr(h,"Back to user list"),h.forEach(vt),r=lr(m),s=Ct(m,"UL",{});var f=Bt(s);p.l(f),f.forEach(vt)},m(m,h){Dr(m,t,h),Je(t,n),Dr(m,r,h),Dr(m,s,h),p.m(s,null),o||(u=Rr(t,"click",function(){Wr(i[24])&&i[24].apply(this,arguments)}),o=!0)},p(m,h){i=m,c===(c=l(i,h))&&p?p.p(i,h):(p.d(1),p=c(i),p&&(p.c(),p.m(s,null)))},d(m){m&&vt(t),m&&vt(r),m&&vt(s),p.d(),o=!1,u()}}}function zR(i){let t,n=i[9].userList||[],r=[];for(let s=0;s<n.length;s+=1)r[s]=I0(x0(i,n,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();t=Li()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);t=Li()},m(s,a){for(let o=0;o<r.length;o+=1)r[o].m(s,a);Dr(s,t,a)},p(s,a){if(a[0]&1049088){n=s[9].userList||[];let o;for(o=0;o<n.length;o+=1){const u=x0(s,n,o);r[o]?r[o].p(u,a):(r[o]=I0(u),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(s){Zl(r,s),s&&vt(t)}}}function WR(i){let t,n;return{c(){t=jt("p"),n=hr("No other users have created public shaders. So sad!")},l(r){t=Ct(r,"P",{});var s=Bt(t);n=dr(s,"No other users have created public shaders. So sad!"),s.forEach(vt)},m(r,s){Dr(r,t,s),Je(t,n)},p:ao,d(r){r&&vt(t)}}}function O0(i){let t,n,r=i[38].name+"",s,a,o,u;return{c(){t=jt("li"),n=jt("button"),s=hr(r),a=ar()},l(l){t=Ct(l,"LI",{});var c=Bt(t);n=Ct(c,"BUTTON",{});var p=Bt(n);s=dr(p,r),p.forEach(vt),a=lr(c),c.forEach(vt)},m(l,c){Dr(l,t,c),Je(t,n),Je(n,s),Je(t,a),o||(u=Rr(n,"click",function(){Wr(i[20](i[38].uid))&&i[20](i[38].uid).apply(this,arguments)}),o=!0)},p(l,c){i=l,c[0]&512&&r!==(r=i[38].name+"")&&ka(s,r)},d(l){l&&vt(t),o=!1,u()}}}function I0(i){let t,n=i[38].publicShadersCount>0&&O0(i);return{c(){n&&n.c(),t=Li()},l(r){n&&n.l(r),t=Li()},m(r,s){n&&n.m(r,s),Dr(r,t,s)},p(r,s){r[38].publicShadersCount>0?n?n.p(r,s):(n=O0(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&vt(t)}}}function qR(i){let t,n,r,s;function a(l,c){return c[0]&768&&(r=null),r==null&&(r=Object.keys(l[9].discoverShaders[l[8]]||{}).length==0),r?YR:XR}let o=a(i,[-1,-1]),u=o(i);return{c(){t=jt("br"),n=ar(),u.c(),s=Li()},l(l){t=Ct(l,"BR",{}),n=lr(l),u.l(l),s=Li()},m(l,c){Dr(l,t,c),Dr(l,n,c),u.m(l,c),Dr(l,s,c)},p(l,c){o===(o=a(l,c))&&u?u.p(l,c):(u.d(1),u=o(l),u&&(u.c(),u.m(s.parentNode,s)))},d(l){l&&vt(t),l&&vt(n),u.d(l),l&&vt(s)}}}function $R(i){let t,n;return{c(){t=jt("p"),n=hr("No saved shaders found.")},l(r){t=Ct(r,"P",{});var s=Bt(t);n=dr(s,"No saved shaders found."),s.forEach(vt)},m(r,s){Dr(r,t,s),Je(t,n)},p:ao,d(r){r&&vt(t)}}}function XR(i){let t,n=Object.entries(i[9].discoverShaders[i[8]]||{}),r=[];for(let s=0;s<n.length;s+=1)r[s]=P0(S0(i,n,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();t=Li()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);t=Li()},m(s,a){for(let o=0;o<r.length;o+=1)r[o].m(s,a);Dr(s,t,a)},p(s,a){if(a[0]&66304){n=Object.entries(s[9].discoverShaders[s[8]]||{});let o;for(o=0;o<n.length;o+=1){const u=S0(s,n,o);r[o]?r[o].p(u,a):(r[o]=P0(u),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(s){Zl(r,s),s&&vt(t)}}}function YR(i){let t,n;return{c(){t=jt("p"),n=hr("This user has no public shaders")},l(r){t=Ct(r,"P",{});var s=Bt(t);n=dr(s,"This user has no public shaders"),s.forEach(vt)},m(r,s){Dr(r,t,s),Je(t,n)},p:ao,d(r){r&&vt(t)}}}function P0(i){let t,n,r=i[34]+"",s,a,o,u;return{c(){t=jt("li"),n=jt("button"),s=hr(r),a=ar()},l(l){t=Ct(l,"LI",{});var c=Bt(t);n=Ct(c,"BUTTON",{});var p=Bt(n);s=dr(p,r),p.forEach(vt),a=lr(c),c.forEach(vt)},m(l,c){Dr(l,t,c),Je(t,n),Je(n,s),Je(t,a),o||(u=Rr(n,"click",function(){Wr(i[16](i[34],i[35]))&&i[16](i[34],i[35]).apply(this,arguments)}),o=!0)},p(l,c){i=l,c[0]&768&&r!==(r=i[34]+"")&&ka(s,r)},d(l){l&&vt(t),o=!1,u()}}}function KR(i){let t,n,r,s,a,o,u,l,c,p,m,h,f,d,g,y,b,x,j,S,w,_,M,I,P,R,D,U,F,z,K,Q,te,Z,q,Y,X,ce,O,B,W,re,ae,me,ge,xe,fe,ye,Te,oe,Se,be,Ie,Me,Ve,Be,tt,Ue,ve,Le,Fe,Ze,et,je,$e,Pe,J,ie,$,le,Ee;function Re(zt,At){return zt[9].user?NR:LR}let Ge=Re(i),st=Ge(i),ht=i[9].isAdmin&&k0(),ft=i[18],yt=[];for(let zt=0;zt<ft.length;zt+=1)yt[zt]=E0(T0(i,ft,zt));function Ht(zt,At){return At[0]&512&&(Fe=null),Fe==null&&(Fe=Object.keys(zt[9].templateShaders||{}).length==0),Fe?FR:BR}let Dt=Ht(i,[-1,-1]),kt=Dt(i);function qt(zt,At){return At[0]&512&&($e=null),$e==null&&($e=Object.keys(zt[9].userShaders||{}).length==0),$e?VR:UR}let Rt=qt(i,[-1,-1]),nr=Rt(i);function en(zt,At){return zt[8]?HR:GR}let Tr=en(i),tr=Tr(i);return{c(){t=jt("container"),st.c(),n=ar(),r=jt("hr"),s=ar(),a=jt("div"),o=jt("button"),u=hr("Camera"),l=ar(),c=jt("button"),p=hr("Template Shaders"),m=ar(),h=jt("button"),f=hr("My Shaders"),d=ar(),g=jt("button"),y=hr("Discover Shaders"),b=ar(),x=jt("hr"),j=ar(),S=jt("div"),w=jt("div"),_=jt("div"),M=ar(),I=jt("input"),P=ar(),R=jt("button"),D=hr("Update Preview"),U=ar(),F=jt("button"),z=hr("Save"),K=ar(),Q=jt("button"),te=hr("Delete"),Z=ar(),q=jt("br"),Y=ar(),X=jt("label"),ce=hr("Public"),O=ar(),B=jt("input"),W=ar(),ht&&ht.c(),re=ar(),ae=jt("br"),me=ar(),ge=jt("a"),xe=hr("Clear Active Shader"),fe=ar(),ye=jt("div"),Te=jt("p"),oe=hr("Parameters"),Se=ar(),be=jt("button"),Ie=hr("Add Parameter"),Me=ar(),Ve=jt("ol");for(let zt=0;zt<yt.length;zt+=1)yt[zt].c();Be=ar(),tt=jt("div"),Ue=ar(),ve=jt("div"),Le=jt("ul"),kt.c(),Ze=ar(),et=jt("div"),je=jt("ul"),nr.c(),Pe=ar(),J=jt("div"),tr.c(),ie=ar(),$=jt("hr"),this.h()},l(zt){t=Ct(zt,"CONTAINER",{id:!0});var At=Bt(t);st.l(At),n=lr(At),r=Ct(At,"HR",{}),s=lr(At),a=Ct(At,"DIV",{id:!0});var xt=Bt(a);o=Ct(xt,"BUTTON",{class:!0,"data-tab":!0});var Cr=Bt(o);u=dr(Cr,"Camera"),Cr.forEach(vt),l=lr(xt),c=Ct(xt,"BUTTON",{class:!0,"data-tab":!0});var wr=Bt(c);p=dr(wr,"Template Shaders"),wr.forEach(vt),m=lr(xt),h=Ct(xt,"BUTTON",{class:!0,"data-tab":!0});var Ir=Bt(h);f=dr(Ir,"My Shaders"),Ir.forEach(vt),d=lr(xt),g=Ct(xt,"BUTTON",{class:!0,"data-tab":!0});var ci=Bt(g);y=dr(ci,"Discover Shaders"),ci.forEach(vt),xt.forEach(vt),b=lr(At),x=Ct(At,"HR",{}),j=lr(At),S=Ct(At,"DIV",{id:!0});var vn=Bt(S);w=Ct(vn,"DIV",{class:!0,id:!0});var gr=Bt(w);_=Ct(gr,"DIV",{id:!0}),Bt(_).forEach(vt),M=lr(gr),I=Ct(gr,"INPUT",{id:!0,type:!0,placeholder:!0}),P=lr(gr),R=Ct(gr,"BUTTON",{id:!0});var Wn=Bt(R);D=dr(Wn,"Update Preview"),Wn.forEach(vt),U=lr(gr),F=Ct(gr,"BUTTON",{id:!0});var ei=Bt(F);z=dr(ei,"Save"),ei.forEach(vt),K=lr(gr),Q=Ct(gr,"BUTTON",{id:!0});var ti=Bt(Q);te=dr(ti,"Delete"),ti.forEach(vt),Z=lr(gr),q=Ct(gr,"BR",{}),Y=lr(gr),X=Ct(gr,"LABEL",{for:!0});var _e=Bt(X);ce=dr(_e,"Public"),_e.forEach(vt),O=lr(gr),B=Ct(gr,"INPUT",{type:!0,id:!0}),W=lr(gr),ht&&ht.l(gr),re=lr(gr),ae=Ct(gr,"BR",{}),me=lr(gr),ge=Ct(gr,"A",{href:!0});var dt=Bt(ge);xe=dr(dt,"Clear Active Shader"),dt.forEach(vt),fe=lr(gr),ye=Ct(gr,"DIV",{id:!0});var bt=Bt(ye);Te=Ct(bt,"P",{});var ut=Bt(Te);oe=dr(ut,"Parameters"),ut.forEach(vt),Se=lr(bt),be=Ct(bt,"BUTTON",{class:!0});var ir=Bt(be);Ie=dr(ir,"Add Parameter"),ir.forEach(vt),Me=lr(bt),Ve=Ct(bt,"OL",{});var nt=Bt(Ve);for(let Kr=0;Kr<yt.length;Kr+=1)yt[Kr].l(nt);nt.forEach(vt),bt.forEach(vt),Be=lr(gr),tt=Ct(gr,"DIV",{id:!0}),Bt(tt).forEach(vt),gr.forEach(vt),Ue=lr(vn),ve=Ct(vn,"DIV",{class:!0,id:!0});var fr=Bt(ve);Le=Ct(fr,"UL",{});var wt=Bt(Le);kt.l(wt),wt.forEach(vt),fr.forEach(vt),Ze=lr(vn),et=Ct(vn,"DIV",{class:!0,id:!0});var ur=Bt(et);je=Ct(ur,"UL",{});var St=Bt(je);nr.l(St),St.forEach(vt),ur.forEach(vt),Pe=lr(vn),J=Ct(vn,"DIV",{class:!0,id:!0});var Lr=Bt(J);tr.l(Lr),Lr.forEach(vt),vn.forEach(vt),ie=lr(At),$=Ct(At,"HR",{}),At.forEach(vt),this.h()},h(){_t(o,"class","nav-btn selected svelte-eh1r7q"),_t(o,"data-tab","cameraTab"),_t(c,"class","nav-btn"),_t(c,"data-tab","templateShadersTab"),_t(h,"class","nav-btn"),_t(h,"data-tab","userShadersTab"),_t(g,"class","nav-btn"),_t(g,"data-tab","discoverShadersTab"),_t(a,"id","tab-nav"),_t(_,"id","canvas"),_t(I,"id","shader-name"),_t(I,"type","text"),_t(I,"placeholder","Shader name"),_t(R,"id","update"),_t(F,"id","save"),_t(Q,"id","delete"),_t(X,"for","isPublic"),_t(B,"type","checkbox"),_t(B,"id","isPublic"),B.checked=i[15],B.value="Public",_t(ge,"href","#"),_t(be,"class","add-param"),_t(ye,"id","params"),_t(tt,"id","editorWrapper"),_t(w,"class","tab hidden svelte-eh1r7q"),_t(w,"id","cameraTab"),_t(ve,"class","tab hidden svelte-eh1r7q"),_t(ve,"id","templateShadersTab"),_t(et,"class","tab hidden svelte-eh1r7q"),_t(et,"id","userShadersTab"),_t(J,"class","tab hidden svelte-eh1r7q"),_t(J,"id","discoverShadersTab"),_t(S,"id","tabs"),_t(t,"id","page")},m(zt,At){Dr(zt,t,At),st.m(t,null),Je(t,n),Je(t,r),Je(t,s),Je(t,a),Je(a,o),Je(o,u),Je(a,l),Je(a,c),Je(c,p),Je(a,m),Je(a,h),Je(h,f),Je(a,d),Je(a,g),Je(g,y),Je(t,b),Je(t,x),Je(t,j),Je(t,S),Je(S,w),Je(w,_),Je(w,M),Je(w,I),Je(w,P),Je(w,R),Je(R,D),Je(w,U),Je(w,F),Je(F,z),Je(w,K),Je(w,Q),Je(Q,te),Je(w,Z),Je(w,q),Je(w,Y),Je(w,X),Je(X,ce),Je(w,O),Je(w,B),Je(w,W),ht&&ht.m(w,null),Je(w,re),Je(w,ae),Je(w,me),Je(w,ge),Je(ge,xe),Je(w,fe),Je(w,ye),Je(ye,Te),Je(Te,oe),Je(ye,Se),Je(ye,be),Je(be,Ie),Je(ye,Me),Je(ye,Ve);for(let xt=0;xt<yt.length;xt+=1)yt[xt].m(Ve,null);Je(w,Be),Je(w,tt),Je(S,Ue),Je(S,ve),Je(ve,Le),kt.m(Le,null),Je(S,Ze),Je(S,et),Je(et,je),nr.m(je,null),Je(S,Pe),Je(S,J),tr.m(J,null),Je(t,ie),Je(t,$),le||(Ee=[Rr(o,"click",function(){Wr(i[21])&&i[21].apply(this,arguments)}),Rr(c,"click",function(){Wr(i[21])&&i[21].apply(this,arguments)}),Rr(h,"click",function(){Wr(i[21])&&i[21].apply(this,arguments)}),Rr(g,"click",function(){Wr(i[21])&&i[21].apply(this,arguments)}),Rr(R,"click",function(){Wr(i[25])&&i[25].apply(this,arguments)}),Rr(F,"click",function(){Wr(i[19])&&i[19].apply(this,arguments)}),Rr(Q,"click",function(){Wr(i[6])&&i[6].apply(this,arguments)}),Rr(ge,"click",function(){Wr(i[3])&&i[3].apply(this,arguments)}),Rr(be,"click",function(){Wr(i[0])&&i[0].apply(this,arguments)})],le=!0)},p(zt,At){if(i=zt,Ge===(Ge=Re(i))&&st?st.p(i,At):(st.d(1),st=Ge(i),st&&(st.c(),st.m(t,n))),At[0]&32768&&(B.checked=i[15]),i[9].isAdmin?ht||(ht=k0(),ht.c(),ht.m(w,re)):ht&&(ht.d(1),ht=null),At[0]&80116918){ft=i[18];let xt;for(xt=0;xt<ft.length;xt+=1){const Cr=T0(i,ft,xt);yt[xt]?yt[xt].p(Cr,At):(yt[xt]=E0(Cr),yt[xt].c(),yt[xt].m(Ve,null))}for(;xt<yt.length;xt+=1)yt[xt].d(1);yt.length=ft.length}Dt===(Dt=Ht(i,At))&&kt?kt.p(i,At):(kt.d(1),kt=Dt(i),kt&&(kt.c(),kt.m(Le,null))),Rt===(Rt=qt(i,At))&&nr?nr.p(i,At):(nr.d(1),nr=Rt(i),nr&&(nr.c(),nr.m(je,null))),Tr===(Tr=en(i))&&tr?tr.p(i,At):(tr.d(1),tr=Tr(i),tr&&(tr.c(),tr.m(J,null)))},i:ao,o:ao,d(zt){zt&&vt(t),st.d(),ht&&ht.d(),Zl(yt,zt),kt.d(),nr.d(),tr.d(),le=!1,D0(Ee)}}}const R0=([i,t])=>i;function JR(i,t,n){var r,s,a,o,u,l,c,p,m,h,f,d,g,y,b,x,j,S,w,_,M,I,P,R,D,U,F,z,K,Q,te,Z;return Xo.init(),Xo({el:".color-picker",alpha:!1}),window.$=zr,M=null,d=null,P=[],f=null,w=!1,p="https://upload.wikimedia.org/wikipedia/commons/9/9a/512x512_Dissolve_Noise_Texture.png",g=Nn,Bc.subscribe("firebaseStateUpdated",function(){return n(9,g=Nn)}),Bc.subscribe("shaderDrawError",function(q,Y){return alert(Y)}),mx(()=>{var q;return M=new bx(z1),q=Y=>Y+Lp.split(`
`).length+Math.max(1,P.length),d=new Wt({extensions:[Wk,bp.define(Yk),lb({formatNumber:q})],parent:zr("#editorWrapper")[0]}),d.dispatch({changes:{from:0,to:d.state.doc.length,insert:Fc}}),zr("#cameraTab").removeClass("hidden"),nx(),ix()}),te=function(){return K(d.state.doc.toString(),P)},R=async function(){var q,Y,X,ce,O,B,W,re,ae;return ce=P.some(function(me){var ge;return{val:ge}=or.paramValues[me.paramName],ge!==me.val}),ce&&(ae=confirm("Update defaults to match current values?"),ae&&P.forEach(function(me){var ge;return{val:ge}=or.paramValues[me.paramName],me.default=ge})),re=d.state.doc.toString(),O=zr("#shader-name").val(),Y=zr("#isPublic")[0].checked,X=(B=zr("#isTemplate")[0])!=null?B.checked:void 0,[W,q]=await lx(O,re,P,Y,X),q?alert(q):(alert("saved"),g.user&&g.user.uid===f&&n(9,g.discoverShaders[g.user.uid][O]=W,g),X?n(9,g.templateShaders[O]=W,g):n(9,g.userShaders[O]=W,g)),K(re,P)},m=function(){var q,Y,X,ce;if(confirm("are you sure?"))return X=zr("#shader-name").val(),Y=(ce=zr("#isTemplate")[0])!=null?ce.checked:void 0,q=ex(X,Y),q?alert(q):(g.user&&g.user.uid===f&&delete g.discoverShaders[g.user.uid][X],delete g.userShaders[X],n(9,g),n(9,g),alert("deleted"),o())},K=function(q,Y){var X,ce;return zr("[data-tab='cameraTab']").trigger("click"),[X,ce]=V1(q,Y),ce?(alert(ce),!1):(or.shaderObj=X,M.shader(or.shaderObj),!0)},U=function(){var q,Y,X;return q=zr(this),zr(".nav-btn").removeClass("selected"),q.addClass("selected"),Y=`#${q.data("tab")}`,X=zr(Y),zr(".tab").addClass("hidden"),X.removeClass("hidden")},_=function(q,Y){var X,ce;n(18,P=JSON.parse(Y.paramsJson)),or.paramValues={},zr("#shader-name").val(q),K(Y.shaderMainText,P),n(15,w=Y.isPublic),ce=or.paramValues;for(X in ce)ce[X],delete or.paramValues[X];return or.imagesCache={},P.forEach(function(O){var B;return B=null,O.type.includes("ColorShaderParam")?B="color":O.type.includes("FloatShaderParam")?B="float":O.type.includes("TextureShaderParam")?B="texture":O.type.includes("BooleanShaderParam")&&(B="boolean"),or.paramValues[O.paramName]={type:B,val:O.default}}),d.dispatch({changes:{from:0,to:d.state.doc.length,insert:Y.shaderMainText}})},o=function(){return _("",{shaderMainText:Fc,paramsJson:JSON.stringify([])})},u=function(){return o(),alert("cleared")},Z=function(){var q,Y,X,ce,O,B;return q=zr(this),B=q.closest(".shaderParam"),X=B.attr("data-param-name"),Y=q.val(),ce=P.find(function(W){return W.paramName===X}),ce.paramName=Y,n(18,P),B.attr("data-param-name",Y),O=or.paramValues[X],delete or.paramValues[X],or.paramValues[Y]=O},r=function(){return console.log("TODO: make param types compatible with app"),P.push({paramName:"",type:"FOO.BAR.FloatShaderParam",default:1,min:0,max:10}),n(18,P),or.paramValues[""]={type:"float",val:1}},h=function(){var q,Y,X;if(confirm("are you sure?"))return q=zr(this),X=q.closest(".shaderParam"),Y=X.attr("data-param-name"),delete or.paramValues[Y],n(18,P=P.filter(function(ce){return ce.paramName!==Y}))},I=function(){var q,Y,X,ce,O,B,W;return W=zr(this),Y=W.val().split(".").slice(-1)[0],B=W.closest(".shaderParam"),O=B.attr("data-param-name"),X=B.find(".shaderOptions"),X.addClass("hidden"),q=B.find(`.shaderOptions[data-param-type='${Y}']`),q.removeClass("hidden"),ce=P.find(function(re){return re.paramName===O}),Y==="FloatShaderParam"?(Object.assign(ce,{type:"Foo.Bar.FloatShaderParam",default:1,min:0,max:10}),or.paramValues[O]={type:"float",val:1}):Y==="ColorShaderParam"?(or.paramValues[O]={type:"color",val:"#ff0000"},Object.assign(ce,{type:"Foo.Bar.ColorShaderParam",default:"#ff0000"})):Y==="TextureShaderParam"?(or.paramValues[O]={type:"texture",val:p},Object.assign(ce,{type:"Foo.Bar.TextureShaderParam",default:p})):Y==="BooleanShaderParam"&&(or.paramValues[O]={type:"boolean",val:p},Object.assign(ce,{type:"Foo.Bar.BooleanShaderParam",default:!0})),n(18,P)},z=function(){var q,Y,X;return q=zr(this),X=q.closest(".shaderParam"),Y=X.attr("data-param-name"),or.paramValues[Y]={type:"texture",val:q.val()}},F=function(){var q,Y,X,ce;return q=zr(this),ce=q.closest(".shaderParam"),X=ce.attr("data-param-name"),Y=P.find(function(O){return O.paramName===X}),Y.default=q.val(),n(18,P),or.paramValues[X]={type:"texture",val:q.val()}},a=function(){var q,Y,X;return q=zr(this),X=q.closest(".shaderParam"),Y=X.attr("data-param-name"),or.paramValues[Y]={type:"boolean",val:q[0].checked}},s=function(){var q,Y,X,ce;return q=zr(this),ce=q.closest(".shaderParam"),X=ce.attr("data-param-name"),Y=P.find(function(O){return O.paramName===X}),Y.default=q[0].checked,n(18,P),or.paramValues[X]={type:"boolean",val:q[0].checked}},c=function(){var q,Y,X;return q=zr(this),X=q.closest(".shaderParam"),Y=X.attr("data-param-name"),or.paramValues[Y]={type:"color",val:q.val()}},l=function(){var q,Y,X,ce;return q=zr(this),ce=q.closest(".shaderParam"),X=ce.attr("data-param-name"),Y=P.find(function(O){return O.paramName===X}),Y.default=q.val(),n(18,P),or.paramValues[X]={type:"color",val:q.val()}},b=function(){var q,Y,X,ce;return q=zr(this),X=q.closest(".shaderParam"),Y=X.attr("data-param-name"),ce=X.find(".float-param-slider"),ce.val(q.val()),or.paramValues[Y]={type:"float",val:q.val()}},j=function(){var q,Y,X,ce;return q=zr(this),ce=q.closest(".shaderParam"),X=ce.attr("data-param-name"),Y=P.find(function(O){return O.paramName===X}),Y.min=q.val(),n(18,P)},y=function(){var q,Y,X,ce;return q=zr(this),ce=q.closest(".shaderParam"),X=ce.attr("data-param-name"),Y=P.find(function(O){return O.paramName===X}),Y.default=q.val(),n(18,P),or.paramValues[X]={type:"float",val:q.val()}},x=function(){var q,Y,X,ce;return q=zr(this),ce=q.closest(".shaderParam"),X=ce.attr("data-param-name"),Y=P.find(function(O){return O.paramName===X}),Y.max=q.val(),n(18,P)},S=function(){var q,Y,X,ce;return Y=zr(this),ce=Y.closest(".shaderParam"),X=ce.attr("data-param-name"),q=ce.find(".float-param-val-direct-set"),q.val(Y.val()),or.paramValues[X]={type:"float",val:Y.val()}},D=async function(q){var Y;return Y=await Hh(q,!0),Nn.discoverShaders||(Nn.discoverShaders={}),Nn.discoverShaders[q]=Y,n(9,g=Nn),n(8,f=q)},Q=function(){return n(8,f=null)},[r,s,a,u,l,c,m,h,f,g,y,b,x,j,S,w,_,I,P,R,D,U,F,z,Q,te,Z]}class eD extends dx{constructor(t){super(),fx(this,t,JR,KR,px,{},null,[-1,-1])}}export{eD as default};
